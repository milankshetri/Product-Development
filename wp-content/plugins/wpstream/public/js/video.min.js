
(function(b,a){typeof exports==="object"&&typeof module!=="undefined"?module.exports=a(require("global/window"),require("global/document")):typeof define==="function"&&define.amd?define(["global/window","global/document"],a):(b=b||self,b.videojs=a(b.window,b.document))}(this,(function(cb,eT){cb=cb&&Object.prototype.hasOwnProperty.call(cb,"default")?cb["default"]:cb;eT=eT&&Object.prototype.hasOwnProperty.call(eT,"default")?eT["default"]:eT;var fX="7.8.4";var a0=[];var dz=function dz(d,e){return function(p3,p5,t){var r=e.levels[p5];var i=new RegExp("^("+r+")$");if(p3!=="log"){t.unshift(p3.toUpperCase()+":")}t.unshift(d+":");if(a0){a0.push([].concat(t));var p4=a0.length-1000;a0.splice(0,p4>0?p4:0)}if(!cb.console){return}var on=cb.console[p3];if(!on&&p3==="debug"){on=cb.console.info||cb.console.log}if(!on||!r||!i.test(p3)){return}on[Array.isArray(t)?"apply":"call"](cb.console,t)}};function mp(e){var r="info";var d;var i=function i(){for(var t=arguments.length,on=new Array(t),p3=0;p3<t;p3++){on[p3]=arguments[p3]}d("log",r,on)};d=dz(e,i);i.createLogger=function(t){return mp(e+": "+t)};i.levels={all:"debug|log|warn|error",off:"",debug:"debug|log|warn|error",info:"log|warn|error",warn:"warn|error",error:"error",DEFAULT:r};i.level=function(t){if(typeof t==="string"){if(!i.levels.hasOwnProperty(t)){throw new Error('"'+t+'" in not a valid log level')}r=t}return r};i.history=function(){return a0?[].concat(a0):[]};i.history.filter=function(t){return(a0||[]).filter(function(on){return new RegExp(".*"+t+".*").test(on[0])})};i.history.clear=function(){if(a0){a0.length=0}};i.history.disable=function(){if(a0!==null){a0.length=0;a0=null}};i.history.enable=function(){if(a0===null){a0=[]}};i.error=function(){for(var t=arguments.length,p3=new Array(t),on=0;on<t;on++){p3[on]=arguments[on]}return d("error",r,p3)};i.warn=function(){for(var p3=arguments.length,on=new Array(p3),t=0;t<p3;t++){on[t]=arguments[t]}return d("warn",r,on)};i.debug=function(){for(var p3=arguments.length,on=new Array(p3),t=0;t<p3;t++){on[t]=arguments[t]}return d("debug",r,on)};return i}var aC=mp("VIDEOJS");var jJ=aC.createLogger;function g8(e,d){return d={exports:{}},e(d,d.exports),d.exports}var ox=g8(function(e){function d(){e.exports=d=Object.assign||function(p3){for(var t=1;t<arguments.length;t++){var on=arguments[t];for(var r in on){if(Object.prototype.hasOwnProperty.call(on,r)){p3[r]=on[r]}}}return p3};return d.apply(this,arguments)}e.exports=d});var l5=Object.prototype.toString;var ju=function ju(d){return ci(d)?Object.keys(d):[]};function q(d,e){ju(d).forEach(function(i){return e(d[i],i)})}function by(e,i,d){if(d===void 0){d=0}return ju(e).reduce(function(r,t){return i(r,e[t],t)},d)}function pr(r){for(var d=arguments.length,e=new Array(d>1?d-1:0),i=1;i<d;i++){e[i-1]=arguments[i]}if(Object.assign){return ox.apply(void 0,[r].concat(e))}e.forEach(function(t){if(!t){return}q(t,function(p3,on){r[on]=p3})});return r}function ci(d){return !!d&&typeof d==="object"}function fv(d){return ci(d)&&l5.call(d)==="[object Object]"&&d.constructor===Object}function ja(d,i){if(!d||!i){return""}if(typeof cb.getComputedStyle==="function"){var e=cb.getComputedStyle(d);return e?e.getPropertyValue(i)||e[i]:""}return""}function jd(d){return typeof d==="string"&&Boolean(d.trim())}function pQ(d){if(d.indexOf(" ")>=0){throw new Error("class has illegal whitespace characters")}}function ku(d){return new RegExp("(^|\\s)"+d+"($|\\s)")}function lB(){return eT===cb.document}function le(d){return ci(d)&&d.nodeType===1}function ni(){try{return cb.parent!==cb.self}catch(d){return true}}function kO(d){return function(e,r){if(!jd(e)){return eT[d](null)}if(jd(r)){r=eT.querySelector(r)}var i=le(r)?r:eT;return i[d]&&i[d](e)}}function ms(i,e,d,t){if(i===void 0){i="div"}if(e===void 0){e={}}if(d===void 0){d={}}var r=eT.createElement(i);Object.getOwnPropertyNames(e).forEach(function(on){var p3=e[on];if(on.indexOf("aria-")!==-1||on==="role"||on==="type"){aC.warn("Setting attributes in the second argument of createEl()\nhas been deprecated. Use the third argument instead.\n"+("createEl(type, properties, attributes). Attempting to set "+on+" to "+p3+"."));r.setAttribute(on,p3)}else{if(on==="textContent"){du(r,p3)}else{if(r[on]!==p3){r[on]=p3}}}});Object.getOwnPropertyNames(d).forEach(function(on){r.setAttribute(on,d[on])});if(t){cy(r,t)}return r}function du(d,e){if(typeof d.textContent==="undefined"){d.innerText=e}else{d.textContent=e}return d}function id(e,d){if(d.firstChild){d.insertBefore(e,d.firstChild)}else{d.appendChild(e)}}function cf(e,d){pQ(d);if(e.classList){return e.classList.contains(d)}return ku(d).test(e.className)}function h0(d,e){if(d.classList){d.classList.add(e)}else{if(!cf(d,e)){d.className=(d.className+" "+e).trim()}}return d}function cY(e,d){if(e.classList){e.classList.remove(d)}else{pQ(d);e.className=e.className.split(/\s+/).filter(function(i){return i!==d}).join(" ")}return e}function pn(r,e,d){var i=cf(r,e);if(typeof d==="function"){d=d(r,e)}if(typeof d!=="boolean"){d=!i}if(d===i){return}if(d){h0(r,e)}else{cY(r,e)}return r}function ky(e,d){Object.getOwnPropertyNames(d).forEach(function(i){var r=d[i];if(r===null||typeof r==="undefined"||r===false){e.removeAttribute(i)}else{e.setAttribute(i,r===true?"":r)}})}function kL(d){var p4={};var e=",autoplay,controls,playsinline,loop,muted,default,defaultMuted,";if(d&&d.attributes&&d.attributes.length>0){var t=d.attributes;for(var p3=t.length-1;p3>=0;p3--){var on=t[p3].name;var r=t[p3].value;if(typeof d[on]==="boolean"||e.indexOf(","+on+",")!==-1){r=r!==null?true:false}p4[on]=r}}return p4}function it(d,e){return d.getAttribute(e)}function ne(d,e,i){d.setAttribute(e,i)}function be(d,e){d.removeAttribute(e)}function c1(){eT.body.focus();eT.onselectstart=function(){return false}}function po(){eT.onselectstart=function(){return true}}function ns(e){if(e&&e.getBoundingClientRect&&e.parentNode){var i=e.getBoundingClientRect();var d={};["bottom","height","left","right","top","width"].forEach(function(r){if(i[r]!==undefined){d[r]=i[r]}});if(!d.height){d.height=parseFloat(ja(e,"height"))}if(!d.width){d.width=parseFloat(ja(e,"width"))}return d}}function lJ(i){var p3;if(i.getBoundingClientRect&&i.parentNode){p3=i.getBoundingClientRect()}if(!p3){return{left:0,top:0}}var e=eT.documentElement;var p4=eT.body;var p5=e.clientLeft||p4.clientLeft||0;var t=cb.pageXOffset||p4.scrollLeft;var r=p3.left+t-p5;var on=e.clientTop||p4.clientTop||0;var d=cb.pageYOffset||p4.scrollTop;var p6=p3.top+d-on;return{left:Math.round(r),top:Math.round(p6)}}function dO(i,e){var p3={};var on=lJ(i);var d=i.offsetWidth;var p4=i.offsetHeight;var p5=on.top;var p6=on.left;var r=e.pageY;var t=e.pageX;if(e.changedTouches){t=e.changedTouches[0].pageX;r=e.changedTouches[0].pageY}p3.y=Math.max(0,Math.min(1,(p5-r+p4)/p4));p3.x=Math.max(0,Math.min(1,(t-p6)/d));return p3}function N(d){return ci(d)&&d.nodeType===3}function l0(d){while(d.firstChild){d.removeChild(d.firstChild)}return d}function j9(d){if(typeof d==="function"){d=d()}return(Array.isArray(d)?d:[d]).map(function(e){if(typeof e==="function"){e=e()}if(le(e)||N(e)){return e}if(typeof e==="string"&&/\S/.test(e)){return eT.createTextNode(e)}}).filter(function(e){return e})}function cy(d,e){j9(e).forEach(function(i){return d.appendChild(i)});return d}function bt(d,e){return cy(l0(d),e)}function nd(d){if(d.button===undefined&&d.buttons===undefined){return true}if(d.button===0&&d.buttons===undefined){return true}if(d.type==="mouseup"&&d.button===0&&d.buttons===0){return true}if(d.button!==0||d.buttons!==1){return false}return true}var pF=kO("querySelector");var dA=kO("querySelectorAll");var bm=Object.freeze({__proto__:null,isReal:lB,isEl:le,isInFrame:ni,createEl:ms,textContent:du,prependTo:id,hasClass:cf,addClass:h0,removeClass:cY,toggleClass:pn,setAttributes:ky,getAttributes:kL,getAttribute:it,setAttribute:ne,removeAttribute:be,blockTextSelection:c1,unblockTextSelection:po,getBoundingClientRect:ns,findPosition:lJ,getPointerPosition:dO,isTextNode:N,emptyEl:l0,normalizeContent:j9,appendContent:cy,insertContent:bt,isSingleLeftClick:nd,$:pF,$$:dA});var cG=false;var mK;var d0=function d0(){if(!lB()||mK.options.autoSetup===false){return}var on=Array.prototype.slice.call(eT.getElementsByTagName("video"));var p4=Array.prototype.slice.call(eT.getElementsByTagName("audio"));var p5=Array.prototype.slice.call(eT.getElementsByTagName("video-js"));var d=on.concat(p4,p5);if(d&&d.length>0){for(var p3=0,p6=d.length;p3<p6;p3++){var t=d[p3];if(t&&t.getAttribute){if(t.player===undefined){var r=t.getAttribute("data-setup");if(r!==null){mK(t)}}}else{hD(1);break}}}else{if(!cG){hD(1)}}};function hD(d,e){if(e){mK=e}cb.setTimeout(d0,d)}function dT(){cG=true;cb.removeEventListener("load",dT)}if(lB()){if(eT.readyState==="complete"){dT()}else{cb.addEventListener("load",dT)}}var cT=function cT(e){var d=eT.createElement("style");d.className=e;return d};var i2=function i2(d,e){if(d.styleSheet){d.styleSheet.cssText=e}else{d.textContent=e}};var cj=3;var ij=cj;function cV(){return ij++}var pL;if(!cb.WeakMap){pL=function(){function t(){this.vdata="vdata"+Math.floor(cb.performance&&cb.performance.now()||Date.now());this.data={}}var d=t.prototype;d.set=function on(p4,p5){var p3=p4[this.vdata]||cV();if(!p4[this.vdata]){p4[this.vdata]=p3}this.data[p3]=p5;return this};d.get=function r(p4){var p3=p4[this.vdata];if(p3){return this.data[p3]}aC("We have no data for this element",p4);return undefined};d.has=function i(p4){var p3=p4[this.vdata];return p3 in this.data};d["delete"]=function e(p4){var p3=p4[this.vdata];if(p3){delete this.data[p3];delete p4[this.vdata]}};return t}()}var bH=cb.WeakMap?new WeakMap():new pL();function iA(e,d){if(!bH.has(e)){return}var i=bH.get(e);if(i.handlers[d].length===0){delete i.handlers[d];if(e.removeEventListener){e.removeEventListener(d,i.dispatcher,false)}else{if(e.detachEvent){e.detachEvent("on"+d,i.dispatcher)}}}if(Object.getOwnPropertyNames(i.handlers).length<=0){delete i.handlers;delete i.dispatcher;delete i.disabled}if(Object.getOwnPropertyNames(i).length===0){bH["delete"](e)}}function mE(e,i,d,r){d.forEach(function(t){e(i,t,r)})}function ej(t){if(t.fixed_){return t}function p3(){return true}function r(){return false}if(!t||!t.isPropagationStopped){var e=t||cb.event;t={};for(var i in e){if(i!=="layerX"&&i!=="layerY"&&i!=="keyLocation"&&i!=="webkitMovementX"&&i!=="webkitMovementY"){if(!(i==="returnValue"&&e.preventDefault)){t[i]=e[i]}}}if(!t.target){t.target=t.srcElement||eT}if(!t.relatedTarget){t.relatedTarget=t.fromElement===t.target?t.toElement:t.fromElement}t.preventDefault=function(){if(e.preventDefault){e.preventDefault()}t.returnValue=false;e.returnValue=false;t.defaultPrevented=true};t.defaultPrevented=false;t.stopPropagation=function(){if(e.stopPropagation){e.stopPropagation()}t.cancelBubble=true;e.cancelBubble=true;t.isPropagationStopped=p3};t.isPropagationStopped=r;t.stopImmediatePropagation=function(){if(e.stopImmediatePropagation){e.stopImmediatePropagation()}t.isImmediatePropagationStopped=p3;t.stopPropagation()};t.isImmediatePropagationStopped=r;if(t.clientX!==null&&t.clientX!==undefined){var on=eT.documentElement;var d=eT.body;t.pageX=t.clientX+(on&&on.scrollLeft||d&&d.scrollLeft||0)-(on&&on.clientLeft||d&&d.clientLeft||0);t.pageY=t.clientY+(on&&on.scrollTop||d&&d.scrollTop||0)-(on&&on.clientTop||d&&d.clientTop||0)}t.which=t.charCode||t.keyCode;if(t.button!==null&&t.button!==undefined){t.button=t.button&1?0:t.button&4?1:t.button&2?2:0}}t.fixed_=true;return t}var nI;var iF=function iF(){if(typeof nI!=="boolean"){nI=false;try{var i=Object.defineProperty({},"passive",{get:function d(){nI=true}});cb.addEventListener("test",null,i);cb.removeEventListener("test",null,i)}catch(r){}}return nI};var gr=["touchstart","touchmove"];function kJ(r,i,e){if(Array.isArray(i)){return mE(kJ,r,i,e)}if(!bH.has(r)){bH.set(r,{})}var t=bH.get(r);if(!t.handlers){t.handlers={}}if(!t.handlers[i]){t.handlers[i]=[]}if(!e.guid){e.guid=cV()}t.handlers[i].push(e);if(!t.dispatcher){t.disabled=false;t.dispatcher=function(p4,p7){if(t.disabled){return}p4=ej(p4);var p3=t.handlers[p4.type];if(p3){var p5=p3.slice(0);for(var on=0,p8=p5.length;on<p8;on++){if(p4.isImmediatePropagationStopped()){break}else{try{p5[on].call(r,p4,p7)}catch(p6){aC.error(p6)}}}}}}if(t.handlers[i].length===1){if(r.addEventListener){var d=false;if(iF()&&gr.indexOf(i)>-1){d={passive:true}}r.addEventListener(i,t.dispatcher,d)}else{if(r.attachEvent){r.attachEvent("on"+i,t.dispatcher)}}}}function fF(on,r,i){if(!bH.has(on)){return}var p3=bH.get(on);if(!p3.handlers){return}if(Array.isArray(r)){return mE(fF,on,r,i)}var p4=function p4(p7,p6){p3.handlers[p6]=[];iA(p7,p6)};if(r===undefined){for(var e in p3.handlers){if(Object.prototype.hasOwnProperty.call(p3.handlers||{},e)){p4(on,e)}}return}var d=p3.handlers[r];if(!d){return}if(!i){p4(on,r);return}if(i.guid){for(var p5=0;p5<d.length;p5++){if(d[p5].guid===i.guid){d.splice(p5--,1)}}}iA(on,r)}function a6(r,i,t){var d=bH.has(r)?bH.get(r):{};var e=r.parentNode||r.ownerDocument;if(typeof i==="string"){i={type:i,target:r}}else{if(!i.target){i.target=r}}i=ej(i);if(d.dispatcher){d.dispatcher.call(r,i,t)}if(e&&!i.isPropagationStopped()&&i.bubbles===true){a6.call(null,e,i,t)}else{if(!e&&!i.defaultPrevented&&i.target&&i.target[i.type]){if(!bH.has(i.target)){bH.set(i.target,{})}var on=bH.get(i.target);if(i.target[i.type]){on.disabled=true;if(typeof i.target[i.type]==="function"){i.target[i.type]()}on.disabled=false}}}return !i.defaultPrevented}function da(r,e,d){if(Array.isArray(e)){return mE(da,r,e,d)}var i=function i(){fF(r,e,i);d.apply(this,arguments)};i.guid=d.guid=d.guid||cV();kJ(r,e,i)}function pC(r,e,d){var i=function i(){fF(r,e,i);d.apply(this,arguments)};i.guid=d.guid=d.guid||cV();kJ(r,e,i)}var lR=Object.freeze({__proto__:null,fixEvent:ej,on:kJ,off:fF,trigger:a6,one:da,any:pC});var kb=30;var j=function j(e,r,d){if(!r.guid){r.guid=cV()}var i=r.bind(e);i.guid=d?d+"_"+r.guid:r.guid;return i};var jL=function jL(e,r){var i=cb.performance.now();var d=function d(){var t=cb.performance.now();if(t-i>=r){e.apply(void 0,arguments);i=t}};return d};var mv=function mv(t,p3,d,e){if(e===void 0){e=cb}var on;var r=function r(){e.clearTimeout(on);on=null};var i=function i(){var p5=this;var p6=arguments;var p7=function p4(){on=null;p7=null;if(!d){t.apply(p5,p6)}};if(!on&&d){t.apply(p5,p6)}e.clearTimeout(on);on=e.setTimeout(p7,p3)};i.cancel=r;return i};var kF=function kF(){};kF.prototype.allowedEvents_={};kF.prototype.on=function(i,e){var d=this.addEventListener;this.addEventListener=function(){};kJ(this,i,e);this.addEventListener=d};kF.prototype.addEventListener=kF.prototype.on;kF.prototype.off=function(e,d){fF(this,e,d)};kF.prototype.removeEventListener=kF.prototype.off;kF.prototype.one=function(i,e){var d=this.addEventListener;this.addEventListener=function(){};da(this,i,e);this.addEventListener=d};kF.prototype.any=function(i,e){var d=this.addEventListener;this.addEventListener=function(){};pC(this,i,e);this.addEventListener=d};kF.prototype.trigger=function(e){var d=e.type||e;if(typeof e==="string"){e={type:d}}e=ej(e);if(this.allowedEvents_[d]&&this["on"+d]){this["on"+d](e)}a6(this,e)};kF.prototype.dispatchEvent=kF.prototype.trigger;var ap;kF.prototype.queueTrigger=function(i){var on=this;if(!ap){ap=new Map()}var d=i.type||i;var t=ap.get(this);if(!t){t=new Map();ap.set(this,t)}var e=t.get(d);t["delete"](d);cb.clearTimeout(e);var r=cb.setTimeout(function(){if(t.size===0){t=null;ap["delete"](on)}on.trigger(i)},0);t.set(d,r)};var ir=function ir(d){return d instanceof kF||!!d.eventBusEl_&&["on","one","off","trigger"].every(function(e){return typeof d[e]==="function"})};var j4=function j4(d,e){if(ir(d)){e()}else{if(!d.eventedCallbacks){d.eventedCallbacks=[]}d.eventedCallbacks.push(e)}};var cX=function cX(d){return(typeof d==="string"&&/\S/.test(d)||Array.isArray(d)&&!!d.length)};var k1=function k1(d){if(!d.nodeName&&!ir(d)){throw new Error("Invalid target; must be a DOM node or evented object.")}};var oc=function oc(d){if(!cX(d)){throw new Error("Invalid event type; must be a non-empty string or array.")}};var gZ=function gZ(d){if(typeof d!=="function"){throw new Error("Invalid listener; must be a function.")}};var dH=function dH(d,e){var t=e.length<3||e[0]===d||e[0]===d.eventBusEl_;var on;var i;var r;if(t){on=d.eventBusEl_;if(e.length>=3){e.shift()}i=e[0];r=e[1]}else{on=e[0];i=e[1];r=e[2]}k1(on);oc(i);gZ(r);r=j(d,r);return{isTargetingSelf:t,target:on,type:i,listener:r}};var hC=function hC(i,r,d,e){k1(i);if(i.nodeName){lR[r](i,d,e)}else{i[r](d,e)}};var gs={on:function kJ(){var t=this;for(var p6=arguments.length,p4=new Array(p6),e=0;e<p6;e++){p4[e]=arguments[e]}var p3=dH(this,p4),p7=p3.isTargetingSelf,on=p3.target,p5=p3.type,r=p3.listener;hC(on,"on",p5,r);if(!p7){var d=function d(){return t.off(on,p5,r)};d.guid=r.guid;var i=function i(){return t.off("dispose",d)};i.guid=r.guid;hC(this,"on","dispose",d);hC(on,"on","dispose",i)}},one:function da(){var on=this;for(var e=arguments.length,p3=new Array(e),r=0;r<e;r++){p3[r]=arguments[r]}var p5=dH(this,p3),p6=p5.isTargetingSelf,t=p5.target,p4=p5.type,i=p5.listener;if(p6){hC(t,"one",p4,i)}else{var d=function d(){on.off(t,p4,d);for(var p9=arguments.length,p8=new Array(p9),p7=0;p7<p9;p7++){p8[p7]=arguments[p7]}i.apply(null,p8)};d.guid=i.guid;hC(t,"one",p4,d)}},any:function pC(){var r=this;for(var p6=arguments.length,on=new Array(p6),i=0;i<p6;i++){on[i]=arguments[i]}var p4=dH(this,on),p5=p4.isTargetingSelf,t=p4.target,p3=p4.type,e=p4.listener;if(p5){hC(t,"any",p3,e)}else{var d=function d(){r.off(t,p3,d);for(var p9=arguments.length,p8=new Array(p9),p7=0;p7<p9;p7++){p8[p7]=arguments[p7]}e.apply(null,p8)};d.guid=e.guid;hC(t,"any",p3,d)}},off:function hv(i,d,r){if(!i||cX(i)){fF(this.eventBusEl_,i,d)}else{var t=i;var e=d;k1(t);oc(e);gZ(r);r=j(this,r);this.off("dispose",r);if(t.nodeName){fF(t,e,r);fF(t,"dispose",r)}else{if(ir(t)){t.off(e,r);t.off("dispose",r)}}}},trigger:function px(d,e){return a6(this.eventBusEl_,d,e)}};function iC(r,e){if(e===void 0){e={}}var d=e,i=d.eventBusKey;if(i){if(!r[i].nodeName){throw new Error('The eventBusKey "'+i+'" does not refer to an element.')}r.eventBusEl_=r[i]}else{r.eventBusEl_=ms("span",{className:"vjs-event-bus"})}pr(r,gs);if(r.eventedCallbacks){r.eventedCallbacks.forEach(function(t){t()})}r.on("dispose",function(){r.off();cb.setTimeout(function(){r.eventBusEl_=null},0)});return r}var n1={state:{},setState:function gy(d){var i=this;if(typeof d==="function"){d=d()}var e;q(d,function(t,r){if(i.state[r]!==t){e=e||{};e[r]={from:i.state[r],to:t}}i.state[r]=t});if(e&&ir(this)){this.trigger({changes:e,type:"statechanged"})}return e}};function E(e,d){pr(e,n1);e.state=pr({},e.state,d);if(typeof e.handleStateChanged==="function"&&ir(e)){e.on("statechanged",e.handleStateChanged)}return e}var ar=function ar(d){if(typeof d!=="string"){return d}return d.replace(/./,function(e){return e.toLowerCase()})};var ac=function ac(d){if(typeof d!=="string"){return d}return d.replace(/./,function(e){return e.toUpperCase()})};var fc=function fc(e,d){return ac(e)===ac(d)};function nl(){var d={};for(var e=arguments.length,i=new Array(e),r=0;r<e;r++){i[r]=arguments[r]}i.forEach(function(t){if(!t){return}q(t,function(p3,on){if(!fv(p3)){d[on]=p3;return}if(!fv(d[on])){d[on]={}}d[on]=nl(d[on],p3)})});return d}var pO=function(){function qd(qU,qT,qV){if(!qU&&this.play){this.player_=qU=this}else{this.player_=qU}this.isDisposed_=false;this.parentComponent_=null;this.options_=nl({},this.options_);qT=this.options_=nl(this.options_,qT);this.id_=qT.id||qT.el&&qT.el.id;if(!this.id_){var qX=qU&&qU.id&&qU.id()||"no_player";this.id_=qX+"_component_"+cV()}this.name_=qT.name||null;if(qT.el){this.el_=qT.el}else{if(qT.createEl!==false){this.el_=this.createEl()}}if(qT.evented!==false){iC(this,{eventBusKey:this.el_?"el_":null})}E(this,this.constructor.defaultState);this.children_=[];this.childIndex_={};this.childNameIndex_={};var qW;if(!cb.Set){qW=function(){function q2(){this.set_={}}var q0=q2.prototype;q0.has=function qZ(q4){return q4 in this.set_};q0["delete"]=function qY(q5){var q4=this.has(q5);delete this.set_[q5];return q4};q0.add=function q1(q4){this.set_[q4]=1;return this};q0.forEach=function q3(q6,q4){for(var q5 in this.set_){q6.call(q4,q5,q5,this)}};return q2}()}this.setTimeoutIds_=cb.Set?new Set():new qW();this.setIntervalIds_=cb.Set?new Set():new qW();this.rafIds_=cb.Set?new Set():new qW();this.clearingTimersOnDispose_=false;if(qT.initChildren!==false){this.initChildren()}this.ready(qV);if(qT.reportTouchActivity!==false){this.enableTouchActivity()}}var qf=qd.prototype;qf.dispose=function qu(){if(this.isDisposed_){return}this.trigger({type:"dispose",bubbles:false});this.isDisposed_=true;if(this.children_){for(var qT=this.children_.length-1;qT>=0;qT--){if(this.children_[qT].dispose){this.children_[qT].dispose()}}}this.children_=null;this.childIndex_=null;this.childNameIndex_=null;this.parentComponent_=null;if(this.el_){if(this.el_.parentNode){this.el_.parentNode.removeChild(this.el_)}if(bH.has(this.el_)){bH["delete"](this.el_)}this.el_=null}this.player_=null};qf.isDisposed=function qg(){return Boolean(this.isDisposed_)};qf.player=function qL(){return this.player_};qf.options=function qt(qT){if(!qT){return this.options_}this.options_=nl(this.options_,qT);return this.options_};qf.el=function qM(){return this.el_};qf.createEl=function r(qV,qU,qT){return ms(qV,qU,qT)};qf.localize=function qx(qW,qY,qZ){if(qZ===void 0){qZ=qW}var qT=this.player_.language&&this.player_.language();var qU=this.player_.languages&&this.player_.languages();var qV=qU&&qU[qT];var q0=qT&&qT.split("-")[0];var q1=qU&&qU[q0];var qX=qZ;if(qV&&qV[qW]){qX=qV[qW]}else{if(q1&&q1[qW]){qX=q1[qW]}}if(qY){qX=qX.replace(/\{(\d+)\}/g,function(q4,q3){var q5=qY[q3-1];var q2=q5;if(typeof q5==="undefined"){q2=q4}return q2})}return qX};qf.contentEl=function qp(){return this.contentEl_||this.el_};qf.id=function qB(){return this.id_};qf.name=function qe(){return this.name_};qf.children=function qm(){return this.children_};qf.getChildById=function p9(qT){return this.childIndex_[qT]};qf.getChild=function t(qT){if(!qT){return}return this.childNameIndex_[qT]};qf.getDescendant=function qo(){for(var qT=arguments.length,qX=new Array(qT),qV=0;qV<qT;qV++){qX[qV]=arguments[qV]}qX=qX.reduce(function(qY,qZ){return qY.concat(qZ)},[]);var qW=this;for(var qU=0;qU<qX.length;qU++){qW=qW.getChild(qX[qU]);if(!qW||!qW.getChild){return}}return qW};qf.addChild=function ql(q0,qX,qW){if(qX===void 0){qX={}}if(qW===void 0){qW=this.children_.length}var qV;var qT;if(typeof q0==="string"){qT=ac(q0);var qY=qX.componentClass||qT;qX.name=qT;var qZ=qd.getComponent(qY);if(!qZ){throw new Error("Component "+qY+" does not exist")}if(typeof qZ!=="function"){return null}qV=new qZ(this.player_||this,qX)}else{qV=q0}if(qV.parentComponent_){qV.parentComponent_.removeChild(qV)}this.children_.splice(qW,0,qV);qV.parentComponent_=this;if(typeof qV.id==="function"){this.childIndex_[qV.id()]=qV}qT=qT||qV.name&&ac(qV.name());if(qT){this.childNameIndex_[qT]=qV;this.childNameIndex_[ar(qT)]=qV}if(typeof qV.el==="function"&&qV.el()){var qU=null;if(this.children_[qW+1]){if(this.children_[qW+1].el_){qU=this.children_[qW+1].el_}else{if(le(this.children_[qW+1])){qU=this.children_[qW+1]}}}this.contentEl().insertBefore(qV.el(),qU)}return qV};qf.removeChild=function qa(qU){if(typeof qU==="string"){qU=this.getChild(qU)}if(!qU||!this.children_){return}var qT=false;for(var qV=this.children_.length-1;qV>=0;qV--){if(this.children_[qV]===qU){qT=true;this.children_.splice(qV,1);break}}if(!qT){return}qU.parentComponent_=null;this.childIndex_[qU.id()]=null;this.childNameIndex_[ac(qU.name())]=null;this.childNameIndex_[ar(qU.name())]=null;var qW=qU.el();if(qW&&qW.parentNode===this.contentEl()){this.contentEl().removeChild(qU.el())}};qf.initChildren=function qD(){var qY=this;var qW=this.options_.children;if(qW){var qT=this.options_;var qV=function qV(q2){var q0=q2.name;var q1=q2.opts;if(qT[q0]!==undefined){q1=qT[q0]}if(q1===false){return}if(q1===true){q1={}}q1.playerOptions=qY.options_.playerOptions;var qZ=qY.addChild(q0,q1);if(qZ){qY[q0]=qZ}};var qU;var qX=qd.getComponent("Tech");if(Array.isArray(qW)){qU=qW}else{qU=Object.keys(qW)}qU.concat(Object.keys(this.options_).filter(function(qZ){return !qU.some(function(q0){if(typeof q0==="string"){return qZ===q0}return qZ===q0.name})})).map(function(q1){var qZ;var q0;if(typeof q1==="string"){qZ=q1;q0=qW[qZ]||qY.options_[qZ]||{}}else{qZ=q1.name;q0=q1}return{name:qZ,opts:q0}}).filter(function(q0){var qZ=qd.getComponent(q0.opts.componentClass||ac(q0.name));return qZ&&!qX.isTech(qZ)}).forEach(qV)}};qf.buildCSSClass=function qO(){return""};qf.ready=function p5(qT,qU){if(qU===void 0){qU=false}if(!qT){return}if(!this.isReady_){this.readyQueue_=this.readyQueue_||[];this.readyQueue_.push(qT);return}if(qU){qT.call(this)}else{this.setTimeout(qT,1)}};qf.triggerReady=function e(){this.isReady_=true;this.setTimeout(function(){var qT=this.readyQueue_;this.readyQueue_=[];if(qT&&qT.length>0){qT.forEach(function(qU){qU.call(this)},this)}this.trigger("ready")},1)};qf.$=function qz(qT,qU){return pF(qT,qU||this.contentEl())};qf.$$=function qk(qT,qU){return dA(qT,qU||this.contentEl())};qf.hasClass=function qN(qT){return cf(this.el_,qT)};qf.addClass=function qy(qT){h0(this.el_,qT)};qf.removeClass=function p4(qT){cY(this.el_,qT)};qf.toggleClass=function qn(qU,qT){pn(this.el_,qU,qT)};qf.show=function qC(){this.removeClass("vjs-hidden")};qf.hide=function qK(){this.addClass("vjs-hidden")};qf.lockShowing=function qS(){this.addClass("vjs-lock-showing")};qf.unlockShowing=function qb(){this.removeClass("vjs-lock-showing")};qf.getAttribute=function qE(qT){return it(this.el_,qT)};qf.setAttribute=function qr(qT,qU){ne(this.el_,qT,qU)};qf.removeAttribute=function qR(qT){be(this.el_,qT)};qf.width=function d(qT,qU){return this.dimension("width",qT,qU)};qf.height=function i(qT,qU){return this.dimension("height",qT,qU)};qf.dimensions=function qF(qU,qT){this.width(qU,true);this.height(qT)};qf.dimension=function qH(qX,qT,qW){if(qT!==undefined){if(qT===null||qT!==qT){qT=0}if((""+qT).indexOf("%")!==-1||(""+qT).indexOf("px")!==-1){this.el_.style[qX]=qT}else{if(qT==="auto"){this.el_.style[qX]=""}else{this.el_.style[qX]=qT+"px"}}if(!qW){this.trigger("componentresize")}return}if(!this.el_){return 0}var qV=this.el_.style[qX];var qU=qV.indexOf("px");if(qU!==-1){return parseInt(qV.slice(0,qU),10)}return parseInt(this.el_["offset"+ac(qX)],10)};qf.currentDimension=function qq(qV){var qT=0;if(qV!=="width"&&qV!=="height"){throw new Error("currentDimension only accepts width or height value")}qT=ja(this.el_,qV);qT=parseFloat(qT);if(qT===0||isNaN(qT)){var qU="offset"+ac(qV);qT=this.el_[qU]}return qT};qf.currentDimensions=function p7(){return{width:this.currentDimension("width"),height:this.currentDimension("height")}};qf.currentWidth=function qs(){return this.currentDimension("width")};qf.currentHeight=function qi(){return this.currentDimension("height")};qf.focus=function qI(){this.el_.focus()};qf.blur=function qj(){this.el_.blur()};qf.handleKeyDown=function p6(qT){if(this.player_){qT.stopPropagation();this.player_.handleKeyDown(qT)}};qf.handleKeyPress=function qc(qT){this.handleKeyDown(qT)};qf.emitTapEvents=function on(){var qU=0;var qX=null;var qY=10;var qT=200;var qW;this.on("touchstart",function(qZ){if(qZ.touches.length===1){qX={pageX:qZ.touches[0].pageX,pageY:qZ.touches[0].pageY};qU=cb.performance.now();qW=true}});this.on("touchmove",function(q0){if(q0.touches.length>1){qW=false}else{if(qX){var qZ=q0.touches[0].pageX-qX.pageX;var q2=q0.touches[0].pageY-qX.pageY;var q1=Math.sqrt(qZ*qZ+q2*q2);if(q1>qY){qW=false}}}});var qV=function qV(){qW=false};this.on("touchleave",qV);this.on("touchcancel",qV);this.on("touchend",function(q0){qX=null;if(qW===true){var qZ=cb.performance.now()-qU;if(qZ<qT){q0.preventDefault();this.trigger("tap")}}})};qf.enableTouchActivity=function p3(){if(!this.player()||!this.player().reportUserActivity){return}var qT=j(this.player(),this.player().reportUserActivity);var qV;this.on("touchstart",function(){qT();this.clearInterval(qV);qV=this.setInterval(qT,250)});var qU=function qU(qW){qT();this.clearInterval(qV)};this.on("touchmove",qT);this.on("touchend",qU);this.on("touchcancel",qU)};qf.setTimeout=function qG(qT,qV){var qU=this;var qW;qT=j(this,qT);this.clearTimersOnDispose_();qW=cb.setTimeout(function(){if(qU.setTimeoutIds_.has(qW)){qU.setTimeoutIds_["delete"](qW)}qT()},qV);this.setTimeoutIds_.add(qW);return qW};qf.clearTimeout=function qv(qT){if(this.setTimeoutIds_.has(qT)){this.setTimeoutIds_["delete"](qT);cb.clearTimeout(qT)}return qT};qf.setInterval=function p8(qU,qT){qU=j(this,qU);this.clearTimersOnDispose_();var qV=cb.setInterval(qU,qT);this.setIntervalIds_.add(qV);return qV};qf.clearInterval=function qP(qT){if(this.setIntervalIds_.has(qT)){this.setIntervalIds_["delete"](qT);cb.clearInterval(qT)}return qT};qf.requestAnimationFrame=function qh(qU){var qT=this;if(!this.supportsRaf_){return this.setTimeout(qU,1000/60)}this.clearTimersOnDispose_();var qV;qU=j(this,qU);qV=cb.requestAnimationFrame(function(){if(qT.rafIds_.has(qV)){qT.rafIds_["delete"](qV)}qU()});this.rafIds_.add(qV);return qV};qf.cancelAnimationFrame=function qw(qT){if(!this.supportsRaf_){return this.clearTimeout(qT)}if(this.rafIds_.has(qT)){this.rafIds_["delete"](qT);cb.cancelAnimationFrame(qT)}return qT};qf.clearTimersOnDispose_=function qJ(){var qT=this;if(this.clearingTimersOnDispose_){return}this.clearingTimersOnDispose_=true;this.one("dispose",function(){[["rafIds_","cancelAnimationFrame"],["setTimeoutIds_","clearTimeout"],["setIntervalIds_","clearInterval"]].forEach(function(qV){var qU=qV[0],qW=qV[1];qT[qU].forEach(qT[qW],qT)});qT.clearingTimersOnDispose_=false})};qd.registerComponent=function qA(qU,qY){if(typeof qU!=="string"||!qU){throw new Error('Illegal component name, "'+qU+'"; must be a non-empty string.')}var qT=qd.getComponent("Tech");var qZ=qT&&qT.isTech(qY);var qV=qd===qY||qd.prototype.isPrototypeOf(qY.prototype);if(qZ||!qV){var q0;if(qZ){q0="techs must be registered using Tech.registerTech()"}else{q0="must be a Component subclass"}throw new Error('Illegal component, "'+qU+'"; '+q0+".")}qU=ac(qU);if(!qd.components_){qd.components_={}}var qX=qd.getComponent("Player");if(qU==="Player"&&qX&&qX.players){var qW=qX.players;var q1=Object.keys(qW);if(qW&&q1.length>0&&q1.map(function(q2){return qW[q2]}).every(Boolean)){throw new Error("Can not register Player component after player has been created.")}}qd.components_[qU]=qY;qd.components_[ar(qU)]=qY;return qY};qd.getComponent=function qQ(qT){if(!qT||!qd.components_){return}return qd.components_[qT]};return qd}();pO.prototype.supportsRaf_=typeof cb.requestAnimationFrame==="function"&&typeof cb.cancelAnimationFrame==="function";pO.registerComponent("Component",pO);function ot(d){if(d===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return d}var gx=ot;var lw=g8(function(d){function e(r){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){d.exports=i=function i(t){return typeof t}}else{d.exports=i=function i(t){return t&&typeof Symbol==="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t}}return i(r)}d.exports=e});var ic=g8(function(d){function e(r){d.exports=i=Object.setPrototypeOf?Object.getPrototypeOf:function i(t){return t.__proto__||Object.getPrototypeOf(t)};return i(r)}d.exports=e});function iU(e,d){e.prototype=Object.create(d.prototype);e.prototype.constructor=e;e.__proto__=d}var em=iU;var nO=cb.navigator&&cb.navigator.userAgent||"";var kI=/AppleWebKit\/([\d.]+)/i.exec(nO);var iv=kI?parseFloat(kI.pop()):null;var nY=/iPod/i.test(nO);var jZ=function(){var d=nO.match(/OS (\d+)_/i);if(d&&d[1]){return d[1]}return null}();var j3=/Android/i.test(nO);var kG=function(){var e=nO.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!e){return null}var d=e[1]&&parseFloat(e[1]);var i=e[2]&&parseFloat(e[2]);if(d&&i){return parseFloat(e[1]+"."+e[2])}else{if(d){return d}}return null}();var b9=j3&&kG<5&&iv<537;var nz=/Firefox/i.test(nO);var cA=/Edg/i.test(nO);var mh=!cA&&(/Chrome/i.test(nO)||/CriOS/i.test(nO));var dm=function(){var d=nO.match(/(Chrome|CriOS)\/(\d+)/);if(d&&d[2]){return parseFloat(d[2])}return null}();var cL=function(){var d=/MSIE\s(\d+)\.\d/.exec(nO);var e=d&&parseFloat(d[1]);if(!e&&/Trident\/7.0/i.test(nO)&&/rv:11.0/.test(nO)){e=11}return e}();var c7=/Safari/i.test(nO)&&!mh&&!j3&&!cA;var aP=/Windows/i.test(nO);var gC=lB()&&("ontouchstart" in cb||cb.navigator.maxTouchPoints||cb.DocumentTouch&&cb.document instanceof cb.DocumentTouch);var b6=/iPad/i.test(nO)||c7&&gC&&!/iPhone/i.test(nO);var c5=/iPhone/i.test(nO)&&!b6;var bk=c5||b6||nY;var iM=(c7||bk)&&!mh;var gT=Object.freeze({__proto__:null,IS_IPOD:nY,IOS_VERSION:jZ,IS_ANDROID:j3,ANDROID_VERSION:kG,IS_NATIVE_ANDROID:b9,IS_FIREFOX:nz,IS_EDGE:cA,IS_CHROME:mh,CHROME_VERSION:dm,IE_VERSION:cL,IS_SAFARI:c7,IS_WINDOWS:aP,TOUCH_ENABLED:gC,IS_IPAD:b6,IS_IPHONE:c5,IS_IOS:bk,IS_ANY_SAFARI:iM});function hP(i,d,e){if(typeof d!=="number"||d<0||d>e){throw new Error("Failed to execute '"+i+"' on 'TimeRanges': The index provided ("+d+") is non-numeric or out of bounds (0-"+e+").")}}function fx(r,i,e,d){hP(r,d,e.length-1);return e[d][i]}function pd(e){if(e===undefined||e.length===0){return{length:0,start:function i(){throw new Error("This TimeRanges object is empty")},end:function d(){throw new Error("This TimeRanges object is empty")}}}return{length:e.length,start:fx.bind(null,"start",0,e),end:fx.bind(null,"end",1,e)}}function R(e,d){if(Array.isArray(e)){return pd(e)}else{if(e===undefined||d===undefined){return pd()}}return pd([[e,d]])}function fI(t,on){var d=0;var p3;var e;if(!on){return 0}if(!t||!t.length){t=R(0,0)}for(var r=0;r<t.length;r++){p3=t.start(r);e=t.end(r);if(e>on){e=on}d+=e-p3}return d/on}var fg={prefixed:true};var jv=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror","fullscreen"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror","-webkit-full-screen"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror","-moz-full-screen"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError","-ms-fullscreen"]];var pT=jv[0];var oO;for(var o0=0;o0<jv.length;o0++){if(jv[o0][1] in eT){oO=jv[o0];break}}if(oO){for(var n=0;n<oO.length;n++){fg[pT[n]]=oO[n]}fg.prefixed=oO[0]!==pT[0]}function eW(d){if(d instanceof eW){return d}if(typeof d==="number"){this.code=d}else{if(typeof d==="string"){this.message=d}else{if(ci(d)){if(typeof d.code==="number"){this.code=d.code}pr(this,d)}}}if(!this.message){this.message=eW.defaultMessages[this.code]||""}}eW.prototype.code=0;eW.prototype.message="";eW.prototype.status=null;eW.errorTypes=["MEDIA_ERR_CUSTOM","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED","MEDIA_ERR_ENCRYPTED"];eW.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail part-way.",3:"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",4:"The media could not be loaded, either because the server or network failed or because the format is not supported.",5:"The media is encrypted and we do not have the keys to decrypt it."};for(var pJ=0;pJ<eW.errorTypes.length;pJ++){eW[eW.errorTypes[pJ]]=pJ;eW.prototype[eW.errorTypes[pJ]]=pJ}var f5=eE;function eE(t,d){var i;var e=null;try{i=JSON.parse(t,d)}catch(r){e=r}return[e,i]}function bL(d){return d!==undefined&&d!==null&&typeof d.then==="function"}function ai(d){if(bL(d)){d.then(null,function(i){})}}var pS=function pS(d){var e=["kind","label","language","id","inBandMetadataTrackDispatchType","mode","src"].reduce(function(t,on,r){if(d[on]){t[on]=d[on]}return t},{cues:d.cues&&Array.prototype.map.call(d.cues,function(i){return{startTime:i.startTime,endTime:i.endTime,text:i.text,id:i.id}})});return e};var iK=function iK(d){var i=d.$$("track");var r=Array.prototype.map.call(i,function(on){return on.track});var e=Array.prototype.map.call(i,function(t){var on=pS(t.track);if(t.src){on.src=t.src}return on});return e.concat(Array.prototype.filter.call(d.textTracks(),function(t){return r.indexOf(t)===-1}).map(pS))};var gn=function gn(e,d){e.forEach(function(i){var r=d.addRemoteTextTrack(i).track;if(!i.src&&i.cues){i.cues.forEach(function(t){return r.addCue(t)})}});return d.textTracks()};var ix={textTracksToJson:iK,jsonToTextTracks:gn,trackToJson_:pS};var fM=g8(function(e,t){function p6(i){if(i&&"object"===typeof i){var p7=i.which||i.keyCode||i.charCode;if(p7){i=p7}}if("number"===typeof i){return p5[i]}var p8=String(i);var p9=d[p8.toLowerCase()];if(p9){return p9}var p9=r[p8.toLowerCase()];if(p9){return p9}if(p8.length===1){return p8.charCodeAt(0)}return undefined}p6.isEventKey=function p4(i,p9){if(i&&"object"===typeof i){var p8=i.which||i.keyCode||i.charCode;if(p8===null||p8===undefined){return false}if(typeof p9==="string"){var p7=d[p9.toLowerCase()];if(p7){return p7===p8}var p7=r[p9.toLowerCase()];if(p7){return p7===p8}}else{if(typeof p9==="number"){return p9===p8}}return false}};t=e.exports=p6;var d=t.code=t.codes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,"delete":46,command:91,"left command":91,"right command":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222};var r=t.aliases={windows:91,"⇧":16,"⌥":18,"⌃":17,"⌘":91,ctl:17,control:17,option:18,pause:19,"break":19,caps:20,"return":13,escape:27,spc:32,spacebar:32,pgup:33,pgdn:34,ins:45,del:46,cmd:91};
/*!
     * Programatically add the following
     */
for(on=97;on<123;on++){d[String.fromCharCode(on)]=on-32}for(var on=48;on<58;on++){d[on-48]=on}for(on=1;on<13;on++){d["f"+on]=on+111}for(on=0;on<10;on++){d["numpad "+on]=on+96}var p5=t.names=t.title={};for(on in d){p5[d[on]]=on}for(var p3 in r){d[p3]=r[p3]}});var aM=fM.code;var aL=fM.codes;var aJ=fM.aliases;var aG=fM.names;var aE=fM.title;var ev="vjs-modal-dialog";var mm=function(qg){em(qd,qg);function qd(qi,qh){var qj;qj=qg.call(this,qi,qh)||this;qj.opened_=qj.hasBeenOpened_=qj.hasBeenFilled_=false;qj.closeable(!qj.options_.uncloseable);qj.content(qj.options_.content);qj.contentEl_=p9("div",{className:ev+"-content"},{role:"document"});qj.descEl_=p9("p",{className:ev+"-description vjs-control-text",id:qj.el().getAttribute("aria-describedby")});du(qj.descEl_,qj.description());qj.el_.appendChild(qj.descEl_);qj.el_.appendChild(qj.contentEl_);return qj}var e=qd.prototype;e.createEl=function p9(){return qg.prototype.createEl.call(this,"div",{className:this.buildCSSClass(),tabIndex:-1},{"aria-describedby":this.id()+"_description","aria-hidden":"true","aria-label":this.label(),role:"dialog"})};e.dispose=function qf(){this.contentEl_=null;this.descEl_=null;this.previouslyActiveEl_=null;qg.prototype.dispose.call(this)};e.buildCSSClass=function r(){return ev+" vjs-hidden "+qg.prototype.buildCSSClass.call(this)};e.label=function on(){return this.localize(this.options_.label||"Modal Window")};e.description=function qc(){var qh=this.options_.description||this.localize("This is a modal window.");if(this.closeable()){qh+=" "+this.localize("This modal can be closed by pressing the Escape key or activating the close button.")}return qh};e.open=function p6(){if(!this.opened_){var qh=this.player();this.trigger("beforemodalopen");this.opened_=true;if(this.options_.fillAlways||!this.hasBeenOpened_&&!this.hasBeenFilled_){this.fill()}this.wasPlaying_=!qh.paused();if(this.options_.pauseOnOpen&&this.wasPlaying_){qh.pause()}this.on("keydown",this.handleKeyDown);this.hadControls_=qh.controls();qh.controls(false);this.show();this.conditionalFocus_();this.el().setAttribute("aria-hidden","false");this.trigger("modalopen");this.hasBeenOpened_=true}};e.opened=function qe(qh){if(typeof qh==="boolean"){this[qh?"open":"close"]()}return this.opened_};e.close=function p7(){if(!this.opened_){return}var qh=this.player();this.trigger("beforemodalclose");this.opened_=false;if(this.wasPlaying_&&this.options_.pauseOnOpen){qh.play()}this.off("keydown",this.handleKeyDown);if(this.hadControls_){qh.controls(true)}this.hide();this.el().setAttribute("aria-hidden","true");this.trigger("modalclose");this.conditionalBlur_();if(this.options_.temporary){this.dispose()}};e.closeable=function p8(qi){if(typeof qi==="boolean"){var qj=this.closeable_=!!qi;var qk=this.getChild("closeButton");if(qj&&!qk){var qh=this.contentEl_;this.contentEl_=this.el_;qk=this.addChild("closeButton",{controlText:"Close Modal Dialog"});this.contentEl_=qh;this.on(qk,"close",this.close)}if(!qj&&qk){this.off(qk,"close",this.close);this.removeChild(qk);qk.dispose()}}return this.closeable_};e.fill=function qb(){this.fillWith(this.content())};e.fillWith=function t(ql){var qk=this.contentEl();var qj=qk.parentNode;var qi=qk.nextSibling;this.trigger("beforemodalfill");this.hasBeenFilled_=true;qj.removeChild(qk);this.empty();bt(qk,ql);this.trigger("modalfill");if(qi){qj.insertBefore(qk,qi)}else{qj.appendChild(qk)}var qh=this.getChild("closeButton");if(qh){qj.appendChild(qh.el_)}};e.empty=function p3(){this.trigger("beforemodalempty");l0(this.contentEl());this.trigger("modalempty")};e.content=function qa(qh){if(typeof qh!=="undefined"){this.content_=qh}return this.content_};e.conditionalFocus_=function d(){var qi=eT.activeElement;var qh=this.player_.el_;this.previouslyActiveEl_=null;if(qh.contains(qi)||qh===qi){this.previouslyActiveEl_=qi;this.focus()}};e.conditionalBlur_=function p5(){if(this.previouslyActiveEl_){this.previouslyActiveEl_.focus();this.previouslyActiveEl_=null}};e.handleKeyDown=function p4(qj){qj.stopPropagation();if(fM.isEventKey(qj,"Escape")&&this.closeable()){qj.preventDefault();this.close();return}if(!fM.isEventKey(qj,"Tab")){return}var qi=this.focusableEls_();var qk=this.el_.querySelector(":focus");var ql;for(var qh=0;qh<qi.length;qh++){if(qk===qi[qh]){ql=qh;break}}if(eT.activeElement===this.el_){ql=0}if(qj.shiftKey&&ql===0){qi[qi.length-1].focus();qj.preventDefault()}else{if(!qj.shiftKey&&ql===qi.length-1){qi[0].focus();qj.preventDefault()}}};e.focusableEls_=function i(){var qh=this.el_.querySelectorAll("*");return Array.prototype.filter.call(qh,function(qi){return(qi instanceof cb.HTMLAnchorElement||qi instanceof cb.HTMLAreaElement)&&qi.hasAttribute("href")||(qi instanceof cb.HTMLInputElement||qi instanceof cb.HTMLSelectElement||qi instanceof cb.HTMLTextAreaElement||qi instanceof cb.HTMLButtonElement)&&!qi.hasAttribute("disabled")||qi instanceof cb.HTMLIFrameElement||qi instanceof cb.HTMLObjectElement||qi instanceof cb.HTMLEmbedElement||qi.hasAttribute("tabindex")&&qi.getAttribute("tabindex")!==-1||qi.hasAttribute("contenteditable")})};return qd}(pO);mm.prototype.options_={pauseOnOpen:true,temporary:true};pO.registerComponent("ModalDialog",mm);var kU=function(t){em(on,t);function on(p4){var p6;if(p4===void 0){p4=[]}p6=t.call(this)||this;p6.tracks_=[];Object.defineProperty(gx(p6),"length",{get:function p3(){return this.tracks_.length}});for(var p5=0;p5<p4.length;p5++){p6.addTrack(p4[p5])}return p6}var e=on.prototype;e.addTrack=function d(p3){var p5=this.tracks_.length;if(!(""+p5 in this)){Object.defineProperty(this,p5,{get:function p4(){return this.tracks_[p5]}})}if(this.tracks_.indexOf(p3)===-1){this.tracks_.push(p3);this.trigger({track:p3,type:"addtrack",target:this})}};e.removeTrack=function r(p6){var p4;for(var p5=0,p3=this.length;p5<p3;p5++){if(this[p5]===p6){p4=this[p5];if(p4.off){p4.off()}this.tracks_.splice(p5,1);break}}if(!p4){return}this.trigger({track:p4,type:"removetrack",target:this})};e.getTrackById=function i(p7){var p3=null;for(var p6=0,p5=this.length;p6<p5;p6++){var p4=this[p6];if(p4.id===p7){p3=p4;break}}return p3};return on}(kF);kU.prototype.allowedEvents_={change:"change",addtrack:"addtrack",removetrack:"removetrack"};for(var hg in kU.prototype.allowedEvents_){kU.prototype["on"+hg]=null}var dB=function dB(r,d){for(var e=0;e<r.length;e++){if(!Object.keys(r[e]).length||d.id===r[e].id){continue}r[e].enabled=false}};var a9=function(r){em(t,r);function t(on){var p4;if(on===void 0){on=[]}for(var p3=on.length-1;p3>=0;p3--){if(on[p3].enabled){dB(on,on[p3]);break}}p4=r.call(this,on)||this;p4.changing_=false;return p4}var e=t.prototype;e.addTrack=function d(on){var p3=this;if(on.enabled){dB(this,on)}r.prototype.addTrack.call(this,on);if(!on.addEventListener){return}on.enabledChange_=function(){if(p3.changing_){return}p3.changing_=true;dB(p3,on);p3.changing_=false;p3.trigger("change")};on.addEventListener("enabledchange",on.enabledChange_)};e.removeTrack=function i(on){r.prototype.removeTrack.call(this,on);if(on.removeEventListener&&on.enabledChange_){on.removeEventListener("enabledchange",on.enabledChange_);on.enabledChange_=null}};return t}(kU);var m9=function dB(r,d){for(var e=0;e<r.length;e++){if(!Object.keys(r[e]).length||d.id===r[e].id){continue}r[e].selected=false}};var mk=function(t){em(r,t);function r(p3){var p6;if(p3===void 0){p3=[]}for(var p4=p3.length-1;p4>=0;p4--){if(p3[p4].selected){m9(p3,p3[p4]);break}}p6=t.call(this,p3)||this;p6.changing_=false;Object.defineProperty(gx(p6),"selectedIndex",{get:function on(){for(var p7=0;p7<this.length;p7++){if(this[p7].selected){return p7}}return -1},set:function p5(){}});return p6}var e=r.prototype;e.addTrack=function d(on){var p3=this;if(on.selected){m9(this,on)}t.prototype.addTrack.call(this,on);if(!on.addEventListener){return}on.selectedChange_=function(){if(p3.changing_){return}p3.changing_=true;m9(p3,on);p3.changing_=false;p3.trigger("change")};on.addEventListener("selectedchange",on.selectedChange_)};e.removeTrack=function i(on){t.prototype.removeTrack.call(this,on);if(on.removeEventListener&&on.selectedChange_){on.removeEventListener("selectedchange",on.selectedChange_);on.selectedChange_=null}};return r}(kU);var nf=function(t){em(r,t);function r(){return t.apply(this,arguments)||this}var e=r.prototype;e.addTrack=function d(p3){var p4=this;t.prototype.addTrack.call(this,p3);if(!this.queueChange_){this.queueChange_=function(){return p4.queueTrigger("change")}}if(!this.triggerSelectedlanguagechange){this.triggerSelectedlanguagechange_=function(){return p4.trigger("selectedlanguagechange")}}p3.addEventListener("modechange",this.queueChange_);var on=["metadata","chapters"];if(on.indexOf(p3.kind)===-1){p3.addEventListener("modechange",this.triggerSelectedlanguagechange_)}};e.removeTrack=function i(on){t.prototype.removeTrack.call(this,on);if(on.removeEventListener){if(this.queueChange_){on.removeEventListener("modechange",this.queueChange_)}if(this.selectedlanguagechange_){on.removeEventListener("modechange",this.triggerSelectedlanguagechange_)}}};return r}(kU);var mS=function(){function t(p4){if(p4===void 0){p4=[]}this.trackElements_=[];Object.defineProperty(this,"length",{get:function on(){return this.trackElements_.length}});for(var p3=0,p5=p4.length;p3<p5;p3++){this.addTrackElement_(p4[p3])}}var d=t.prototype;d.addTrackElement_=function r(p4){var p3=this.trackElements_.length;if(!(""+p3 in this)){Object.defineProperty(this,p3,{get:function on(){return this.trackElements_[p3]}})}if(this.trackElements_.indexOf(p4)===-1){this.trackElements_.push(p4)}};d.getTrackElementByTrack_=function e(on){var p3;for(var p4=0,p5=this.trackElements_.length;p4<p5;p4++){if(on===this.trackElements_[p4].track){p3=this.trackElements_[p4];break}}return p3};d.removeTrackElement_=function i(p3){for(var on=0,p4=this.trackElements_.length;on<p4;on++){if(p3===this.trackElements_[on]){if(this.trackElements_[on].track&&typeof this.trackElements_[on].track.off==="function"){this.trackElements_[on].track.off()}if(typeof this.trackElements_[on].off==="function"){this.trackElements_[on].off()}this.trackElements_.splice(on,1);break}}};return t}();var mw=function(){function e(on){e.prototype.setCues_.call(this,on);Object.defineProperty(this,"length",{get:function t(){return this.length_}})}var d=e.prototype;d.setCues_=function r(on){var p4=this.length||0;var p3=0;var t=on.length;this.cues_=on;this.length_=on.length;var p5=function p5(p7){if(!(""+p7 in this)){Object.defineProperty(this,""+p7,{get:function p6(){return this.cues_[p7]}})}};if(p4<t){p3=p4;for(;p3<t;p3++){p5.call(this,p3)}}};d.getCueById=function i(p5){var on=null;for(var p4=0,p3=this.length;p4<p3;p4++){var t=this[p4];if(t.id===p5){on=t;break}}return on};return e}();var ek={alternative:"alternative",captions:"captions",main:"main",sign:"sign",subtitles:"subtitles",commentary:"commentary"};var jD={alternative:"alternative",descriptions:"descriptions",main:"main","main-desc":"main-desc",translation:"translation",commentary:"commentary"};var e3={subtitles:"subtitles",captions:"captions",descriptions:"descriptions",chapters:"chapters",metadata:"metadata"};var pD={disabled:"disabled",hidden:"hidden",showing:"showing"};var lT=function(d){em(e,d);function e(r){var p3;if(r===void 0){r={}}p3=d.call(this)||this;var i={id:r.id||"vjs_track_"+cV(),kind:r.kind||"",label:r.label||"",language:r.language||""};var on=function on(p5){Object.defineProperty(gx(p3),p5,{get:function p4(){return i[p5]},set:function p6(){}})};for(var t in i){on(t)}return p3}return e}(kF);var oX=function oX(r){var p3=["protocol","hostname","port","pathname","search","hash","host"];var e=eT.createElement("a");e.href=r;var d=e.host===""&&e.protocol!=="file:";var p4;if(d){p4=eT.createElement("div");p4.innerHTML='<a href="'+r+'"></a>';e=p4.firstChild;p4.setAttribute("style","display:none; position:absolute;");eT.body.appendChild(p4)}var on={};for(var t=0;t<p3.length;t++){on[p3[t]]=e[p3[t]]}if(on.protocol==="http:"){on.host=on.host.replace(/:80$/,"")}if(on.protocol==="https:"){on.host=on.host.replace(/:443$/,"")}if(!on.protocol){on.protocol=cb.location.protocol}if(d){eT.body.removeChild(p4)}return on};var dr=function dr(d){if(!d.match(/^https?:\/\//)){var e=eT.createElement("div");e.innerHTML='<a href="'+d+'">x</a>';d=e.firstChild.href}return d};var dC=function dC(i){if(typeof i==="string"){var e=/^(\/?)([\s\S]*?)((?:\.{1,2}|[^\/]+?)(\.([^\.\/\?]+)))(?:[\/]*|[\?].*)$/;var d=e.exec(i);if(d){return d.pop().toLowerCase()}}return""};var pq=function pq(t,e){if(e===void 0){e=cb.location}var r=oX(t);var d=r.protocol===":"?e.protocol:r.protocol;var i=d+r.host!==e.protocol+e.host;return i};var ga=Object.freeze({__proto__:null,parseUrl:oX,getAbsoluteURL:dr,getFileExtension:dC,isCrossOrigin:pq});var eZ=dj;var nJ=Object.prototype.toString;function dj(e){var d=nJ.call(e);return d==="[object Function]"||typeof e==="function"&&d!=="[object RegExp]"||typeof window!=="undefined"&&(e===window.setTimeout||e===window.alert||e===window.confirm||e===window.prompt)}var k0=function k0(e){var d={};if(!e){return d}e.trim().split("\n").forEach(function(on){var i=on.indexOf(":");var r=on.slice(0,i).trim().toLowerCase();var t=on.slice(i+1).trim();if(typeof d[r]==="undefined"){d[r]=t}else{if(Array.isArray(d[r])){d[r].push(t)}else{d[r]=[d[r],t]}}});return d};var kW=lt;var eX=lt;lt.XMLHttpRequest=cb.XMLHttpRequest||eS;lt.XDomainRequest="withCredentials" in new lt.XMLHttpRequest()?lt.XMLHttpRequest:cb.XDomainRequest;pu(["get","put","post","patch","head","delete"],function(d){lt[d==="delete"?"del":d]=function(i,e,r){e=i5(i,e,r);e.method=d.toUpperCase();return pZ(e)}});function pu(r,e){for(var d=0;d<r.length;d++){e(r[d])}}function f7(e){for(var d in e){if(e.hasOwnProperty(d)){return false}}return true}function i5(e,d,r){var i=e;if(eZ(d)){r=d;if(typeof e==="string"){i={uri:e}}}else{i=ox({},d,{uri:e})}i.callback=r;return i}function lt(e,d,i){d=i5(e,d,i);return pZ(d)}function pZ(r){if(typeof r.callback==="undefined"){throw new Error("callback argument missing")}var d=false;var t=function qb(qi,qh,qg){if(!d){d=true;r.callback(qi,qh,qg)}};function p6(){if(p4.readyState===4){setTimeout(p3,0)}}function qf(){var qg=undefined;if(p4.response){qg=p4.response}else{qg=p4.responseText||jg(p4)}if(qc){try{qg=JSON.parse(qg)}catch(qh){}}return qg}function p9(qg){clearTimeout(p8);if(!(qg instanceof Error)){qg=new Error(""+(qg||"Unknown XMLHttpRequest Error"))}qg.statusCode=0;return t(qg,qd)}function p3(){if(qa){return}var qg;clearTimeout(p8);if(r.useXDR&&p4.status===undefined){qg=200}else{qg=p4.status===1223?204:p4.status}var qh=qd;var qi=null;if(qg!==0){qh={body:qf(),statusCode:qg,method:i,headers:{},url:on,rawRequest:p4};if(p4.getAllResponseHeaders){qh.headers=k0(p4.getAllResponseHeaders())}}else{qi=new Error("Internal XMLHttpRequest Error")}return t(qi,qh,qh.body)}var p4=r.xhr||null;if(!p4){if(r.cors||r.useXDR){p4=new lt.XDomainRequest()}else{p4=new lt.XMLHttpRequest()}}var qe;var qa;var on=p4.url=r.uri||r.url;var i=p4.method=r.method||"GET";var p7=r.body||r.data;var e=p4.headers=r.headers||{};var p5=!!r.sync;var qc=false;var p8;var qd={body:undefined,headers:{},statusCode:0,method:i,url:on,rawRequest:p4};if("json" in r&&r.json!==false){qc=true;e.accept||e.Accept||(e.Accept="application/json");if(i!=="GET"&&i!=="HEAD"){e["content-type"]||e["Content-Type"]||(e["Content-Type"]="application/json");p7=JSON.stringify(r.json===true?p7:r.json)}}p4.onreadystatechange=p6;p4.onload=p3;p4.onerror=p9;p4.onprogress=function(){};p4.onabort=function(){qa=true};p4.ontimeout=p9;p4.open(i,on,!p5,r.username,r.password);if(!p5){p4.withCredentials=!!r.withCredentials}if(!p5&&r.timeout>0){p8=setTimeout(function(){if(qa){return}qa=true;p4.abort("timeout");var qg=new Error("XMLHttpRequest timeout");qg.code="ETIMEDOUT";p9(qg)},r.timeout)}if(p4.setRequestHeader){for(qe in e){if(e.hasOwnProperty(qe)){p4.setRequestHeader(qe,e[qe])}}}else{if(r.headers&&!f7(r.headers)){throw new Error("Headers cannot be set on an XDomainRequest object")}}if("responseType" in r){p4.responseType=r.responseType}if("beforeSend" in r&&typeof r.beforeSend==="function"){r.beforeSend(p4)}p4.send(p7||null);return p4}function jg(r){try{if(r.responseType==="document"){return r.responseXML}var d=r.responseXML&&r.responseXML.documentElement.nodeName==="parsererror";if(r.responseType===""&&!d){return r.responseXML}}catch(i){}return null}function eS(){}kW["default"]=eX;var nP=function nP(e,d){var r=new cb.WebVTT.Parser(cb,cb.vttjs,cb.WebVTT.StringDecoder());var i=[];r.oncue=function(t){d.addCue(t)};r.onparsingerror=function(t){i.push(t)};r.onflush=function(){d.trigger({type:"loadeddata",target:d})};r.parse(e);if(i.length>0){if(cb.console&&cb.console.groupCollapsed){cb.console.groupCollapsed("Text Track parsing errors for "+d.src)}i.forEach(function(t){return aC.error(t)});if(cb.console&&cb.console.groupEnd){cb.console.groupEnd()}}r.flush()};var ex=function ex(r,d){var i={uri:r};var e=pq(r);if(e){i.cors=e}kW(i,j(this,function(on,t,p3){if(on){return aC.error(on,t)}d.loaded_=true;if(typeof cb.WebVTT!=="function"){if(d.tech_){d.tech_.any(["vttjsloaded","vttjserror"],function(p4){if(p4.type==="vttjserror"){aC.error("vttjs failed to load, stopping trying to process "+d.src);return}return nP(p3,d)})}}else{nP(p3,d)}}))};var bv=function(i){em(t,i);function t(qc){var p9;if(qc===void 0){qc={}}if(!qc.tech){throw new Error("A tech was not provided.")}var p5=nl(qc,{kind:e3[qc.kind]||"subtitles",language:qc.language||qc.srclang||""});var p8=pD[p5.mode]||"disabled";var p4=p5["default"];if(p5.kind==="metadata"||p5.kind==="chapters"){p8="hidden"}p9=i.call(this,p5)||this;p9.tech_=p5.tech;p9.cues_=[];p9.activeCues_=[];p9.preload_=p9.tech_.preloadTextTracks!==false;var p7=new mw(p9.cues_);var qb=new mw(p9.activeCues_);var p6=false;var on=j(gx(p9),function(){this.activeCues=this.activeCues;if(p6){this.trigger("cuechange");p6=false}});if(p8!=="disabled"){p9.tech_.ready(function(){p9.tech_.on("timeupdate",on)},true)}Object.defineProperties(gx(p9),{"default":{get:function p3(){return p4},set:function qa(){}},mode:{get:function p3(){return p8},set:function qa(qe){var qd=this;if(!pD[qe]){return}p8=qe;if(!this.preload_&&p8!=="disabled"&&this.cues.length===0){ex(this.src,this)}if(p8!=="disabled"){this.tech_.ready(function(){qd.tech_.on("timeupdate",on)},true)}else{this.tech_.off("timeupdate",on)}this.trigger("modechange")}},cues:{get:function p3(){if(!this.loaded_){return null}return p7},set:function qa(){}},activeCues:{get:function p3(){if(!this.loaded_){return null}if(this.cues.length===0){return qb}var qg=this.tech_.currentTime();var qi=[];for(var qf=0,qe=this.cues.length;qf<qe;qf++){var qd=this.cues[qf];if(qd.startTime<=qg&&qd.endTime>=qg){qi.push(qd)}else{if(qd.startTime===qd.endTime&&qd.startTime<=qg&&qd.startTime+0.5>=qg){qi.push(qd)}}}p6=false;if(qi.length!==this.activeCues_.length){p6=true}else{for(var qh=0;qh<qi.length;qh++){if(this.activeCues_.indexOf(qi[qh])===-1){p6=true}}}this.activeCues_=qi;qb.setCues_(this.activeCues_);return qb},set:function qa(){}}});if(p5.src){p9.src=p5.src;if(!p9.preload_){p9.loaded_=true}if(p9.preload_||p4||p5.kind!=="subtitles"&&p5.kind!=="captions"){ex(p9.src,gx(p9))}}else{p9.loaded_=true}return p9}var e=t.prototype;e.addCue=function r(p3){var on=p3;if(cb.vttjs&&!(p3 instanceof cb.vttjs.VTTCue)){on=new cb.vttjs.VTTCue(p3.startTime,p3.endTime,p3.text);for(var p6 in p3){if(!(p6 in on)){on[p6]=p3[p6]}}on.id=p3.id;on.originalCue_=p3}var p4=this.tech_.textTracks();for(var p5=0;p5<p4.length;p5++){if(p4[p5]!==this){p4[p5].removeCue(on)}}this.cues_.push(on);this.cues.setCues_(this.cues_)};e.removeCue=function d(p3){var p4=this.cues_.length;while(p4--){var on=this.cues_[p4];if(on===p3||on.originalCue_&&on.originalCue_===p3){this.cues_.splice(p4,1);this.cues.setCues_(this.cues_);break}}};return t}(lT);bv.prototype.allowedEvents_={cuechange:"cuechange"};var eO=function(d){em(e,d);function e(t){var p4;if(t===void 0){t={}}var on=nl(t,{kind:jD[t.kind]||""});p4=d.call(this,on)||this;var r=false;Object.defineProperty(gx(p4),"enabled",{get:function i(){return r},set:function p3(p5){if(typeof p5!=="boolean"||p5===r){return}r=p5;this.trigger("enabledchange")}});if(on.enabled){p4.enabled=on.enabled}p4.loaded_=true;return p4}return e}(lT);var lH=function(e){em(d,e);function d(r){var p4;if(r===void 0){r={}}var on=nl(r,{kind:ek[r.kind]||""});p4=e.call(this,on)||this;var t=false;Object.defineProperty(gx(p4),"selected",{get:function i(){return t},set:function p3(p5){if(typeof p5!=="boolean"||p5===t){return}t=p5;this.trigger("selectedchange")}});if(on.selected){p4.selected=on.selected}return p4}return d}(lT);var bi=0;var hV=1;var h1=2;var dE=3;var ok=function(e){em(d,e);function d(on){var p3;if(on===void 0){on={}}p3=e.call(this)||this;var i;var r=new bv(on);p3.kind=r.kind;p3.src=r.src;p3.srclang=r.language;p3.label=r.label;p3["default"]=r["default"];Object.defineProperties(gx(p3),{readyState:{get:function t(){return i}},track:{get:function t(){return r}}});i=bi;r.addEventListener("loadeddata",function(){i=h1;p3.trigger({type:"load",target:gx(p3)})});return p3}return d}(kF);ok.prototype.allowedEvents_={load:"load"};ok.NONE=bi;ok.LOADING=hV;ok.LOADED=h1;ok.ERROR=dE;var cU={audio:{ListClass:a9,TrackClass:eO,capitalName:"Audio"},video:{ListClass:mk,TrackClass:lH,capitalName:"Video"},text:{ListClass:nf,TrackClass:bv,capitalName:"Text"}};Object.keys(cU).forEach(function(d){cU[d].getterName=d+"Tracks";cU[d].privateName=d+"Tracks_"});var fJ={remoteText:{ListClass:nf,TrackClass:bv,capitalName:"RemoteText",getterName:"remoteTextTracks",privateName:"remoteTextTracks_"},remoteTextEl:{ListClass:mS,TrackClass:ok,capitalName:"RemoteTextTrackEls",getterName:"remoteTextTrackEls",privateName:"remoteTextTrackEls_"}};var li=ox({},cU,fJ);fJ.names=Object.keys(fJ);cU.names=Object.keys(cU);li.names=[].concat(fJ.names).concat(cU.names);var oJ=Object.create||function(){function d(){}return function(e){if(arguments.length!==1){throw new Error("Object.create shim only accepts one parameter.")}d.prototype=e;return new d()}}();function fH(e,d){this.name="ParsingError";this.code=e.code;this.message=d||e.message}fH.prototype=oJ(Error.prototype);fH.prototype.constructor=fH;fH.Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}};function kp(i){function e(on,r,t,p3){return(on|0)*3600+(r|0)*60+(t|0)+(p3|0)/1000}var d=i.match(/^(\d+):(\d{1,2})(:\d{1,2})?\.(\d{3})/);if(!d){return null}if(d[3]){return e(d[1],d[2],d[3].replace(":",""),d[4])}else{if(d[1]>59){return e(d[1],d[2],0,d[4])}else{return e(0,d[1],d[2],d[4])}}}function fZ(){this.values=oJ(null)}fZ.prototype={set:function n5(e,d){if(!this.get(e)&&d!==""){this.values[e]=d}},get:function f0(d,i,e){if(e){return this.has(d)?this.values[d]:i[e]}return this.has(d)?this.values[d]:i},has:function nC(d){return d in this.values},alt:function p(i,e,d){for(var r=0;r<d.length;++r){if(e===d[r]){this.set(i,e);break}}},integer:function pP(e,d){if(/^-?\d+$/.test(d)){this.set(e,parseInt(d,10))}},percent:function l1(i,e){var d;if(d=e.match(/^([\d]{1,3})(\.[\d]*)?%$/)){e=parseFloat(e);if(e>=0&&e<=100){this.set(i,e);return true}}return false}};function jG(p4,p6,on,t){var d=t?p4.split(t):[p4];for(var r in d){if(typeof d[r]!=="string"){continue}var p3=d[r].split(on);if(p3.length!==2){continue}var e=p3[0];var p5=p3[1];p6(e,p5)}}function bM(i,d,e){var p3=i;function t(){var p4=kp(i);if(p4===null){throw new fH(fH.Errors.BadTimeStamp,"Malformed timestamp: "+p3)}i=i.replace(/^[^\sa-zA-Z-]+/,"");return p4}function on(p5,p4){var p6=new fZ();jG(p5,function(qa,p9){switch(qa){case"region":for(var qb=e.length-1;qb>=0;qb--){if(e[qb].id===p9){p6.set(qa,e[qb].region);break}}break;case"vertical":p6.alt(qa,p9,["rl","lr"]);break;case"line":var qc=p9.split(","),p8=qc[0];p6.integer(qa,p8);p6.percent(qa,p8)?p6.set("snapToLines",false):null;p6.alt(qa,p8,["auto"]);if(qc.length===2){p6.alt("lineAlign",qc[1],["start","center","end"])}break;case"position":qc=p9.split(",");p6.percent(qa,qc[0]);if(qc.length===2){p6.alt("positionAlign",qc[1],["start","center","end"])}break;case"size":p6.percent(qa,p9);break;case"align":p6.alt(qa,p9,["start","center","end","left","right"]);break}},/:/,/\s/);p4.region=p6.get("region",null);p4.vertical=p6.get("vertical","");try{p4.line=p6.get("line","auto")}catch(p7){}p4.lineAlign=p6.get("lineAlign","start");p4.snapToLines=p6.get("snapToLines",true);p4.size=p6.get("size",100);try{p4.align=p6.get("align","center")}catch(p7){p4.align=p6.get("align","middle")}try{p4.position=p6.get("position","auto")}catch(p7){p4.position=p6.get("position",{start:0,left:0,center:50,middle:50,end:100,right:100},p4.align)}p4.positionAlign=p6.get("positionAlign",{start:"start",left:"start",center:"center",middle:"center",end:"end",right:"end"},p4.align)}function r(){i=i.replace(/^\s+/,"")}r();d.startTime=t();r();if(i.substr(0,3)!=="-->"){throw new fH(fH.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '-->'): "+p3)}i=i.substr(3);r();d.endTime=t();r();on(i,d)}var bw=eT.createElement("textarea");var nM={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"};var m={white:"rgba(255,255,255,1)",lime:"rgba(0,255,0,1)",cyan:"rgba(0,255,255,1)",red:"rgba(255,0,0,1)",yellow:"rgba(255,255,0,1)",magenta:"rgba(255,0,255,1)",blue:"rgba(0,0,255,1)",black:"rgba(0,0,0,1)"};var gV={v:"title",lang:"lang"};var mH={rt:"ruby"};function pm(p6,p8){function e(){if(!p8){return null}function qc(qd){p8=p8.substr(qd.length);return qd}var t=p8.match(/^([^<]*)(<[^>]*>?)?/);return qc(t[1]?t[1]:t[2])}function p4(t){bw.innerHTML=t;t=bw.textContent;bw.textContent="";return t}function p9(qc,t){return !mH[t.localName]||mH[t.localName]===qc.localName}function on(qf,t){var qe=nM[qf];if(!qe){return null}var qd=p6.document.createElement(qe);var qc=gV[qf];if(qc&&t){qd[qc]=t.trim()}return qd}var d=p6.document.createElement("div"),p5=d,qb,qa=[];while((qb=e())!==null){if(qb[0]==="<"){if(qb[1]==="/"){if(qa.length&&qa[qa.length-1]===qb.substr(2).replace(">","")){qa.pop();p5=p5.parentNode}continue}var p7=kp(qb.substr(1,qb.length-2));var r;if(p7){r=p6.document.createProcessingInstruction("timestamp",p7);p5.appendChild(r);continue}var i=qb.match(/^<([^.\s/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/);if(!i){continue}r=on(i[1],i[3]);if(!r){continue}if(!p9(p5,r)){continue}if(i[2]){var p3=i[2].split(".");p3.forEach(function(qc){var qe=/^bg_/.test(qc);var t=qe?qc.slice(3):qc;if(m.hasOwnProperty(t)){var qd=qe?"background-color":"color";var qf=m[t];r.style[qd]=qf}});r.className=p3.join(" ")}qa.push(i[1]);p5.appendChild(r);p5=r;continue}p5.appendChild(p6.document.createTextNode(p4(qb)))}return d}var i9=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,1114109]];function iP(e){for(var r=0;r<i9.length;r++){var d=i9[r];if(e>=d[0]&&e<=d[1]){return true}}return false}function fK(e){var p3=[],p4="",r;if(!e||!e.childNodes){return"ltr"}function d(p7,p6){for(var p5=p6.childNodes.length-1;p5>=0;p5--){p7.push(p6.childNodes[p5])}}function on(p6){if(!p6||!p6.length){return null}var p5=p6.pop(),p7=p5.textContent||p5.innerText;if(p7){var i=p7.match(/^.*(\n|\r)/);if(i){p6.length=0;return i[0]}return p7}if(p5.tagName==="ruby"){return on(p6)}if(p5.childNodes){d(p6,p5);return on(p6)}}d(p3,e);while(p4=on(p3)){for(var t=0;t<p4.length;t++){r=p4.charCodeAt(t);if(iP(r)){return"rtl"}}}return"ltr"}function D(d){if(typeof d.line==="number"&&(d.snapToLines||d.line>=0&&d.line<=100)){return d.line}if(!d.track||!d.track.textTrackList||!d.track.textTrackList.mediaElement){return -1}var e=d.track,on=e.textTrackList,t=0;for(var r=0;r<on.length&&on[r]!==e;r++){if(on[r].mode==="showing"){t++}}return ++t*-1}function hh(){}hh.prototype.applyStyles=function(d,i){i=i||this.div;for(var e in d){if(d.hasOwnProperty(e)){i.style[e]=d[e]}}};hh.prototype.formatStyle=function(e,d){return e===0?0:e+d};function iG(t,d,e){hh.call(this);this.cue=d;this.cueDiv=pm(t,d.text);var r={color:"rgba(255, 255, 255, 1)",backgroundColor:"rgba(0, 0, 0, 0.8)",position:"relative",left:0,right:0,top:0,bottom:0,display:"inline",writingMode:d.vertical===""?"horizontal-tb":d.vertical==="lr"?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext"};this.applyStyles(r,this.cueDiv);this.div=t.document.createElement("div");r={direction:fK(this.cueDiv),writingMode:d.vertical===""?"horizontal-tb":d.vertical==="lr"?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext",textAlign:d.align==="middle"?"center":d.align,font:e.font,whiteSpace:"pre-line",position:"absolute"};this.applyStyles(r);this.div.appendChild(this.cueDiv);var i=0;switch(d.positionAlign){case"start":i=d.position;break;case"center":i=d.position-d.size/2;break;case"end":i=d.position-d.size;break}if(d.vertical===""){this.applyStyles({left:this.formatStyle(i,"%"),width:this.formatStyle(d.size,"%")})}else{this.applyStyles({top:this.formatStyle(i,"%"),height:this.formatStyle(d.size,"%")})}this.move=function(on){this.applyStyles({top:this.formatStyle(on.top,"px"),bottom:this.formatStyle(on.bottom,"px"),left:this.formatStyle(on.left,"px"),right:this.formatStyle(on.right,"px"),height:this.formatStyle(on.height,"px"),width:this.formatStyle(on.width,"px")})}}iG.prototype=oJ(hh.prototype);iG.prototype.constructor=iG;function bd(on){var e,d,r,t;if(on.div){d=on.div.offsetHeight;r=on.div.offsetWidth;t=on.div.offsetTop;var i=(i=on.div.childNodes)&&(i=i[0])&&i.getClientRects&&i.getClientRects();on=on.div.getBoundingClientRect();e=i?Math.max(i[0]&&i[0].height||0,on.height/i.length):0}this.left=on.left;this.right=on.right;this.top=on.top||t;this.height=on.height||d;this.bottom=on.bottom||t+(on.height||d);this.width=on.width||r;this.lineHeight=e!==undefined?e:on.lineHeight}bd.prototype.move=function(e,d){d=d!==undefined?d:this.lineHeight;switch(e){case"+x":this.left+=d;this.right+=d;break;case"-x":this.left-=d;this.right-=d;break;case"+y":this.top+=d;this.bottom+=d;break;case"-y":this.top-=d;this.bottom-=d;break}};bd.prototype.overlaps=function(d){return this.left<d.right&&this.right>d.left&&this.top<d.bottom&&this.bottom>d.top};bd.prototype.overlapsAny=function(e){for(var d=0;d<e.length;d++){if(this.overlaps(e[d])){return true}}return false};bd.prototype.within=function(d){return this.top>=d.top&&this.bottom<=d.bottom&&this.left>=d.left&&this.right<=d.right};bd.prototype.overlapsOppositeAxis=function(d,e){switch(e){case"+x":return this.left<d.left;case"-x":return this.right>d.right;case"+y":return this.top<d.top;case"-y":return this.bottom>d.bottom}};bd.prototype.intersectPercentage=function(e){var d=Math.max(0,Math.min(this.right,e.right)-Math.max(this.left,e.left)),r=Math.max(0,Math.min(this.bottom,e.bottom)-Math.max(this.top,e.top)),i=d*r;return i/(this.height*this.width)};bd.prototype.toCSSCompatValues=function(d){return{top:this.top-d.top,bottom:d.bottom-this.bottom,left:this.left-d.left,right:d.right-this.right,height:this.height,width:this.width}};bd.getSimpleBoxPosition=function(t){var d=t.div?t.div.offsetHeight:t.tagName?t.offsetHeight:0;var i=t.div?t.div.offsetWidth:t.tagName?t.offsetWidth:0;var r=t.div?t.div.offsetTop:t.tagName?t.offsetTop:0;t=t.div?t.div.getBoundingClientRect():t.tagName?t.getBoundingClientRect():t;var e={left:t.left,right:t.right,top:t.top||r,height:t.height||d,bottom:t.bottom||r+(t.height||d),width:t.width||i};return e};function nh(p7,d,e,p8){function p9(qd,qh){var qi,qf=new bd(qd),qe=1;for(var qg=0;qg<qh.length;qg++){while(qd.overlapsOppositeAxis(e,qh[qg])||qd.within(e)&&qd.overlapsAny(p8)){qd.move(qh[qg])}if(qd.within(e)){return qd}var qj=qd.intersectPercentage(e);if(qe>qj){qi=new bd(qd);qe=qj}qd=new bd(qf)}return qi||qf}var i=new bd(d),p3=d.cue,qa=D(p3),on=[];if(p3.snapToLines){var qc;switch(p3.vertical){case"":on=["+y","-y"];qc="height";break;case"rl":on=["+x","-x"];qc="width";break;case"lr":on=["-x","+x"];qc="width";break}var t=i.lineHeight,p5=t*Math.round(qa),p4=e[qc]+t,r=on[0];if(Math.abs(p5)>p4){p5=p5<0?-1:1;p5*=Math.ceil(p4/t)*t}if(qa<0){p5+=p3.vertical===""?e.height:e.width;on=on.reverse()}i.move(r,p5)}else{var p6=i.lineHeight/e.height*100;switch(p3.lineAlign){case"center":qa-=p6/2;break;case"end":qa-=p6;break}switch(p3.vertical){case"":d.applyStyles({top:d.formatStyle(qa,"%")});break;case"rl":d.applyStyles({left:d.formatStyle(qa,"%")});break;case"lr":d.applyStyles({right:d.formatStyle(qa,"%")});break}on=["+y","-x","+x","-y"];i=new bd(d)}var qb=p9(i,on);d.move(qb.toCSSCompatValues(e))}function hl(){}hl.StringDecoder=function(){return{decode:function d(e){if(!e){return""}if(typeof e!=="string"){throw new Error("Error - expected string data.")}return decodeURIComponent(encodeURIComponent(e))}}};hl.convertCueToDOMTree=function(d,e){if(!d||!e){return null}return pm(d,e)};var jQ=0.05;var ho="sans-serif";var kw="1.5%";hl.processCues=function(p5,p4,t){if(!p5||!p4||!t){return null}while(t.firstChild){t.removeChild(t.firstChild)}var r=p5.document.createElement("div");r.style.position="absolute";r.style.left="0";r.style.right="0";r.style.top="0";r.style.bottom="0";r.style.margin=kw;t.appendChild(r);function e(p8){for(var p9=0;p9<p8.length;p9++){if(p8[p9].hasBeenReset||!p8[p9].displayState){return true}}return false}if(!e(p4)){for(var on=0;on<p4.length;on++){r.appendChild(p4[on].displayState)}return}var p6=[],d=bd.getSimpleBoxPosition(r),p7=Math.round(d.height*jQ*100)/100;var p3={font:p7+"px "+ho};(function(){var qa,p8;for(var p9=0;p9<p4.length;p9++){p8=p4[p9];qa=new iG(p5,p8,p3);r.appendChild(qa.div);nh(p5,qa,d,p6);p8.displayState=qa.div;p6.push(bd.getSimpleBoxPosition(qa))}})()};hl.Parser=function(e,d,i){if(!i){i=d;d={}}if(!d){d={}}this.window=e;this.vttjs=d;this.state="INITIAL";this.buffer="";this.decoder=i||new TextDecoder("utf8");this.regionList=[]};hl.Parser.prototype={reportOrThrowError:function dR(d){if(d instanceof fH){this.onparsingerror&&this.onparsingerror(d)}else{throw d}},parse:function lz(on){var p7=this;if(on){p7.buffer+=p7.decoder.decode(on,{stream:true})}function d(){var p9=p7.buffer;var qa=0;while(qa<p9.length&&p9[qa]!=="\r"&&p9[qa]!=="\n"){++qa}var e=p9.substr(0,qa);if(p9[qa]==="\r"){++qa}if(p9[qa]==="\n"){++qa}p7.buffer=p9.substr(qa);return e}function p6(e){var p9=new fZ();jG(e,function(qc,qb){switch(qc){case"id":p9.set(qc,qb);break;case"width":p9.percent(qc,qb);break;case"lines":p9.integer(qc,qb);break;case"regionanchor":case"viewportanchor":var qe=qb.split(",");if(qe.length!==2){break}var qd=new fZ();qd.percent("x",qe[0]);qd.percent("y",qe[1]);if(!qd.has("x")||!qd.has("y")){break}p9.set(qc+"X",qd.get("x"));p9.set(qc+"Y",qd.get("y"));break;case"scroll":p9.alt(qc,qb,["up"]);break}},/=/,/\s/);if(p9.has("id")){var qa=new (p7.vttjs.VTTRegion||p7.window.VTTRegion)();qa.width=p9.get("width",100);qa.lines=p9.get("lines",3);qa.regionAnchorX=p9.get("regionanchorX",0);qa.regionAnchorY=p9.get("regionanchorY",100);qa.viewportAnchorX=p9.get("viewportanchorX",0);qa.viewportAnchorY=p9.get("viewportanchorY",100);qa.scroll=p9.get("scroll","");p7.onregion&&p7.onregion(qa);p7.regionList.push({id:p9.get("id"),region:qa})}}function t(e){var p9=new fZ();jG(e,function(qb,qa){switch(qb){case"MPEGT":p9.integer(qb+"S",qa);break;case"LOCA":p9.set(qb+"L",kp(qa));break}},/[^\d]:/,/,/);p7.ontimestampmap&&p7.ontimestampmap({MPEGTS:p9.get("MPEGTS"),LOCAL:p9.get("LOCAL")})}function p5(e){if(e.match(/X-TIMESTAMP-MAP/)){jG(e,function(qa,p9){switch(qa){case"X-TIMESTAMP-MAP":t(p9);break}},/=/)}else{jG(e,function(qa,p9){switch(qa){case"Region":p6(p9);break}},/:/)}}try{var p8;if(p7.state==="INITIAL"){if(!/\r\n|\n/.test(p7.buffer)){return this}p8=d();var r=p8.match(/^WEBVTT([ \t].*)?$/);if(!r||!r[0]){throw new fH(fH.Errors.BadSignature)}p7.state="HEADER"}var i=false;while(p7.buffer){if(!/\r\n|\n/.test(p7.buffer)){return this}if(!i){p8=d()}else{i=false}switch(p7.state){case"HEADER":if(/:/.test(p8)){p5(p8)}else{if(!p8){p7.state="ID"}}continue;case"NOTE":if(!p8){p7.state="ID"}continue;case"ID":if(/^NOTE($|[ \t])/.test(p8)){p7.state="NOTE";break}if(!p8){continue}p7.cue=new (p7.vttjs.VTTCue||p7.window.VTTCue)(0,0,"");try{p7.cue.align="center"}catch(p4){p7.cue.align="middle"}p7.state="CUE";if(p8.indexOf("-->")===-1){p7.cue.id=p8;continue}case"CUE":try{bM(p8,p7.cue,p7.regionList)}catch(p4){p7.reportOrThrowError(p4);p7.cue=null;p7.state="BADCUE";continue}p7.state="CUETEXT";continue;case"CUETEXT":var p3=p8.indexOf("-->")!==-1;if(!p8||p3&&(i=true)){p7.oncue&&p7.oncue(p7.cue);p7.cue=null;p7.state="ID";continue}if(p7.cue.text){p7.cue.text+="\n"}p7.cue.text+=p8.replace(/\u2028/g,"\n").replace(/u2029/g,"\n");continue;case"BADCUE":if(!p8){p7.state="ID"}continue}}}catch(p4){p7.reportOrThrowError(p4);if(p7.state==="CUETEXT"&&p7.cue&&p7.oncue){p7.oncue(p7.cue)}p7.cue=null;p7.state=p7.state==="INITIAL"?"BADWEBVTT":"BADCUE"}return this},flush:function mR(){var d=this;try{d.buffer+=d.decoder.decode();if(d.cue||d.state==="HEADER"){d.buffer+="\n\n";d.parse()}if(d.state==="INITIAL"){throw new fH(fH.Errors.BadSignature)}}catch(i){d.reportOrThrowError(i)}d.onflush&&d.onflush();return this}};var k4=hl;var oC="auto";var iq={"":1,lr:1,rl:1};var c9={start:1,center:1,end:1,left:1,right:1,auto:1,"line-left":1,"line-right":1};function cu(e){if(typeof e!=="string"){return false}var d=iq[e.toLowerCase()];return d?e.toLowerCase():false}function az(d){if(typeof d!=="string"){return false}var e=c9[d.toLowerCase()];return e?d.toLowerCase():false}function an(qc,p4,qa){this.hasBeenReset=false;var t="";var e=false;var qf=qc;var qd=p4;var r=qa;var qb=null;var p5="";var p8=true;var d="auto";var p7="start";var on="auto";var i="auto";var p3=100;var p6="center";Object.defineProperties(this,{id:{enumerable:true,get:function qe(){return t},set:function p9(qg){t=""+qg}},pauseOnExit:{enumerable:true,get:function qe(){return e},set:function p9(qg){e=!!qg}},startTime:{enumerable:true,get:function qe(){return qf},set:function p9(qg){if(typeof qg!=="number"){throw new TypeError("Start time must be set to a number.")}qf=qg;this.hasBeenReset=true}},endTime:{enumerable:true,get:function qe(){return qd},set:function p9(qg){if(typeof qg!=="number"){throw new TypeError("End time must be set to a number.")}qd=qg;this.hasBeenReset=true}},text:{enumerable:true,get:function qe(){return r},set:function p9(qg){r=""+qg;this.hasBeenReset=true}},region:{enumerable:true,get:function qe(){return qb},set:function p9(qg){qb=qg;this.hasBeenReset=true}},vertical:{enumerable:true,get:function qe(){return p5},set:function p9(qh){var qg=cu(qh);if(qg===false){throw new SyntaxError("Vertical: an invalid or illegal direction string was specified.")}p5=qg;this.hasBeenReset=true}},snapToLines:{enumerable:true,get:function qe(){return p8},set:function p9(qg){p8=!!qg;this.hasBeenReset=true}},line:{enumerable:true,get:function qe(){return d},set:function p9(qg){if(typeof qg!=="number"&&qg!==oC){throw new SyntaxError("Line: an invalid number or illegal string was specified.")}d=qg;this.hasBeenReset=true}},lineAlign:{enumerable:true,get:function qe(){return p7},set:function p9(qh){var qg=az(qh);if(!qg){console.warn("lineAlign: an invalid or illegal string was specified.")}else{p7=qg;this.hasBeenReset=true}}},position:{enumerable:true,get:function qe(){return on},set:function p9(qg){if(qg<0||qg>100){throw new Error("Position must be between 0 and 100.")}on=qg;this.hasBeenReset=true}},positionAlign:{enumerable:true,get:function qe(){return i},set:function p9(qh){var qg=az(qh);if(!qg){console.warn("positionAlign: an invalid or illegal string was specified.")}else{i=qg;this.hasBeenReset=true}}},size:{enumerable:true,get:function qe(){return p3},set:function p9(qg){if(qg<0||qg>100){throw new Error("Size must be between 0 and 100.")}p3=qg;this.hasBeenReset=true}},align:{enumerable:true,get:function qe(){return p6},set:function p9(qh){var qg=az(qh);if(!qg){throw new SyntaxError("align: an invalid or illegal alignment string was specified.")}p6=qg;this.hasBeenReset=true}}});this.displayState=undefined}an.prototype.getCueAsHTML=function(){return WebVTT.convertCueToDOMTree(window,this.text)};var db=an;var iV={"":true,up:true};function p2(e){if(typeof e!=="string"){return false}var d=iV[e.toLowerCase()];return d?e.toLowerCase():false}function gS(d){return typeof d==="number"&&d>=0&&d<=100}function hT(){var on=100;var i=3;var p4=0;var p3=100;var e=0;var d=100;var t="";Object.defineProperties(this,{width:{enumerable:true,get:function r(){return on},set:function p5(p6){if(!gS(p6)){throw new Error("Width must be between 0 and 100.")}on=p6}},lines:{enumerable:true,get:function r(){return i},set:function p5(p6){if(typeof p6!=="number"){throw new TypeError("Lines must be set to a number.")}i=p6}},regionAnchorY:{enumerable:true,get:function r(){return p3},set:function p5(p6){if(!gS(p6)){throw new Error("RegionAnchorX must be between 0 and 100.")}p3=p6}},regionAnchorX:{enumerable:true,get:function r(){return p4},set:function p5(p6){if(!gS(p6)){throw new Error("RegionAnchorY must be between 0 and 100.")}p4=p6}},viewportAnchorY:{enumerable:true,get:function r(){return d},set:function p5(p6){if(!gS(p6)){throw new Error("ViewportAnchorY must be between 0 and 100.")}d=p6}},viewportAnchorX:{enumerable:true,get:function r(){return e},set:function p5(p6){if(!gS(p6)){throw new Error("ViewportAnchorX must be between 0 and 100.")}e=p6}},scroll:{enumerable:true,get:function r(){return t},set:function p5(p7){var p6=p2(p7);if(p6===false){console.warn("Scroll: an invalid or illegal string was specified.")}else{t=p6}}}})}var nG=hT;var o9=g8(function(i){var e=i.exports={WebVTT:k4,VTTCue:db,VTTRegion:nG};cb.vttjs=e;cb.WebVTT=e.WebVTT;var on=e.VTTCue;var t=e.VTTRegion;var r=cb.VTTCue;var d=cb.VTTRegion;e.shim=function(){cb.VTTCue=on;cb.VTTRegion=t};e.restore=function(){cb.VTTCue=r;cb.VTTRegion=d};if(!cb.VTTCue){e.shim()}});var kN=o9.WebVTT;var kM=o9.VTTCue;var kK=o9.VTTRegion;function bW(e,on,t,p3,r){if(r===void 0){r={}}var i=e.textTracks();r.kind=on;if(t){r.label=t}if(p3){r.language=p3}r.tech=e;var d=new li.text.TrackClass(r);i.addTrack(d);return d}var gG=function(qA){em(qa,qA);function qa(qC,qD){var qE;if(qC===void 0){qC={}}if(qD===void 0){qD=function qD(){}}qC.reportTouchActivity=false;qE=qA.call(this,null,qC,qD)||this;qE.hasStarted_=false;qE.on("playing",function(){this.hasStarted_=true});qE.on("loadstart",function(){this.hasStarted_=false});li.names.forEach(function(qF){var qG=li[qF];if(qC&&qC[qG.getterName]){qE[qG.privateName]=qC[qG.getterName]}});if(!qE.featuresProgressEvents){qE.manualProgressOn()}if(!qE.featuresTimeupdateEvents){qE.manualTimeUpdatesOn()}["Text","Audio","Video"].forEach(function(qF){if(qC["native"+qF+"Tracks"]===false){qE["featuresNative"+qF+"Tracks"]=false}});if(qC.nativeCaptions===false||qC.nativeTextTracks===false){qE.featuresNativeTextTracks=false}else{if(qC.nativeCaptions===true||qC.nativeTextTracks===true){qE.featuresNativeTextTracks=true}}if(!qE.featuresNativeTextTracks){qE.emulateTextTracks()}qE.preloadTextTracks=qC.preloadTextTracks!==false;qE.autoRemoteTextTracks_=new li.text.ListClass();qE.initTrackListeners();if(!qC.nativeControlsForTouch){qE.emitTapEvents()}if(qE.constructor){qE.name_=qE.constructor.name||"Unknown Tech"}return qE}var p8=qa.prototype;p8.triggerSourceset=function p9(qD){var qC=this;if(!this.isReady_){this.one("ready",function(){return qC.setTimeout(function(){return qC.triggerSourceset(qD)},1)})}this.trigger({src:qD,type:"sourceset"})};p8.manualProgressOn=function e(){this.on("durationchange",this.onDurationChange);this.manualProgress=true;this.one("ready",this.trackProgress)};p8.manualProgressOff=function qd(){this.manualProgress=false;this.stopTrackingProgress();this.off("durationchange",this.onDurationChange)};p8.trackProgress=function p5(qC){this.stopTrackingProgress();this.progressInterval=this.setInterval(j(this,function(){var qD=this.bufferedPercent();if(this.bufferedPercent_!==qD){this.trigger("progress")}this.bufferedPercent_=qD;if(qD===1){this.stopTrackingProgress()}}),500)};p8.onDurationChange=function qi(qC){this.duration_=this.duration()};p8.buffered=function qy(){return R(0,0)};p8.bufferedPercent=function qo(){return fI(this.buffered(),this.duration_)};p8.stopTrackingProgress=function qv(){this.clearInterval(this.progressInterval)};p8.manualTimeUpdatesOn=function qb(){this.manualTimeUpdates=true;this.on("play",this.trackCurrentTime);this.on("pause",this.stopTrackingCurrentTime)};p8.manualTimeUpdatesOff=function qg(){this.manualTimeUpdates=false;this.stopTrackingCurrentTime();this.off("play",this.trackCurrentTime);this.off("pause",this.stopTrackingCurrentTime)};p8.trackCurrentTime=function qB(){if(this.currentTimeInterval){this.stopTrackingCurrentTime()}this.currentTimeInterval=this.setInterval(function(){this.trigger({type:"timeupdate",target:this,manuallyTriggered:true})},250)};p8.stopTrackingCurrentTime=function qj(){this.clearInterval(this.currentTimeInterval);this.trigger({type:"timeupdate",target:this,manuallyTriggered:true})};p8.dispose=function qc(){this.clearTracks(cU.names);if(this.manualProgress){this.manualProgressOff()}if(this.manualTimeUpdates){this.manualTimeUpdatesOff()}qA.prototype.dispose.call(this)};p8.clearTracks=function qz(qC){var qD=this;qC=[].concat(qC);qC.forEach(function(qG){var qH=qD[qG+"Tracks"]()||[];var qF=qH.length;while(qF--){var qE=qH[qF];if(qG==="text"){qD.removeRemoteTextTrack(qE)}qH.removeTrack(qE)}})};p8.cleanupAutoTextTracks=function qt(){var qE=this.autoRemoteTextTracks_||[];var qD=qE.length;while(qD--){var qC=qE[qD];this.removeRemoteTextTrack(qC)}};p8.reset=function qq(){};p8.error=function qe(qC){if(qC!==undefined){this.error_=new eW(qC);this.trigger("error")}return this.error_};p8.played=function i(){if(this.hasStarted_){return R(0,0)}return R()};p8.setCurrentTime=function p3(){if(this.manualTimeUpdates){this.trigger({type:"timeupdate",target:this,manuallyTriggered:true})}};p8.initTrackListeners=function qh(){var qC=this;cU.names.forEach(function(qE){var qG=cU[qE];var qF=function qF(){qC.trigger(qE+"trackchange")};var qD=qC[qG.getterName]();qD.addEventListener("removetrack",qF);qD.addEventListener("addtrack",qF);qC.on("dispose",function(){qD.removeEventListener("removetrack",qF);qD.removeEventListener("addtrack",qF)})})};p8.addWebVttScript_=function p7(){var qD=this;if(cb.WebVTT){return}if(eT.body.contains(this.el())){if(!this.options_["vtt.js"]&&fv(o9)&&Object.keys(o9).length>0){this.trigger("vttjsloaded");return}var qC=eT.createElement("script");qC.src=this.options_["vtt.js"]||"https://vjs.zencdn.net/vttjs/0.14.1/vtt.min.js";qC.onload=function(){qD.trigger("vttjsloaded")};qC.onerror=function(){qD.trigger("vttjserror")};this.on("dispose",function(){qC.onload=null;qC.onerror=null});cb.WebVTT=true;this.el().parentNode.appendChild(qC)}else{this.ready(this.addWebVttScript_)}};p8.emulateTextTracks=function qs(){var qD=this;var qF=this.textTracks();var qG=this.remoteTextTracks();var qC=function qC(qJ){return qF.addTrack(qJ.track)};var qI=function qI(qJ){return qF.removeTrack(qJ.track)};qG.on("addtrack",qC);qG.on("removetrack",qI);this.addWebVttScript_();var qH=function qH(){return qD.trigger("texttrackchange")};var qE=function qE(){qH();for(var qK=0;qK<qF.length;qK++){var qJ=qF[qK];qJ.removeEventListener("cuechange",qH);if(qJ.mode==="showing"){qJ.addEventListener("cuechange",qH)}}};qE();qF.addEventListener("change",qE);qF.addEventListener("addtrack",qE);qF.addEventListener("removetrack",qE);this.on("dispose",function(){qG.off("addtrack",qC);qG.off("removetrack",qI);qF.removeEventListener("change",qE);qF.removeEventListener("addtrack",qE);qF.removeEventListener("removetrack",qE);for(var qK=0;qK<qF.length;qK++){var qJ=qF[qK];qJ.removeEventListener("cuechange",qH)}})};p8.addTextTrack=function qk(qD,qC,qE){if(!qD){throw new Error("TextTrack kind is required but was not provided")}return bW(this,qD,qC,qE)};p8.createRemoteTextTrack=function qp(qD){var qC=nl(qD,{tech:this});return new fJ.remoteTextEl.TrackClass(qC)};p8.addRemoteTextTrack=function r(qD,qE){var qC=this;if(qD===void 0){qD={}}var qF=this.createRemoteTextTrack(qD);if(qE!==true&&qE!==false){aC.warn('Calling addRemoteTextTrack without explicitly setting the "manualCleanup" parameter to `true` is deprecated and default to `false` in future version of video.js');qE=true}this.remoteTextTrackEls().addTrackElement_(qF);this.remoteTextTracks().addTrack(qF.track);if(qE!==true){this.ready(function(){return qC.autoRemoteTextTracks_.addTrack(qF.track)})}return qF};p8.removeRemoteTextTrack=function qr(qC){var qD=this.remoteTextTrackEls().getTrackElementByTrack_(qC);this.remoteTextTrackEls().removeTrackElement_(qD);this.remoteTextTracks().removeTrack(qC);this.autoRemoteTextTracks_.removeTrack(qC)};p8.getVideoPlaybackQuality=function qn(){return{}};p8.requestPictureInPicture=function qx(){var qC=this.options_.Promise||cb.Promise;if(qC){return qC.reject()}};p8.setPoster=function qm(){};p8.playsinline=function ql(){};p8.setPlaysinline=function qw(){};p8.overrideNativeAudioTracks=function qu(){};p8.overrideNativeVideoTracks=function p4(){};p8.canPlayType=function qf(){return""};qa.canPlayType=function qf(){return""};qa.canPlaySource=function on(qD,qC){return qa.canPlayType(qD.type)};qa.isTech=function t(qC){return qC.prototype instanceof qa||qC instanceof qa||qC===qa};qa.registerTech=function p6(qD,qC){if(!qa.techs_){qa.techs_={}}if(!qa.isTech(qC)){throw new Error("Tech "+qD+" must be a Tech")}if(!qa.canPlayType){throw new Error("Techs must have a static canPlayType method on them")}if(!qa.canPlaySource){throw new Error("Techs must have a static canPlaySource method on them")}qD=ac(qD);qa.techs_[qD]=qC;qa.techs_[ar(qD)]=qC;if(qD!=="Tech"){qa.defaultTechOrder_.push(qD)}return qC};qa.getTech=function d(qC){if(!qC){return}if(qa.techs_&&qa.techs_[qC]){return qa.techs_[qC]}qC=ac(qC);if(cb&&cb.videojs&&cb.videojs[qC]){aC.warn("The "+qC+" tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)");return cb.videojs[qC]}};return qa}(pO);li.names.forEach(function(d){var e=li[d];gG.prototype[e.getterName]=function(){this[e.privateName]=this[e.privateName]||new e.ListClass();return this[e.privateName]}});gG.prototype.featuresVolumeControl=true;gG.prototype.featuresMuteControl=true;gG.prototype.featuresFullscreenResize=false;gG.prototype.featuresPlaybackRate=false;gG.prototype.featuresProgressEvents=false;gG.prototype.featuresSourceset=false;gG.prototype.featuresTimeupdateEvents=false;gG.prototype.featuresNativeTextTracks=false;gG.withSourceHandlers=function(d){d.registerSourceHandler=function(t,r){var i=d.sourceHandlers;if(!i){i=d.sourceHandlers=[]}if(r===undefined){r=i.length}i.splice(r,0,t)};d.canPlayType=function(on){var r=d.sourceHandlers||[];var p3;for(var t=0;t<r.length;t++){p3=r[t].canPlayType(on);if(p3){return p3}}return""};d.selectSourceHandler=function(p4,t){var r=d.sourceHandlers||[];var p3;for(var on=0;on<r.length;on++){p3=r[on].canHandleSource(p4,t);if(p3){return r[on]}}return null};d.canPlaySource=function(r,i){var t=d.selectSourceHandler(r,i);if(t){return t.canHandleSource(r,i)}return""};var e=["seekable","seeking","duration"];e.forEach(function(r){var i=this[r];if(typeof i!=="function"){return}this[r]=function(){if(this.sourceHandler_&&this.sourceHandler_[r]){return this.sourceHandler_[r].apply(this.sourceHandler_,arguments)}return i.apply(this,arguments)}},d.prototype);d.prototype.setSource=function(r){var i=d.selectSourceHandler(r,this.options_);if(!i){if(d.nativeSourceHandler){i=d.nativeSourceHandler}else{aC.error("No source handler found for the current source.")}}this.disposeSourceHandler();this.off("dispose",this.disposeSourceHandler);if(i!==d.nativeSourceHandler){this.currentSource_=r}this.sourceHandler_=i.handleSource(r,this,this.options_);this.one("dispose",this.disposeSourceHandler)};d.prototype.disposeSourceHandler=function(){if(this.currentSource_){this.clearTracks(["audio","video"]);this.currentSource_=null}this.cleanupAutoTextTracks();if(this.sourceHandler_){if(this.sourceHandler_.dispose){this.sourceHandler_.dispose()}this.sourceHandler_=null}}};pO.registerComponent("Tech",gG);gG.registerTech("Tech",gG);gG.defaultTechOrder_=[];var pH={};var et={};var eJ={};function fo(e,d){pH[e]=pH[e]||[];pH[e].push(d)}function lD(d,i,e){d.setTimeout(function(){return nn(i,pH[i.type],e,d)},1)}function aY(d,e){d.forEach(function(i){return i.setTech&&i.setTech(e)})}function f0(d,e,i){return d.reduceRight(fL(i),e[i]())}function n5(e,i,r,d){return i[r](e.reduce(fL(r),d))}function gv(e,r,p4,d){if(d===void 0){d=null}var i="call"+ac(p4);var t=e.reduce(fL(i),d);var p3=t===eJ;var on=p3?null:r[p4](t);m0(e,p4,on,p3);return on}var hX={buffered:1,currentTime:1,duration:1,muted:1,played:1,paused:1,seekable:1,volume:1};var i3={setCurrentTime:1,setMuted:1,setVolume:1};var ed={play:1,pause:1};function fL(d){return function(e,i){if(e===eJ){return eJ}if(i[d]){return i[d](e)}return e}}function m0(e,p3,t,r){for(var d=e.length-1;d>=0;d--){var on=e[d];if(on[p3]){on[p3](r,t)}}}function gF(d){et[d.id()]=null}function cw(t,d){var on=et[t.id()];var p5=null;if(on===undefined||on===null){p5=d(t);et[t.id()]=[[d,p5]];return p5}for(var r=0;r<on.length;r++){var p4=on[r],p3=p4[0],e=p4[1];if(p3!==d){continue}p5=e}if(p5===null){p5=d(t);on.push([d,p5])}return p5}function nn(d,p3,on,p4,t,r){if(d===void 0){d={}}if(p3===void 0){p3=[]}if(t===void 0){t=[]}if(r===void 0){r=false}var e=p3,p6=e[0],i=e.slice(1);if(typeof p6==="string"){nn(d,pH[p6],on,p4,t,r)}else{if(p6){var p5=cw(p4,p6);if(!p5.setSource){t.push(p5);return nn(d,i,on,p4,t,r)}p5.setSource(pr({},d),function(p7,p8){if(p7){return nn(d,i,on,p4,t,r)}t.push(p5);nn(p8,d.type===p8.type?i:pH[p8.type],on,p4,t,r)})}else{if(i.length){nn(d,i,on,p4,t,r)}else{if(r){on(d,t)}else{nn(d,pH["*"],on,p4,t,true)}}}}}var fa={opus:"video/ogg",ogv:"video/ogg",mp4:"video/mp4",mov:"video/mp4",m4v:"video/mp4",mkv:"video/x-matroska",m4a:"audio/mp4",mp3:"audio/mpeg",aac:"audio/aac",oga:"audio/ogg",m3u8:"application/x-mpegURL",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",png:"image/png",svg:"image/svg+xml",webp:"image/webp"};var oI=function oI(i){if(i===void 0){i=""}var e=dC(i);var d=fa[e.toLowerCase()];return d||""};var lY=function lY(t,p3){if(!p3){return""}if(t.cache_.source.src===p3&&t.cache_.source.type){return t.cache_.source.type}var d=t.cache_.sources.filter(function(i){return i.src===p3});if(d.length){return d[0].type}var e=t.$$("source");for(var r=0;r<e.length;r++){var on=e[r];if(on.type&&on.src&&on.src===p3){return on.type}}return oI(p3)};var lN=function lN(e){if(Array.isArray(e)){var d=[];e.forEach(function(i){i=lN(i);if(Array.isArray(i)){d=d.concat(i)}else{if(ci(i)){d.push(i)}}});e=d}else{if(typeof e==="string"&&e.trim()){e=[k5({src:e})]}else{if(ci(e)&&typeof e.src==="string"&&e.src&&e.src.trim()){e=[k5(e)]}else{e=[]}}}return e};function k5(e){if(!e.type){var d=oI(e.src);if(d){e.type=d}}return e}var jz=function(d){em(e,d);function e(p6,p8,p5){var on;var p7=nl({createEl:false},p8);on=d.call(this,p6,p7,p5)||this;if(!p8.playerOptions.sources||p8.playerOptions.sources.length===0){for(var t=0,r=p8.playerOptions.techOrder;t<r.length;t++){var p4=ac(r[t]);var p3=gG.getTech(p4);if(!p4){p3=pO.getComponent(p4)}if(p3&&p3.isSupported()){p6.loadTech_(p4);break}}}else{p6.src(p8.playerOptions.sources)}return on}return e}(pO);pO.registerComponent("MediaLoader",jz);var eu=function(p7){em(p5,p7);function p5(qa,p9){var qb;qb=p7.call(this,qa,p9)||this;qb.emitTapEvents();qb.enable();return qb}var p6=p5.prototype;p6.createEl=function p3(p9,qc,qa){if(p9===void 0){p9="div"}if(qc===void 0){qc={}}if(qa===void 0){qa={}}qc=pr({innerHTML:'<span aria-hidden="true" class="vjs-icon-placeholder"></span>',className:this.buildCSSClass(),tabIndex:0},qc);if(p9==="button"){aC.error("Creating a ClickableComponent with an HTML element of "+p9+" is not supported; use a Button instead.")}qa=pr({role:"button"},qa);this.tabIndex_=qc.tabIndex;var qb=p7.prototype.createEl.call(this,p9,qc,qa);this.createControlTextEl(qb);return qb};p6.dispose=function p8(){this.controlTextEl_=null;p7.prototype.dispose.call(this)};p6.createControlTextEl=function r(p9){this.controlTextEl_=p3("span",{className:"vjs-control-text"},{"aria-live":"polite"});if(p9){p9.appendChild(this.controlTextEl_)}this.controlText(this.controlText_,p9);return this.controlTextEl_};p6.controlText=function e(qa,p9){if(p9===void 0){p9=this.el()}if(qa===undefined){return this.controlText_||"Need Text"}var qb=this.localize(qa);this.controlText_=qa;du(this.controlTextEl_,qb);if(!this.nonIconControl){p9.setAttribute("title",qb)}};p6.buildCSSClass=function p4(){return"vjs-control vjs-button "+p7.prototype.buildCSSClass.call(this)};p6.enable=function t(){if(!this.enabled_){this.enabled_=true;this.removeClass("vjs-disabled");this.el_.setAttribute("aria-disabled","false");if(typeof this.tabIndex_!=="undefined"){this.el_.setAttribute("tabIndex",this.tabIndex_)}this.on(["tap","click"],this.handleClick);this.on("keydown",this.handleKeyDown)}};p6.disable=function i(){this.enabled_=false;this.addClass("vjs-disabled");this.el_.setAttribute("aria-disabled","true");if(typeof this.tabIndex_!=="undefined"){this.el_.removeAttribute("tabIndex")}this.off("mouseover",this.handleMouseOver);this.off("mouseout",this.handleMouseOut);this.off(["tap","click"],this.handleClick);this.off("keydown",this.handleKeyDown)};p6.handleClick=function on(p9){if(this.options_.clickHandler){this.options_.clickHandler.call(this,arguments)}};p6.handleKeyDown=function d(p9){if(fM.isEventKey(p9,"Space")||fM.isEventKey(p9,"Enter")){p9.preventDefault();p9.stopPropagation();this.trigger("click")}else{p7.prototype.handleKeyDown.call(this,p9)}};return p5}(pO);pO.registerComponent("ClickableComponent",eu);var jb=function(p3){em(r,p3);function r(p6,p5){var p7;p7=p3.call(this,p6,p5)||this;p7.update();p6.on("posterchange",j(gx(p7),p7.update));return p7}var d=r.prototype;d.dispose=function on(){this.player().off("posterchange",this.update);p3.prototype.dispose.call(this)};d.createEl=function i(){var p5=ms("div",{className:"vjs-poster",tabIndex:-1});return p5};d.update=function p4(p6){var p5=this.player().poster();this.setSrc(p5);if(p5){this.show()}else{this.hide()}};d.setSrc=function t(p5){var p6="";if(p5){p6='url("'+p5+'")'}this.el_.style.backgroundImage=p6};d.handleClick=function e(p6){if(!this.player_.controls()){return}var p5=this.player_.usingPlugin("eme")&&this.player_.eme.sessions&&this.player_.eme.sessions.length>0;if(this.player_.tech(true)&&!((cL||cA)&&p5)){this.player_.tech(true).focus()}if(this.player_.paused()){ai(this.player_.play())}else{this.player_.pause()}};return r}(eu);pO.registerComponent("PosterImage",jb);var om="#222";var oA="#ccc";var ol={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'};function x(d,e){var i;if(d.length===4){i=d[1]+d[1]+d[2]+d[2]+d[3]+d[3]}else{if(d.length===7){i=d.slice(1)}else{throw new Error("Invalid color code provided, "+d+"; must be formatted as e.g. #f0e or #f604e2.")}}return"rgba("+parseInt(i.slice(0,2),16)+","+parseInt(i.slice(2,4),16)+","+parseInt(i.slice(4,6),16)+","+e+")"}function mT(i,d,t){try{i.style[d]=t}catch(r){return}}var dw=function(p3){em(p6,p3);function p6(p8,p7,p9){var qb;qb=p3.call(this,p8,p7,p9)||this;var qa=j(gx(qb),qb.updateDisplay);p8.on("loadstart",j(gx(qb),qb.toggleDisplay));p8.on("texttrackchange",qa);p8.on("loadedmetadata",j(gx(qb),qb.preselectTrack));p8.ready(j(gx(qb),function(){if(p8.tech_&&p8.tech_.featuresNativeTextTracks){this.hide();return}p8.on("fullscreenchange",qa);p8.on("playerresize",qa);cb.addEventListener("orientationchange",qa);p8.on("dispose",function(){return cb.removeEventListener("orientationchange",qa)});var qc=this.options_.playerOptions.tracks||[];for(var qd=0;qd<qc.length;qd++){this.player_.addRemoteTextTrack(qc[qd],true)}this.preselectTrack()}));return qb}var t=p6.prototype;t.preselectTrack=function p4(){var qb={captions:1,subtitles:1};var qc=this.player_.textTracks();var qa=this.player_.cache_.selectedLanguage;var p7;var qe;var qd;for(var p9=0;p9<qc.length;p9++){var p8=qc[p9];if(qa&&qa.enabled&&qa.language&&qa.language===p8.language&&p8.kind in qb){if(p8.kind===qa.kind){qd=p8}else{if(!qd){qd=p8}}}else{if(qa&&!qa.enabled){qd=null;p7=null;qe=null}else{if(p8["default"]){if(p8.kind==="descriptions"&&!p7){p7=p8}else{if(p8.kind in qb&&!qe){qe=p8}}}}}}if(qd){qd.mode="showing"}else{if(qe){qe.mode="showing"}else{if(p7){p7.mode="showing"}}}};t.toggleDisplay=function on(){if(this.player_.tech_&&this.player_.tech_.featuresNativeTextTracks){this.hide()}else{this.show()}};t.createEl=function e(){return p3.prototype.createEl.call(this,"div",{className:"vjs-text-track-display"},{"aria-live":"off","aria-atomic":"true"})};t.clearDisplay=function r(){if(typeof cb.WebVTT==="function"){cb.WebVTT.processCues(cb,[],this.el_)}};t.updateDisplay=function d(){var qe=this.player_.textTracks();var p9=this.options_.allowMultipleShowingTracks;this.clearDisplay();if(p9){var p8=[];for(var qb=0;qb<qe.length;++qb){var p7=qe[qb];if(p7.mode!=="showing"){continue}p8.push(p7)}this.updateForTrack(p8);return}var qd=null;var qf=null;var qc=qe.length;while(qc--){var qa=qe[qc];if(qa.mode==="showing"){if(qa.kind==="descriptions"){qd=qa}else{qf=qa}}}if(qf){if(this.getAttribute("aria-live")!=="off"){this.setAttribute("aria-live","off")}this.updateForTrack(qf)}else{if(qd){if(this.getAttribute("aria-live")!=="assertive"){this.setAttribute("aria-live","assertive")}this.updateForTrack(qd)}}};t.updateDisplayState=function i(p9){var qd=this.player_.textTrackSettings.getValues();var qa=p9.activeCues;var qb=qa.length;while(qb--){var p8=qa[qb];if(!p8){continue}var p7=p8.displayState;if(qd.color){p7.firstChild.style.color=qd.color}if(qd.textOpacity){mT(p7.firstChild,"color",x(qd.color||"#fff",qd.textOpacity))}if(qd.backgroundColor){p7.firstChild.style.backgroundColor=qd.backgroundColor}if(qd.backgroundOpacity){mT(p7.firstChild,"backgroundColor",x(qd.backgroundColor||"#000",qd.backgroundOpacity))}if(qd.windowColor){if(qd.windowOpacity){mT(p7,"backgroundColor",x(qd.windowColor,qd.windowOpacity))}else{p7.style.backgroundColor=qd.windowColor}}if(qd.edgeStyle){if(qd.edgeStyle==="dropshadow"){p7.firstChild.style.textShadow="2px 2px 3px "+om+", 2px 2px 4px "+om+", 2px 2px 5px "+om}else{if(qd.edgeStyle==="raised"){p7.firstChild.style.textShadow="1px 1px "+om+", 2px 2px "+om+", 3px 3px "+om}else{if(qd.edgeStyle==="depressed"){p7.firstChild.style.textShadow="1px 1px "+oA+", 0 1px "+oA+", -1px -1px "+om+", 0 -1px "+om}else{if(qd.edgeStyle==="uniform"){p7.firstChild.style.textShadow="0 0 4px "+om+", 0 0 4px "+om+", 0 0 4px "+om+", 0 0 4px "+om}}}}}if(qd.fontPercent&&qd.fontPercent!==1){var qc=cb.parseFloat(p7.style.fontSize);p7.style.fontSize=qc*qd.fontPercent+"px";p7.style.height="auto";p7.style.top="auto";p7.style.bottom="2px"}if(qd.fontFamily&&qd.fontFamily!=="default"){if(qd.fontFamily==="small-caps"){p7.firstChild.style.fontVariant="small-caps"}else{p7.firstChild.style.fontFamily=ol[qd.fontFamily]}}}};t.updateForTrack=function p5(qd){if(!Array.isArray(qd)){qd=[qd]}if(typeof cb.WebVTT!=="function"||qd.every(function(qg){return !qg.activeCues})){return}var qc=[];for(var qb=0;qb<qd.length;++qb){var p8=qd[qb];for(var qa=0;qa<p8.activeCues.length;++qa){qc.push(p8.activeCues[qa])}}cb.WebVTT.processCues(cb,qc,this.el_);for(var qe=0;qe<qd.length;++qe){var qf=qd[qe];for(var p9=0;p9<qf.activeCues.length;++p9){var p7=qf.activeCues[p9].displayState;h0(p7,"vjs-text-track-cue");h0(p7,"vjs-text-track-cue-"+(qf.language?qf.language:qe))}if(this.player_.textTrackSettings){this.updateDisplayState(qf)}}};return p6}(pO);pO.registerComponent("TextTrackDisplay",dw);var dd=function(i){em(e,i);function e(){return i.apply(this,arguments)||this}var d=e.prototype;d.createEl=function r(){var p4=this.player_.isAudio();var p3=this.localize(p4?"Audio Player":"Video Player");var t=ms("span",{className:"vjs-control-text",innerHTML:this.localize("{1} is loading.",[p3])});var on=i.prototype.createEl.call(this,"div",{className:"vjs-loading-spinner",dir:"ltr"});on.appendChild(t);return on};return e}(pO);pO.registerComponent("LoadingSpinner",dd);var fp=function(p3){em(i,p3);function i(){return p3.apply(this,arguments)||this}var e=i.prototype;e.createEl=function d(p5,p8,p6){if(p8===void 0){p8={}}if(p6===void 0){p6={}}p5="button";p8=pr({innerHTML:'<span aria-hidden="true" class="vjs-icon-placeholder"></span>',className:this.buildCSSClass()},p8);p6=pr({type:"button"},p6);var p7=pO.prototype.createEl.call(this,p5,p8,p6);this.createControlTextEl(p7);return p7};e.addChild=function p4(p7,p5){if(p5===void 0){p5={}}var p6=this.constructor.name;aC.warn("Adding an actionable (user controllable) child to a Button ("+p6+") is not supported; use a ClickableComponent instead.");return pO.prototype.addChild.call(this,p7,p5)};e.enable=function on(){p3.prototype.enable.call(this);this.el_.removeAttribute("disabled")};e.disable=function t(){p3.prototype.disable.call(this);this.el_.setAttribute("disabled","disabled")};e.handleKeyDown=function r(p5){if(fM.isEventKey(p5,"Space")||fM.isEventKey(p5,"Enter")){p5.stopPropagation();return}p3.prototype.handleKeyDown.call(this,p5)};return i}(eu);pO.registerComponent("Button",fp);var iw=function(p3){em(d,p3);function d(p5,p4){var p6;p6=p3.call(this,p5,p4)||this;p6.mouseused_=false;p6.on("mousedown",p6.handleMouseDown);return p6}var i=d.prototype;i.buildCSSClass=function e(){return"vjs-big-play-button"};i.handleClick=function r(p9){var p7=this.player_.play();if(this.mouseused_&&p9.clientX&&p9.clientY){var p8=this.player_.usingPlugin("eme")&&this.player_.eme.sessions&&this.player_.eme.sessions.length>0;ai(p7);if(this.player_.tech(true)&&!((cL||cA)&&p8)){this.player_.tech(true).focus()}return}var p4=this.player_.getChild("controlBar");var p6=p4&&p4.getChild("playToggle");if(!p6){this.player_.tech(true).focus();return}var p5=function p5(){return p6.focus()};if(bL(p7)){p7.then(p5,function(){})}else{this.setTimeout(p5,1)}};i.handleKeyDown=function t(p4){this.mouseused_=false;p3.prototype.handleKeyDown.call(this,p4)};i.handleMouseDown=function on(p4){this.mouseused_=true};return d}(fp);iw.prototype.controlText_="Play Video";pO.registerComponent("BigPlayButton",iw);var fu=function(on){em(t,on);function t(p4,p3){var p5;p5=on.call(this,p4,p3)||this;p5.controlText(p3&&p3.controlText||p5.localize("Close"));return p5}var e=t.prototype;e.buildCSSClass=function d(){return"vjs-close-button "+on.prototype.buildCSSClass.call(this)};e.handleClick=function i(p3){this.trigger({type:"close",bubbles:false})};e.handleKeyDown=function r(p3){if(fM.isEventKey(p3,"Esc")){p3.preventDefault();p3.stopPropagation();this.trigger("click")}else{on.prototype.handleKeyDown.call(this,p3)}};return t}(fp);pO.registerComponent("CloseButton",fu);var hi=function(e){em(r,e);function r(p7,p6){var p8;if(p6===void 0){p6={}}p8=e.call(this,p7,p6)||this;p6.replay=p6.replay===undefined||p6.replay;p8.on(p7,"play",p8.handlePlay);p8.on(p7,"pause",p8.handlePause);if(p6.replay){p8.on(p7,"ended",p8.handleEnded)}return p8}var p5=r.prototype;p5.buildCSSClass=function p3(){return"vjs-play-control "+e.prototype.buildCSSClass.call(this)};p5.handleClick=function t(p6){if(this.player_.paused()){this.player_.play()}else{this.player_.pause()}};p5.handleSeeked=function p4(p6){this.removeClass("vjs-ended");if(this.player_.paused()){this.handlePause(p6)}else{this.handlePlay(p6)}};p5.handlePlay=function d(p6){this.removeClass("vjs-ended");this.removeClass("vjs-paused");this.addClass("vjs-playing");this.controlText("Pause")};p5.handlePause=function on(p6){this.removeClass("vjs-playing");this.addClass("vjs-paused");this.controlText("Play")};p5.handleEnded=function i(p6){this.removeClass("vjs-playing");this.addClass("vjs-ended");this.controlText("Replay");this.one(this.player_,"seeked",this.handleSeeked)};return r}(fp);hi.prototype.controlText_="Play";pO.registerComponent("PlayToggle",hi);var gU=function gU(p3,e){p3=p3<0?0:p3;var t=Math.floor(p3%60);var d=Math.floor(p3/60%60);var r=Math.floor(p3/3600);var on=Math.floor(e/60%60);var i=Math.floor(e/3600);if(isNaN(p3)||p3===Infinity){r=d=t="-"}r=r>0||i>0?r+":":"";d=((r||on>=10)&&d<10?"0"+d:d)+":";t=t<10?"0"+t:t;return r+d+t};var a1=gU;function aa(d){a1=d}function f1(){a1=gU}function a5(e,d){if(d===void 0){d=e}return a1(e,d)}var kQ=function(e){em(t,e);function t(p5,p4){var p6;p6=e.call(this,p5,p4)||this;p6.on(p5,["timeupdate","ended"],p6.updateContent);p6.updateTextNode_();return p6}var d=t.prototype;d.createEl=function i(){var p5=this.buildCSSClass();var p4=e.prototype.createEl.call(this,"div",{className:p5+" vjs-time-control vjs-control",innerHTML:'<span class="vjs-control-text" role="presentation">'+this.localize(this.labelText_)+"\xA0</span>"});this.contentEl_=ms("span",{className:p5+"-display"},{"aria-live":"off",role:"presentation"});p4.appendChild(this.contentEl_);return p4};d.dispose=function p3(){this.contentEl_=null;this.textNode_=null;e.prototype.dispose.call(this)};d.updateTextNode_=function r(p5){var p4=this;if(p5===void 0){p5=0}p5=a5(p5);if(this.formattedTime_===p5){return}this.formattedTime_=p5;this.requestAnimationFrame(function(){if(!p4.contentEl_){return}var p6=p4.textNode_;p4.textNode_=eT.createTextNode(p4.formattedTime_);if(!p4.textNode_){return}if(p6){p4.contentEl_.replaceChild(p4.textNode_,p6)}else{p4.contentEl_.appendChild(p4.textNode_)}})};d.updateContent=function on(p4){};return t}(pO);kQ.prototype.labelText_="Time";kQ.prototype.controlText_="Time";pO.registerComponent("TimeDisplay",kQ);var pa=function(i){em(r,i);function r(){return i.apply(this,arguments)||this}var e=r.prototype;e.buildCSSClass=function d(){return"vjs-current-time"};e.updateContent=function t(on){var p3;if(this.player_.ended()){p3=this.player_.duration()}else{p3=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime()}this.updateTextNode_(p3)};return r}(kQ);pa.prototype.labelText_="Current Time";pa.prototype.controlText_="Current Time";pO.registerComponent("CurrentTimeDisplay",pa);var oh=function(i){em(t,i);function t(p3,on){var p4;p4=i.call(this,p3,on)||this;p4.on(p3,"durationchange",p4.updateContent);p4.on(p3,"loadstart",p4.updateContent);p4.on(p3,"loadedmetadata",p4.updateContent);return p4}var e=t.prototype;e.buildCSSClass=function d(){return"vjs-duration"};e.updateContent=function r(on){var p3=this.player_.duration();this.updateTextNode_(p3)};return t}(kQ);oh.prototype.labelText_="Duration";oh.prototype.controlText_="Duration";pO.registerComponent("DurationDisplay",oh);var iH=function(r){em(i,r);function i(){return r.apply(this,arguments)||this}var e=i.prototype;e.createEl=function d(){return r.prototype.createEl.call(this,"div",{className:"vjs-time-control vjs-time-divider",innerHTML:"<div><span>/</span></div>"},{"aria-hidden":true})};return i}(pO);pO.registerComponent("TimeDivider",iH);var hs=function(i){em(t,i);function t(p4,p3){var p5;p5=i.call(this,p4,p3)||this;p5.on(p4,"durationchange",p5.updateContent);return p5}var e=t.prototype;e.buildCSSClass=function d(){return"vjs-remaining-time"};e.createEl=function r(){var p3=i.prototype.createEl.call(this);p3.insertBefore(ms("span",{},{"aria-hidden":true},"-"),this.contentEl_);return p3};e.updateContent=function on(p3){if(typeof this.player_.duration()!=="number"){return}var p4;if(this.player_.ended()){p4=0}else{if(this.player_.remainingTimeDisplay){p4=this.player_.remainingTimeDisplay()}else{p4=this.player_.remainingTime()}}this.updateTextNode_(p4)};return t}(kQ);hs.prototype.labelText_="Remaining Time";hs.prototype.controlText_="Remaining Time";pO.registerComponent("RemainingTimeDisplay",hs);var l3=function(e){em(r,e);function r(p4,p3){var p5;p5=e.call(this,p4,p3)||this;p5.updateShowing();p5.on(p5.player(),"durationchange",p5.updateShowing);return p5}var d=r.prototype;d.createEl=function i(){var p3=e.prototype.createEl.call(this,"div",{className:"vjs-live-control vjs-control"});this.contentEl_=ms("div",{className:"vjs-live-display",innerHTML:'<span class="vjs-control-text">'+this.localize("Stream Type")+"\xA0</span>"+this.localize("LIVE")},{"aria-live":"off"});p3.appendChild(this.contentEl_);return p3};d.dispose=function t(){this.contentEl_=null;e.prototype.dispose.call(this)};d.updateShowing=function on(p3){if(this.player().duration()===Infinity){this.show()}else{this.hide()}};return r}(pO);pO.registerComponent("LiveDisplay",l3);var gf=function(on){em(i,on);function i(p5,p4){var p6;p6=on.call(this,p5,p4)||this;p6.updateLiveEdgeStatus();if(p6.player_.liveTracker){p6.on(p6.player_.liveTracker,"liveedgechange",p6.updateLiveEdgeStatus)}return p6}var d=i.prototype;d.createEl=function r(){var p4=on.prototype.createEl.call(this,"button",{className:"vjs-seek-to-live-control vjs-control"});this.textEl_=ms("span",{className:"vjs-seek-to-live-text",innerHTML:this.localize("LIVE")},{"aria-hidden":"true"});p4.appendChild(this.textEl_);return p4};d.updateLiveEdgeStatus=function t(){if(!this.player_.liveTracker||this.player_.liveTracker.atLiveEdge()){this.setAttribute("aria-disabled",true);this.addClass("vjs-at-live-edge");this.controlText("Seek to live, currently playing live")}else{this.setAttribute("aria-disabled",false);this.removeClass("vjs-at-live-edge");this.controlText("Seek to live, currently behind live")}};d.handleClick=function e(){this.player_.liveTracker.seekToLiveEdge()};d.dispose=function p3(){if(this.player_.liveTracker){this.off(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatus)}this.textEl_=null;on.prototype.dispose.call(this)};return i}(fp);gf.prototype.controlText_="Seek to live, currently playing live";pO.registerComponent("SeekToLive",gf);var fn=function fn(i,e,d){i=Number(i);return Math.min(d,Math.max(e,isNaN(i)?e:i))};var hm=function(qc){em(t,qc);function t(qe,qd){var qf;qf=qc.call(this,qe,qd)||this;qf.bar=qf.getChild(qf.options_.barName);qf.vertical(!!qf.options_.vertical);qf.enable();return qf}var qa=t.prototype;qa.enabled=function p9(){return this.enabled_};qa.enable=function p4(){if(this.enabled()){return}this.on("mousedown",this.handleMouseDown);this.on("touchstart",this.handleMouseDown);this.on("keydown",this.handleKeyDown);this.on("click",this.handleClick);this.on(this.player_,"controlsvisible",this.update);if(this.playerEvent){this.on(this.player_,this.playerEvent,this.update)}this.removeClass("disabled");this.setAttribute("tabindex",0);this.enabled_=true};qa.disable=function p3(){if(!this.enabled()){return}var qd=this.bar.el_.ownerDocument;this.off("mousedown",this.handleMouseDown);this.off("touchstart",this.handleMouseDown);this.off("keydown",this.handleKeyDown);this.off("click",this.handleClick);this.off(this.player_,"controlsvisible",this.update);this.off(qd,"mousemove",this.handleMouseMove);this.off(qd,"mouseup",this.handleMouseUp);this.off(qd,"touchmove",this.handleMouseMove);this.off(qd,"touchend",this.handleMouseUp);this.removeAttribute("tabindex");this.addClass("disabled");if(this.playerEvent){this.off(this.player_,this.playerEvent,this.update)}this.enabled_=false};qa.createEl=function p7(qf,qe,qd){if(qe===void 0){qe={}}if(qd===void 0){qd={}}qe.className=qe.className+" vjs-slider";qe=pr({tabIndex:0},qe);qd=pr({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100,tabIndex:0},qd);return qc.prototype.createEl.call(this,qf,qe,qd)};qa.handleMouseDown=function e(qd){var qe=this.bar.el_.ownerDocument;if(qd.type==="mousedown"){qd.preventDefault()}if(qd.type==="touchstart"&&!mh){qd.preventDefault()}c1();this.addClass("vjs-sliding");this.trigger("slideractive");this.on(qe,"mousemove",this.handleMouseMove);this.on(qe,"mouseup",this.handleMouseUp);this.on(qe,"touchmove",this.handleMouseMove);this.on(qe,"touchend",this.handleMouseUp);this.handleMouseMove(qd)};qa.handleMouseMove=function on(qd){};qa.handleMouseUp=function qb(){var qd=this.bar.el_.ownerDocument;po();this.removeClass("vjs-sliding");this.trigger("sliderinactive");this.off(qd,"mousemove",this.handleMouseMove);this.off(qd,"mouseup",this.handleMouseUp);this.off(qd,"touchmove",this.handleMouseMove);this.off(qd,"touchend",this.handleMouseUp);this.update()};qa.update=function r(){var qe=this;if(!this.el_||!this.bar){return}var qd=this.getProgress();if(qd===this.progress_){return qd}this.progress_=qd;this.requestAnimationFrame(function(){var qf=qe.vertical()?"height":"width";qe.bar.el().style[qf]=(qd*100).toFixed(2)+"%"});return qd};qa.getProgress=function p6(){return Number(fn(this.getPercent(),0,1).toFixed(4))};qa.calculateDistance=function p8(qe){var qd=dO(this.el_,qe);if(this.vertical()){return qd.y}return qd.x};qa.handleKeyDown=function d(qd){if(fM.isEventKey(qd,"Left")||fM.isEventKey(qd,"Down")){qd.preventDefault();qd.stopPropagation();this.stepBack()}else{if(fM.isEventKey(qd,"Right")||fM.isEventKey(qd,"Up")){qd.preventDefault();qd.stopPropagation();this.stepForward()}else{qc.prototype.handleKeyDown.call(this,qd)}}};qa.handleClick=function p5(qd){qd.stopPropagation();qd.preventDefault()};qa.vertical=function i(qd){if(qd===undefined){return this.vertical_||false}this.vertical_=!!qd;if(this.vertical_){this.addClass("vjs-slider-vertical")}else{this.addClass("vjs-slider-horizontal")}};return t}(pO);pO.registerComponent("Slider",hm);var fR=function fR(e,d){return fn(e/d*100,0,100).toFixed(2)+"%"};var bq=function(i){em(e,i);function e(p4,p3){var p5;p5=i.call(this,p4,p3)||this;p5.partEls_=[];p5.on(p4,"progress",p5.update);return p5}var d=e.prototype;d.createEl=function r(){var p3=i.prototype.createEl.call(this,"div",{className:"vjs-load-progress"});var p6=ms("span",{className:"vjs-control-text"});var p4=ms("span",{textContent:this.localize("Loaded")});var p5=eT.createTextNode(": ");this.percentageEl_=ms("span",{className:"vjs-control-text-loaded-percentage",textContent:"0%"});p3.appendChild(p6);p6.appendChild(p4);p6.appendChild(p5);p6.appendChild(this.percentageEl_);return p3};d.dispose=function t(){this.partEls_=null;this.percentageEl_=null;i.prototype.dispose.call(this)};d.update=function on(p4){var p3=this;this.requestAnimationFrame(function(){var p5=p3.player_.liveTracker;var p9=p3.player_.buffered();var qb=p5&&p5.isLive()?p5.seekableEnd():p3.player_.duration();var qe=p3.player_.bufferedEnd();var p8=p3.partEls_;var qf=fR(qe,qb);if(p3.percent_!==qf){p3.el_.style.width=qf;du(p3.percentageEl_,qf);p3.percent_=qf}for(var qd=0;qd<p9.length;qd++){var p6=p9.start(qd);var qa=p9.end(qd);var p7=p8[qd];if(!p7){p7=p3.el_.appendChild(ms());p8[qd]=p7}if(p7.dataset.start===p6&&p7.dataset.end===qa){continue}p7.dataset.start=p6;p7.dataset.end=qa;p7.style.left=fR(p6,qe);p7.style.width=fR(qa-p6,qe)}for(var qc=p8.length;qc>p9.length;qc--){p3.el_.removeChild(p8[qc-1])}p8.length=p9.length})};return e}(pO);pO.registerComponent("LoadProgressBar",bq);var jh=function(i){em(t,i);function t(p5,p4){var p6;p6=i.call(this,p5,p4)||this;p6.update=jL(j(gx(p6),p6.update),kb);return p6}var e=t.prototype;e.createEl=function d(){return i.prototype.createEl.call(this,"div",{className:"vjs-time-tooltip"},{"aria-hidden":"true"})};e.update=function p3(p5,p6,p8){var p4=ns(this.el_);var qc=ns(this.player_.el());var p7=p5.width*p6;if(!qc||!p4){return}var p9=p5.left-qc.left+p7;var qb=p5.width-p7+(qc.right-p5.right);var qa=p4.width/2;if(p9<qa){qa+=qa-p9}else{if(qb<qa){qa=qb}}if(qa<0){qa=0}else{if(qa>p4.width){qa=p4.width}}this.el_.style.right="-"+qa+"px";this.write(p8)};e.write=function on(p4){du(this.el_,p4)};e.updateTime=function r(p5,p7,p8,p4){var p6=this;if(this.rafId_){this.cancelAnimationFrame(this.rafId_)}this.rafId_=this.requestAnimationFrame(function(){var qa;var qb=p6.player_.duration();if(p6.player_.liveTracker&&p6.player_.liveTracker.isLive()){var qc=p6.player_.liveTracker.liveWindow();var p9=qc-p7*qc;qa=(p9<1?"":"-")+a5(p9,qc)}else{qa=a5(p8,qb)}p6.update(p5,p7,qa);if(p4){p4()}})};return t}(pO);pO.registerComponent("TimeTooltip",jh);var bx=function(r){em(e,r);function e(p3,on){var p4;p4=r.call(this,p3,on)||this;p4.update=jL(j(gx(p4),p4.update),kb);return p4}var i=e.prototype;i.createEl=function d(){return r.prototype.createEl.call(this,"div",{className:"vjs-play-progress vjs-slider-bar"},{"aria-hidden":"true"})};i.update=function t(p3,p4){var on=this.getChild("timeTooltip");if(!on){return}var p5=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();on.updateTime(p3,p4,p5)};return e}(pO);bx.prototype.options_={children:[]};if(!bk&&!j3){bx.prototype.options_.children.push("timeTooltip")}pO.registerComponent("PlayProgressBar",bx);var mW=function(r){em(i,r);function i(p3,on){var p4;p4=r.call(this,p3,on)||this;p4.update=jL(j(gx(p4),p4.update),kb);return p4}var e=i.prototype;e.createEl=function d(){return r.prototype.createEl.call(this,"div",{className:"vjs-mouse-display"})};e.update=function t(on,p4){var p3=this;var p5=p4*this.player_.duration();this.getChild("timeTooltip").updateTime(on,p4,p5,function(){p3.el_.style.left=on.width*p4+"px"})};return i}(pO);mW.prototype.options_={children:["timeTooltip"]};pO.registerComponent("MouseTimeDisplay",mW);var nj=5;var pw=12;var l4=function(qh){em(r,qh);function r(qj,qi){var qk;qk=qh.call(this,qj,qi)||this;qk.setEventHandlers_();return qk}var e=r.prototype;e.setEventHandlers_=function qa(){this.update_=j(this,this.update);this.update=jL(this.update_,kb);this.on(this.player_,["ended","durationchange","timeupdate"],this.update);if(this.player_.liveTracker){this.on(this.player_.liveTracker,"liveedgechange",this.update)}this.updateInterval=null;this.on(this.player_,["playing"],this.enableInterval_);this.on(this.player_,["ended","pause","waiting"],this.disableInterval_);if("hidden" in eT&&"visibilityState" in eT){this.on(eT,"visibilitychange",this.toggleVisibility_)}};e.toggleVisibility_=function on(qi){if(eT.hidden){this.disableInterval_(qi)}else{this.enableInterval_();this.update()}};e.enableInterval_=function qg(){if(this.updateInterval){return}this.updateInterval=this.setInterval(this.update,kb)};e.disableInterval_=function qb(qi){if(this.player_.liveTracker&&this.player_.liveTracker.isLive()&&qi&&qi.type!=="ended"){return}if(!this.updateInterval){return}this.clearInterval(this.updateInterval);this.updateInterval=null};e.createEl=function p9(){return qh.prototype.createEl.call(this,"div",{className:"vjs-progress-holder"},{"aria-label":this.localize("Progress Bar")})};e.update=function t(qk){var qj=this;var qi=qh.prototype.update.call(this);this.requestAnimationFrame(function(){var ql=qj.player_.ended()?qj.player_.duration():qj.getCurrentTime_();var qn=qj.player_.liveTracker;var qm=qj.player_.duration();if(qn&&qn.isLive()){qm=qj.player_.liveTracker.liveCurrentTime()}if(qj.percent_!==qi){qj.el_.setAttribute("aria-valuenow",(qi*100).toFixed(2));qj.percent_=qi}if(qj.currentTime_!==ql||qj.duration_!==qm){qj.el_.setAttribute("aria-valuetext",qj.localize("progress bar timing: currentTime={1} duration={2}",[a5(ql,qm),a5(qm,qm)],"{1} of {2}"));qj.currentTime_=ql;qj.duration_=qm}if(qj.bar){qj.bar.update(ns(qj.el()),qj.getProgress())}});return qi};e.getCurrentTime_=function p7(){return this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime()};e.getPercent=function qc(){var qj=this.getCurrentTime_();var qi;var qk=this.player_.liveTracker;if(qk&&qk.isLive()){qi=(qj-qk.seekableStart())/qk.liveWindow();if(qk.atLiveEdge()){qi=1}}else{qi=qj/this.player_.duration()}return qi};e.handleMouseDown=function p8(qi){if(!nd(qi)){return}qi.stopPropagation();this.player_.scrubbing(true);this.videoWasPlaying=!this.player_.paused();this.player_.pause();qh.prototype.handleMouseDown.call(this,qi)};e.handleMouseMove=function qe(ql){if(!nd(ql)){return}var qk;var qn=this.calculateDistance(ql);var qm=this.player_.liveTracker;if(!qm||!qm.isLive()){qk=qn*this.player_.duration();if(qk===this.player_.duration()){qk=qk-0.1}}else{if(qn>=0.99){qm.seekToLiveEdge();return}var qi=qm.seekableStart();var qj=qm.liveCurrentTime();qk=qi+qn*qm.liveWindow();if(qk>=qj){qk=qj}if(qk<=qi){qk=qi+0.1}if(qk===Infinity){return}}this.player_.currentTime(qk)};e.enable=function p5(){qh.prototype.enable.call(this);var qi=this.getChild("mouseTimeDisplay");if(!qi){return}qi.show()};e.disable=function d(){qh.prototype.disable.call(this);var qi=this.getChild("mouseTimeDisplay");if(!qi){return}qi.hide()};e.handleMouseUp=function p4(qi){qh.prototype.handleMouseUp.call(this,qi);if(qi){qi.stopPropagation()}this.player_.scrubbing(false);this.player_.trigger({type:"timeupdate",target:this,manuallyTriggered:true});if(this.videoWasPlaying){ai(this.player_.play())}else{this.update_()}};e.stepForward=function p6(){this.player_.currentTime(this.player_.currentTime()+nj)};e.stepBack=function i(){this.player_.currentTime(this.player_.currentTime()-nj)};e.handleAction=function qd(qi){if(this.player_.paused()){this.player_.play()}else{this.player_.pause()}};e.handleKeyDown=function p3(qj){if(fM.isEventKey(qj,"Space")||fM.isEventKey(qj,"Enter")){qj.preventDefault();qj.stopPropagation();this.handleAction(qj)}else{if(fM.isEventKey(qj,"Home")){qj.preventDefault();qj.stopPropagation();this.player_.currentTime(0)}else{if(fM.isEventKey(qj,"End")){qj.preventDefault();qj.stopPropagation();this.player_.currentTime(this.player_.duration())}else{if(/^[0-9]$/.test(fM(qj))){qj.preventDefault();qj.stopPropagation();var qi=(fM.codes[fM(qj)]-fM.codes["0"])*10/100;this.player_.currentTime(this.player_.duration()*qi)}else{if(fM.isEventKey(qj,"PgDn")){qj.preventDefault();qj.stopPropagation();this.player_.currentTime(this.player_.currentTime()-nj*pw)}else{if(fM.isEventKey(qj,"PgUp")){qj.preventDefault();qj.stopPropagation();this.player_.currentTime(this.player_.currentTime()+nj*pw)}else{qh.prototype.handleKeyDown.call(this,qj)}}}}}}};e.dispose=function qf(){this.disableInterval_();this.off(this.player_,["ended","durationchange","timeupdate"],this.update);if(this.player_.liveTracker){this.on(this.player_.liveTracker,"liveedgechange",this.update)}this.off(this.player_,["playing"],this.enableInterval_);this.off(this.player_,["ended","pause","waiting"],this.disableInterval_);if("hidden" in eT&&"visibilityState" in eT){this.off(eT,"visibilitychange",this.toggleVisibility_)}qh.prototype.dispose.call(this)};return r}(hm);l4.prototype.options_={children:["loadProgressBar","playProgressBar"],barName:"playProgressBar"};if(!bk&&!j3){l4.prototype.options_.children.splice(1,0,"mouseTimeDisplay")}pO.registerComponent("SeekBar",l4);var l6=function(p6){em(p7,p6);function p7(p9,p8){var qa;qa=p6.call(this,p9,p8)||this;qa.handleMouseMove=jL(j(gx(qa),qa.handleMouseMove),kb);qa.throttledHandleMouseSeek=jL(j(gx(qa),qa.handleMouseSeek),kb);qa.enable();return qa}var p4=p7.prototype;p4.createEl=function on(){return p6.prototype.createEl.call(this,"div",{className:"vjs-progress-control vjs-control"})};p4.handleMouseMove=function i(qd){var qc=this.getChild("seekBar");if(!qc){return}var p9=qc.getChild("playProgressBar");var qe=qc.getChild("mouseTimeDisplay");if(!p9&&!qe){return}var qb=qc.el();var p8=ns(qb);var qa=dO(qb,qd).x;qa=fn(0,1,qa);if(qe){qe.update(p8,qa)}if(p9){p9.update(p8,qc.getProgress())}};p4.handleMouseSeek=function e(p9){var p8=this.getChild("seekBar");if(p8){p8.handleMouseMove(p9)}};p4.enabled=function p3(){return this.enabled_};p4.disable=function r(){this.children().forEach(function(p8){return p8.disable&&p8.disable()});if(!this.enabled()){return}this.off(["mousedown","touchstart"],this.handleMouseDown);this.off(this.el_,"mousemove",this.handleMouseMove);this.handleMouseUp();this.addClass("disabled");this.enabled_=false};p4.enable=function t(){this.children().forEach(function(p8){return p8.enable&&p8.enable()});if(this.enabled()){return}this.on(["mousedown","touchstart"],this.handleMouseDown);this.on(this.el_,"mousemove",this.handleMouseMove);this.removeClass("disabled");this.enabled_=true};p4.handleMouseDown=function d(p9){var qa=this.el_.ownerDocument;var p8=this.getChild("seekBar");if(p8){p8.handleMouseDown(p9)}this.on(qa,"mousemove",this.throttledHandleMouseSeek);this.on(qa,"touchmove",this.throttledHandleMouseSeek);this.on(qa,"mouseup",this.handleMouseUp);this.on(qa,"touchend",this.handleMouseUp)};p4.handleMouseUp=function p5(p9){var qa=this.el_.ownerDocument;var p8=this.getChild("seekBar");if(p8){p8.handleMouseUp(p9)}this.off(qa,"mousemove",this.throttledHandleMouseSeek);this.off(qa,"touchmove",this.throttledHandleMouseSeek);this.off(qa,"mouseup",this.handleMouseUp);this.off(qa,"touchend",this.handleMouseUp)};return p7}(pO);l6.prototype.options_={children:["seekBar"]};pO.registerComponent("ProgressControl",l6);var eF=function(t){em(on,t);function on(p4,p3){var p5;p5=t.call(this,p4,p3)||this;p5.on(p4,["enterpictureinpicture","leavepictureinpicture"],p5.handlePictureInPictureChange);if(!eT.pictureInPictureEnabled){p5.disable()}return p5}var i=on.prototype;i.buildCSSClass=function e(){return"vjs-picture-in-picture-control "+t.prototype.buildCSSClass.call(this)};i.handlePictureInPictureChange=function d(p3){if(this.player_.isInPictureInPicture()){this.controlText("Exit Picture-in-Picture")}else{this.controlText("Picture-in-Picture")}};i.handleClick=function r(p3){if(!this.player_.isInPictureInPicture()){this.player_.requestPictureInPicture()}else{this.player_.exitPictureInPicture()}};return on}(fp);eF.prototype.controlText_="Picture-in-Picture";pO.registerComponent("PictureInPictureToggle",eF);var jj=function(on){em(t,on);function t(p4,p3){var p5;p5=on.call(this,p4,p3)||this;p5.on(p4,"fullscreenchange",p5.handleFullscreenChange);if(eT[p4.fsApi_.fullscreenEnabled]===false){p5.disable()}return p5}var i=t.prototype;i.buildCSSClass=function e(){return"vjs-fullscreen-control "+on.prototype.buildCSSClass.call(this)};i.handleFullscreenChange=function d(p3){if(this.player_.isFullscreen()){this.controlText("Non-Fullscreen")}else{this.controlText("Fullscreen")}};i.handleClick=function r(p3){if(!this.player_.isFullscreen()){this.player_.requestFullscreen()}else{this.player_.exitFullscreen()}};return t}(fp);jj.prototype.controlText_="Fullscreen";pO.registerComponent("FullscreenToggle",jj);var kl=function kl(d,e){if(e.tech_&&!e.tech_.featuresVolumeControl){d.addClass("vjs-hidden")}d.on(e,"loadstart",function(){if(!e.tech_.featuresVolumeControl){d.addClass("vjs-hidden")}else{d.removeClass("vjs-hidden")}})};var hJ=function(r){em(e,r);function e(){return r.apply(this,arguments)||this}var i=e.prototype;i.createEl=function d(){return r.prototype.createEl.call(this,"div",{className:"vjs-volume-level",innerHTML:'<span class="vjs-control-text"></span>'})};return e}(pO);pO.registerComponent("VolumeLevel",hJ);var nt=function(p8){em(on,p8);function on(qb,qa){var qc;qc=p8.call(this,qb,qa)||this;qc.on("slideractive",qc.updateLastVolume_);qc.on(qb,"volumechange",qc.updateARIAAttributes);qb.ready(function(){return qc.updateARIAAttributes()});return qc}var p7=on.prototype;p7.createEl=function p4(){return p8.prototype.createEl.call(this,"div",{className:"vjs-volume-bar vjs-slider-bar"},{"aria-label":this.localize("Volume Level"),"aria-live":"polite"})};p7.handleMouseDown=function d(qa){if(!nd(qa)){return}p8.prototype.handleMouseDown.call(this,qa)};p7.handleMouseMove=function t(qa){if(!nd(qa)){return}this.checkMuted();this.player_.volume(this.calculateDistance(qa))};p7.checkMuted=function p3(){if(this.player_.muted()){this.player_.muted(false)}};p7.getPercent=function p5(){if(this.player_.muted()){return 0}return this.player_.volume()};p7.stepForward=function r(){this.checkMuted();this.player_.volume(this.player_.volume()+0.1)};p7.stepBack=function e(){this.checkMuted();this.player_.volume(this.player_.volume()-0.1)};p7.updateARIAAttributes=function p9(qb){var qa=this.player_.muted()?0:this.volumeAsPercentage_();this.el_.setAttribute("aria-valuenow",qa);this.el_.setAttribute("aria-valuetext",qa+"%")};p7.volumeAsPercentage_=function p6(){return Math.round(this.player_.volume()*100)};p7.updateLastVolume_=function i(){var qa=this;var qb=this.player_.volume();this.one("sliderinactive",function(){if(qa.player_.volume()===0){qa.player_.lastVolume_(qb)}})};return on}(hm);nt.prototype.options_={children:["volumeLevel"],barName:"volumeLevel"};nt.prototype.playerEvent="volumechange";pO.registerComponent("VolumeBar",nt);var dl=function(r){em(p3,r);function p3(p5,p4){var p6;if(p4===void 0){p4={}}p4.vertical=p4.vertical||false;if(typeof p4.volumeBar==="undefined"||fv(p4.volumeBar)){p4.volumeBar=p4.volumeBar||{};p4.volumeBar.vertical=p4.vertical}p6=r.call(this,p5,p4)||this;kl(gx(p6),p5);p6.throttledHandleMouseMove=jL(j(gx(p6),p6.handleMouseMove),kb);p6.on("mousedown",p6.handleMouseDown);p6.on("touchstart",p6.handleMouseDown);p6.on(p6.volumeBar,["focus","slideractive"],function(){p6.volumeBar.addClass("vjs-slider-active");p6.addClass("vjs-slider-active");p6.trigger("slideractive")});p6.on(p6.volumeBar,["blur","sliderinactive"],function(){p6.volumeBar.removeClass("vjs-slider-active");p6.removeClass("vjs-slider-active");p6.trigger("sliderinactive")});return p6}var e=p3.prototype;e.createEl=function d(){var p4="vjs-volume-horizontal";if(this.options_.vertical){p4="vjs-volume-vertical"}return r.prototype.createEl.call(this,"div",{className:"vjs-volume-control vjs-control "+p4})};e.handleMouseDown=function t(p4){var p5=this.el_.ownerDocument;this.on(p5,"mousemove",this.throttledHandleMouseMove);this.on(p5,"touchmove",this.throttledHandleMouseMove);this.on(p5,"mouseup",this.handleMouseUp);this.on(p5,"touchend",this.handleMouseUp)};e.handleMouseUp=function i(p4){var p5=this.el_.ownerDocument;this.off(p5,"mousemove",this.throttledHandleMouseMove);this.off(p5,"touchmove",this.throttledHandleMouseMove);this.off(p5,"mouseup",this.handleMouseUp);this.off(p5,"touchend",this.handleMouseUp)};e.handleMouseMove=function on(p4){this.volumeBar.handleMouseMove(p4)};return p3}(pO);dl.prototype.options_={children:["volumeBar"]};pO.registerComponent("VolumeControl",dl);var lo=function lo(d,e){if(e.tech_&&!e.tech_.featuresMuteControl){d.addClass("vjs-hidden")}d.on(e,"loadstart",function(){if(!e.tech_.featuresMuteControl){d.addClass("vjs-hidden")}else{d.removeClass("vjs-hidden")}})};var iJ=function(on){em(r,on);function r(p6,p5){var p7;p7=on.call(this,p6,p5)||this;lo(gx(p7),p6);p7.on(p6,["loadstart","volumechange"],p7.update);return p7}var e=r.prototype;e.buildCSSClass=function d(){return"vjs-mute-control "+on.prototype.buildCSSClass.call(this)};e.handleClick=function i(p8){var p7=this.player_.volume();var p5=this.player_.lastVolume_();if(p7===0){var p6=p5<0.1?0.1:p5;this.player_.volume(p6);this.player_.muted(false)}else{this.player_.muted(this.player_.muted()?false:true)}};e.update=function p4(p5){this.updateIcon_();this.updateControlText_()};e.updateIcon_=function t(){var p6=this.player_.volume();var p7=3;if(bk&&this.player_.tech_&&this.player_.tech_.el_){this.player_.muted(this.player_.tech_.el_.muted)}if(p6===0||this.player_.muted()){p7=0}else{if(p6<0.33){p7=1}else{if(p6<0.67){p7=2}}}for(var p5=0;p5<4;p5++){cY(this.el_,"vjs-vol-"+p5)}h0(this.el_,"vjs-vol-"+p7)};e.updateControlText_=function p3(){var p5=this.player_.muted()||this.player_.volume()===0;var p6=p5?"Unmute":"Mute";if(this.controlText()!==p6){this.controlText(p6)}};return r}(fp);iJ.prototype.controlText_="Mute";pO.registerComponent("MuteToggle",iJ);var iW=function(p5){em(p4,p5);function p4(qa,p9){var qb;if(p9===void 0){p9={}}if(typeof p9.inline!=="undefined"){p9.inline=p9.inline}else{p9.inline=true}if(typeof p9.volumeControl==="undefined"||fv(p9.volumeControl)){p9.volumeControl=p9.volumeControl||{};p9.volumeControl.vertical=!p9.inline}qb=p5.call(this,qa,p9)||this;qb.on(qa,["loadstart"],qb.volumePanelState_);qb.on(qb.muteToggle,"keyup",qb.handleKeyPress);qb.on(qb.volumeControl,"keyup",qb.handleVolumeControlKeyUp);qb.on("keydown",qb.handleKeyPress);qb.on("mouseover",qb.handleMouseOver);qb.on("mouseout",qb.handleMouseOut);qb.on(qb.volumeControl,["slideractive"],qb.sliderActive_);qb.on(qb.volumeControl,["sliderinactive"],qb.sliderInactive_);return qb}var t=p4.prototype;t.sliderActive_=function p6(){this.addClass("vjs-slider-active")};t.sliderInactive_=function d(){this.removeClass("vjs-slider-active")};t.volumePanelState_=function e(){if(this.volumeControl.hasClass("vjs-hidden")&&this.muteToggle.hasClass("vjs-hidden")){this.addClass("vjs-hidden")}if(this.volumeControl.hasClass("vjs-hidden")&&!this.muteToggle.hasClass("vjs-hidden")){this.addClass("vjs-mute-toggle-only")}};t.createEl=function i(){var p9="vjs-volume-panel-horizontal";if(!this.options_.inline){p9="vjs-volume-panel-vertical"}return p5.prototype.createEl.call(this,"div",{className:"vjs-volume-panel vjs-control "+p9})};t.dispose=function p8(){this.handleMouseOut();p5.prototype.dispose.call(this)};t.handleVolumeControlKeyUp=function on(p9){if(fM.isEventKey(p9,"Esc")){this.muteToggle.focus()}};t.handleMouseOver=function p3(p9){this.addClass("vjs-hover");kJ(eT,"keyup",j(this,this.handleKeyPress))};t.handleMouseOut=function r(p9){this.removeClass("vjs-hover");fF(eT,"keyup",j(this,this.handleKeyPress))};t.handleKeyPress=function p7(p9){if(fM.isEventKey(p9,"Esc")){this.handleMouseOut()}};return p4}(pO);iW.prototype.options_={children:["muteToggle","volumeControl"]};pO.registerComponent("VolumePanel",iW);var ao=function(p7){em(p4,p7);function p4(qd,qc){var qe;qe=p7.call(this,qd,qc)||this;if(qc){qe.menuButton_=qc.menuButton}qe.focusedChild_=-1;qe.on("keydown",qe.handleKeyDown);qe.boundHandleBlur_=j(gx(qe),qe.handleBlur);qe.boundHandleTapClick_=j(gx(qe),qe.handleTapClick);return qe}var p5=p4.prototype;p5.addEventListenerForItem=function on(qc){if(!(qc instanceof pO)){return}this.on(qc,"blur",this.boundHandleBlur_);this.on(qc,["tap","click"],this.boundHandleTapClick_)};p5.removeEventListenerForItem=function p3(qc){if(!(qc instanceof pO)){return}this.off(qc,"blur",this.boundHandleBlur_);this.off(qc,["tap","click"],this.boundHandleTapClick_)};p5.removeChild=function p6(qc){if(typeof qc==="string"){qc=this.getChild(qc)}this.removeEventListenerForItem(qc);p7.prototype.removeChild.call(this,qc)};p5.addItem=function p9(qd){var qc=this.addChild(qd);if(qc){this.addEventListenerForItem(qc)}};p5.createEl=function i(){var qd=this.options_.contentElType||"ul";this.contentEl_=ms(qd,{className:"vjs-menu-content"});this.contentEl_.setAttribute("role","menu");var qc=p7.prototype.createEl.call(this,"div",{append:this.contentEl_,className:"vjs-menu"});qc.appendChild(this.contentEl_);kJ(qc,"click",function(qe){qe.preventDefault();qe.stopImmediatePropagation()});return qc};p5.dispose=function p8(){this.contentEl_=null;this.boundHandleBlur_=null;this.boundHandleTapClick_=null;p7.prototype.dispose.call(this)};p5.handleBlur=function e(qe){var qc=qe.relatedTarget||eT.activeElement;if(!this.children().some(function(qf){return qf.el()===qc})){var qd=this.menuButton_;if(qd&&qd.buttonPressed_&&qc!==qd.el().firstChild){qd.unpressButton()}}};p5.handleTapClick=function qa(qe){if(this.menuButton_){this.menuButton_.unpressButton();var qd=this.children();if(!Array.isArray(qd)){return}var qc=qd.filter(function(qf){return qf.el()===qe.target})[0];if(!qc){return}if(qc.name()!=="CaptionSettingsMenuItem"){this.menuButton_.focus()}}};p5.handleKeyDown=function d(qc){if(fM.isEventKey(qc,"Left")||fM.isEventKey(qc,"Down")){qc.preventDefault();qc.stopPropagation();this.stepForward()}else{if(fM.isEventKey(qc,"Right")||fM.isEventKey(qc,"Up")){qc.preventDefault();qc.stopPropagation();this.stepBack()}}};p5.stepForward=function t(){var qc=0;if(this.focusedChild_!==undefined){qc=this.focusedChild_+1}this.focus(qc)};p5.stepBack=function r(){var qc=0;if(this.focusedChild_!==undefined){qc=this.focusedChild_-1}this.focus(qc)};p5.focus=function qb(qd){if(qd===void 0){qd=0}var qc=this.children().slice();var qe=qc.length&&qc[0].className&&/vjs-menu-title/.test(qc[0].className);if(qe){qc.shift()}if(qc.length>0){if(qd<0){qd=0}else{if(qd>=qc.length){qd=qc.length-1}}this.focusedChild_=qd;qc[qd].el_.focus()}};return p4}(pO);pO.registerComponent("Menu",ao);var nW=function(qh){em(p6,qh);function p6(qm,ql){var qn;if(ql===void 0){ql={}}qn=qh.call(this,qm,ql)||this;qn.menuButton_=new fp(qm,ql);qn.menuButton_.controlText(qn.controlText_);qn.menuButton_.el_.setAttribute("aria-haspopup","true");var qk=fp.prototype.buildCSSClass();qn.menuButton_.el_.className=qn.buildCSSClass()+" "+qk;qn.menuButton_.removeClass("vjs-control");qn.addChild(qn.menuButton_);qn.update();qn.enabled_=true;qn.on(qn.menuButton_,"tap",qn.handleClick);qn.on(qn.menuButton_,"click",qn.handleClick);qn.on(qn.menuButton_,"keydown",qn.handleKeyDown);qn.on(qn.menuButton_,"mouseenter",function(){qn.addClass("vjs-hover");qn.menu.show();kJ(eT,"keyup",j(gx(qn),qn.handleMenuKeyUp))});qn.on("mouseleave",qn.handleMouseLeave);qn.on("keydown",qn.handleSubmenuKeyDown);return qn}var i=p6.prototype;i.update=function p5(){var qk=this.createMenu();if(this.menu){this.menu.dispose();this.removeChild(this.menu)}this.menu=qk;this.addChild(qk);this.buttonPressed_=false;this.menuButton_.el_.setAttribute("aria-expanded","false");if(this.items&&this.items.length<=this.hideThreshold_){this.hide()}else{this.show()}};i.createMenu=function p4(){var qn=new ao(this.player_,{menuButton:this});this.hideThreshold_=0;if(this.options_.title){var ql=qc("li",{className:"vjs-menu-title",innerHTML:ac(this.options_.title),tabIndex:-1});this.hideThreshold_+=1;var qk=new pO(this.player_,{el:ql});qn.addItem(qk)}this.items=this.createItems();if(this.items){for(var qm=0;qm<this.items.length;qm++){qn.addItem(this.items[qm])}}return qn};i.createItems=function qj(){};i.createEl=function qc(){return qh.prototype.createEl.call(this,"div",{className:this.buildWrapperCSSClass()},{})};i.buildWrapperCSSClass=function qi(){var ql="vjs-menu-button";if(this.options_.inline===true){ql+="-inline"}else{ql+="-popup"}var qk=fp.prototype.buildCSSClass();return"vjs-menu-button "+ql+" "+qk+" "+qh.prototype.buildCSSClass.call(this)};i.buildCSSClass=function on(){var qk="vjs-menu-button";if(this.options_.inline===true){qk+="-inline"}else{qk+="-popup"}return"vjs-menu-button "+qk+" "+qh.prototype.buildCSSClass.call(this)};i.controlText=function p9(ql,qk){if(qk===void 0){qk=this.menuButton_.el()}return this.menuButton_.controlText(ql,qk)};i.dispose=function qg(){this.handleMouseLeave();qh.prototype.dispose.call(this)};i.handleClick=function p3(qk){if(this.buttonPressed_){this.unpressButton()}else{this.pressButton()}};i.handleMouseLeave=function t(qk){this.removeClass("vjs-hover");fF(eT,"keyup",j(this,this.handleMenuKeyUp))};i.focus=function qa(){this.menuButton_.focus()};i.blur=function qd(){this.menuButton_.blur()};i.handleKeyDown=function p7(qk){if(fM.isEventKey(qk,"Esc")||fM.isEventKey(qk,"Tab")){if(this.buttonPressed_){this.unpressButton()}if(!fM.isEventKey(qk,"Tab")){qk.preventDefault();this.menuButton_.focus()}}else{if(fM.isEventKey(qk,"Up")||fM.isEventKey(qk,"Down")){if(!this.buttonPressed_){qk.preventDefault();this.pressButton()}}}};i.handleMenuKeyUp=function qb(qk){if(fM.isEventKey(qk,"Esc")||fM.isEventKey(qk,"Tab")){this.removeClass("vjs-hover")}};i.handleSubmenuKeyPress=function qf(qk){this.handleSubmenuKeyDown(qk)};i.handleSubmenuKeyDown=function r(qk){if(fM.isEventKey(qk,"Esc")||fM.isEventKey(qk,"Tab")){if(this.buttonPressed_){this.unpressButton()}if(!fM.isEventKey(qk,"Tab")){qk.preventDefault();this.menuButton_.focus()}}};i.pressButton=function e(){if(this.enabled_){this.buttonPressed_=true;this.menu.show();this.menu.lockShowing();this.menuButton_.el_.setAttribute("aria-expanded","true");if(bk&&ni()){return}this.menu.focus()}};i.unpressButton=function qe(){if(this.enabled_){this.buttonPressed_=false;this.menu.unlockShowing();this.menu.hide();this.menuButton_.el_.setAttribute("aria-expanded","false")}};i.disable=function d(){this.unpressButton();this.enabled_=false;this.addClass("vjs-disabled");this.menuButton_.disable()};i.enable=function p8(){this.enabled_=true;this.removeClass("vjs-disabled");this.menuButton_.enable()};return p6}(pO);pO.registerComponent("MenuButton",nW);var bu=function(e){em(d,e);function d(t,r){var p3;var i=r.tracks;p3=e.call(this,t,r)||this;if(p3.items.length<=1){p3.hide()}if(!i){return gx(p3)}var on=j(gx(p3),p3.update);i.addEventListener("removetrack",on);i.addEventListener("addtrack",on);p3.player_.on("ready",on);p3.player_.on("dispose",function(){i.removeEventListener("removetrack",on);i.removeEventListener("addtrack",on)});return p3}return d}(nW);pO.registerComponent("TrackButton",bu);var pl=["Tab","Esc","Up","Down","Right","Left"];var mF=function(p3){em(on,p3);function on(p5,p4){var p6;p6=p3.call(this,p5,p4)||this;p6.selectable=p4.selectable;p6.isSelected_=p4.selected||false;p6.multiSelectable=p4.multiSelectable;p6.selected(p6.isSelected_);if(p6.selectable){if(p6.multiSelectable){p6.el_.setAttribute("role","menuitemcheckbox")}else{p6.el_.setAttribute("role","menuitemradio")}}else{p6.el_.setAttribute("role","menuitem")}return p6}var e=on.prototype;e.createEl=function d(p6,p5,p4){this.nonIconControl=true;return p3.prototype.createEl.call(this,"li",pr({className:"vjs-menu-item",innerHTML:'<span class="vjs-menu-item-text">'+this.localize(this.options_.label)+"</span>",tabIndex:-1},p5),p4)};e.handleKeyDown=function r(p4){if(!pl.some(function(p5){return fM.isEventKey(p4,p5)})){p3.prototype.handleKeyDown.call(this,p4)}};e.handleClick=function i(p4){this.selected(true)};e.selected=function t(p4){if(this.selectable){if(p4){this.addClass("vjs-selected");this.el_.setAttribute("aria-checked","true");this.controlText(", selected");this.isSelected_=true}else{this.removeClass("vjs-selected");this.el_.setAttribute("aria-checked","false");this.controlText("");this.isSelected_=false}}};return on}(eu);pO.registerComponent("MenuItem",mF);var mD=function(on){em(t,on);function t(p9,p8){var qb;var p5=p8.track;var p7=p9.textTracks();p8.label=p5.label||p5.language||"Unknown";p8.selected=p5.mode==="showing";qb=on.call(this,p9,p8)||this;qb.track=p5;qb.kinds=(p8.kinds||[p8.kind||qb.track.kind]).filter(Boolean);var p6=function p6(){for(var qc=arguments.length,qd=new Array(qc),qe=0;qe<qc;qe++){qd[qe]=arguments[qe]}qb.handleTracksChange.apply(gx(qb),qd)};var p4=function p4(){for(var qc=arguments.length,qe=new Array(qc),qd=0;qd<qc;qd++){qe[qd]=arguments[qd]}qb.handleSelectedLanguageChange.apply(gx(qb),qe)};p9.on(["loadstart","texttrackchange"],p6);p7.addEventListener("change",p6);p7.addEventListener("selectedlanguagechange",p4);qb.on("dispose",function(){p9.off(["loadstart","texttrackchange"],p6);p7.removeEventListener("change",p6);p7.removeEventListener("selectedlanguagechange",p4)});if(p7.onchange===undefined){var qa;qb.on(["tap","click"],function(){if(typeof cb.Event!=="object"){try{qa=new cb.Event("change")}catch(qc){}}if(!qa){qa=eT.createEvent("Event");qa.initEvent("change",true,true)}p7.dispatchEvent(qa)})}qb.handleTracksChange();return qb}var e=t.prototype;e.handleClick=function r(p8){var p5=this.track;var p6=this.player_.textTracks();on.prototype.handleClick.call(this,p8);if(!p6){return}for(var p7=0;p7<p6.length;p7++){var p4=p6[p7];if(this.kinds.indexOf(p4.kind)===-1){continue}if(p4===p5){if(p4.mode!=="showing"){p4.mode="showing"}}else{if(p4.mode!=="disabled"){p4.mode="disabled"}}}};e.handleTracksChange=function d(p5){var p4=this.track.mode==="showing";if(p4!==this.isSelected_){this.selected(p4)}};e.handleSelectedLanguageChange=function i(p5){if(this.track.mode==="showing"){var p4=this.player_.cache_.selectedLanguage;if(p4&&p4.enabled&&p4.language===this.track.language&&p4.kind!==this.track.kind){return}this.player_.cache_.selectedLanguage={enabled:true,language:this.track.language,kind:this.track.kind}}};e.dispose=function p3(){this.track=null;on.prototype.dispose.call(this)};return t}(mF);pO.registerComponent("TextTrackMenuItem",mD);var ip=function(t){em(r,t);function r(p3,on){on.track={player:p3,kind:on.kind,kinds:on.kinds,"default":false,mode:"disabled"};if(!on.kinds){on.kinds=[on.kind]}if(on.label){on.track.label=on.label}else{on.track.label=on.kinds.join(" and ")+" off"}on.selectable=true;on.multiSelectable=false;return t.call(this,p3,on)||this}var e=r.prototype;e.handleTracksChange=function d(p7){var p5=this.player().textTracks();var p4=true;for(var p6=0,p3=p5.length;p6<p3;p6++){var on=p5[p6];if(this.options_.kinds.indexOf(on.kind)>-1&&on.mode==="showing"){p4=false;break}}if(p4!==this.isSelected_){this.selected(p4)}};e.handleSelectedLanguageChange=function i(p7){var p4=this.player().textTracks();var p6=true;for(var p5=0,p3=p4.length;p5<p3;p5++){var on=p4[p5];if(["captions","descriptions","subtitles"].indexOf(on.kind)>-1&&on.mode==="showing"){p6=false;break}}if(p6){this.player_.cache_.selectedLanguage={enabled:false}}};return r}(mD);pO.registerComponent("OffTextTrackMenuItem",ip);var lS=function(r){em(e,r);function e(on,t){if(t===void 0){t={}}t.tracks=on.textTracks();return r.call(this,on,t)||this}var d=e.prototype;d.createItems=function i(on,p7){if(on===void 0){on=[]}if(p7===void 0){p7=mD}var p4;if(this.label_){p4=this.label_+" off"}on.push(new ip(this.player_,{kinds:this.kinds_,kind:this.kind_,label:p4}));this.hideThreshold_+=1;var p3=this.player_.textTracks();if(!Array.isArray(this.kinds_)){this.kinds_=[this.kind_]}for(var p5=0;p5<p3.length;p5++){var t=p3[p5];if(this.kinds_.indexOf(t.kind)>-1){var p6=new p7(this.player_,{track:t,kinds:this.kinds_,kind:this.kind_,selectable:true,multiSelectable:false});p6.addClass("vjs-"+t.kind+"-menu-item");on.push(p6)}}return on};return e}(bu);pO.registerComponent("TextTrackButton",lS);var mP=function(i){em(r,i);function r(p5,p4){var p7;var p3=p4.track;var on=p4.cue;var p6=p5.currentTime();p4.selectable=true;p4.multiSelectable=false;p4.label=on.text;p4.selected=on.startTime<=p6&&p6<on.endTime;p7=i.call(this,p5,p4)||this;p7.track=p3;p7.cue=on;p3.addEventListener("cuechange",j(gx(p7),p7.update));return p7}var d=r.prototype;d.handleClick=function e(on){i.prototype.handleClick.call(this);this.player_.currentTime(this.cue.startTime);this.update(this.cue.startTime)};d.update=function t(p4){var on=this.cue;var p3=this.player_.currentTime();this.selected(on.startTime<=p3&&p3<on.endTime)};return r}(mF);pO.registerComponent("ChaptersTrackMenuItem",mP);var br=function(p7){em(p6,p7);function p6(p9,p8,qa){return p7.call(this,p9,p8,qa)||this}var p4=p6.prototype;p4.buildCSSClass=function on(){return"vjs-chapters-button "+p7.prototype.buildCSSClass.call(this)};p4.buildWrapperCSSClass=function r(){return"vjs-chapters-button "+p7.prototype.buildWrapperCSSClass.call(this)};p4.update=function i(p8){if(!this.track_||p8&&(p8.type==="addtrack"||p8.type==="removetrack")){this.setTrack(this.findChaptersTrack())}p7.prototype.update.call(this)};p4.setTrack=function p3(p8){if(this.track_===p8){return}if(!this.updateHandler_){this.updateHandler_=this.update.bind(this)}if(this.track_){var p9=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);if(p9){p9.removeEventListener("load",this.updateHandler_)}this.track_=null}this.track_=p8;if(this.track_){this.track_.mode="hidden";var qa=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);if(qa){qa.addEventListener("load",this.updateHandler_)}}};p4.findChaptersTrack=function e(){var p9=this.player_.textTracks()||[];for(var qa=p9.length-1;qa>=0;qa--){var p8=p9[qa];if(p8.kind===this.kind_){return p8}}};p4.getMenuCaption=function d(){if(this.track_&&this.track_.label){return this.track_.label}return this.localize(ac(this.kind_))};p4.createMenu=function p5(){this.options_.title=this.getMenuCaption();return p7.prototype.createMenu.call(this)};p4.createItems=function t(){var qb=[];if(!this.track_){return qb}var qc=this.track_.cues;if(!qc){return qb}for(var qd=0,p9=qc.length;qd<p9;qd++){var p8=qc[qd];var qa=new mP(this.player_,{track:this.track_,cue:p8});qb.push(qa)}return qb};return p6}(lS);br.prototype.kind_="chapters";br.prototype.controlText_="Chapters";pO.registerComponent("ChaptersButton",br);var k3=function(on){em(t,on);function t(p6,p5,p7){var p8;p8=on.call(this,p6,p5,p7)||this;var p4=p6.textTracks();var p3=j(gx(p8),p8.handleTracksChange);p4.addEventListener("change",p3);p8.on("dispose",function(){p4.removeEventListener("change",p3)});return p8}var r=t.prototype;r.handleTracksChange=function i(p8){var p5=this.player().textTracks();var p7=false;for(var p6=0,p4=p5.length;p6<p4;p6++){var p3=p5[p6];if(p3.kind!==this.kind_&&p3.mode==="showing"){p7=true;break}}if(p7){this.disable()}else{this.enable()}};r.buildCSSClass=function e(){return"vjs-descriptions-button "+on.prototype.buildCSSClass.call(this)};r.buildWrapperCSSClass=function d(){return"vjs-descriptions-button "+on.prototype.buildWrapperCSSClass.call(this)};return t}(lS);k3.prototype.kind_="descriptions";k3.prototype.controlText_="Descriptions";pO.registerComponent("DescriptionsButton",k3);var bC=function(t){em(r,t);function r(p3,on,p4){return t.call(this,p3,on,p4)||this}var i=r.prototype;i.buildCSSClass=function e(){return"vjs-subtitles-button "+t.prototype.buildCSSClass.call(this)};i.buildWrapperCSSClass=function d(){return"vjs-subtitles-button "+t.prototype.buildWrapperCSSClass.call(this)};return r}(lS);bC.prototype.kind_="subtitles";bC.prototype.controlText_="Subtitles";pO.registerComponent("SubtitlesButton",bC);var go=function(r){em(i,r);function i(on,t){var p3;t.track={player:on,kind:t.kind,label:t.kind+" settings",selectable:false,"default":false,mode:"disabled"};t.selectable=false;t.name="CaptionSettingsMenuItem";p3=r.call(this,on,t)||this;p3.addClass("vjs-texttrack-settings");p3.controlText(", opens "+t.kind+" settings dialog");return p3}var d=i.prototype;d.handleClick=function e(t){this.player().getChild("textTrackSettings").open()};return i}(mD);pO.registerComponent("CaptionSettingsMenuItem",go);var mi=function(on){em(t,on);function t(p4,p3,p5){return on.call(this,p4,p3,p5)||this}var i=t.prototype;i.buildCSSClass=function e(){return"vjs-captions-button "+on.prototype.buildCSSClass.call(this)};i.buildWrapperCSSClass=function d(){return"vjs-captions-button "+on.prototype.buildWrapperCSSClass.call(this)};i.createItems=function r(){var p3=[];if(!(this.player().tech_&&this.player().tech_.featuresNativeTextTracks)&&this.player().getChild("textTrackSettings")){p3.push(new go(this.player_,{kind:this.kind_}));this.hideThreshold_+=1}return on.prototype.createItems.call(this,p3)};return t}(lS);mi.prototype.kind_="captions";mi.prototype.controlText_="Captions";pO.registerComponent("CaptionsButton",mi);var ef=function(r){em(e,r);function e(){return r.apply(this,arguments)||this}var i=e.prototype;i.createEl=function d(p4,p3,t){var p5='<span class="vjs-menu-item-text">'+this.localize(this.options_.label);if(this.options_.track.kind==="captions"){p5+='\n        <span aria-hidden="true" class="vjs-icon-placeholder"></span>\n        <span class="vjs-control-text"> '+this.localize("Captions")+"</span>\n      "}p5+="</span>";var on=r.prototype.createEl.call(this,p4,pr({innerHTML:p5},p3),t);return on};return e}(mD);pO.registerComponent("SubsCapsMenuItem",ef);var ld=function(on){em(t,on);function t(p4,p3){var p5;if(p3===void 0){p3={}}p5=on.call(this,p4,p3)||this;p5.label_="subtitles";if(["en","en-us","en-ca","fr-ca"].indexOf(p5.player_.language_)>-1){p5.label_="captions"}p5.menuButton_.controlText(ac(p5.label_));return p5}var i=t.prototype;i.buildCSSClass=function e(){return"vjs-subs-caps-button "+on.prototype.buildCSSClass.call(this)};i.buildWrapperCSSClass=function d(){return"vjs-subs-caps-button "+on.prototype.buildWrapperCSSClass.call(this)};i.createItems=function r(){var p3=[];if(!(this.player().tech_&&this.player().tech_.featuresNativeTextTracks)&&this.player().getChild("textTrackSettings")){p3.push(new go(this.player_,{kind:this.label_}));this.hideThreshold_+=1}p3=on.prototype.createItems.call(this,p3,ef);return p3};return t}(lS);ld.prototype.kinds_=["captions","subtitles"];ld.prototype.controlText_="Subtitles";pO.registerComponent("SubsCapsButton",ld);var nR=function(on){em(r,on);function r(p7,p6){var p8;var p3=p6.track;var p5=p7.audioTracks();p6.label=p3.label||p3.language||"Unknown";p6.selected=p3.enabled;p8=on.call(this,p7,p6)||this;p8.track=p3;p8.addClass("vjs-"+p3.kind+"-menu-item");var p4=function p4(){for(var p9=arguments.length,qa=new Array(p9),qb=0;qb<p9;qb++){qa[qb]=arguments[qb]}p8.handleTracksChange.apply(gx(p8),qa)};p5.addEventListener("change",p4);p8.on("dispose",function(){p5.removeEventListener("change",p4)});return p8}var i=r.prototype;i.createEl=function d(p6,p5,p3){var p7='<span class="vjs-menu-item-text">'+this.localize(this.options_.label);if(this.options_.track.kind==="main-desc"){p7+='\n        <span aria-hidden="true" class="vjs-icon-placeholder"></span>\n        <span class="vjs-control-text"> '+this.localize("Descriptions")+"</span>\n      "}p7+="</span>";var p4=on.prototype.createEl.call(this,p6,pr({innerHTML:p7},p5),p3);return p4};i.handleClick=function t(p6){var p4=this.player_.audioTracks();on.prototype.handleClick.call(this,p6);for(var p5=0;p5<p4.length;p5++){var p3=p4[p5];p3.enabled=p3===this.track}};i.handleTracksChange=function e(p3){this.selected(this.track.enabled)};return r}(mF);pO.registerComponent("AudioTrackMenuItem",nR);var aW=function(on){em(t,on);function t(p4,p3){if(p3===void 0){p3={}}p3.tracks=p4.audioTracks();return on.call(this,p4,p3)||this}var i=t.prototype;i.buildCSSClass=function e(){return"vjs-audio-button "+on.prototype.buildCSSClass.call(this)};i.buildWrapperCSSClass=function d(){return"vjs-audio-button "+on.prototype.buildWrapperCSSClass.call(this)};i.createItems=function r(p4){if(p4===void 0){p4=[]}this.hideThreshold_=1;var p5=this.player_.audioTracks();for(var p6=0;p6<p5.length;p6++){var p3=p5[p6];p4.push(new nR(this.player_,{track:p3,selectable:true,multiSelectable:false}))}return p4};return t}(bu);aW.prototype.controlText_="Audio Track";pO.registerComponent("AudioTrackButton",aW);var gW=function(i){em(t,i);function t(p4,p3){var p6;var on=p3.rate;var p5=parseFloat(on,10);p3.label=on;p3.selected=p5===1;p3.selectable=true;p3.multiSelectable=false;p6=i.call(this,p4,p3)||this;p6.label=on;p6.rate=p5;p6.on(p4,"ratechange",p6.update);return p6}var d=t.prototype;d.handleClick=function e(on){i.prototype.handleClick.call(this);this.player().playbackRate(this.rate)};d.update=function r(on){this.selected(this.player().playbackRate()===this.rate)};return t}(mF);gW.prototype.contentElType="button";pO.registerComponent("PlaybackRateMenuItem",gW);var jR=function(p8){em(d,p8);function d(qc,qb){var qd;qd=p8.call(this,qc,qb)||this;qd.updateVisibility();qd.updateLabel();qd.on(qc,"loadstart",qd.updateVisibility);qd.on(qc,"ratechange",qd.updateLabel);return qd}var p6=d.prototype;p6.createEl=function e(){var qb=p8.prototype.createEl.call(this);this.labelEl_=ms("div",{className:"vjs-playback-rate-value",innerHTML:"1x"});qb.appendChild(this.labelEl_);return qb};p6.dispose=function p9(){this.labelEl_=null;p8.prototype.dispose.call(this)};p6.buildCSSClass=function p3(){return"vjs-playback-rate "+p8.prototype.buildCSSClass.call(this)};p6.buildWrapperCSSClass=function r(){return"vjs-playback-rate "+p8.prototype.buildWrapperCSSClass.call(this)};p6.createMenu=function p7(){var qd=new ao(this.player());var qc=this.playbackRates();if(qc){for(var qb=qc.length-1;qb>=0;qb--){qd.addChild(new gW(this.player(),{rate:qc[qb]+"x"}))}}return qd};p6.updateARIAAttributes=function qa(){this.el().setAttribute("aria-valuenow",this.player().playbackRate())};p6.handleClick=function t(qf){var qc=this.player().playbackRate();var qe=this.playbackRates();var qb=qe[0];for(var qd=0;qd<qe.length;qd++){if(qe[qd]>qc){qb=qe[qd];break}}this.player().playbackRate(qb)};p6.playbackRates=function p5(){return this.options_.playbackRates||this.options_.playerOptions&&this.options_.playerOptions.playbackRates};p6.playbackRateSupported=function on(){return this.player().tech_&&this.player().tech_.featuresPlaybackRate&&this.playbackRates()&&this.playbackRates().length>0};p6.updateVisibility=function i(qb){if(this.playbackRateSupported()){this.removeClass("vjs-hidden")}else{this.addClass("vjs-hidden")}};p6.updateLabel=function p4(qb){if(this.playbackRateSupported()){this.labelEl_.innerHTML=this.player().playbackRate()+"x"}};return d}(nW);jR.prototype.controlText_="Playback Rate";pO.registerComponent("PlaybackRateMenuButton",jR);var mU=function(t){em(r,t);function r(){return t.apply(this,arguments)||this}var i=r.prototype;i.buildCSSClass=function e(){return"vjs-spacer "+t.prototype.buildCSSClass.call(this)};i.createEl=function d(){return t.prototype.createEl.call(this,"div",{className:this.buildCSSClass()})};return r}(pO);pO.registerComponent("Spacer",mU);var hz=function(t){em(r,t);function r(){return t.apply(this,arguments)||this}var i=r.prototype;i.buildCSSClass=function e(){return"vjs-custom-control-spacer "+t.prototype.buildCSSClass.call(this)};i.createEl=function d(){var on=t.prototype.createEl.call(this,{className:this.buildCSSClass()});on.innerHTML="\xA0";return on};return r}(mU);pO.registerComponent("CustomControlSpacer",hz);var fP=function(r){em(i,r);function i(){return r.apply(this,arguments)||this}var e=i.prototype;e.createEl=function d(){return r.prototype.createEl.call(this,"div",{className:"vjs-control-bar",dir:"ltr"})};return i}(pO);fP.prototype.options_={children:["playToggle","volumePanel","currentTimeDisplay","timeDivider","durationDisplay","progressControl","liveDisplay","seekToLive","remainingTimeDisplay","customControlSpacer","playbackRateMenuButton","chaptersButton","descriptionsButton","subsCapsButton","audioTrackButton","fullscreenToggle"]};if("exitPictureInPicture" in eT){fP.prototype.options_.children.splice(fP.prototype.options_.children.length-1,0,"pictureInPictureToggle")}pO.registerComponent("ControlBar",fP);var j6=function(t){em(i,t);function i(p3,on){var p4;p4=t.call(this,p3,on)||this;p4.on(p3,"error",p4.open);return p4}var e=i.prototype;e.buildCSSClass=function d(){return"vjs-error-display "+t.prototype.buildCSSClass.call(this)};e.content=function r(){var on=this.player().error();return on?this.localize(on.message):""};return i}(mm);j6.prototype.options_=ox({},mm.prototype.options_,{pauseOnOpen:false,fillAlways:true,temporary:false,uncloseable:true});pO.registerComponent("ErrorDisplay",j6);var gu="vjs-text-track-settings";var mI=["#000","Black"];var pK=["#00F","Blue"];var nm=["#0FF","Cyan"];var i8=["#0F0","Green"];var mf=["#F0F","Magenta"];var mG=["#F00","Red"];var i7=["#FFF","White"];var ny=["#FF0","Yellow"];var eB=["1","Opaque"];var bb=["0.5","Semi-Transparent"];var jw=["0","Transparent"];var pp={backgroundColor:{selector:".vjs-bg-color > select",id:"captions-background-color-%s",label:"Color",options:[mI,i7,mG,i8,pK,ny,mf,nm]},backgroundOpacity:{selector:".vjs-bg-opacity > select",id:"captions-background-opacity-%s",label:"Transparency",options:[eB,bb,jw]},color:{selector:".vjs-fg-color > select",id:"captions-foreground-color-%s",label:"Color",options:[i7,mI,mG,i8,pK,ny,mf,nm]},edgeStyle:{selector:".vjs-edge-style > select",id:"%s",label:"Text Edge Style",options:[["none","None"],["raised","Raised"],["depressed","Depressed"],["uniform","Uniform"],["dropshadow","Dropshadow"]]},fontFamily:{selector:".vjs-font-family > select",id:"captions-font-family-%s",label:"Font Family",options:[["proportionalSansSerif","Proportional Sans-Serif"],["monospaceSansSerif","Monospace Sans-Serif"],["proportionalSerif","Proportional Serif"],["monospaceSerif","Monospace Serif"],["casual","Casual"],["script","Script"],["small-caps","Small Caps"]]},fontPercent:{selector:".vjs-font-percent > select",id:"captions-font-size-%s",label:"Font Size",options:[["0.50","50%"],["0.75","75%"],["1.00","100%"],["1.25","125%"],["1.50","150%"],["1.75","175%"],["2.00","200%"],["3.00","300%"],["4.00","400%"]],"default":2,parser:function u(d){return d==="1.00"?null:Number(d)}},textOpacity:{selector:".vjs-text-opacity > select",id:"captions-foreground-opacity-%s",label:"Transparency",options:[eB,bb]},windowColor:{selector:".vjs-window-color > select",id:"captions-window-color-%s",label:"Color"},windowOpacity:{selector:".vjs-window-opacity > select",id:"captions-window-opacity-%s",label:"Transparency",options:[jw,bb,eB]}};pp.windowColor.options=pp.backgroundColor.options;function e8(d,e){if(e){d=e(d)}if(d&&d!=="none"){return d}}function kS(d,i){var e=d.options[d.options.selectedIndex].value;return e8(e,i)}function cS(e,r,t){if(!r){return}for(var d=0;d<e.options.length;d++){if(e8(e.options[d].value,t)===r){e.selectedIndex=d;break}}}var fY=function(p8){em(r,p8);function r(qk,qj){var ql;qj.temporary=false;ql=p8.call(this,qk,qj)||this;ql.updateDisplay=j(gx(ql),ql.updateDisplay);ql.fill();ql.hasBeenOpened_=ql.hasBeenFilled_=true;ql.endDialog=ms("p",{className:"vjs-control-text",textContent:ql.localize("End of dialog window.")});ql.el().appendChild(ql.endDialog);ql.setDefaults();if(qj.persistTextTrackSettings===undefined){ql.options_.persistTextTrackSettings=ql.options_.playerOptions.persistTextTrackSettings}ql.on(ql.$(".vjs-done-button"),"click",function(){ql.saveSettings();ql.close()});ql.on(ql.$(".vjs-default-button"),"click",function(){ql.setDefaults();ql.updateDisplay()});q(pp,function(qm){ql.on(ql.$(qm.selector),"change",ql.updateDisplay)});if(ql.options_.persistTextTrackSettings){ql.restoreSettings()}return ql}var i=r.prototype;i.dispose=function qi(){this.endDialog=null;p8.prototype.dispose.call(this)};i.createElSelect_=function qa(ql,qo,qm){var qn=this;if(qo===void 0){qo=""}if(qm===void 0){qm="label"}var qk=pp[ql];var qp=qk.id.replace("%s",this.id_);var qj=[qo,qp].join(" ").trim();return["<"+qm+' id="'+qp+'" class="'+(qm==="label"?"vjs-label":"")+'">',this.localize(qk.label),"</"+qm+">",'<select aria-labelledby="'+qj+'">'].concat(qk.options.map(function(qr){var qq=qp+"-"+qr[1].replace(/\W+/g,"");return['<option id="'+qq+'" value="'+qr[0]+'" ','aria-labelledby="'+qj+" "+qq+'">',qn.localize(qr[1]),"</option>"].join("")})).concat("</select>").join("")};i.createElFgColor_=function qf(){var qj="captions-text-legend-"+this.id_;return['<fieldset class="vjs-fg-color vjs-track-setting">','<legend id="'+qj+'">',this.localize("Text"),"</legend>",this.createElSelect_("color",qj),'<span class="vjs-text-opacity vjs-opacity">',this.createElSelect_("textOpacity",qj),"</span>","</fieldset>"].join("")};i.createElBgColor_=function qh(){var qj="captions-background-"+this.id_;return['<fieldset class="vjs-bg-color vjs-track-setting">','<legend id="'+qj+'">',this.localize("Background"),"</legend>",this.createElSelect_("backgroundColor",qj),'<span class="vjs-bg-opacity vjs-opacity">',this.createElSelect_("backgroundOpacity",qj),"</span>","</fieldset>"].join("")};i.createElWinColor_=function qb(){var qj="captions-window-"+this.id_;return['<fieldset class="vjs-window-color vjs-track-setting">','<legend id="'+qj+'">',this.localize("Window"),"</legend>",this.createElSelect_("windowColor",qj),'<span class="vjs-window-opacity vjs-opacity">',this.createElSelect_("windowOpacity",qj),"</span>","</fieldset>"].join("")};i.createElColors_=function p5(){return ms("div",{className:"vjs-track-settings-colors",innerHTML:[this.createElFgColor_(),this.createElBgColor_(),this.createElWinColor_()].join("")})};i.createElFont_=function on(){return ms("div",{className:"vjs-track-settings-font",innerHTML:['<fieldset class="vjs-font-percent vjs-track-setting">',this.createElSelect_("fontPercent","","legend"),"</fieldset>",'<fieldset class="vjs-edge-style vjs-track-setting">',this.createElSelect_("edgeStyle","","legend"),"</fieldset>",'<fieldset class="vjs-font-family vjs-track-setting">',this.createElSelect_("fontFamily","","legend"),"</fieldset>"].join("")})};i.createElControls_=function t(){var qj=this.localize("restore all settings to the default values");return ms("div",{className:"vjs-track-settings-controls",innerHTML:['<button type="button" class="vjs-default-button" title="'+qj+'">',this.localize("Reset"),'<span class="vjs-control-text"> '+qj+"</span>","</button>",'<button type="button" class="vjs-done-button">'+this.localize("Done")+"</button>"].join("")})};i.content=function qc(){return[this.createElColors_(),this.createElFont_(),this.createElControls_()]};i.label=function p4(){return this.localize("Caption Settings Dialog")};i.description=function qd(){return this.localize("Beginning of dialog window. Escape will cancel and close the window.")};i.buildCSSClass=function p3(){return p8.prototype.buildCSSClass.call(this)+" vjs-text-track-settings"};i.getValues=function e(){var qj=this;return by(pp,function(qk,ql,qm){var qn=kS(qj.$(ql.selector),ql.parser);if(qn!==undefined){qk[qm]=qn}return qk},{})};i.setValues=function qe(qj){var qk=this;q(pp,function(ql,qm){cS(qk.$(ql.selector),qj[qm],ql.parser)})};i.setDefaults=function p7(){var qj=this;q(pp,function(ql){var qk=ql.hasOwnProperty("default")?ql["default"]:0;qj.$(ql.selector).selectedIndex=qk})};i.restoreSettings=function d(){var qj;try{qj=JSON.parse(cb.localStorage.getItem(gu))}catch(qk){aC.warn(qk)}if(qj){this.setValues(qj)}};i.saveSettings=function p9(){if(!this.options_.persistTextTrackSettings){return}var qj=this.getValues();try{if(Object.keys(qj).length){cb.localStorage.setItem(gu,JSON.stringify(qj))}else{cb.localStorage.removeItem(gu)}}catch(qk){aC.warn(qk)}};i.updateDisplay=function qg(){var qj=this.player_.getChild("textTrackDisplay");if(qj){qj.updateDisplay()}};i.conditionalBlur_=function p6(){this.previouslyActiveEl_=null;var qk=this.player_.controlBar;var ql=qk&&qk.subsCapsButton;var qj=qk&&qk.captionsButton;if(ql){ql.focus()}else{if(qj){qj.focus()}}};return r}(mm);pO.registerComponent("TextTrackSettings",fY);var dI=function(i){em(t,i);function t(p5,p3){var p7;var p4=p3.ResizeObserver||cb.ResizeObserver;if(p3.ResizeObserver===null){p4=false}var p6=nl({createEl:!p4,reportTouchActivity:false},p3);p7=i.call(this,p5,p6)||this;p7.ResizeObserver=p3.ResizeObserver||cb.ResizeObserver;p7.loadListener_=null;p7.resizeObserver_=null;p7.debouncedHandler_=mv(function(){p7.resizeHandler()},100,false,gx(p7));if(p4){p7.resizeObserver_=new p7.ResizeObserver(p7.debouncedHandler_);p7.resizeObserver_.observe(p5.el())}else{p7.loadListener_=function(){if(!p7.el_||!p7.el_.contentWindow){return}var p9=p7.debouncedHandler_;var p8=p7.unloadListener_=function(){fF(this,"resize",p9);fF(this,"unload",p8);p8=null};kJ(p7.el_.contentWindow,"unload",p8);kJ(p7.el_.contentWindow,"resize",p9)};p7.one("load",p7.loadListener_)}return p7}var e=t.prototype;e.createEl=function d(){return i.prototype.createEl.call(this,"iframe",{className:"vjs-resize-manager",tabIndex:-1},{"aria-hidden":"true"})};e.resizeHandler=function r(){if(!this.player_||!this.player_.trigger){return}this.player_.trigger("playerresize")};e.dispose=function on(){if(this.debouncedHandler_){this.debouncedHandler_.cancel()}if(this.resizeObserver_){if(this.player_.el()){this.resizeObserver_.unobserve(this.player_.el())}this.resizeObserver_.disconnect()}if(this.loadListener_){this.off("load",this.loadListener_)}if(this.el_&&this.el_.contentWindow&&this.unloadListener_){this.unloadListener_.call(this.el_.contentWindow)}this.ResizeObserver=null;this.resizeObserver=null;this.debouncedHandler_=null;this.loadListener_=null;i.prototype.dispose.call(this)};return t}(pO);pO.registerComponent("ResizeManager",dI);var z={trackingThreshold:30,liveTolerance:15};var bV=function(qf){em(qd,qf);function qd(ql,qk){var qn;var qm=nl(z,qk,{createEl:false});qn=qf.call(this,ql,qm)||this;qn.reset_();qn.on(qn.player_,"durationchange",qn.handleDurationchange);if(cL&&"hidden" in eT&&"visibilityState" in eT){qn.on(eT,"visibilitychange",qn.handleVisibilityChange)}return qn}var i=qd.prototype;i.handleVisibilityChange=function qi(){if(this.player_.duration()!==Infinity){return}if(eT.hidden){this.stopTracking()}else{this.startTracking()}};i.trackLive_=function p7(){var qp=this.player_.seekable();if(!qp||!qp.length){return}var qo=Number(cb.performance.now().toFixed(4));var ql=this.lastTime_===-1?0:(qo-this.lastTime_)/1000;this.lastTime_=qo;this.pastSeekEnd_=this.pastSeekEnd()+ql;var qk=this.liveCurrentTime();var qn=this.player_.currentTime();var qm=this.player_.paused()||this.seekedBehindLive_||Math.abs(qk-qn)>this.options_.liveTolerance;if(!this.timeupdateSeen_||qk===Infinity){qm=false}if(qm!==this.behindLiveEdge_){this.behindLiveEdge_=qm;this.trigger("liveedgechange")}};i.handleDurationchange=function p5(){if(this.player_.duration()===Infinity&&this.liveWindow()>=this.options_.trackingThreshold){if(this.player_.options_.liveui){this.player_.addClass("vjs-liveui")}this.startTracking()}else{this.player_.removeClass("vjs-liveui");this.stopTracking()}};i.startTracking=function p8(){if(this.isTracking()){return}if(!this.timeupdateSeen_){this.timeupdateSeen_=this.player_.hasStarted()}this.trackingInterval_=this.setInterval(this.trackLive_,kb);this.trackLive_();this.on(this.player_,["play","pause"],this.trackLive_);if(!this.timeupdateSeen_){this.one(this.player_,"play",this.handlePlay);this.one(this.player_,"timeupdate",this.handleFirstTimeupdate)}else{this.on(this.player_,"seeked",this.handleSeeked)}};i.handleFirstTimeupdate=function p3(){this.timeupdateSeen_=true;this.on(this.player_,"seeked",this.handleSeeked)};i.handleSeeked=function qh(){var qk=Math.abs(this.liveCurrentTime()-this.player_.currentTime());this.seekedBehindLive_=this.skipNextSeeked_?false:qk>2;this.skipNextSeeked_=false;this.trackLive_()};i.handlePlay=function on(){this.one(this.player_,"timeupdate",this.seekToLiveEdge)};i.reset_=function qb(){this.lastTime_=-1;this.pastSeekEnd_=0;this.lastSeekEnd_=-1;this.behindLiveEdge_=true;this.timeupdateSeen_=false;this.seekedBehindLive_=false;this.skipNextSeeked_=false;this.clearInterval(this.trackingInterval_);this.trackingInterval_=null;this.off(this.player_,["play","pause"],this.trackLive_);this.off(this.player_,"seeked",this.handleSeeked);this.off(this.player_,"play",this.handlePlay);this.off(this.player_,"timeupdate",this.handleFirstTimeupdate);this.off(this.player_,"timeupdate",this.seekToLiveEdge)};i.stopTracking=function qg(){if(!this.isTracking()){return}this.reset_();this.trigger("liveedgechange")};i.seekableEnd=function p9(){var qm=this.player_.seekable();var ql=[];var qk=qm?qm.length:0;while(qk--){ql.push(qm.end(qk))}return ql.length?ql.sort()[ql.length-1]:Infinity};i.seekableStart=function qj(){var ql=this.player_.seekable();var qm=[];var qk=ql?ql.length:0;while(qk--){qm.push(ql.start(qk))}return qm.length?qm.sort()[0]:0};i.liveWindow=function p4(){var qk=this.liveCurrentTime();if(qk===Infinity){return Infinity}return qk-this.seekableStart()};i.isLive=function r(){return this.isTracking()};i.atLiveEdge=function p6(){return !this.behindLiveEdge()};i.liveCurrentTime=function qa(){return this.pastSeekEnd()+this.seekableEnd()};i.pastSeekEnd=function e(){var qk=this.seekableEnd();if(this.lastSeekEnd_!==-1&&qk!==this.lastSeekEnd_){this.pastSeekEnd_=0}this.lastSeekEnd_=qk;return this.pastSeekEnd_};i.behindLiveEdge=function qc(){return this.behindLiveEdge_};i.isTracking=function d(){return typeof this.trackingInterval_==="number"};i.seekToLiveEdge=function t(){this.seekedBehindLive_=false;if(this.atLiveEdge()){return}this.skipNextSeeked_=true;this.player_.currentTime(this.liveCurrentTime())};i.dispose=function qe(){this.off(eT,"visibilitychange",this.handleVisibilityChange);this.stopTracking();qf.prototype.dispose.call(this)};return qd}(pO);pO.registerComponent("LiveTracker",bV);var bK=function bK(d){var on=d.el();if(on.hasAttribute("src")){d.triggerSourceset(on.src);return true}var r=d.$$("source");var p4=[];var p3="";if(!r.length){return false}for(var t=0;t<r.length;t++){var e=r[t].src;if(e&&p4.indexOf(e)===-1){p4.push(e)}}if(!p4.length){return false}if(p4.length===1){p3=p4[0]}d.triggerSourceset(p3);return true};var or=Object.defineProperty({},"innerHTML",{get:function f0(){return this.cloneNode(true).innerHTML},set:function n5(d){var i=eT.createElement(this.nodeName.toLowerCase());i.innerHTML=d;var e=eT.createDocumentFragment();while(i.childNodes.length){e.appendChild(i.childNodes[0])}this.innerText="";cb.Element.prototype.appendChild.call(this,e);return this.innerHTML}});var eD=function eD(e,t){var r={};for(var d=0;d<e.length;d++){r=Object.getOwnPropertyDescriptor(e[d],t);if(r&&r.set&&r.get){break}}r.enumerable=true;r.configurable=true;return r};var pN=function pN(d){return eD([d.el(),cb.HTMLMediaElement.prototype,cb.Element.prototype,or],"innerHTML")};var hU=function hU(r){var t=r.el();if(t.resetSourceWatch_){return}var i={};var d=pN(r);var e=function e(on){return function(){for(var p4=arguments.length,p5=new Array(p4),p6=0;p6<p4;p6++){p5[p6]=arguments[p6]}var p3=on.apply(t,p5);bK(r);return p3}};["append","appendChild","insertAdjacentHTML"].forEach(function(on){if(!t[on]){return}i[on]=t[on];t[on]=e(i[on])});Object.defineProperty(t,"innerHTML",nl(d,{set:e(d.set)}));t.resetSourceWatch_=function(){t.resetSourceWatch_=null;Object.keys(i).forEach(function(on){t[on]=i[on]});Object.defineProperty(t,"innerHTML",d)};r.one("sourceset",t.resetSourceWatch_)};var cx=Object.defineProperty({},"src",{get:function f0(){if(this.hasAttribute("src")){return dr(cb.Element.prototype.getAttribute.call(this,"src"))}return""},set:function n5(d){cb.Element.prototype.setAttribute.call(this,"src",d);return d}});var ou=function ou(d){return eD([d.el(),cb.HTMLMediaElement.prototype,cx],"src")};var ma=function ma(d){if(!d.featuresSourceset){return}var i=d.el();if(i.resetSourceset_){return}var e=ou(d);var on=i.setAttribute;var r=i.load;Object.defineProperty(i,"src",nl(e,{set:function t(p4){var p3=e.set.call(i,p4);d.triggerSourceset(i.src);return p3}}));i.setAttribute=function(p5,p4){var p3=on.call(i,p5,p4);if(/src/i.test(p5)){d.triggerSourceset(i.src)}return p3};i.load=function(){var p3=r.call(i);if(!bK(d)){d.triggerSourceset("");hU(d)}return p3};if(i.currentSrc){d.triggerSourceset(i.currentSrc)}else{if(!bK(d)){hU(d)}}i.resetSourceset_=function(){i.resetSourceset_=null;i.load=r;i.setAttribute=on;Object.defineProperty(i,"src",e);if(i.resetSourceWatch_){i.resetSourceWatch_()}}};var o2=function o2(t,r,d,p3){if(p3===void 0){p3=true}var on=function on(p4){return Object.defineProperty(t,r,{value:p4,enumerable:true,writable:true})};var i={configurable:true,enumerable:true,get:function e(){var p4=d();on(p4);return p4}};if(p3){i.set=on}return Object.defineProperty(t,r,i)};var pR=function(p8){em(qe,p8);function qe(qC,qB){var qx;qx=p8.call(this,qC,qB)||this;var qs=qC.source;var qt=false;if(qs&&(qx.el_.currentSrc!==qs.src||qC.tag&&qC.tag.initNetworkState_===3)){qx.setSource(qs)}else{qx.handleLateInit_(qx.el_)}if(qC.enableSourceset){qx.setupSourcesetHandling_()}if(qx.el_.hasChildNodes()){var qu=qx.el_.childNodes;var qz=qu.length;var qy=[];while(qz--){var qv=qu[qz];var qA=qv.nodeName.toLowerCase();if(qA==="track"){if(!qx.featuresNativeTextTracks){qy.push(qv)}else{qx.remoteTextTrackEls().addTrackElement_(qv);qx.remoteTextTracks().addTrack(qv.track);qx.textTracks().addTrack(qv.track);if(!qt&&!qx.el_.hasAttribute("crossorigin")&&pq(qv.src)){qt=true}}}}for(var qw=0;qw<qy.length;qw++){qx.el_.removeChild(qy[qw])}}qx.proxyNativeTracks_();if(qx.featuresNativeTextTracks&&qt){aC.warn("Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.\nThis may prevent text tracks from loading.")}qx.restoreMetadataTracksInIOSNativePlayer_();if((gC||c5||b9)&&qC.nativeControlsForTouch===true){qx.setControls(true)}qx.proxyWebkitFullscreen_();qx.triggerReady();return qx}var t=qe.prototype;t.dispose=function qq(){if(this.el_&&this.el_.resetSourceset_){this.el_.resetSourceset_()}qe.disposeMediaElement(this.el_);this.options_=null;p8.prototype.dispose.call(this)};t.setupSourcesetHandling_=function p9(){ma(this)};t.restoreMetadataTracksInIOSNativePlayer_=function qi(){var qs=this.textTracks();var qv;var qu=function qu(){qv=[];for(var qx=0;qx<qs.length;qx++){var qw=qs[qx];if(qw.kind==="metadata"){qv.push({track:qw,storedMode:qw.mode})}}};qu();qs.addEventListener("change",qu);this.on("dispose",function(){return qs.removeEventListener("change",qu)});var qt=function qt(){for(var qx=0;qx<qv.length;qx++){var qw=qv[qx];if(qw.track.mode==="disabled"&&qw.track.mode!==qw.storedMode){qw.track.mode=qw.storedMode}}qs.removeEventListener("change",qt)};this.on("webkitbeginfullscreen",function(){qs.removeEventListener("change",qu);qs.removeEventListener("change",qt);qs.addEventListener("change",qt)});this.on("webkitendfullscreen",function(){qs.removeEventListener("change",qu);qs.addEventListener("change",qu);qs.removeEventListener("change",qt)})};t.overrideNative_=function qf(qt,qs){var qu=this;if(qs!==this["featuresNative"+qt+"Tracks"]){return}var qv=qt.toLowerCase();if(this[qv+"TracksListeners_"]){Object.keys(this[qv+"TracksListeners_"]).forEach(function(qw){var qx=qu.el()[qv+"Tracks"];qx.removeEventListener(qw,qu[qv+"TracksListeners_"][qw])})}this["featuresNative"+qt+"Tracks"]=!qs;this[qv+"TracksListeners_"]=null;this.proxyNativeTracksForType_(qv)};t.overrideNativeAudioTracks=function on(qs){this.overrideNative_("Audio",qs)};t.overrideNativeVideoTracks=function qd(qs){this.overrideNative_("Video",qs)};t.proxyNativeTracksForType_=function qr(qs){var qv=this;var qx=cU[qs];var qt=this.el()[qx.getterName];var qA=this[qx.getterName]();if(!this["featuresNative"+qx.capitalName+"Tracks"]||!qt||!qt.addEventListener){return}var qy={change:function qz(qD){var qC={type:"change",target:qA,currentTarget:qA,srcElement:qA};qA.trigger(qC);if(qs==="text"){qv[fJ.remoteText.getterName]().trigger(qC)}},addtrack:function qw(qC){qA.addTrack(qC.track)},removetrack:function qB(qC){qA.removeTrack(qC.track)}};var qu=function qu(){var qE=[];for(var qD=0;qD<qA.length;qD++){var qF=false;for(var qC=0;qC<qt.length;qC++){if(qt[qC]===qA[qD]){qF=true;break}}if(!qF){qE.push(qA[qD])}}while(qE.length){qA.removeTrack(qE.shift())}};this[qx.getterName+"Listeners_"]=qy;Object.keys(qy).forEach(function(qC){var qD=qy[qC];qt.addEventListener(qC,qD);qv.on("dispose",function(qE){return qt.removeEventListener(qC,qD)})});this.on("loadstart",qu);this.on("dispose",function(qC){return qv.off("loadstart",qu)})};t.proxyNativeTracks_=function i(){var qs=this;cU.names.forEach(function(qt){qs.proxyNativeTracksForType_(qt)})};t.createEl=function qc(){var qw=this.options_.tag;if(!qw||!(this.options_.playerElIngest||this.movingMediaElementInDOM)){if(qw){var qz=qw.cloneNode(true);if(qw.parentNode){qw.parentNode.insertBefore(qz,qw)}qe.disposeMediaElement(qw);qw=qz}else{qw=eT.createElement("video");var qt=this.options_.tag&&kL(this.options_.tag);var qu=nl({},qt);if(!gC||this.options_.nativeControlsForTouch!==true){delete qu.controls}ky(qw,pr(qu,{id:this.options_.techId,"class":"vjs-tech"}))}qw.playerId=this.options_.playerId}if(typeof this.options_.preload!=="undefined"){ne(qw,"preload",this.options_.preload)}var qx=["loop","muted","playsinline","autoplay"];for(var qv=0;qv<qx.length;qv++){var qs=qx[qv];var qy=this.options_[qs];if(typeof qy!=="undefined"){if(qy){ne(qw,qs,qs)}else{be(qw,qs)}qw[qs]=qy}}return qw};t.handleLateInit_=function p6(qt){if(qt.networkState===0||qt.networkState===3){return}if(qt.readyState===0){var qs=false;var qw=function qw(){qs=true};this.on("loadstart",qw);var qv=function qv(){if(!qs){this.trigger("loadstart")}};this.on("loadedmetadata",qv);this.ready(function(){this.off("loadstart",qw);this.off("loadedmetadata",qv);if(!qs){this.trigger("loadstart")}});return}var qu=["loadstart"];qu.push("loadedmetadata");if(qt.readyState>=2){qu.push("loadeddata")}if(qt.readyState>=3){qu.push("canplay")}if(qt.readyState>=4){qu.push("canplaythrough")}this.ready(function(){qu.forEach(function(qx){this.trigger(qx)},this)})};t.setCurrentTime=function p7(qt){try{this.el_.currentTime=qt}catch(qs){aC(qs,"Video is not ready. (Video.js)")}};t.duration=function d(){var qt=this;if(this.el_.duration===Infinity&&j3&&mh&&this.el_.currentTime===0){var qs=function qs(){if(qt.el_.currentTime>0){if(qt.el_.duration===Infinity){qt.trigger("durationchange")}qt.off("timeupdate",qs)}};this.on("timeupdate",qs);return NaN}return this.el_.duration||NaN};t.width=function qg(){return this.el_.offsetWidth};t.height=function qb(){return this.el_.offsetHeight};t.proxyWebkitFullscreen_=function p4(){var qs=this;if(!("webkitDisplayingFullscreen" in this.el_)){return}var qu=function qu(){this.trigger("fullscreenchange",{isFullscreen:false})};var qt=function qt(){if("webkitPresentationMode" in this.el_&&this.el_.webkitPresentationMode!=="picture-in-picture"){this.one("webkitendfullscreen",qu);this.trigger("fullscreenchange",{isFullscreen:true,nativeIOSFullscreen:true})}};this.on("webkitbeginfullscreen",qt);this.on("dispose",function(){qs.off("webkitbeginfullscreen",qt);qs.off("webkitendfullscreen",qu)})};t.supportsFullScreen=function qk(){if(typeof this.el_.webkitEnterFullScreen==="function"){var qs=cb.navigator&&cb.navigator.userAgent||"";if(/Android/.test(qs)||!/Chrome|Mac OS X 10.5/.test(qs)){return true}}return false};t.enterFullScreen=function ql(){var qs=this.el_;if(qs.paused&&qs.networkState<=qs.HAVE_METADATA){ai(this.el_.play());this.setTimeout(function(){qs.pause();try{qs.webkitEnterFullScreen()}catch(qu){this.trigger("fullscreenerror",qu)}},0)}else{try{qs.webkitEnterFullScreen()}catch(qt){this.trigger("fullscreenerror",qt)}}};t.exitFullScreen=function r(){if(!this.el_.webkitDisplayingFullscreen){this.trigger("fullscreenerror",new Error("The video is not fullscreen"));return}this.el_.webkitExitFullScreen()};t.requestPictureInPicture=function qa(){return this.el_.requestPictureInPicture()};t.src=function p3(qs){if(qs===undefined){return this.el_.src}this.setSrc(qs)};t.reset=function qo(){qe.resetMediaElement(this.el_)};t.currentSrc=function qp(){if(this.currentSource_){return this.currentSource_.src}return this.el_.currentSrc};t.setControls=function qh(qs){this.el_.controls=!!qs};t.addTextTrack=function e(qt,qs,qu){if(!this.featuresNativeTextTracks){return p8.prototype.addTextTrack.call(this,qt,qs,qu)}return this.el_.addTextTrack(qt,qs,qu)};t.createRemoteTextTrack=function p5(qs){if(!this.featuresNativeTextTracks){return p8.prototype.createRemoteTextTrack.call(this,qs)}var qt=eT.createElement("track");if(qs.kind){qt.kind=qs.kind}if(qs.label){qt.label=qs.label}if(qs.language||qs.srclang){qt.srclang=qs.language||qs.srclang}if(qs["default"]){qt["default"]=qs["default"]}if(qs.id){qt.id=qs.id}if(qs.src){qt.src=qs.src}return qt};t.addRemoteTextTrack=function qm(qs,qt){var qu=p8.prototype.addRemoteTextTrack.call(this,qs,qt);if(this.featuresNativeTextTracks){this.el().appendChild(qu)}return qu};t.removeRemoteTextTrack=function qj(qs){p8.prototype.removeRemoteTextTrack.call(this,qs);if(this.featuresNativeTextTracks){var qt=this.$$("track");var qu=qt.length;while(qu--){if(qs===qt[qu]||qs===qt[qu].track){this.el().removeChild(qt[qu])}}}};t.getVideoPlaybackQuality=function qn(){if(typeof this.el().getVideoPlaybackQuality==="function"){return this.el().getVideoPlaybackQuality()}var qs={};if(typeof this.el().webkitDroppedFrameCount!=="undefined"&&typeof this.el().webkitDecodedFrameCount!=="undefined"){qs.droppedVideoFrames=this.el().webkitDroppedFrameCount;qs.totalVideoFrames=this.el().webkitDecodedFrameCount}if(cb.performance&&typeof cb.performance.now==="function"){qs.creationTime=cb.performance.now()}else{if(cb.performance&&cb.performance.timing&&typeof cb.performance.timing.navigationStart==="number"){qs.creationTime=cb.Date.now()-cb.performance.timing.navigationStart}}return qs};return qe}(gG);o2(pR,"TEST_VID",function(){if(!lB()){return}var e=eT.createElement("video");var d=eT.createElement("track");d.kind="captions";d.srclang="en";d.label="English";e.appendChild(d);return e});pR.isSupported=function(){try{pR.TEST_VID.volume=0.5}catch(d){return false}return !!(pR.TEST_VID&&pR.TEST_VID.canPlayType)};pR.canPlayType=function(d){return pR.TEST_VID.canPlayType(d)};pR.canPlaySource=function(e,d){return pR.canPlayType(e.type)};pR.canControlVolume=function(){try{var d=pR.TEST_VID.volume;pR.TEST_VID.volume=d/2+0.1;return d!==pR.TEST_VID.volume}catch(i){return false}};pR.canMuteVolume=function(){try{var d=pR.TEST_VID.muted;pR.TEST_VID.muted=!d;if(pR.TEST_VID.muted){ne(pR.TEST_VID,"muted","muted")}else{be(pR.TEST_VID,"muted","muted")}return d!==pR.TEST_VID.muted}catch(i){return false}};pR.canControlPlaybackRate=function(){if(j3&&mh&&dm<58){return false}try{var d=pR.TEST_VID.playbackRate;pR.TEST_VID.playbackRate=d/2+0.1;return d!==pR.TEST_VID.playbackRate}catch(i){return false}};pR.canOverrideAttributes=function(){try{var d=function d(){};Object.defineProperty(eT.createElement("video"),"src",{get:d,set:d});Object.defineProperty(eT.createElement("audio"),"src",{get:d,set:d});Object.defineProperty(eT.createElement("video"),"innerHTML",{get:d,set:d});Object.defineProperty(eT.createElement("audio"),"innerHTML",{get:d,set:d})}catch(i){return false}return true};pR.supportsNativeTextTracks=function(){return iM||bk&&mh};pR.supportsNativeVideoTracks=function(){return !!(pR.TEST_VID&&pR.TEST_VID.videoTracks)};pR.supportsNativeAudioTracks=function(){return !!(pR.TEST_VID&&pR.TEST_VID.audioTracks)};pR.Events=["loadstart","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","progress","play","pause","ratechange","resize","volumechange"];[["featuresVolumeControl","canControlVolume"],["featuresMuteControl","canMuteVolume"],["featuresPlaybackRate","canControlPlaybackRate"],["featuresSourceset","canOverrideAttributes"],["featuresNativeTextTracks","supportsNativeTextTracks"],["featuresNativeVideoTracks","supportsNativeVideoTracks"],["featuresNativeAudioTracks","supportsNativeAudioTracks"]].forEach(function(i){var d=i[0],e=i[1];o2(pR.prototype,d,function(){return pR[e]()},true)});pR.prototype.movingMediaElementInDOM=!bk;pR.prototype.featuresFullscreenResize=true;pR.prototype.featuresProgressEvents=true;pR.prototype.featuresTimeupdateEvents=true;var kY;pR.patchCanPlayType=function(){if(kG>=4&&!nz&&!mh){kY=pR.TEST_VID&&pR.TEST_VID.constructor.prototype.canPlayType;pR.TEST_VID.constructor.prototype.canPlayType=function(e){var d=/^application\/(?:x-|vnd\.apple\.)mpegurl/i;if(e&&d.test(e)){return"maybe"}return kY.call(this,e)}}};pR.unpatchCanPlayType=function(){var d=pR.TEST_VID.constructor.prototype.canPlayType;if(kY){pR.TEST_VID.constructor.prototype.canPlayType=kY}return d};pR.patchCanPlayType();pR.disposeMediaElement=function(d){if(!d){return}if(d.parentNode){d.parentNode.removeChild(d)}while(d.hasChildNodes()){d.removeChild(d.firstChild)}d.removeAttribute("src");if(typeof d.load==="function"){(function(){try{d.load()}catch(i){}})()}};pR.resetMediaElement=function(r){if(!r){return}var d=r.querySelectorAll("source");var e=d.length;while(e--){r.removeChild(d[e])}r.removeAttribute("src");if(typeof r.load==="function"){(function(){try{r.load()}catch(i){}})()}};["muted","defaultMuted","autoplay","controls","loop","playsinline"].forEach(function(d){pR.prototype[d]=function(){return this.el_[d]||this.el_.hasAttribute(d)}});["muted","defaultMuted","autoplay","loop","playsinline"].forEach(function(d){pR.prototype["set"+ac(d)]=function(e){this.el_[d]=e;if(e){this.el_.setAttribute(d,d)}else{this.el_.removeAttribute(d)}}});["paused","currentTime","buffered","volume","poster","preload","error","seeking","seekable","ended","playbackRate","defaultPlaybackRate","played","networkState","readyState","videoWidth","videoHeight","crossOrigin"].forEach(function(d){pR.prototype[d]=function(){return this.el_[d]}});["volume","src","poster","preload","playbackRate","defaultPlaybackRate","crossOrigin"].forEach(function(d){pR.prototype["set"+ac(d)]=function(e){this.el_[d]=e}});["pause","load","play"].forEach(function(d){pR.prototype[d]=function(){return this.el_[d]()}});gG.withSourceHandlers(pR);pR.nativeSourceHandler={};pR.nativeSourceHandler.canPlayType=function(d){try{return pR.TEST_VID.canPlayType(d)}catch(i){return""}};pR.nativeSourceHandler.canHandleSource=function(i,d){if(i.type){return pR.nativeSourceHandler.canPlayType(i.type)}else{if(i.src){var e=dC(i.src);return pR.nativeSourceHandler.canPlayType("video/"+e)}}return""};pR.nativeSourceHandler.handleSource=function(i,d,e){d.setSrc(i.src)};pR.nativeSourceHandler.dispose=function(){};pR.registerSourceHandler(pR.nativeSourceHandler);gG.registerTech("Html5",pR);var gB=["progress","abort","suspend","emptied","stalled","loadedmetadata","loadeddata","timeupdate","resize","volumechange","texttrackchange"];var gt={canplay:"CanPlay",canplaythrough:"CanPlayThrough",playing:"Playing",seeked:"Seeked"};var bh=["tiny","xsmall","small","medium","large","xlarge","huge"];var b={};bh.forEach(function(e){var d=e.charAt(0)==="x"?"x-"+e.substring(1):e;b[e]="vjs-layout-"+d});var d1={tiny:210,xsmall:320,small:425,medium:768,large:1440,xlarge:2560,huge:Infinity};var eV=function(rR){em(rW,rR);function rW(sl,sk,sj){var sh;sl.id=sl.id||sk.id||"vjs_video_"+cV();sk=pr(rW.getTagSettings(sl),sk);sk.initChildren=false;sk.createEl=false;sk.evented=false;sk.reportTouchActivity=false;if(!sk.language){if(typeof sl.closest==="function"){var sd=sl.closest("[lang]");if(sd&&sd.getAttribute){sk.language=sd.getAttribute("lang")}}else{var sg=sl;while(sg&&sg.nodeType===1){if(kL(sg).hasOwnProperty("lang")){sk.language=sg.getAttribute("lang");break}sg=sg.parentNode}}}sh=rR.call(this,null,sk,sj)||this;sh.boundDocumentFullscreenChange_=j(gx(sh),sh.documentFullscreenChange_);sh.boundFullWindowOnEscKey_=j(gx(sh),sh.fullWindowOnEscKey);sh.isFullscreen_=false;sh.log=jJ(sh.id_);sh.fsApi_=fg;sh.isPosterFromTech_=false;sh.queuedCallbacks_=[];sh.isReady_=false;sh.hasStarted_=false;sh.userActive_=false;if(!sh.options_||!sh.options_.techOrder||!sh.options_.techOrder.length){throw new Error("No techOrder specified. Did you overwrite videojs.options instead of just changing the properties you want to override?")}sh.tag=sl;sh.tagAttributes=sl&&kL(sl);sh.language(sh.options_.language);if(sk.languages){var sf={};Object.getOwnPropertyNames(sk.languages).forEach(function(sm){sf[sm.toLowerCase()]=sk.languages[sm]});sh.languages_=sf}else{sh.languages_=rW.prototype.options_.languages}sh.resetCache_();sh.poster_=sk.poster||"";sh.controls_=!!sk.controls;sl.controls=false;sl.removeAttribute("controls");sh.changingSrc_=false;sh.playCallbacks_=[];sh.playTerminatedQueue_=[];if(sl.hasAttribute("autoplay")){sh.autoplay(true)}else{sh.autoplay(sh.options_.autoplay)}if(sk.plugins){Object.keys(sk.plugins).forEach(function(sm){if(typeof sh[sm]!=="function"){throw new Error('plugin "'+sm+'" does not exist')}})}sh.scrubbing_=false;sh.el_=sh.createEl();iC(gx(sh),{eventBusKey:"el_"});if(sh.fsApi_.requestFullscreen){kJ(eT,sh.fsApi_.fullscreenchange,sh.boundDocumentFullscreenChange_);sh.on(sh.fsApi_.fullscreenchange,sh.boundDocumentFullscreenChange_)}if(sh.fluid_){sh.on("playerreset",sh.updateStyleEl_)}var si=nl(sh.options_);if(sk.plugins){Object.keys(sk.plugins).forEach(function(sm){sh[sm](sk.plugins[sm])})}sh.options_.playerOptions=si;sh.middleware_=[];sh.initChildren();sh.isAudio(sl.nodeName.toLowerCase()==="audio");if(sh.controls()){sh.addClass("vjs-controls-enabled")}else{sh.addClass("vjs-controls-disabled")}sh.el_.setAttribute("role","region");if(sh.isAudio()){sh.el_.setAttribute("aria-label",sh.localize("Audio Player"))}else{sh.el_.setAttribute("aria-label",sh.localize("Video Player"))}if(sh.isAudio()){sh.addClass("vjs-audio")}if(sh.flexNotSupported_()){sh.addClass("vjs-no-flex")}if(gC){sh.addClass("vjs-touch-enabled")}if(!bk){sh.addClass("vjs-workinghover")}rW.players[sh.id_]=gx(sh);var se=fX.split(".")[0];sh.addClass("vjs-v"+se);sh.userActive(true);sh.reportUserActivity();sh.one("play",sh.listenForUserActivity_);sh.on("stageclick",sh.handleStageClick_);sh.on("keydown",sh.handleKeyDown);sh.breakpoints(sh.options_.breakpoints);sh.responsive(sh.options_.responsive);return sh}var rQ=rW.prototype;rQ.dispose=function qi(){var sd=this;this.trigger("dispose");this.off("dispose");fF(eT,this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_);fF(eT,"keydown",this.boundFullWindowOnEscKey_);if(this.styleEl_&&this.styleEl_.parentNode){this.styleEl_.parentNode.removeChild(this.styleEl_);this.styleEl_=null}rW.players[this.id_]=null;if(this.tag&&this.tag.player){this.tag.player=null}if(this.el_&&this.el_.player){this.el_.player=null}if(this.tech_){this.tech_.dispose();this.isPosterFromTech_=false;this.poster_=""}if(this.playerElIngest_){this.playerElIngest_=null}if(this.tag){this.tag=null}gF(this);li.names.forEach(function(se){var sf=li[se];var sg=sd[sf.getterName]();if(sg&&sg.off){sg.off()}});rR.prototype.dispose.call(this)};rQ.createEl=function q2(){var sm=this.tag;var se;var sg=this.playerElIngest_=sm.parentNode&&sm.parentNode.hasAttribute&&sm.parentNode.hasAttribute("data-vjs-player");var sh=this.tag.tagName.toLowerCase()==="video-js";if(sg){se=this.el_=sm.parentNode}else{if(!sh){se=this.el_=rR.prototype.createEl.call(this,"div")}}var sk=kL(sm);if(sh){se=this.el_=sm;sm=this.tag=eT.createElement("video");while(se.children.length){sm.appendChild(se.firstChild)}if(!cf(se,"video-js")){h0(se,"video-js")}se.appendChild(sm);sg=this.playerElIngest_=se;Object.keys(se).forEach(function(sn){try{sm[sn]=se[sn]}catch(so){}})}sm.setAttribute("tabindex","-1");sk.tabindex="-1";if(cL||mh&&aP){sm.setAttribute("role","application");sk.role="application"}sm.removeAttribute("width");sm.removeAttribute("height");if("width" in sk){delete sk.width}if("height" in sk){delete sk.height}Object.getOwnPropertyNames(sk).forEach(function(sn){if(!(sh&&sn==="class")){se.setAttribute(sn,sk[sn])}if(sh){sm.setAttribute(sn,sk[sn])}});sm.playerId=sm.id;sm.id+="_html5_api";sm.className="vjs-tech";sm.player=se.player=this;this.addClass("vjs-paused");if(cb.VIDEOJS_NO_DYNAMIC_STYLE!==true){this.styleEl_=cT("vjs-styles-dimensions");var sd=pF(".vjs-styles-defaults");var si=pF("head");si.insertBefore(this.styleEl_,sd?sd.nextSibling:si.firstChild)}this.fill_=false;this.fluid_=false;this.width(this.options_.width);this.height(this.options_.height);this.fill(this.options_.fill);this.fluid(this.options_.fluid);this.aspectRatio(this.options_.aspectRatio);this.crossOrigin(this.options_.crossOrigin||this.options_.crossorigin);var sl=sm.getElementsByTagName("a");for(var sf=0;sf<sl.length;sf++){var sj=sl.item(sf);h0(sj,"vjs-hidden");sj.setAttribute("hidden","hidden")}sm.initNetworkState_=sm.networkState;if(sm.parentNode&&!sg){sm.parentNode.insertBefore(se,sm)}id(sm,se);this.children_.unshift(sm);this.el_.setAttribute("lang",this.language_);this.el_=se;return se};rQ.crossOrigin=function qt(sd){if(!sd){return this.techGet_("crossOrigin")}if(sd!=="anonymous"&&sd!=="use-credentials"){aC.warn('crossOrigin must be "anonymous" or "use-credentials", given "'+sd+'"');return}this.techCall_("setCrossOrigin",sd);return};rQ.width=function rS(sd){return this.dimension("width",sd)};rQ.height=function qm(sd){return this.dimension("height",sd)};rQ.dimension=function rj(sg,sf){var se=sg+"_";if(sf===undefined){return this[se]||0}if(sf===""||sf==="auto"){this[se]=undefined;this.updateStyleEl_();return}var sd=parseFloat(sf);if(isNaN(sd)){aC.error('Improper value "'+sf+'" supplied for for '+sg);return}this[se]=sd;this.updateStyleEl_()};rQ.fluid=function qG(sd){if(sd===undefined){return !!this.fluid_}this.fluid_=!!sd;if(ir(this)){this.off("playerreset",this.updateStyleEl_)}if(sd){this.addClass("vjs-fluid");this.fill(false);j4(function(){this.on("playerreset",this.updateStyleEl_)})}else{this.removeClass("vjs-fluid")}this.updateStyleEl_()};rQ.fill=function qw(sd){if(sd===undefined){return !!this.fill_}this.fill_=!!sd;if(sd){this.addClass("vjs-fill");this.fluid(false)}else{this.removeClass("vjs-fill")}};rQ.aspectRatio=function sb(sd){if(sd===undefined){return this.aspectRatio_}if(!/^\d+\:\d+$/.test(sd)){throw new Error("Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.")}this.aspectRatio_=sd;this.fluid(true);this.updateStyleEl_()};rQ.updateStyleEl_=function q5(){if(cb.VIDEOJS_NO_DYNAMIC_STYLE===true){var sf=typeof this.width_==="number"?this.width_:this.options_.width;var sg=typeof this.height_==="number"?this.height_:this.options_.height;var sj=this.tech_&&this.tech_.el();if(sj){if(sf>=0){sj.width=sf}if(sg>=0){sj.height=sg}}return}var se;var sl;var sk;var sh;if(this.aspectRatio_!==undefined&&this.aspectRatio_!=="auto"){sk=this.aspectRatio_}else{if(this.videoWidth()>0){sk=this.videoWidth()+":"+this.videoHeight()}else{sk="16:9"}}var sd=sk.split(":");var si=sd[1]/sd[0];if(this.width_!==undefined){se=this.width_}else{if(this.height_!==undefined){se=this.height_/si}else{se=this.videoWidth()||300}}if(this.height_!==undefined){sl=this.height_}else{sl=se*si}if(/^[^a-zA-Z]/.test(this.id())){sh="dimensions-"+this.id()}else{sh=this.id()+"-dimensions"}this.addClass(sh);i2(this.styleEl_,"\n      ."+sh+" {\n        width: "+se+"px;\n        height: "+sl+"px;\n      }\n\n      ."+sh+".vjs-fluid {\n        padding-top: "+si*100+"%;\n      }\n    ")};rQ.loadTech_=function p4(sk,si){var se=this;if(this.tech_){this.unloadTech_()}var sd=ac(sk);var sh=sk.charAt(0).toLowerCase()+sk.slice(1);if(sd!=="Html5"&&this.tag){gG.getTech("Html5").disposeMediaElement(this.tag);this.tag.player=null;this.tag=null}this.techName_=sd;this.isReady_=false;var sg=typeof this.autoplay()==="string"?false:this.autoplay();var sj={source:si,autoplay:sg,nativeControlsForTouch:this.options_.nativeControlsForTouch,playerId:this.id(),techId:this.id()+"_"+sh+"_api",playsinline:this.options_.playsinline,preload:this.options_.preload,loop:this.options_.loop,muted:this.options_.muted,poster:this.poster(),language:this.language(),playerElIngest:this.playerElIngest_||false,"vtt.js":this.options_["vtt.js"],canOverridePoster:!!this.options_.techCanOverridePoster,enableSourceset:this.options_.enableSourceset,Promise:this.options_.Promise};li.names.forEach(function(sl){var sm=li[sl];sj[sm.getterName]=se[sm.privateName]});pr(sj,this.options_[sd]);pr(sj,this.options_[sh]);pr(sj,this.options_[sk.toLowerCase()]);if(this.tag){sj.tag=this.tag}if(si&&si.src===this.cache_.src&&this.cache_.currentTime>0){sj.startTime=this.cache_.currentTime}var sf=gG.getTech(sk);if(!sf){throw new Error("No Tech named '"+sd+"' exists! '"+sd+"' should be registered using videojs.registerTech()'")}this.tech_=new sf(sj);this.tech_.ready(j(this,this.handleTechReady_),true);ix.jsonToTextTracks(this.textTracksJson_||[],this.tech_);gB.forEach(function(sl){se.on(se.tech_,sl,se["handleTech"+ac(sl)+"_"])});Object.keys(gt).forEach(function(sl){se.on(se.tech_,sl,function(sm){if(se.tech_.playbackRate()===0&&se.tech_.seeking()){se.queuedCallbacks_.push({callback:se["handleTech"+gt[sl]+"_"].bind(se),event:sm});return}se["handleTech"+gt[sl]+"_"](sm)})});this.on(this.tech_,"loadstart",this.handleTechLoadStart_);this.on(this.tech_,"sourceset",this.handleTechSourceset_);this.on(this.tech_,"waiting",this.handleTechWaiting_);this.on(this.tech_,"ended",this.handleTechEnded_);this.on(this.tech_,"seeking",this.handleTechSeeking_);this.on(this.tech_,"play",this.handleTechPlay_);this.on(this.tech_,"firstplay",this.handleTechFirstPlay_);this.on(this.tech_,"pause",this.handleTechPause_);this.on(this.tech_,"durationchange",this.handleTechDurationChange_);this.on(this.tech_,"fullscreenchange",this.handleTechFullscreenChange_);this.on(this.tech_,"fullscreenerror",this.handleTechFullscreenError_);this.on(this.tech_,"enterpictureinpicture",this.handleTechEnterPictureInPicture_);this.on(this.tech_,"leavepictureinpicture",this.handleTechLeavePictureInPicture_);this.on(this.tech_,"error",this.handleTechError_);this.on(this.tech_,"loadedmetadata",this.updateStyleEl_);this.on(this.tech_,"posterchange",this.handleTechPosterChange_);this.on(this.tech_,"textdata",this.handleTechTextData_);this.on(this.tech_,"ratechange",this.handleTechRateChange_);this.usingNativeControls(this.techGet_("controls"));if(this.controls()&&!this.usingNativeControls()){this.addTechControlsListeners_()}if(this.tech_.el().parentNode!==this.el()&&(sd!=="Html5"||!this.tag)){id(this.tech_.el(),this.el())}if(this.tag){this.tag.player=null;this.tag=null}};rQ.unloadTech_=function qT(){var sd=this;li.names.forEach(function(se){var sf=li[se];sd[sf.privateName]=sd[sf.getterName]()});this.textTracksJson_=ix.textTracksToJson(this.tech_);this.isReady_=false;this.tech_.dispose();this.tech_=false;if(this.isPosterFromTech_){this.poster_="";this.trigger("posterchange")}this.isPosterFromTech_=false};rQ.tech=function qq(sd){if(sd===undefined){aC.warn("Using the tech directly can be dangerous. I hope you know what you're doing.\nSee https://github.com/videojs/video.js/issues/2617 for more info.\n")}return this.tech_};rQ.addTechControlsListeners_=function q3(){this.removeTechControlsListeners_();this.on(this.tech_,"mouseup",this.handleTechClick_);this.on(this.tech_,"dblclick",this.handleTechDoubleClick_);this.on(this.tech_,"touchstart",this.handleTechTouchStart_);this.on(this.tech_,"touchmove",this.handleTechTouchMove_);this.on(this.tech_,"touchend",this.handleTechTouchEnd_);this.on(this.tech_,"tap",this.handleTechTap_)};rQ.removeTechControlsListeners_=function rk(){this.off(this.tech_,"tap",this.handleTechTap_);this.off(this.tech_,"touchstart",this.handleTechTouchStart_);this.off(this.tech_,"touchmove",this.handleTechTouchMove_);this.off(this.tech_,"touchend",this.handleTechTouchEnd_);this.off(this.tech_,"mouseup",this.handleTechClick_);this.off(this.tech_,"dblclick",this.handleTechDoubleClick_)};rQ.handleTechReady_=function qu(){this.triggerReady();if(this.cache_.volume){this.techCall_("setVolume",this.cache_.volume)}this.handleTechPosterChange_();this.handleTechDurationChange_()};rQ.handleTechLoadStart_=function rN(){this.removeClass("vjs-ended");this.removeClass("vjs-seeking");this.error(null);this.handleTechDurationChange_();if(!this.paused()){this.trigger("loadstart");this.trigger("firstplay")}else{this.hasStarted(false);this.trigger("loadstart")}this.manualAutoplay_(this.autoplay())};rQ.manualAutoplay_=function rv(se){var sd=this;if(!this.tech_||typeof se!=="string"){return}var sf=function sf(){var si=sd.muted();sd.muted(true);var sh=function sh(){sd.muted(si)};sd.playTerminatedQueue_.push(sh);var sj=sd.play();if(!bL(sj)){return}return sj["catch"](sh)};var sg;if(se==="any"&&this.muted()!==true){sg=this.play();if(bL(sg)){sg=sg["catch"](sf)}}else{if(se==="muted"&&this.muted()!==true){sg=sf()}else{sg=this.play()}}if(!bL(sg)){return}return sg.then(function(){sd.trigger({type:"autoplay-success",autoplay:se})})["catch"](function(sh){sd.trigger({type:"autoplay-failure",autoplay:se})})};rQ.updateSourceCaches_=function qv(sl){if(sl===void 0){sl=""}var sd=sl;var si="";if(typeof sd!=="string"){sd=sl.src;si=sl.type}this.cache_.source=this.cache_.source||{};this.cache_.sources=this.cache_.sources||[];if(sd&&!si){si=lY(this,sd)}this.cache_.source=nl({},sl,{src:sd,type:si});var sf=this.cache_.sources.filter(function(sm){return sm.src&&sm.src===sd});var sg=[];var sj=this.$$("source");var se=[];for(var sh=0;sh<sj.length;sh++){var sk=kL(sj[sh]);sg.push(sk);if(sk.src&&sk.src===sd){se.push(sk.src)}}if(se.length&&!sf.length){this.cache_.sources=sg}else{if(!sf.length){this.cache_.sources=[this.cache_.source]}}this.cache_.src=sd};rQ.handleTechSourceset_=function ri(sg){var sf=this;if(!this.changingSrc_){var se=function se(si){return sf.updateSourceCaches_(si)};var sd=this.currentSource().src;var sh=sg.src;if(sd&&!/^blob:/.test(sd)&&/^blob:/.test(sh)){if(!this.lastSource_||this.lastSource_.tech!==sh&&this.lastSource_.player!==sd){se=function se(){}}}se(sh);if(!sg.src){this.tech_.any(["sourceset","loadstart"],function(si){if(si.type==="sourceset"){return}var sj=sf.techGet("currentSrc");sf.lastSource_.tech=sj;sf.updateSourceCaches_(sj)})}}this.lastSource_={player:this.currentSource().src,tech:sg.src};this.trigger({src:sg.src,type:"sourceset"})};rQ.hasStarted=function q6(sd){if(sd===undefined){return this.hasStarted_}if(sd===this.hasStarted_){return}this.hasStarted_=sd;if(this.hasStarted_){this.addClass("vjs-has-started");this.trigger("firstplay")}else{this.removeClass("vjs-has-started")}};rQ.handleTechPlay_=function d(){this.removeClass("vjs-ended");this.removeClass("vjs-paused");this.addClass("vjs-playing");this.hasStarted(true);this.trigger("play")};rQ.handleTechRateChange_=function qQ(){if(this.tech_.playbackRate()>0&&this.cache_.lastPlaybackRate===0){this.queuedCallbacks_.forEach(function(sd){return sd.callback(sd.event)});this.queuedCallbacks_=[]}this.cache_.lastPlaybackRate=this.tech_.playbackRate();this.trigger("ratechange")};rQ.handleTechWaiting_=function qj(){var sd=this;this.addClass("vjs-waiting");this.trigger("waiting");var sf=this.currentTime();var se=function se(){if(sf!==sd.currentTime()){sd.removeClass("vjs-waiting");sd.off("timeupdate",se)}};this.on("timeupdate",se)};rQ.handleTechCanPlay_=function r4(){this.removeClass("vjs-waiting");this.trigger("canplay")};rQ.handleTechCanPlayThrough_=function rc(){this.removeClass("vjs-waiting");this.trigger("canplaythrough")};rQ.handleTechPlaying_=function rG(){this.removeClass("vjs-waiting");this.trigger("playing")};rQ.handleTechSeeking_=function rp(){this.addClass("vjs-seeking");this.trigger("seeking")};rQ.handleTechSeeked_=function qr(){this.removeClass("vjs-seeking");this.removeClass("vjs-ended");this.trigger("seeked")};rQ.handleTechFirstPlay_=function sa(){if(this.options_.starttime){aC.warn("Passing the `starttime` option to the player will be deprecated in 6.0");this.currentTime(this.options_.starttime)}this.addClass("vjs-has-started");this.trigger("firstplay")};rQ.handleTechPause_=function i(){this.removeClass("vjs-playing");this.addClass("vjs-paused");this.trigger("pause")};rQ.handleTechEnded_=function sc(){this.addClass("vjs-ended");if(this.options_.loop){this.currentTime(0);this.play()}else{if(!this.paused()){this.pause()}}this.trigger("ended")};rQ.handleTechDurationChange_=function r7(){this.duration(this.techGet_("duration"))};rQ.handleTechClick_=function qd(sd){if(!nd(sd)){return}if(!this.controls_){return}if(this.paused()){ai(this.play())}else{this.pause()}};rQ.handleTechDoubleClick_=function rt(sd){if(!this.controls_){return}var se=Array.prototype.some.call(this.$$(".vjs-control-bar, .vjs-modal-dialog"),function(sf){return sf.contains(sd.target)});if(!se){if(this.options_===undefined||this.options_.userActions===undefined||this.options_.userActions.doubleClick===undefined||this.options_.userActions.doubleClick!==false){if(this.options_!==undefined&&this.options_.userActions!==undefined&&typeof this.options_.userActions.doubleClick==="function"){this.options_.userActions.doubleClick.call(this,sd)}else{if(this.isFullscreen()){this.exitFullscreen()}else{this.requestFullscreen()}}}}};rQ.handleTechTap_=function qZ(){this.userActive(!this.userActive())};rQ.handleTechTouchStart_=function rA(){this.userWasActive=this.userActive()};rQ.handleTechTouchMove_=function rV(){if(this.userWasActive){this.reportUserActivity()}};rQ.handleTechTouchEnd_=function qo(sd){sd.preventDefault()};rQ.handleStageClick_=function qK(){this.reportUserActivity()};rQ.toggleFullscreenClass_=function qE(){if(this.isFullscreen()){this.addClass("vjs-fullscreen")}else{this.removeClass("vjs-fullscreen")}};rQ.documentFullscreenChange_=function q1(sg){var sd=sg.target.player;if(sd&&sd!==this){return}var se=this.el();var sf=eT[this.fsApi_.fullscreenElement]===se;if(!sf&&se.matches){sf=se.matches(":"+this.fsApi_.fullscreen)}else{if(!sf&&se.msMatchesSelector){sf=se.msMatchesSelector(":"+this.fsApi_.fullscreen)}}this.isFullscreen(sf)};rQ.handleTechFullscreenChange_=function p5(sd,se){if(se){if(se.nativeIOSFullscreen){this.toggleClass("vjs-ios-native-fs")}this.isFullscreen(se.isFullscreen)}};rQ.handleTechFullscreenError_=function qH(se,sd){this.trigger("fullscreenerror",sd)};rQ.togglePictureInPictureClass_=function qa(){if(this.isInPictureInPicture()){this.addClass("vjs-picture-in-picture")}else{this.removeClass("vjs-picture-in-picture")}};rQ.handleTechEnterPictureInPicture_=function qU(sd){this.isInPictureInPicture(true)};rQ.handleTechLeavePictureInPicture_=function qc(sd){this.isInPictureInPicture(false)};rQ.handleTechError_=function r(){var sd=this.tech_.error();this.error(sd)};rQ.handleTechTextData_=function qR(){var sd=null;if(arguments.length>1){sd=arguments[1]}this.trigger("textdata",sd)};rQ.getCache=function rs(){return this.cache_};rQ.resetCache_=function qJ(){this.cache_={currentTime:0,initTime:0,inactivityTimeout:this.options_.inactivityTimeout,duration:NaN,lastVolume:1,lastPlaybackRate:this.defaultPlaybackRate(),media:null,src:"",source:{},sources:[],volume:1}};rQ.techCall_=function ro(se,sd){this.ready(function(){if(se in i3){return n5(this.middleware_,this.tech_,se,sd)}else{if(se in ed){return gv(this.middleware_,this.tech_,se,sd)}}try{if(this.tech_){this.tech_[se](sd)}}catch(sf){aC(sf);throw sf}},true)};rQ.techGet_=function qy(se){if(!this.tech_||!this.tech_.isReady_){return}if(se in hX){return f0(this.middleware_,this.tech_,se)}else{if(se in ed){return gv(this.middleware_,this.tech_,se)}}try{return this.tech_[se]()}catch(sd){if(this.tech_[se]===undefined){aC("Video.js: "+se+" method not defined for "+this.techName_+" playback technology.",sd);throw sd}if(sd.name==="TypeError"){aC("Video.js: "+se+" unavailable on "+this.techName_+" playback technology element.",sd);this.tech_.isReady_=false;throw sd}aC(sd);throw sd}};rQ.play=function qk(){var se=this;var sd=this.options_.Promise||cb.Promise;if(sd){return new sd(function(sf){se.play_(sf)})}return this.play_()};rQ.play_=function rb(sg){var sf=this;if(sg===void 0){sg=ai}this.playCallbacks_.push(sg);var sd=Boolean(!this.changingSrc_&&(this.src()||this.currentSrc()));if(this.waitToPlay_){this.off(["ready","loadstart"],this.waitToPlay_);this.waitToPlay_=null}if(!this.isReady_||!sd){this.waitToPlay_=function(sh){sf.play_()};this.one(["ready","loadstart"],this.waitToPlay_);if(!sd&&(iM||bk)){this.load()}return}var se=this.techGet_("play");if(se===null){this.runPlayTerminatedQueue_()}else{this.runPlayCallbacks_(se)}};rQ.runPlayTerminatedQueue_=function rP(){var sd=this.playTerminatedQueue_.slice(0);this.playTerminatedQueue_=[];sd.forEach(function(se){se()})};rQ.runPlayCallbacks_=function qX(se){var sd=this.playCallbacks_.slice(0);this.playCallbacks_=[];this.playTerminatedQueue_=[];sd.forEach(function(sf){sf(se)})};rQ.pause=function rg(){this.techCall_("pause")};rQ.paused=function rI(){return this.techGet_("paused")===false?false:true};rQ.played=function r5(){return this.techGet_("played")||R(0,0)};rQ.scrubbing=function qL(sd){if(typeof sd==="undefined"){return this.scrubbing_}this.scrubbing_=!!sd;if(sd){this.addClass("vjs-scrubbing")}else{this.removeClass("vjs-scrubbing")}};rQ.currentTime=function q8(sd){if(typeof sd!=="undefined"){if(sd<0){sd=0}if(!this.isReady_||this.changingSrc_||!this.tech_||!this.tech_.isReady_){this.cache_.initTime=sd;this.off("canplay",this.applyInitTime_);this.one("canplay",this.applyInitTime_);return}this.techCall_("setCurrentTime",sd);this.cache_.initTime=0;return}this.cache_.currentTime=this.techGet_("currentTime")||0;return this.cache_.currentTime};rQ.applyInitTime_=function qh(){this.currentTime(this.cache_.initTime)};rQ.duration=function qO(sd){if(sd===undefined){return this.cache_.duration!==undefined?this.cache_.duration:NaN}sd=parseFloat(sd);if(sd<0){sd=Infinity}if(sd!==this.cache_.duration){this.cache_.duration=sd;if(sd===Infinity){this.addClass("vjs-live")}else{this.removeClass("vjs-live")}if(!isNaN(sd)){this.trigger("durationchange")}}};rQ.remainingTime=function rX(){return this.duration()-this.currentTime()};rQ.remainingTimeDisplay=function qs(){return Math.floor(this.duration())-Math.floor(this.currentTime())};rQ.buffered=function rD(){var sd=this.techGet_("buffered");if(!sd||!sd.length){sd=R(0,0)}return sd};rQ.bufferedPercent=function rU(){return fI(this.buffered(),this.duration())};rQ.bufferedEnd=function rO(){var se=this.buffered();var sf=this.duration();var sd=se.end(se.length-1);if(sd>sf){sd=sf}return sd};rQ.volume=function qS(sd){var se;if(sd!==undefined){se=Math.max(0,Math.min(1,parseFloat(sd)));this.cache_.volume=se;this.techCall_("setVolume",se);if(se>0){this.lastVolume_(se)}return}se=parseFloat(this.techGet_("volume"));return isNaN(se)?1:se};rQ.muted=function r8(sd){if(sd!==undefined){this.techCall_("setMuted",sd);return}return this.techGet_("muted")||false};rQ.defaultMuted=function rC(sd){if(sd!==undefined){return this.techCall_("setDefaultMuted",sd)}return this.techGet_("defaultMuted")||false};rQ.lastVolume_=function qA(sd){if(sd!==undefined&&sd!==0){this.cache_.lastVolume=sd;return}return this.cache_.lastVolume};rQ.supportsFullScreen=function rF(){return this.techGet_("supportsFullScreen")||false};rQ.isFullscreen=function rm(se){if(se!==undefined){var sd=this.isFullscreen_;this.isFullscreen_=Boolean(se);if(this.isFullscreen_!==sd&&this.fsApi_.prefixed){this.trigger("fullscreenchange")}this.toggleFullscreenClass_();return}return this.isFullscreen_};rQ.requestFullscreen=function rn(sf){var sd=this.options_.Promise||cb.Promise;if(sd){var se=this;return new sd(function(sk,sj){function si(){se.off("fullscreenerror",sg);se.off("fullscreenchange",sh)}function sh(){si();sk()}function sg(sn,sm){si();sj(sm)}se.one("fullscreenchange",sh);se.one("fullscreenerror",sg);var sl=se.requestFullscreenHelper_(sf);if(sl){sl.then(si,si);return sl}})}return this.requestFullscreenHelper_()};rQ.requestFullscreenHelper_=function p3(sd){var sf=this;var se;if(!this.fsApi_.prefixed){se=this.options_.fullscreen&&this.options_.fullscreen.options||{};if(sd!==undefined){se=sd}}if(this.fsApi_.requestFullscreen){var sg=this.el_[this.fsApi_.requestFullscreen](se);if(sg){sg.then(function(){return sf.isFullscreen(true)},function(){return sf.isFullscreen(false)})}return sg}else{if(this.tech_.supportsFullScreen()){this.techCall_("enterFullScreen")}else{this.enterFullWindow()}}};rQ.exitFullscreen=function rH(){var sd=this.options_.Promise||cb.Promise;if(sd){var se=this;return new sd(function(sj,si){function sh(){se.off("fullscreenerror",sf);se.off("fullscreenchange",sg)}function sg(){sh();sj()}function sf(sm,sl){sh();si(sl)}se.one("fullscreenchange",sg);se.one("fullscreenerror",sf);var sk=se.exitFullscreenHelper_();if(sk){sk.then(sh,sh);return sk}})}return this.exitFullscreenHelper_()};rQ.exitFullscreenHelper_=function p9(){var sd=this;if(this.fsApi_.requestFullscreen){var se=eT[this.fsApi_.exitFullscreen]();if(se){se.then(function(){return sd.isFullscreen(false)})}return se}else{if(this.tech_.supportsFullScreen()){this.techCall_("exitFullScreen")}else{this.exitFullWindow()}}};rQ.enterFullWindow=function qg(){this.isFullscreen(true);this.isFullWindow=true;this.docOrigOverflow=eT.documentElement.style.overflow;kJ(eT,"keydown",this.boundFullWindowOnEscKey_);eT.documentElement.style.overflow="hidden";h0(eT.body,"vjs-full-window");this.trigger("enterFullWindow")};rQ.fullWindowOnEscKey=function qP(sd){if(fM.isEventKey(sd,"Esc")){if(this.isFullscreen()===true){this.exitFullscreen()}else{this.exitFullWindow()}}};rQ.exitFullWindow=function rf(){this.isFullscreen(false);this.isFullWindow=false;fF(eT,"keydown",this.boundFullWindowOnEscKey_);eT.documentElement.style.overflow=this.docOrigOverflow;cY(eT.body,"vjs-full-window");this.trigger("exitFullWindow")};rQ.isInPictureInPicture=function rM(sd){if(sd!==undefined){this.isInPictureInPicture_=!!sd;this.togglePictureInPictureClass_();return}return !!this.isInPictureInPicture_};rQ.requestPictureInPicture=function q7(){if("pictureInPictureEnabled" in eT){return this.techGet_("requestPictureInPicture")}};rQ.exitPictureInPicture=function qW(){if("pictureInPictureEnabled" in eT){return eT.exitPictureInPicture()}};rQ.handleKeyDown=function qB(se){var sd=this.options_.userActions;if(!sd||!sd.hotkeys){return}var sf=function sf(sj){var si=sj.tagName.toLowerCase();if(sj.isContentEditable){return true}var sh=["button","checkbox","hidden","radio","reset","submit"];if(si==="input"){return sh.indexOf(sj.type)===-1}var sg=["textarea"];return sg.indexOf(si)!==-1};if(sf(this.el_.ownerDocument.activeElement)){return}if(typeof sd.hotkeys==="function"){sd.hotkeys.call(this,se)}else{this.handleHotkeys(se)}};rQ.handleHotkeys=function qD(sd){var sf=this.options_.userActions?this.options_.userActions.hotkeys:{};var sj=sf.fullscreenKey,sn=sj===void 0?function(so){return fM.isEventKey(so,"f")}:sj,sm=sf.muteKey,si=sm===void 0?function(so){return fM.isEventKey(so,"m")}:sm,sh=sf.playPauseKey,sl=sh===void 0?function(so){return fM.isEventKey(so,"k")||fM.isEventKey(so,"Space")}:sh;if(sn.call(this,sd)){sd.preventDefault();sd.stopPropagation();var se=pO.getComponent("FullscreenToggle");if(eT[this.fsApi_.fullscreenEnabled]!==false){se.prototype.handleClick.call(this,sd)}}else{if(si.call(this,sd)){sd.preventDefault();sd.stopPropagation();var sk=pO.getComponent("MuteToggle");sk.prototype.handleClick.call(this,sd)}else{if(sl.call(this,sd)){sd.preventDefault();sd.stopPropagation();var sg=pO.getComponent("PlayToggle");sg.prototype.handleClick.call(this,sd)}}}};rQ.canPlayType=function t(sg){var sh;for(var sf=0,se=this.options_.techOrder;sf<se.length;sf++){var si=se[sf];var sd=gG.getTech(si);if(!sd){sd=pO.getComponent(si)}if(!sd){aC.error('The "'+si+'" tech is undefined. Skipped browser support check for that tech.');continue}if(sd.isSupported()){sh=sd.canPlayType(sg);if(sh){return sh}}}return""};rQ.selectSource=function qC(sf){var sg=this;var sd=this.options_.techOrder.map(function(sk){return[sk,gG.getTech(sk)]}).filter(function(sl){var sm=sl[0],sk=sl[1];if(sk){return sk.isSupported()}aC.error('The "'+sm+'" tech is undefined. Skipped browser support check for that tech.');return false});var sj=function sj(sl,sm,sk){var sn;sl.some(function(so){return sm.some(function(sp){sn=sk(so,sp);if(sn){return true}})});return sn};var se;var si=function si(sk){return function(sm,sl){return sk(sl,sm)}};var sh=function sh(sn,sl){var sm=sn[0],sk=sn[1];if(sk.canPlaySource(sl,sg.options_[sm.toLowerCase()])){return{source:sl,tech:sm}}};if(this.options_.sourceOrder){se=sj(sf,sd,si(sh))}else{se=sj(sd,sf,sh)}return se||false};rQ.src=function qI(sf){var se=this;if(typeof sf==="undefined"){return this.cache_.src||""}var sd=lN(sf);if(!sd.length){this.setTimeout(function(){this.error({code:4,message:this.localize(this.options_.notSupportedMessage)})},0);return}this.changingSrc_=true;this.cache_.sources=sd;this.updateSourceCaches_(sd[0]);lD(this,sd[0],function(sg,sh){se.middleware_=sh;se.cache_.sources=sd;se.updateSourceCaches_(sg);var si=se.src_(sg);if(si){if(sd.length>1){return se.src(sd.slice(1))}se.changingSrc_=false;se.setTimeout(function(){this.error({code:4,message:this.localize(this.options_.notSupportedMessage)})},0);se.triggerReady();return}aY(sh,se.tech_)})};rQ.src_=function rZ(sf){var se=this;var sd=this.selectSource([sf]);if(!sd){return true}if(!fc(sd.tech,this.techName_)){this.changingSrc_=true;this.loadTech_(sd.tech,sd.source);this.tech_.ready(function(){se.changingSrc_=false});return false}this.ready(function(){if(this.tech_.constructor.prototype.hasOwnProperty("setSource")){this.techCall_("setSource",sf)}else{this.techCall_("src",sf.src)}this.changingSrc_=false},true);return false};rQ.load=function p7(){this.techCall_("load")};rQ.reset=function rd(){var se=this;var sd=this.options_.Promise||cb.Promise;if(this.paused()||!sd){this.doReset_()}else{var sf=this.play();ai(sf.then(function(){return se.doReset_()}))}};rQ.doReset_=function qb(){if(this.tech_){this.tech_.clearTracks("text")}this.resetCache_();this.poster("");this.loadTech_(this.options_.techOrder[0],null);this.techCall_("reset");this.resetControlBarUI_();if(ir(this)){this.trigger("playerreset")}};rQ.resetControlBarUI_=function rh(){this.resetProgressBar_();this.resetPlaybackRate_();this.resetVolumeBar_()};rQ.resetProgressBar_=function qV(){this.currentTime(0);var sf=this.controlBar,sd=sf.durationDisplay,se=sf.remainingTimeDisplay;if(sd){sd.updateContent()}if(se){se.updateContent()}};rQ.resetPlaybackRate_=function rw(){this.playbackRate(this.defaultPlaybackRate());this.handleTechRateChange_()};rQ.resetVolumeBar_=function rl(){this.volume(1);this.trigger("volumechange")};rQ.currentSources=function re(){var se=this.currentSource();var sd=[];if(Object.keys(se).length!==0){sd.push(se)}return this.cache_.sources||sd};rQ.currentSource=function p6(){return this.cache_.source||{}};rQ.currentSrc=function q4(){return this.currentSource()&&this.currentSource().src||""};rQ.currentType=function ra(){return this.currentSource()&&this.currentSource().type||""};rQ.preload=function r0(sd){if(sd!==undefined){this.techCall_("setPreload",sd);this.options_.preload=sd;return}return this.techGet_("preload")};rQ.autoplay=function rK(se){if(se===undefined){return this.options_.autoplay||false}var sd;if(typeof se==="string"&&/(any|play|muted)/.test(se)){this.options_.autoplay=se;this.manualAutoplay_(se);sd=false}else{if(!se){this.options_.autoplay=false}else{this.options_.autoplay=true}}sd=typeof sd==="undefined"?this.options_.autoplay:sd;if(this.tech_){this.techCall_("setAutoplay",sd)}};rQ.playsinline=function ru(sd){if(sd!==undefined){this.techCall_("setPlaysinline",sd);this.options_.playsinline=sd;return this}return this.techGet_("playsinline")};rQ.loop=function rJ(sd){if(sd!==undefined){this.techCall_("setLoop",sd);this.options_.loop=sd;return}return this.techGet_("loop")};rQ.poster=function r3(sd){if(sd===undefined){return this.poster_}if(!sd){sd=""}if(sd===this.poster_){return}this.poster_=sd;this.techCall_("setPoster",sd);this.isPosterFromTech_=false;this.trigger("posterchange")};rQ.handleTechPosterChange_=function q0(){if((!this.poster_||this.options_.techCanOverridePoster)&&this.tech_&&this.tech_.poster){var sd=this.tech_.poster()||"";if(sd!==this.poster_){this.poster_=sd;this.isPosterFromTech_=true;this.trigger("posterchange")}}};rQ.controls=function p8(sd){if(sd===undefined){return !!this.controls_}sd=!!sd;if(this.controls_===sd){return}this.controls_=sd;if(this.usingNativeControls()){this.techCall_("setControls",sd)}if(this.controls_){this.removeClass("vjs-controls-disabled");this.addClass("vjs-controls-enabled");this.trigger("controlsenabled");if(!this.usingNativeControls()){this.addTechControlsListeners_()}}else{this.removeClass("vjs-controls-enabled");this.addClass("vjs-controls-disabled");this.trigger("controlsdisabled");if(!this.usingNativeControls()){this.removeTechControlsListeners_()}}};rQ.usingNativeControls=function rz(sd){if(sd===undefined){return !!this.usingNativeControls_}sd=!!sd;if(this.usingNativeControls_===sd){return}this.usingNativeControls_=sd;if(this.usingNativeControls_){this.addClass("vjs-using-native-controls");this.trigger("usingnativecontrols")}else{this.removeClass("vjs-using-native-controls");this.trigger("usingcustomcontrols")}};rQ.error=function rL(se){if(se===undefined){return this.error_||null}if(this.options_.suppressNotSupportedError&&se&&se.code===4){var sd=function sd(){this.error(se)};this.options_.suppressNotSupportedError=false;this.any(["click","touchstart"],sd);this.one("loadstart",function(){this.off(["click","touchstart"],sd)});return}if(se===null){this.error_=se;this.removeClass("vjs-error");if(this.errorDisplay){this.errorDisplay.close()}return}this.error_=new eW(se);this.addClass("vjs-error");aC.error("(CODE:"+this.error_.code+" "+eW.errorTypes[this.error_.code]+")",this.error_.message,this.error_);this.trigger("error");return};rQ.reportUserActivity=function qF(sd){this.userActivity_=true};rQ.userActive=function qf(sd){if(sd===undefined){return this.userActive_}sd=!!sd;if(sd===this.userActive_){return}this.userActive_=sd;if(this.userActive_){this.userActivity_=true;this.removeClass("vjs-user-inactive");this.addClass("vjs-user-active");this.trigger("useractive");return}if(this.tech_){this.tech_.one("mousemove",function(se){se.stopPropagation();se.preventDefault()})}this.userActivity_=false;this.removeClass("vjs-user-active");this.addClass("vjs-user-inactive");this.trigger("userinactive")};rQ.listenForUserActivity_=function rr(){var sk;var sg;var sf;var se=j(this,this.reportUserActivity);var si=function si(sm){if(sm.screenX!==sg||sm.screenY!==sf){sg=sm.screenX;sf=sm.screenY;se()}};var sd=function sd(){se();this.clearInterval(sk);sk=this.setInterval(se,250)};var sh=function sh(sm){se();this.clearInterval(sk)};this.on("mousedown",sd);this.on("mousemove",si);this.on("mouseup",sh);this.on("mouseleave",sh);var sl=this.getChild("controlBar");if(sl&&!bk&&!j3){sl.on("mouseenter",function(sm){this.player().cache_.inactivityTimeout=this.player().options_.inactivityTimeout;this.player().options_.inactivityTimeout=0});sl.on("mouseleave",function(sm){this.player().options_.inactivityTimeout=this.player().cache_.inactivityTimeout})}this.on("keydown",se);this.on("keyup",se);var sj;this.setInterval(function(){if(!this.userActivity_){return}this.userActivity_=false;this.userActive(true);this.clearTimeout(sj);var sm=this.options_.inactivityTimeout;if(sm<=0){return}sj=this.setTimeout(function(){if(!this.userActivity_){this.userActive(false)}},sm)},250)};rQ.playbackRate=function r2(sd){if(sd!==undefined){this.techCall_("setPlaybackRate",sd);return}if(this.tech_&&this.tech_.featuresPlaybackRate){return this.cache_.lastPlaybackRate||this.techGet_("playbackRate")}return 1};rQ.defaultPlaybackRate=function qN(sd){if(sd!==undefined){return this.techCall_("setDefaultPlaybackRate",sd)}if(this.tech_&&this.tech_.featuresPlaybackRate){return this.techGet_("defaultPlaybackRate")}return 1};rQ.isAudio=function qz(sd){if(sd!==undefined){this.isAudio_=!!sd;return}return !!this.isAudio_};rQ.addTextTrack=function qn(se,sd,sf){if(this.tech_){return this.tech_.addTextTrack(se,sd,sf)}};rQ.addRemoteTextTrack=function qe(sd,se){if(this.tech_){return this.tech_.addRemoteTextTrack(sd,se)}};rQ.removeRemoteTextTrack=function ry(se){if(se===void 0){se={}}var sf=se,sd=sf.track;if(!sd){sd=se}if(this.tech_){return this.tech_.removeRemoteTextTrack(sd)}};rQ.getVideoPlaybackQuality=function qp(){return this.techGet_("getVideoPlaybackQuality")};rQ.videoWidth=function qM(){return this.tech_&&this.tech_.videoWidth&&this.tech_.videoWidth()||0};rQ.videoHeight=function q9(){return this.tech_&&this.tech_.videoHeight&&this.tech_.videoHeight()||0};rQ.language=function rq(sd){if(sd===undefined){return this.language_}this.language_=String(sd).toLowerCase()};rQ.languages=function rx(){return nl(rW.prototype.options_.languages,this.languages_)};rQ.toJSON=function qx(){var sf=nl(this.options_);var se=sf.tracks;sf.tracks=[];for(var sg=0;sg<se.length;sg++){var sd=se[sg];sd=nl(sd);sd.player=undefined;sf.tracks[sg]=sd}return sf};rQ.createModal=function e(sg,se){var sd=this;se=se||{};se.content=sg||"";var sf=new mm(this,se);this.addChild(sf);sf.on("dispose",function(){sd.removeChild(sf)});sf.open();return sf};rQ.updateCurrentBreakpoint_=function qY(){if(!this.responsive()){return}var sg=this.currentBreakpoint();var se=this.currentWidth();for(var sf=0;sf<bh.length;sf++){var sd=bh[sf];var sh=this.breakpoints_[sd];if(se<=sh){if(sg===sd){return}if(sg){this.removeClass(b[sg])}this.addClass(b[sd]);this.breakpoint_=sd;break}}};rQ.removeCurrentBreakpoint_=function rE(){var sd=this.currentBreakpointClass();this.breakpoint_="";if(sd){this.removeClass(sd)}};rQ.breakpoints=function rY(sd){if(sd===undefined){return pr(this.breakpoints_)}this.breakpoint_="";this.breakpoints_=pr({},d1,sd);this.updateCurrentBreakpoint_();return pr(this.breakpoints_)};rQ.responsive=function r6(sd){if(sd===undefined){return this.responsive_}sd=Boolean(sd);var se=this.responsive_;if(sd===se){return}this.responsive_=sd;if(sd){this.on("playerresize",this.updateCurrentBreakpoint_);this.updateCurrentBreakpoint_()}else{this.off("playerresize",this.updateCurrentBreakpoint_);this.removeCurrentBreakpoint_()}return sd};rQ.currentBreakpoint=function rT(){return this.breakpoint_};rQ.currentBreakpointClass=function r1(){return b[this.breakpoint_]||""};rQ.loadMedia=function ql(si,sh){var sf=this;if(!si||typeof si!=="object"){return}this.reset();this.cache_.media=nl(si);var sg=this.cache_.media,se=sg.artwork,sk=sg.poster,sj=sg.src,sd=sg.textTracks;if(!se&&sk){this.cache_.media.artwork=[{src:sk,type:oI(sk)}]}if(sj){this.src(sj)}if(sk){this.poster(sk)}if(Array.isArray(sd)){sd.forEach(function(sl){return sf.addRemoteTextTrack(sl,false)})}this.ready(sh)};rQ.getMedia=function rB(){if(!this.cache_.media){var sg=this.poster();var sf=this.currentSources();var sd=Array.prototype.map.call(this.remoteTextTracks(),function(sh){return{kind:sh.kind,label:sh.label,language:sh.language,src:sh.src}});var se={src:sf,textTracks:sd};if(sg){se.poster=sg;se.artwork=[{src:se.poster,type:oI(se.poster)}]}return se}return nl(this.cache_.media)};rW.getTagSettings=function r9(so){var sj={sources:[],tracks:[]};var sl=kL(so);var sk=sl["data-setup"];if(cf(so,"vjs-fill")){sl.fill=true}if(cf(so,"vjs-fluid")){sl.fluid=true}if(sk!==null){var sn=f5(sk||"{}"),sf=sn[0],si=sn[1];if(sf){aC.error(sf)}pr(sl,si)}pr(sj,sl);if(so.hasChildNodes()){var se=so.childNodes;for(var sh=0,sg=se.length;sh<sg;sh++){var sd=se[sh];var sm=sd.nodeName.toLowerCase();if(sm==="source"){sj.sources.push(kL(sd))}else{if(sm==="track"){sj.tracks.push(kL(sd))}}}}return sj};rQ.flexNotSupported_=function on(){var sd=eT.createElement("i");return !("flexBasis" in sd.style||"webkitFlexBasis" in sd.style||"mozFlexBasis" in sd.style||"msFlexBasis" in sd.style||"msFlexOrder" in sd.style)};return rW}(pO);li.names.forEach(function(d){var e=li[d];eV.prototype[e.getterName]=function(){if(this.tech_){return this.tech_[e.getterName]()}this[e.privateName]=this[e.privateName]||new e.ListClass();return this[e.privateName]}});eV.prototype.crossorigin=eV.prototype.crossOrigin;eV.players={};var jX=cb.navigator;eV.prototype.options_={techOrder:gG.defaultTechOrder_,html5:{},flash:{},inactivityTimeout:2000,playbackRates:[],liveui:false,children:["mediaLoader","posterImage","textTrackDisplay","loadingSpinner","bigPlayButton","liveTracker","controlBar","errorDisplay","textTrackSettings","resizeManager"],language:jX&&(jX.languages&&jX.languages[0]||jX.userLanguage||jX.language)||"en",languages:{},notSupportedMessage:"No compatible source was found for this media.",fullscreen:{options:{navigationUI:"hide"}},breakpoints:{},responsive:false};["ended","seeking","seekable","networkState","readyState"].forEach(function(d){eV.prototype[d]=function(){return this.techGet_(d)}});gB.forEach(function(d){eV.prototype["handleTech"+ac(d)+"_"]=function(){return this.trigger(d)}});pO.registerComponent("Player",eV);var oP=g8(function(d){function e(r,i){d.exports=t=Object.setPrototypeOf||function t(p3,on){p3.__proto__=on;return p3};return t(r,i)}d.exports=e});function fy(){if(typeof Reflect==="undefined"||!Reflect.construct){return false}if(Reflect.construct.sham){return false}if(typeof Proxy==="function"){return true}try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(d){return false}}var s=fy;var l2=g8(function(e){function d(on,t,r){if(s()){e.exports=i=Reflect.construct}else{e.exports=i=function i(p7,p6,p5){var p4=[null];p4.push.apply(p4,p6);var p8=Function.bind.apply(p7,p4);var p3=new p8();if(p5){oP(p3,p5.prototype)}return p3}}return i.apply(null,arguments)}e.exports=d});var aT="plugin";var gl="activePlugins_";var bE={};var nb=function nb(d){return bE.hasOwnProperty(d)};var hr=function hr(d){return nb(d)?bE[d]:undefined};var b0=function b0(e,d){e[gl]=e[gl]||{};e[gl][d]=true};var hj=function hj(e,r,i){var d=(i?"before":"")+"pluginsetup";e.trigger(d,r);e.trigger(d+":"+r.name,r)};var gO=function gO(e,i){var d=function d(){hj(this,{name:e,plugin:i,instance:null},true);var r=i.apply(this,arguments);b0(this,e);hj(this,{name:e,plugin:i,instance:r});return r};Object.keys(i).forEach(function(r){d[r]=i[r]});return d};var k7=function k7(e,d){d.prototype.name=e;return function(){hj(this,{name:e,plugin:d,instance:null},true);for(var r=arguments.length,t=new Array(r),on=0;on<r;on++){t[on]=arguments[on]}var i=l2(d,[this].concat(t));this[e]=function(){return i};hj(this,i.getEventHash());return i}};var ft=function(){function p7(p9){if(this.constructor===p7){throw new Error("Plugin must be sub-classed; not directly instantiated.")}this.player=p9;iC(this);delete this.trigger;E(this,this.constructor.defaultState);b0(p9,this.name);this.dispose=j(this,this.dispose);p9.on("dispose",this.dispose)}var p6=p7.prototype;p6.version=function p5(){return this.constructor.VERSION};p6.getEventHash=function p3(p9){if(p9===void 0){p9={}}p9.name=this.name;p9.plugin=this.constructor;p9.instance=this;return p9};p6.trigger=function d(p9,qa){if(qa===void 0){qa={}}return a6(this.eventBusEl_,p9,this.getEventHash(qa))};p6.handleStateChanged=function p4(p9){};p6.dispose=function p8(){var p9=this.name,qa=this.player;this.trigger("dispose");this.off();qa.off("dispose",this.dispose);qa[gl][p9]=false;this.player=this.state=null;qa[p9]=k7(p9,bE[p9])};p7.isBasic=function i(p9){var qa=typeof p9==="string"?hr(p9):p9;return typeof qa==="function"&&!p7.prototype.isPrototypeOf(qa.prototype)};p7.registerPlugin=function on(p9,qa){if(typeof p9!=="string"){throw new Error('Illegal plugin name, "'+p9+'", must be a string, was '+typeof p9+".")}if(nb(p9)){aC.warn('A plugin named "'+p9+'" already exists. You may want to avoid re-registering plugins!')}else{if(eV.prototype.hasOwnProperty(p9)){throw new Error('Illegal plugin name, "'+p9+'", cannot share a name with an existing player method!')}}if(typeof qa!=="function"){throw new Error('Illegal plugin for "'+p9+'", must be a function, was '+typeof qa+".")}bE[p9]=qa;if(p9!==aT){if(p7.isBasic(qa)){eV.prototype[p9]=gO(p9,qa)}else{eV.prototype[p9]=k7(p9,qa)}}return qa};p7.deregisterPlugin=function e(p9){if(p9===aT){throw new Error("Cannot de-register base plugin.")}if(nb(p9)){delete bE[p9];delete eV.prototype[p9]}};p7.getPlugins=function r(qa){if(qa===void 0){qa=Object.keys(bE)}var p9;qa.forEach(function(qb){var qc=hr(qb);if(qc){p9=p9||{};p9[qb]=qc}});return p9};p7.getPluginVersion=function t(p9){var qa=hr(p9);return qa&&qa.VERSION||""};return p7}();ft.getPlugin=hr;ft.BASE_PLUGIN_NAME=aT;ft.registerPlugin(aT,ft);eV.prototype.usingPlugin=function(d){return !!this[gl]&&this[gl][d]===true};eV.prototype.hasPlugin=function(d){return !!nb(d)};function fe(e,d){if(typeof d!=="function"&&d!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(d&&d.prototype,{constructor:{value:e,writable:true,configurable:true}});if(d){oP(e,d)}}var jS=fe;var af=function af(r,e){if(e===void 0){e={}}var t=function t(){r.apply(this,arguments)};var d={};if(typeof e==="object"){if(e.constructor!==Object.prototype.constructor){t=e.constructor}d=e}else{if(typeof e==="function"){t=e}}jS(t,r);if(r){t.super_=r}for(var i in d){if(d.hasOwnProperty(i)){t.prototype[i]=d[i]}}return t};var mx=function mx(d){return d.indexOf("#")===0?d.slice(1):d};function d9(on,e,t){var i=d9.getPlayer(on);if(i){if(e){aC.warn('Player "'+on+'" is already initialised. Options will not be applied.')}if(t){i.ready(t)}return i}var r=typeof on==="string"?pF("#"+mx(on)):on;if(!le(r)){throw new TypeError("The element or ID supplied is not valid. (videojs)")}if(!r.ownerDocument.defaultView||!r.ownerDocument.body.contains(r)){aC.warn("The element supplied is not included in the DOM")}e=e||{};d9.hooks("beforesetup").forEach(function(p3){var p4=p3(r,nl(e));if(!ci(p4)||Array.isArray(p4)){aC.error("please return an object in beforesetup hooks");return}e=nl(e,p4)});var d=pO.getComponent("Player");i=new d(r,e,t);d9.hooks("setup").forEach(function(p3){return p3(i)});return i}d9.hooks_={};d9.hooks=function(e,d){d9.hooks_[e]=d9.hooks_[e]||[];if(d){d9.hooks_[e]=d9.hooks_[e].concat(d)}return d9.hooks_[e]};d9.hook=function(e,d){d9.hooks(e,d)};d9.hookOnce=function(e,d){d9.hooks(e,[].concat(d).map(function(i){var r=function r(){d9.removeHook(e,r);return i.apply(void 0,arguments)};return r}))};d9.removeHook=function(i,e){var d=d9.hooks(i).indexOf(e);if(d<=-1){return false}d9.hooks_[i]=d9.hooks_[i].slice();d9.hooks_[i].splice(d,1);return true};if(cb.VIDEOJS_NO_DYNAMIC_STYLE!==true&&lB()){var ng=pF(".vjs-styles-defaults");if(!ng){ng=cT("vjs-styles-defaults");var eQ=pF("head");if(eQ){eQ.insertBefore(ng,eQ.firstChild)}i2(ng,"\n      .video-js {\n        width: 300px;\n        height: 150px;\n      }\n\n      .vjs-fluid {\n        padding-top: 56.25%\n      }\n    ")}}hD(1,d9);d9.VERSION=fX;d9.options=eV.prototype.options_;d9.getPlayers=function(){return eV.players};d9.getPlayer=function(p4){var on=eV.players;var d;if(typeof p4==="string"){var i=mx(p4);var t=on[i];if(t){return t}d=pF("#"+i)}else{d=p4}if(le(d)){var e=d,p3=e.player,r=e.playerId;if(p3||on[r]){return p3||on[r]}}};d9.getAllPlayers=function(){return(Object.keys(eV.players).map(function(d){return eV.players[d]}).filter(Boolean))};d9.players=eV.players;d9.getComponent=pO.getComponent;d9.registerComponent=function(e,d){if(gG.isTech(d)){aC.warn("The "+e+" tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)")}pO.registerComponent.call(pO,e,d)};d9.getTech=gG.getTech;d9.registerTech=gG.registerTech;d9.use=fo;Object.defineProperty(d9,"middleware",{value:{},writeable:false,enumerable:true});Object.defineProperty(d9.middleware,"TERMINATOR",{value:eJ,writeable:false,enumerable:true});d9.browser=gT;d9.TOUCH_ENABLED=gC;d9.extend=af;d9.mergeOptions=nl;d9.bind=j;d9.registerPlugin=ft.registerPlugin;d9.deregisterPlugin=ft.deregisterPlugin;d9.plugin=function(d,e){aC.warn("videojs.plugin() is deprecated; use videojs.registerPlugin() instead");return ft.registerPlugin(d,e)};d9.getPlugins=ft.getPlugins;d9.getPlugin=ft.getPlugin;d9.getPluginVersion=ft.getPluginVersion;d9.addLanguage=function(e,i){var d;e=(""+e).toLowerCase();d9.options.languages=nl(d9.options.languages,(d={},d[e]=i,d));return d9.options.languages[e]};d9.log=aC;d9.createLogger=jJ;d9.createTimeRange=d9.createTimeRanges=R;d9.formatTime=a5;d9.setFormatTime=aa;d9.resetFormatTime=f1;d9.parseUrl=oX;d9.isCrossOrigin=pq;d9.EventTarget=kF;d9.on=kJ;d9.one=da;d9.off=fF;d9.trigger=a6;d9.xhr=kW;d9.TextTrack=bv;d9.AudioTrack=eO;d9.VideoTrack=lH;["isEl","isTextNode","createEl","hasClass","addClass","removeClass","toggleClass","setAttributes","getAttributes","emptyEl","appendContent","insertContent"].forEach(function(d){d9[d]=function(){aC.warn("videojs."+d+"() is deprecated; use videojs.dom."+d+"() instead");return bm[d].apply(null,arguments)}});d9.computedStyle=ja;d9.dom=bm;d9.url=ga;d9.defineLazyProperty=o2;var lE=g8(function(e,d){(function(p5){var p8=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/?#]*)?((?:[^\/\?#]*\/)*.*?)??(;.*?)?(\?.*?)?(#.*?)?$/;var p4=/^([^\/?#]*)(.*)$/;var t=/(?:\/|^)\.(?=\/)/g;var p6=/(?:\/|^)\.\.\/(?!\.\.\/).*?(?=\/)/g;var on={buildAbsoluteURL:function r(qa,qb,p9){p9=p9||{};qa=qa.trim();qb=qb.trim();if(!qb){if(!p9.alwaysNormalize){return qa}var qd=on.parseURL(qa);if(!qd){throw new Error("Error trying to parse base URL.")}qd.path=on.normalizePath(qd.path);return on.buildURLFromParts(qd)}var qh=on.parseURL(qb);if(!qh){throw new Error("Error trying to parse relative URL.")}if(qh.scheme){if(!p9.alwaysNormalize){return qb}qh.path=on.normalizePath(qh.path);return on.buildURLFromParts(qh)}var qf=on.parseURL(qa);if(!qf){throw new Error("Error trying to parse base URL.")}if(!qf.netLoc&&qf.path&&qf.path[0]!=="/"){var qi=p4.exec(qf.path);qf.netLoc=qi[1];qf.path=qi[2]}if(qf.netLoc&&!qf.path){qf.path="/"}var qc={scheme:qf.scheme,netLoc:qh.netLoc,path:null,params:qh.params,query:qh.query,fragment:qh.fragment};if(!qh.netLoc){qc.netLoc=qf.netLoc;if(qh.path[0]!=="/"){if(!qh.path){qc.path=qf.path;if(!qh.params){qc.params=qf.params;if(!qh.query){qc.query=qf.query}}}else{var qg=qf.path;var qe=qg.substring(0,qg.lastIndexOf("/")+1)+qh.path;qc.path=on.normalizePath(qe)}}}if(qc.path===null){qc.path=p9.alwaysNormalize?on.normalizePath(qh.path):qh.path}return on.buildURLFromParts(qc)},parseURL:function p7(p9){var qa=p8.exec(p9);if(!qa){return null}return{scheme:qa[1]||"",netLoc:qa[2]||"",path:qa[3]||"",params:qa[4]||"",query:qa[5]||"",fragment:qa[6]||""}},normalizePath:function p3(p9){p9=p9.split("").reverse().join("").replace(t,"");while(p9.length!==(p9=p9.replace(p6,"")).length){}return p9.split("").reverse().join("")},buildURLFromParts:function i(p9){return p9.scheme+p9.netLoc+p9.path+p9.params+p9.query+p9.fragment}};e.exports=on})()});
/*! @name m3u8-parser @version 4.4.0 @license Apache-2.0 */
function w(){w=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var d in r){if(Object.prototype.hasOwnProperty.call(r,d)){t[d]=r[d]}}}return t};return w.apply(this,arguments)}function e6(e,d){e.prototype=Object.create(d.prototype);e.prototype.constructor=e;e.__proto__=d}function aR(d){if(d===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return d}var bA=function(){function on(){this.listeners={}}var e=on.prototype;e.on=function d(p4,p5){if(!this.listeners[p4]){this.listeners[p4]=[]}this.listeners[p4].push(p5)};e.off=function p3(p5,p6){if(!this.listeners[p5]){return false}var p4=this.listeners[p5].indexOf(p6);this.listeners[p5].splice(p4,1);return p4>-1};e.trigger=function i(p6){var p8=this.listeners[p6];var p5;var p7;var p4;if(!p8){return}if(arguments.length===2){p7=p8.length;for(p5=0;p5<p7;++p5){p8[p5].call(this,arguments[1])}}else{p4=Array.prototype.slice.call(arguments,1);p7=p8.length;for(p5=0;p5<p7;++p5){p8[p5].apply(this,p4)}}};e.dispose=function t(){this.listeners={}};e.pipe=function r(p4){this.on("data",function(p5){p4.push(p5)})};return on}();var pc=function(e){e6(r,e);function r(){var t;t=e.call(this)||this;t.buffer="";return t}var d=r.prototype;d.push=function i(on){var t;this.buffer+=on;t=this.buffer.indexOf("\n");for(;t>-1;t=this.buffer.indexOf("\n")){this.trigger("data",this.buffer.substring(0,t));this.buffer=this.buffer.substring(t+1)}};return r}(bA);var c8=function c8(){var e="[^=]*";var i='"[^"]*"|[^,]*';var d="(?:"+e+")=(?:"+i+")";return new RegExp("(?:^|,)("+d+")")};var d4=function d4(r){var t=r.split(c8());var e={};var on=t.length;var d;while(on--){if(t[on]===""){continue}d=/([^=]*)=(.*)/.exec(t[on]).slice(1);d[0]=d[0].replace(/^\s+|\s+$/g,"");d[1]=d[1].replace(/^\s+|\s+$/g,"");d[1]=d[1].replace(/^['"](.*)['"]$/g,"$1");e[d[0]]=d[1]}return e};var ps=function(i){e6(d,i);function d(){var p3;p3=i.call(this)||this;p3.customParsers=[];p3.tagMappers=[];return p3}var e=d.prototype;e.push=function r(p3){var p7=this;var p5;var p6;p3=p3.trim();if(p3.length===0){return}if(p3[0]!=="#"){this.trigger("data",{type:"uri",uri:p3});return}var p4=this.tagMappers.reduce(function(p9,qa){var p8=qa(p3);if(p8===p3){return p9}return p9.concat([p8])},[p3]);p4.forEach(function(qf){for(var qb=0;qb<p7.customParsers.length;qb++){if(p7.customParsers[qb].call(p7,qf)){return}}if(qf.indexOf("#EXT")!==0){p7.trigger("data",{type:"comment",text:qf.slice(1)});return}qf=qf.replace("\r","");p5=/^#EXTM3U/.exec(qf);if(p5){p7.trigger("data",{type:"tag",tagType:"m3u"});return}p5=/^#EXTINF:?([0-9\.]*)?,?(.*)?$/.exec(qf);if(p5){p6={type:"tag",tagType:"inf"};if(p5[1]){p6.duration=parseFloat(p5[1])}if(p5[2]){p6.title=p5[2]}p7.trigger("data",p6);return}p5=/^#EXT-X-TARGETDURATION:?([0-9.]*)?/.exec(qf);if(p5){p6={type:"tag",tagType:"targetduration"};if(p5[1]){p6.duration=parseInt(p5[1],10)}p7.trigger("data",p6);return}p5=/^#ZEN-TOTAL-DURATION:?([0-9.]*)?/.exec(qf);if(p5){p6={type:"tag",tagType:"totalduration"};if(p5[1]){p6.duration=parseInt(p5[1],10)}p7.trigger("data",p6);return}p5=/^#EXT-X-VERSION:?([0-9.]*)?/.exec(qf);if(p5){p6={type:"tag",tagType:"version"};if(p5[1]){p6.version=parseInt(p5[1],10)}p7.trigger("data",p6);return}p5=/^#EXT-X-MEDIA-SEQUENCE:?(\-?[0-9.]*)?/.exec(qf);if(p5){p6={type:"tag",tagType:"media-sequence"};if(p5[1]){p6.number=parseInt(p5[1],10)}p7.trigger("data",p6);return}p5=/^#EXT-X-DISCONTINUITY-SEQUENCE:?(\-?[0-9.]*)?/.exec(qf);if(p5){p6={type:"tag",tagType:"discontinuity-sequence"};if(p5[1]){p6.number=parseInt(p5[1],10)}p7.trigger("data",p6);return}p5=/^#EXT-X-PLAYLIST-TYPE:?(.*)?$/.exec(qf);if(p5){p6={type:"tag",tagType:"playlist-type"};if(p5[1]){p6.playlistType=p5[1]}p7.trigger("data",p6);return}p5=/^#EXT-X-BYTERANGE:?([0-9.]*)?@?([0-9.]*)?/.exec(qf);if(p5){p6={type:"tag",tagType:"byterange"};if(p5[1]){p6.length=parseInt(p5[1],10)}if(p5[2]){p6.offset=parseInt(p5[2],10)}p7.trigger("data",p6);return}p5=/^#EXT-X-ALLOW-CACHE:?(YES|NO)?/.exec(qf);if(p5){p6={type:"tag",tagType:"allow-cache"};if(p5[1]){p6.allowed=!/NO/.test(p5[1])}p7.trigger("data",p6);return}p5=/^#EXT-X-MAP:?(.*)$/.exec(qf);if(p5){p6={type:"tag",tagType:"map"};if(p5[1]){var p8=d4(p5[1]);if(p8.URI){p6.uri=p8.URI}if(p8.BYTERANGE){var qd=p8.BYTERANGE.split("@"),qc=qd[0],qe=qd[1];p6.byterange={};if(qc){p6.byterange.length=parseInt(qc,10)}if(qe){p6.byterange.offset=parseInt(qe,10)}}}p7.trigger("data",p6);return}p5=/^#EXT-X-STREAM-INF:?(.*)$/.exec(qf);if(p5){p6={type:"tag",tagType:"stream-inf"};if(p5[1]){p6.attributes=d4(p5[1]);if(p6.attributes.RESOLUTION){var qa=p6.attributes.RESOLUTION.split("x");var p9={};if(qa[0]){p9.width=parseInt(qa[0],10)}if(qa[1]){p9.height=parseInt(qa[1],10)}p6.attributes.RESOLUTION=p9}if(p6.attributes.BANDWIDTH){p6.attributes.BANDWIDTH=parseInt(p6.attributes.BANDWIDTH,10)}if(p6.attributes["PROGRAM-ID"]){p6.attributes["PROGRAM-ID"]=parseInt(p6.attributes["PROGRAM-ID"],10)}}p7.trigger("data",p6);return}p5=/^#EXT-X-MEDIA:?(.*)$/.exec(qf);if(p5){p6={type:"tag",tagType:"media"};if(p5[1]){p6.attributes=d4(p5[1])}p7.trigger("data",p6);return}p5=/^#EXT-X-ENDLIST/.exec(qf);if(p5){p7.trigger("data",{type:"tag",tagType:"endlist"});return}p5=/^#EXT-X-DISCONTINUITY/.exec(qf);if(p5){p7.trigger("data",{type:"tag",tagType:"discontinuity"});return}p5=/^#EXT-X-PROGRAM-DATE-TIME:?(.*)$/.exec(qf);if(p5){p6={type:"tag",tagType:"program-date-time"};if(p5[1]){p6.dateTimeString=p5[1];p6.dateTimeObject=new Date(p5[1])}p7.trigger("data",p6);return}p5=/^#EXT-X-KEY:?(.*)$/.exec(qf);if(p5){p6={type:"tag",tagType:"key"};if(p5[1]){p6.attributes=d4(p5[1]);if(p6.attributes.IV){if(p6.attributes.IV.substring(0,2).toLowerCase()==="0x"){p6.attributes.IV=p6.attributes.IV.substring(2)}p6.attributes.IV=p6.attributes.IV.match(/.{8}/g);p6.attributes.IV[0]=parseInt(p6.attributes.IV[0],16);p6.attributes.IV[1]=parseInt(p6.attributes.IV[1],16);p6.attributes.IV[2]=parseInt(p6.attributes.IV[2],16);p6.attributes.IV[3]=parseInt(p6.attributes.IV[3],16);p6.attributes.IV=new Uint32Array(p6.attributes.IV)}}p7.trigger("data",p6);return}p5=/^#EXT-X-START:?(.*)$/.exec(qf);if(p5){p6={type:"tag",tagType:"start"};if(p5[1]){p6.attributes=d4(p5[1]);p6.attributes["TIME-OFFSET"]=parseFloat(p6.attributes["TIME-OFFSET"]);p6.attributes.PRECISE=/YES/.test(p6.attributes.PRECISE)}p7.trigger("data",p6);return}p5=/^#EXT-X-CUE-OUT-CONT:?(.*)?$/.exec(qf);if(p5){p6={type:"tag",tagType:"cue-out-cont"};if(p5[1]){p6.data=p5[1]}else{p6.data=""}p7.trigger("data",p6);return}p5=/^#EXT-X-CUE-OUT:?(.*)?$/.exec(qf);if(p5){p6={type:"tag",tagType:"cue-out"};if(p5[1]){p6.data=p5[1]}else{p6.data=""}p7.trigger("data",p6);return}p5=/^#EXT-X-CUE-IN:?(.*)?$/.exec(qf);if(p5){p6={type:"tag",tagType:"cue-in"};if(p5[1]){p6.data=p5[1]}else{p6.data=""}p7.trigger("data",p6);return}p7.trigger("data",{type:"tag",data:qf.slice(4)})})};e.addParser=function on(p6){var p4=this;var p8=p6.expression,p7=p6.customType,p3=p6.dataParser,p5=p6.segment;if(typeof p3!=="function"){p3=function p3(p9){return p9}}this.customParsers.push(function(p9){var qa=p8.exec(p9);if(qa){p4.trigger("data",{type:"custom",data:p3(p9),customType:p7,segment:p5});return true}})};e.addTagMapper=function t(p6){var p4=p6.expression,p3=p6.map;var p5=function p5(p7){if(p4.test(p7)){return p3(p7)}return p7};this.tagMappers.push(p5)};return d}(bA);function a(e){var d=cb.atob(e||"");var t=new Uint8Array(d.length);for(var r=0;r<d.length;r++){t[r]=d.charCodeAt(r)}return t}var de=function(i){e6(on,i);function on(){var p7;p7=i.call(this)||this;p7.lineStream=new pc();p7.parseStream=new ps();p7.lineStream.pipe(p7.parseStream);var qc=aR(p7);var qa=[];var p5={};var qd;var p4;var qb=function qb(){};var p6={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}};var p9="urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed";var p8=0;p7.manifest={allowCache:true,discontinuityStarts:[],segments:[]};p7.parseStream.on("data",function(qh){var qk;var qf;({tag:function qe(){(({"allow-cache":function qx(){this.manifest.allowCache=qh.allowed;if(!("allowed" in qh)){this.trigger("info",{message:"defaulting allowCache to YES"});this.manifest.allowCache=true}},byterange:function qt(){var qE={};if("length" in qh){p5.byterange=qE;qE.length=qh.length;if(!("offset" in qh)){this.trigger("info",{message:"defaulting offset to zero"});qh.offset=0}}if("offset" in qh){p5.byterange=qE;qE.offset=qh.offset}},endlist:function qv(){this.manifest.endList=true},inf:function qq(){if(!("mediaSequence" in this.manifest)){this.manifest.mediaSequence=0;this.trigger("info",{message:"defaulting media sequence to zero"})}if(!("discontinuitySequence" in this.manifest)){this.manifest.discontinuitySequence=0;this.trigger("info",{message:"defaulting discontinuity sequence to zero"})}if(qh.duration>0){p5.duration=qh.duration}if(qh.duration===0){p5.duration=0.01;this.trigger("info",{message:"updating zero segment duration to a small value"})}this.manifest.segments=qa},key:function qD(){if(!qh.attributes){this.trigger("warn",{message:"ignoring key declaration without attribute list"});return}if(qh.attributes.METHOD==="NONE"){p4=null;return}if(!qh.attributes.URI){this.trigger("warn",{message:"ignoring key declaration without URI"});return}if(qh.attributes.KEYFORMAT===p9){var qE=["SAMPLE-AES","SAMPLE-AES-CTR","SAMPLE-AES-CENC"];if(qE.indexOf(qh.attributes.METHOD)===-1){this.trigger("warn",{message:"invalid key method provided for Widevine"});return}if(qh.attributes.METHOD==="SAMPLE-AES-CENC"){this.trigger("warn",{message:"SAMPLE-AES-CENC is deprecated, please use SAMPLE-AES-CTR instead"})}if(qh.attributes.URI.substring(0,23)!=="data:text/plain;base64,"){this.trigger("warn",{message:"invalid key URI provided for Widevine"});return}if(!(qh.attributes.KEYID&&qh.attributes.KEYID.substring(0,2)==="0x")){this.trigger("warn",{message:"invalid key ID provided for Widevine"});return}this.manifest.contentProtection={"com.widevine.alpha":{attributes:{schemeIdUri:qh.attributes.KEYFORMAT,keyId:qh.attributes.KEYID.substring(2)},pssh:a(qh.attributes.URI.split(",")[1])}};return}if(!qh.attributes.METHOD){this.trigger("warn",{message:"defaulting key method to AES-128"})}p4={method:qh.attributes.METHOD||"AES-128",uri:qh.attributes.URI};if(typeof qh.attributes.IV!=="undefined"){p4.iv=qh.attributes.IV}},"media-sequence":function qm(){if(!isFinite(qh.number)){this.trigger("warn",{message:"ignoring invalid media sequence: "+qh.number});return}this.manifest.mediaSequence=qh.number},"discontinuity-sequence":function ql(){if(!isFinite(qh.number)){this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+qh.number});return}this.manifest.discontinuitySequence=qh.number;p8=qh.number},"playlist-type":function qw(){if(!/VOD|EVENT/.test(qh.playlistType)){this.trigger("warn",{message:"ignoring unknown playlist type: "+qh.playlist});return}this.manifest.playlistType=qh.playlistType},map:function qB(){qd={};if(qh.uri){qd.uri=qh.uri}if(qh.byterange){qd.byterange=qh.byterange}},"stream-inf":function qu(){this.manifest.playlists=qa;this.manifest.mediaGroups=this.manifest.mediaGroups||p6;if(!qh.attributes){this.trigger("warn",{message:"ignoring empty stream-inf attributes"});return}if(!p5.attributes){p5.attributes={}}w(p5.attributes,qh.attributes)},media:function qp(){this.manifest.mediaGroups=this.manifest.mediaGroups||p6;if(!(qh.attributes&&qh.attributes.TYPE&&qh.attributes["GROUP-ID"]&&qh.attributes.NAME)){this.trigger("warn",{message:"ignoring incomplete or missing media group"});return}var qE=this.manifest.mediaGroups[qh.attributes.TYPE];qE[qh.attributes["GROUP-ID"]]=qE[qh.attributes["GROUP-ID"]]||{};qk=qE[qh.attributes["GROUP-ID"]];qf={"default":/yes/i.test(qh.attributes.DEFAULT)};if(qf["default"]){qf.autoselect=true}else{qf.autoselect=/yes/i.test(qh.attributes.AUTOSELECT)}if(qh.attributes.LANGUAGE){qf.language=qh.attributes.LANGUAGE}if(qh.attributes.URI){qf.uri=qh.attributes.URI}if(qh.attributes["INSTREAM-ID"]){qf.instreamId=qh.attributes["INSTREAM-ID"]}if(qh.attributes.CHARACTERISTICS){qf.characteristics=qh.attributes.CHARACTERISTICS}if(qh.attributes.FORCED){qf.forced=/yes/i.test(qh.attributes.FORCED)}qk[qh.attributes.NAME]=qf},discontinuity:function qo(){p8+=1;p5.discontinuity=true;this.manifest.discontinuityStarts.push(qa.length)},"program-date-time":function qA(){if(typeof this.manifest.dateTimeString==="undefined"){this.manifest.dateTimeString=qh.dateTimeString;this.manifest.dateTimeObject=qh.dateTimeObject}p5.dateTimeString=qh.dateTimeString;p5.dateTimeObject=qh.dateTimeObject},targetduration:function qs(){if(!isFinite(qh.duration)||qh.duration<0){this.trigger("warn",{message:"ignoring invalid target duration: "+qh.duration});return}this.manifest.targetDuration=qh.duration},totalduration:function qC(){if(!isFinite(qh.duration)||qh.duration<0){this.trigger("warn",{message:"ignoring invalid total duration: "+qh.duration});return}this.manifest.totalDuration=qh.duration},start:function qn(){if(!qh.attributes||isNaN(qh.attributes["TIME-OFFSET"])){this.trigger("warn",{message:"ignoring start declaration without appropriate attribute list"});return}this.manifest.start={timeOffset:qh.attributes["TIME-OFFSET"],precise:qh.attributes.PRECISE}},"cue-out":function qr(){p5.cueOut=qh.data},"cue-out-cont":function qz(){p5.cueOutCont=qh.data},"cue-in":function qy(){p5.cueIn=qh.data}})[qh.tagType]||qb).call(qc)},uri:function qg(){p5.uri=qh.uri;qa.push(p5);if(this.manifest.targetDuration&&!("duration" in p5)){this.trigger("warn",{message:"defaulting segment duration to the target duration"});p5.duration=this.manifest.targetDuration}if(p4){p5.key=p4}p5.timeline=p8;if(qd){p5.map=qd}p5={}},comment:function qj(){},custom:function qi(){if(qh.segment){p5.custom=p5.custom||{};p5.custom[qh.customType]=qh.data}else{this.manifest.custom=this.manifest.custom||{};this.manifest.custom[qh.customType]=qh.data}}})[qh.type].call(qc)});return p7}var e=on.prototype;e.push=function r(p4){this.lineStream.push(p4)};e.end=function d(){this.lineStream.push("\n")};e.addParser=function p3(p4){this.parseStream.addParser(p4)};e.addTagMapper=function t(p4){this.parseStream.addTagMapper(p4)};return on}(bA);function jl(d){return d&&typeof d==="object"&&"default" in d?d["default"]:d}var nk=jl(lE);var ce=jl(cb);var pz=function pz(e,d){if(/^[a-z]+:/i.test(d)){return d}if(!/\/\//i.test(e)){e=nk.buildAbsoluteURL(ce.location&&ce.location.href||"",e)}return nk.buildAbsoluteURL(e,d)};var n0=pz;function aU(d){return d&&typeof d==="object"&&"default" in d?d["default"]:d}var cd=aU(cb);var hW=function hW(d){return cd.atob?cd.atob(d):Buffer.from(d,"base64").toString("binary")};function kn(e){var d=hW(e);var t=new Uint8Array(d.length);for(var r=0;r<d.length;r++){t[r]=d.charCodeAt(r)}return t}var hn=kn;var e4=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/;var bU=new RegExp("[\\-\\.0-9"+e4.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]");var jt=new RegExp("^"+e4.source+bU.source+"*(?::"+e4.source+bU.source+"*)?$");var pX=0;var h9=1;var pk=2;var dk=3;var eq=4;var kf=5;var fk=6;var cl=7;function m4(){}m4.prototype={parse:function lz(r,e,d){var i=this.domBuilder;i.startDocument();mj(e,e={});cp(r,e,d,i,this.errorHandler);i.endDocument()}};function cp(qk,qf,p6,qg,qa){function qe(qw){if(qw>65535){qw-=65536;var i=55296+(qw>>10),e=56320+(qw&1023);return String.fromCharCode(i,e)}else{return String.fromCharCode(qw)}}function qc(e){var i=e.slice(1,-1);if(i in p6){return p6[i]}else{if(i.charAt(0)==="#"){return qe(parseInt(i.substr(1).replace("x","0x")))}else{qa.error("entity not found:"+e);return e}}}function qr(e){if(e>p7){var i=qk.substring(p7,e).replace(/&#?\w+;/g,qc);p3&&qu(p7);qg.characters(i,0,e-p7);p7=e}}function qu(i,e){while(i>=qn&&(e=qd.exec(qk))){qi=e.index;qn=qi+e[0].length;p3.lineNumber++}p3.columnNumber=i-qi+1}var qi=0;var qn=0;var qd=/.*(?:\r\n?|\n)|.*$/g;var p3=qg.locator;var qb=[{currentNSMap:qf}];var p9={};var p7=0;while(true){try{var qo=qk.indexOf("<",p7);if(qo<0){if(!qk.substr(p7).match(/^\s*$/)){var qv=qg.doc;var qh=qv.createTextNode(qk.substr(p7));qv.appendChild(qh);qg.currentElement=qh}return}if(qo>p7){qr(qo)}switch(qk.charAt(qo+1)){case"/":var on=qk.indexOf(">",qo+3);var r=qk.substring(qo+2,on);var qt=qb.pop();if(on<0){r=qk.substring(qo+2).replace(/[\s<].*/,"");qa.error("end tag name: "+r+" is not complete:"+qt.tagName);on=qo+1+r.length}else{if(r.match(/\s</)){r=r.replace(/[\s<].*/,"");qa.error("end tag name: "+r+" maybe not complete");on=qo+1+r.length}}var p5=qt.localNSMap;var t=qt.tagName==r;var p8=t||qt.tagName&&qt.tagName.toLowerCase()==r.toLowerCase();if(p8){qg.endElement(qt.uri,qt.localName,r);if(p5){for(var ql in p5){qg.endPrefixMapping(ql)}}if(!t){qa.fatalError("end tag name: "+r+" is not match the current start tagName:"+qt.tagName)}}else{qb.push(qt)}on++;break;case"?":p3&&qu(qo);on=dp(qk,qo,qg);break;case"!":p3&&qu(qo);on=iD(qk,qo,qg,qa);break;default:p3&&qu(qo);var d=new gi();var p4=qb[qb.length-1].currentNSMap;var on=bg(qk,qo,d,p4,qc,qa);var qp=d.length;if(!d.closed&&hd(qk,on,d.tagName,p9)){d.closed=true;if(!p6.nbsp){qa.warning("unclosed xml attribute")}}if(p3&&qp){var qj=i1(p3,{});for(var qm=0;qm<qp;qm++){var qs=d[qm];qu(qs.offset);qs.locator=i1(p3,{})}qg.locator=qj;if(bs(d,qg,p4)){qb.push(d)}qg.locator=p3}else{if(bs(d,qg,p4)){qb.push(d)}}if(d.uri==="http://www.w3.org/1999/xhtml"&&!d.closed){on=lL(qk,on,d.tagName,qc,qg)}else{on++}}}catch(qq){qa.error("element parse error: "+qq);on=-1}if(on>p7){p7=on}else{qr(Math.max(qo,p7)+1)}}}function i1(e,d){d.lineNumber=e.lineNumber;d.columnNumber=e.columnNumber;return d}function bg(d,i,r,p7,p6,on){var p4;var p5;var e=++i;var p8=pX;while(true){var p3=d.charAt(e);switch(p3){case"=":if(p8===h9){p4=d.slice(i,e);p8=dk}else{if(p8===pk){p8=dk}else{throw new Error("attribute equal must after attrName")}}break;case"'":case'"':if(p8===dk||p8===h9){if(p8===h9){on.warning('attribute value must after "="');p4=d.slice(i,e)}i=e+1;e=d.indexOf(p3,i);if(e>0){p5=d.slice(i,e).replace(/&#?\w+;/g,p6);r.add(p4,p5,i-1);p8=kf}else{throw new Error("attribute value no end '"+p3+"' match")}}else{if(p8==eq){p5=d.slice(i,e).replace(/&#?\w+;/g,p6);r.add(p4,p5,i);on.warning('attribute "'+p4+'" missed start quot('+p3+")!!");i=e+1;p8=kf}else{throw new Error('attribute value must after "="')}}break;case"/":switch(p8){case pX:r.setTagName(d.slice(i,e));case kf:case fk:case cl:p8=cl;r.closed=true;case eq:case h9:case pk:break;default:throw new Error("attribute invalid close char('/')")}break;case"":on.error("unexpected end of input");if(p8==pX){r.setTagName(d.slice(i,e))}return e;case">":switch(p8){case pX:r.setTagName(d.slice(i,e));case kf:case fk:case cl:break;case eq:case h9:p5=d.slice(i,e);if(p5.slice(-1)==="/"){r.closed=true;p5=p5.slice(0,-1)}case pk:if(p8===pk){p5=p4}if(p8==eq){on.warning('attribute "'+p5+'" missed quot(")!!');r.add(p4,p5.replace(/&#?\w+;/g,p6),i)}else{if(p7[""]!=="http://www.w3.org/1999/xhtml"||!p5.match(/^(?:disabled|checked|selected)$/i)){on.warning('attribute "'+p5+'" missed value!! "'+p5+'" instead!!')}r.add(p5,p5,i)}break;case dk:throw new Error("attribute value missed!!")}return e;case"\x80":p3=" ";default:if(p3<=" "){switch(p8){case pX:r.setTagName(d.slice(i,e));p8=fk;break;case h9:p4=d.slice(i,e);p8=pk;break;case eq:var p5=d.slice(i,e).replace(/&#?\w+;/g,p6);on.warning('attribute "'+p5+'" missed quot(")!!');r.add(p4,p5,i);case kf:p8=fk;break}}else{switch(p8){case pk:var t=r.tagName;if(p7[""]!=="http://www.w3.org/1999/xhtml"||!p4.match(/^(?:disabled|checked|selected)$/i)){on.warning('attribute "'+p4+'" missed value!! "'+p4+'" instead2!!')}r.add(p4,p4,i);i=e;p8=h9;break;case kf:on.warning('attribute space is required"'+p4+'"!!');case fk:p8=h9;i=e;break;case dk:p8=eq;i=e;break;case cl:throw new Error("elements closed character '/' and '>' must be connected to")}}}e++}}function bs(r,p6,qb){var on=r.tagName;var e=null;var p4=r.length;while(p4--){var p9=r[p4];var p7=p9.qName;var qa=p9.value;var d=p7.indexOf(":");if(d>0){var p5=p9.prefix=p7.slice(0,d);var p3=p7.slice(d+1);var t=p5==="xmlns"&&p3}else{p3=p7;p5=null;t=p7==="xmlns"&&""}p9.localName=p3;if(t!==false){if(e==null){e={};mj(qb,qb={})}qb[t]=e[t]=qa;p9.uri="http://www.w3.org/2000/xmlns/";p6.startPrefixMapping(t,qa)}}var p4=r.length;while(p4--){p9=r[p4];var p5=p9.prefix;if(p5){if(p5==="xml"){p9.uri="http://www.w3.org/XML/1998/namespace"}if(p5!=="xmlns"){p9.uri=qb[p5||""]}}}var d=on.indexOf(":");if(d>0){p5=r.prefix=on.slice(0,d);p3=r.localName=on.slice(d+1)}else{p5=null;p3=r.localName=on}var p8=r.uri=qb[p5||""];p6.startElement(p8,p3,on,r);if(r.closed){p6.endElement(p8,p3,on);if(e){for(p5 in e){p6.endPrefixMapping(p5)}}}else{r.currentNSMap=qb;r.localNSMap=e;return true}}function lL(t,i,e,on,r){if(/^(?:script|textarea)$/i.test(e)){var d=t.indexOf("</"+e+">",i);var p3=t.substring(i+1,d);if(/[&<]/.test(p3)){if(/^script$/i.test(e)){r.characters(p3,0,p3.length);return d}p3=p3.replace(/&#?\w+;/g,on);r.characters(p3,0,p3.length);return d}}return i+1}function hd(r,i,e,d){var t=d[e];if(t==null){t=r.lastIndexOf("</"+e+">");if(t<i){t=r.lastIndexOf("</"+e)}d[e]=t}return t<i}function mj(d,e){for(var i in d){e[i]=d[i]}}function iD(d,r,p5,p6){var p4=d.charAt(r+2);switch(p4){case"-":if(d.charAt(r+3)==="-"){var on=d.indexOf("-->",r+4);if(on>r){p5.comment(d,r+4,on-r-4);return on+3}else{p6.error("Unclosed comment");return -1}}else{return -1}default:if(d.substr(r+3,6)=="CDATA["){var on=d.indexOf("]]>",r+9);p5.startCDATA();p5.characters(d,r+9,on-r-9);p5.endCDATA();return on+3}var i=jV(d,r);var p8=i.length;if(p8>1&&/!doctype/i.test(i[0][0])){var e=i[1][0];var t=p8>3&&/^public$/i.test(i[2][0])&&i[3][0];var p7=p8>4&&i[4][0];var p3=i[p8-1];p5.startDTD(e,t&&t.replace(/^(['"])(.*?)\1$/,"$2"),p7&&p7.replace(/^(['"])(.*?)\1$/,"$2"));p5.endDTD();return p3.index+p3[0].length}}return -1}function dp(t,on,r){var e=t.indexOf("?>",on);if(e){var i=t.substring(on,e).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);if(i){var d=i[0].length;r.processingInstruction(i[1],i[2]);return e+2}else{return -1}}return -1}function gi(d){}gi.prototype={setTagName:function gc(d){if(!jt.test(d)){throw new Error("invalid tagName:"+d)}this.tagName=d},add:function cz(e,d,i){if(!jt.test(e)){throw new Error("invalid attribute:"+e)}this[this.length++]={qName:e,value:d,offset:i}},length:0,getLocalName:function nF(d){return this[d].localName},getLocator:function jP(d){return this[d].locator},getQName:function mB(d){return this[d].qName},getURI:function P(d){return this[d].uri},getValue:function ml(d){return this[d].value}};function dK(e,d){e.__proto__=d;return e}if(!(dK({},dK.prototype) instanceof dK)){dK=function dK(e,d){function i(){}i.prototype=d;i=new i();for(d in e){i[d]=e[d]}return i}}function jV(r,t){var e;var d=[];var i=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;i.lastIndex=t;i.exec(r);while(e=i.exec(r)){d.push(e);if(e[1]){return d}}}var kr=m4;var py={XMLReader:kr};function mM(i,d){for(var e in i){d[e]=i[e]}}function ba(e,r){var on=e.prototype;if(Object.create){var d=Object.create(r.prototype);on.__proto__=d}if(!(on instanceof r)){var i=function i(){};i.prototype=r.prototype;i=new i();mM(on,i);e.prototype=on=i}if(on.constructor!=e){if(typeof e!="function"){console.error("unknow Class:"+e)}on.constructor=e}}var fb="http://www.w3.org/1999/xhtml";var no={};var dg=no.ELEMENT_NODE=1;var fN=no.ATTRIBUTE_NODE=2;var lO=no.TEXT_NODE=3;var lK=no.CDATA_SECTION_NODE=4;var g=no.ENTITY_REFERENCE_NODE=5;var g7=no.ENTITY_NODE=6;var mJ=no.PROCESSING_INSTRUCTION_NODE=7;var f2=no.COMMENT_NODE=8;var nX=no.DOCUMENT_NODE=9;var bB=no.DOCUMENT_TYPE_NODE=10;var bS=no.DOCUMENT_FRAGMENT_NODE=11;var fS=no.NOTATION_NODE=12;var gY={};var hA={};var bJ=gY.INDEX_SIZE_ERR=(hA[1]="Index size error",1);var eU=gY.DOMSTRING_SIZE_ERR=(hA[2]="DOMString size error",2);var fz=gY.HIERARCHY_REQUEST_ERR=(hA[3]="Hierarchy request error",3);var jr=gY.WRONG_DOCUMENT_ERR=(hA[4]="Wrong document",4);var gq=gY.INVALID_CHARACTER_ERR=(hA[5]="Invalid character",5);var d8=gY.NO_DATA_ALLOWED_ERR=(hA[6]="No data allowed",6);var hO=gY.NO_MODIFICATION_ALLOWED_ERR=(hA[7]="No modification allowed",7);var iL=gY.NOT_FOUND_ERR=(hA[8]="Not found",8);var nQ=gY.NOT_SUPPORTED_ERR=(hA[9]="Not supported",9);var md=gY.INUSE_ATTRIBUTE_ERR=(hA[10]="Attribute in use",10);var od=gY.INVALID_STATE_ERR=(hA[11]="Invalid state",11);var hb=gY.SYNTAX_ERR=(hA[12]="Syntax error",12);var og=gY.INVALID_MODIFICATION_ERR=(hA[13]="Invalid modification",13);var hR=gY.NAMESPACE_ERR=(hA[14]="Invalid namespace",14);var m7=gY.INVALID_ACCESS_ERR=(hA[15]="Invalid access",15);function of(i,e){if(e instanceof Error){var d=e}else{d=this;Error.call(this,hA[i]);this.message=hA[i];if(Error.captureStackTrace){Error.captureStackTrace(this,of)}}d.code=i;if(e){this.message=this.message+": "+e}return d}of.prototype=Error.prototype;mM(gY,of);function T(){}T.prototype={length:0,item:function gJ(d){return this[d]||null},toString:function l5(e,d){for(var r=[],t=0;t<this.length;t++){al(this[t],r,e,d)}return r.join("")}};function oD(e,d){this._node=e;this._refresh=d;lM(this)}function lM(e){var i=e._node._inc||e._node.ownerDocument._inc;if(e._inc!=i){var d=e._refresh(e._node);kd(e,"length",d.length);mM(d,e);e._inc=i}}oD.prototype.item=function(d){lM(this);return this[d]};ba(oD,T);function eL(){}function i4(r,e){var d=r.length;while(d--){if(r[d]===e){return d}}}function hL(e,i,t,d){if(d){i[i4(i,d)]=t}else{i[i.length++]=t}if(e){t.ownerElement=e;var r=e.ownerDocument;if(r){d&&h(r,e,d);fU(r,e,t)}}}function jm(r,t,d){var e=i4(t,d);if(e>=0){var p3=t.length-1;while(e<p3){t[e]=t[++e]}t.length=p3;if(r){var on=r.ownerDocument;if(on){h(on,r,d);d.ownerElement=null}}}else{throw of(iL,new Error(r.tagName+"@"+d))}}eL.prototype={length:0,item:T.prototype.item,getNamedItem:function g2(r){var e=this.length;while(e--){var d=this[e];if(d.nodeName==r){return d}}},setNamedItem:function n9(d){var i=d.ownerElement;if(i&&i!=this._ownerElement){throw new of(md)}var e=this.getNamedItem(d.nodeName);hL(this._ownerElement,this,d,e);return e},setNamedItemNS:function oY(d){var i=d.ownerElement,e;if(i&&i!=this._ownerElement){throw new of(md)}e=this.getNamedItemNS(d.namespaceURI,d.localName);hL(this._ownerElement,this,d,e);return e},removeNamedItem:function ck(e){var d=this.getNamedItem(e);jm(this._ownerElement,this,d);return d},removeNamedItemNS:function gh(i,e){var d=this.getNamedItemNS(i,e);jm(this._ownerElement,this,d);return d},getNamedItemNS:function io(e,d){var r=this.length;while(r--){var t=this[r];if(t.localName==d&&t.namespaceURI==e){return t}}return null}};function p1(e){this._features={};if(e){for(var d in e){this._features=e[d]}}}p1.prototype={hasFeature:function hp(i,e){var d=this._features[i.toLowerCase()];if(d&&(!e||e in d)){return true}else{return false}},createDocument:function cE(i,t,e){var r=new oe();r.implementation=this;r.childNodes=new T();r.doctype=e;if(e){r.appendChild(e)}if(t){var d=r.createElementNS(i,t);r.appendChild(d)}return r},createDocumentType:function jy(i,r,d){var e=new m2();e.name=i;e.nodeName=i;e.publicId=r;e.systemId=d;return e}};function js(){}js.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function kH(d,e){return U(this,d,e)},replaceChild:function gg(d,e){this.insertBefore(d,e);if(e){this.removeChild(e)}},removeChild:function pI(d){return a7(this,d)},appendChild:function oS(d){return this.insertBefore(d,null)},hasChildNodes:function ks(){return this.firstChild!=null},cloneNode:function mn(d){return ct(this.ownerDocument||this,this,d)},normalize:function bI(){var e=this.firstChild;while(e){var d=e.nextSibling;if(d&&d.nodeType==lO&&e.nodeType==lO){this.removeChild(d);e.appendData(d.data)}else{e.normalize();e=d}}},isSupported:function nc(e,d){return this.ownerDocument.implementation.hasFeature(e,d)},hasAttributes:function dV(){return this.attributes.length>0},lookupPrefix:function oL(d){var e=this;while(e){var i=e._nsMap;if(i){for(var r in i){if(i[r]==d){return r}}}e=e.nodeType==fN?e.ownerDocument:e.parentNode}return null},lookupNamespaceURI:function lq(e){var d=this;while(d){var i=d._nsMap;if(i){if(e in i){return i[e]}}d=d.nodeType==fN?d.ownerDocument:d.parentNode}return null},isDefaultNamespace:function f6(d){var e=this.lookupPrefix(d);return e==null}};function nA(d){return d=="<"&&"&lt;"||d==">"&&"&gt;"||d=="&"&&"&amp;"||d=='"'&&"&quot;"||"&#"+d.charCodeAt()+";"}mM(no,js);mM(no,js.prototype);function os(d,e){if(e(d)){return true}if(d=d.firstChild){do{if(os(d,e)){return true}}while(d=d.nextSibling)}}function oe(){}function fU(i,e,r){i&&i._inc++;var d=r.namespaceURI;if(d=="http://www.w3.org/2000/xmlns/"){e._nsMap[r.prefix?r.localName:""]=r.value}}function h(r,i,t,d){r&&r._inc++;var e=t.namespaceURI;if(e=="http://www.w3.org/2000/xmlns/"){delete i._nsMap[t.prefix?t.localName:""]}}function cv(on,t,d){if(on&&on._inc){on._inc++;var r=t.childNodes;if(d){r[r.length++]=d}else{var p3=t.firstChild;var e=0;while(p3){r[e++]=p3;p3=p3.nextSibling}r.length=e}}}function a7(d,r){var i=r.previousSibling;var e=r.nextSibling;if(i){i.nextSibling=e}else{d.firstChild=e}if(e){e.previousSibling=i}else{d.lastChild=i}cv(d.ownerDocument,d);return r}function U(e,d,r){var on=d.parentNode;if(on){on.removeChild(d)}if(d.nodeType===bS){var p3=d.firstChild;if(p3==null){return d}var i=d.lastChild}else{p3=i=d}var t=r?r.previousSibling:e.lastChild;p3.previousSibling=t;i.nextSibling=r;if(t){t.nextSibling=p3}else{e.firstChild=p3}if(r==null){e.lastChild=i}else{r.previousSibling=i}do{p3.parentNode=e}while(p3!==i&&(p3=p3.nextSibling));cv(e.ownerDocument||e,e);if(d.nodeType==bS){d.firstChild=d.lastChild=null}return d}function au(e,d){var r=d.parentNode;if(r){var i=e.lastChild;r.removeChild(d);var i=e.lastChild}var i=e.lastChild;d.parentNode=e;d.previousSibling=i;d.nextSibling=null;if(i){i.nextSibling=d}else{e.firstChild=d}e.lastChild=d;cv(e.ownerDocument,e,d);return d}oe.prototype={nodeName:"#document",nodeType:nX,doctype:null,documentElement:null,_inc:1,insertBefore:function kH(d,e){if(d.nodeType==bS){var r=d.firstChild;while(r){var i=r.nextSibling;this.insertBefore(r,e);r=i}return d}if(this.documentElement==null&&d.nodeType==dg){this.documentElement=d}return U(this,d,e),d.ownerDocument=this,d},removeChild:function pI(d){if(this.documentElement==d){this.documentElement=null}return a7(this,d)},importNode:function hf(e,d){return a4(this,e,d)},getElementById:function kh(e){var d=null;os(this.documentElement,function(i){if(i.nodeType==dg){if(i.getAttribute("id")==e){d=i;return true}}});return d},createElement:function Z(e){var i=new lQ();i.ownerDocument=this;i.nodeName=e;i.tagName=e;i.childNodes=new T();var d=i.attributes=new eL();d._ownerElement=i;return i},createDocumentFragment:function oB(){var d=new k8();d.ownerDocument=this;d.childNodes=new T();return d},createTextNode:function eK(e){var d=new l();d.ownerDocument=this;d.appendData(e);return d},createComment:function jo(e){var d=new eG();d.ownerDocument=this;d.appendData(e);return d},createCDATASection:function ey(e){var d=new hx();d.ownerDocument=this;d.appendData(e);return d},createProcessingInstruction:function kv(i,e){var d=new hB();d.ownerDocument=this;d.tagName=d.target=i;d.nodeValue=d.data=e;return d},createAttribute:function nV(d){var e=new gQ();e.ownerDocument=this;e.name=d;e.nodeName=d;e.localName=d;e.specified=true;return e},createEntityReference:function fQ(d){var e=new n7();e.ownerDocument=this;e.nodeName=d;return e},createElementNS:function c6(e,t){var r=new lQ();var i=t.split(":");var d=r.attributes=new eL();r.childNodes=new T();r.ownerDocument=this;r.nodeName=t;r.tagName=t;r.namespaceURI=e;if(i.length==2){r.prefix=i[0];r.localName=i[1]}else{r.localName=t}d._ownerElement=r;return r},createAttributeNS:function dn(d,r){var i=new gQ();var e=r.split(":");i.ownerDocument=this;i.nodeName=r;i.name=r;i.namespaceURI=d;i.specified=true;if(e.length==2){i.prefix=e[0];i.localName=e[1]}else{i.localName=r}return i}};ba(oe,js);function lQ(){this._nsMap={}}lQ.prototype={nodeType:dg,hasAttribute:function mt(d){return this.getAttributeNode(d)!=null},getAttribute:function it(e){var d=this.getAttributeNode(e);return d&&d.value||""},getAttributeNode:function pA(d){return this.attributes.getNamedItem(d)},setAttribute:function ne(e,i){var d=this.ownerDocument.createAttribute(e);d.value=d.nodeValue=""+i;this.setAttributeNode(d)},removeAttribute:function be(e){var d=this.getAttributeNode(e);d&&this.removeAttributeNode(d)},appendChild:function oS(d){if(d.nodeType===bS){return this.insertBefore(d,null)}else{return au(this,d)}},setAttributeNode:function cn(d){return this.attributes.setNamedItem(d)},setAttributeNodeNS:function ch(d){return this.attributes.setNamedItemNS(d)},removeAttributeNode:function bf(d){return this.attributes.removeNamedItem(d.nodeName)},removeAttributeNS:function I(i,e){var d=this.getAttributeNodeNS(i,e);d&&this.removeAttributeNode(d)},hasAttributeNS:function cm(e,d){return this.getAttributeNodeNS(e,d)!=null},getAttributeNS:function bR(i,e){var d=this.getAttributeNodeNS(i,e);return d&&d.value||""},setAttributeNS:function im(e,r,i){var d=this.ownerDocument.createAttributeNS(e,r);d.value=d.nodeValue=""+i;this.setAttributeNode(d)},getAttributeNodeNS:function jM(e,d){return this.attributes.getNamedItemNS(e,d)},getElementsByTagName:function oi(d){return new oD(this,function(i){var e=[];os(i,function(r){if(r!==i&&r.nodeType==dg&&(d==="*"||r.tagName==d)){e.push(r)}});return e})},getElementsByTagNameNS:function jx(e,d){return new oD(this,function(r){var i=[];os(r,function(t){if(t!==r&&t.nodeType===dg&&(e==="*"||t.namespaceURI===e)&&(d==="*"||t.localName==d)){i.push(t)}});return i})}};oe.prototype.getElementsByTagName=lQ.prototype.getElementsByTagName;oe.prototype.getElementsByTagNameNS=lQ.prototype.getElementsByTagNameNS;ba(lQ,js);function gQ(){}gQ.prototype.nodeType=fN;ba(gQ,js);function pE(){}pE.prototype={data:"",substringData:function a8(e,d){return this.data.substring(e,e+d)},appendData:function mL(d){d=this.data+d;this.nodeValue=this.data=d;this.length=d.length},insertData:function gj(e,d){this.replaceData(e,0,d)},appendChild:function oS(d){throw new Error(hA[fz])},deleteData:function mO(e,d){this.replaceData(e,d,"")},replaceData:function f(r,e,i){var t=this.data.substring(0,r);var d=this.data.substring(r+e);i=t+i+d;this.nodeValue=this.data=i;this.length=i.length}};ba(pE,js);function l(){}l.prototype={nodeName:"#text",nodeType:lO,splitText:function d5(r){var i=this.data;var e=i.substring(r);i=i.substring(0,r);this.data=this.nodeValue=i;this.length=i.length;var d=this.ownerDocument.createTextNode(e);if(this.parentNode){this.parentNode.insertBefore(d,this.nextSibling)}return d}};ba(l,pE);function eG(){}eG.prototype={nodeName:"#comment",nodeType:f2};ba(eG,pE);function hx(){}hx.prototype={nodeName:"#cdata-section",nodeType:lK};ba(hx,pE);function m2(){}m2.prototype.nodeType=bB;ba(m2,js);function my(){}my.prototype.nodeType=fS;ba(my,js);function oj(){}oj.prototype.nodeType=g7;ba(oj,js);function n7(){}n7.prototype.nodeType=g;ba(n7,js);function k8(){}k8.prototype.nodeName="#document-fragment";k8.prototype.nodeType=bS;ba(k8,js);function hB(){}hB.prototype.nodeType=mJ;ba(hB,js);function dF(){}dF.prototype.serializeToString=function(i,e,d){return fl.call(i,e,d)};js.prototype.toString=fl;function fl(t,d){var i=[];var e=this.nodeType==9?this.documentElement:this;var p3=e.prefix;var on=e.namespaceURI;if(on&&p3==null){var p3=e.lookupPrefix(on);if(p3==null){var r=[{namespace:on,prefix:null}]}}al(this,i,t,d,r);return i.join("")}function dS(p3,d,r){var p4=p3.prefix||"";var on=p3.namespaceURI;if(!p4&&!on){return false}if(p4==="xml"&&on==="http://www.w3.org/XML/1998/namespace"||on=="http://www.w3.org/2000/xmlns/"){return false}var e=r.length;while(e--){var t=r[e];if(t.prefix==p4){return t.namespace!=on}}return true}function al(qa,qe,p5,r,p6){if(r){qa=r(qa);if(qa){if(typeof qa=="string"){qe.push(qa);return}}else{return}}switch(qa.nodeType){case dg:if(!p6){p6=[]}var p7=p6.length;var p8=qa.attributes;var qd=p8.length;var on=qa.firstChild;var d=qa.tagName;p5=fb===qa.namespaceURI||p5;qe.push("<",d);for(var qc=0;qc<qd;qc++){var p9=p8.item(qc);if(p9.prefix=="xmlns"){p6.push({prefix:p9.localName,namespace:p9.value})}else{if(p9.nodeName=="xmlns"){p6.push({prefix:"",namespace:p9.value})}}}for(var qc=0;qc<qd;qc++){var p9=p8.item(qc);if(dS(p9,p5,p6)){var qb=p9.prefix||"";var t=p9.namespaceURI;var qf=qb?" xmlns:"+qb:" xmlns";qe.push(qf,'="',t,'"');p6.push({prefix:qb,namespace:t})}al(p9,qe,p5,r,p6)}if(dS(qa,p5,p6)){var qb=qa.prefix||"";var t=qa.namespaceURI;var qf=qb?" xmlns:"+qb:" xmlns";qe.push(qf,'="',t,'"');p6.push({prefix:qb,namespace:t})}if(on||p5&&!/^(?:meta|link|img|br|hr|input)$/i.test(d)){qe.push(">");if(p5&&/^script$/i.test(d)){while(on){if(on.data){qe.push(on.data)}else{al(on,qe,p5,r,p6)}on=on.nextSibling}}else{while(on){al(on,qe,p5,r,p6);on=on.nextSibling}}qe.push("</",d,">")}else{qe.push("/>")}return;case nX:case bS:var on=qa.firstChild;while(on){al(on,qe,p5,r,p6);on=on.nextSibling}return;case fN:return qe.push(" ",qa.name,'="',qa.value.replace(/[<&"]/g,nA),'"');case lO:return qe.push(qa.data.replace(/[<&]/g,nA));case lK:return qe.push("<![CDATA[",qa.data,"]]>");case f2:return qe.push("<!--",qa.data,"-->");case bB:var p4=qa.publicId;var e=qa.systemId;qe.push("<!DOCTYPE ",qa.name);if(p4){qe.push(' PUBLIC "',p4);if(e&&e!="."){qe.push('" "',e)}qe.push('">')}else{if(e&&e!="."){qe.push(' SYSTEM "',e,'">')}else{var p3=qa.internalSubset;if(p3){qe.push(" [",p3,"]")}qe.push(">")}}return;case mJ:return qe.push("<?",qa.target," ",qa.data,"?>");case g:return qe.push("&",qa.nodeName,";");default:qe.push("??",qa.nodeName)}}function a4(r,i,e){var d;switch(i.nodeType){case dg:d=i.cloneNode(false);d.ownerDocument=r;case bS:break;case fN:e=true;break}if(!d){d=i.cloneNode(false)}d.ownerDocument=r;d.parentNode=null;if(e){var t=i.firstChild;while(t){d.appendChild(a4(r,t,e));t=t.nextSibling}}return d}function ct(p4,t,p7){var p8=new t.constructor();for(var r in t){var p6=t[r];if(typeof p6!="object"){if(p6!=p8[r]){p8[r]=p6}}}if(t.childNodes){p8.childNodes=new T()}p8.ownerDocument=p4;switch(p8.nodeType){case dg:var p5=t.attributes;var d=p8.attributes=new eL();var p3=p5.length;d._ownerElement=p8;for(var on=0;on<p3;on++){p8.setAttributeNode(ct(p4,p5.item(on),true))}break;case fN:p7=true}if(p7){var e=t.firstChild;while(e){p8.appendChild(ct(p4,e,p7));e=e.nextSibling}}return p8}function kd(d,e,i){d[e]=i}try{if(Object.defineProperty){var cB=function cB(e){switch(e.nodeType){case dg:case bS:var d=[];e=e.firstChild;while(e){if(e.nodeType!==7&&e.nodeType!==8){d.push(cB(e))}e=e.nextSibling}return d.join("");default:return e.nodeValue}};Object.defineProperty(oD.prototype,"length",{get:function f0(){lM(this);return this.$$length}});Object.defineProperty(js.prototype,"textContent",{get:function f0(){return cB(this)},set:function n5(d){switch(this.nodeType){case dg:case bS:while(this.firstChild){this.removeChild(this.firstChild)}if(d||String(d)){this.appendChild(this.ownerDocument.createTextNode(d))}break;default:this.data=d;this.value=d;this.nodeValue=d}}});kd=function kd(d,e,i){d["$$"+e]=i}}}catch(o3){}var at=p1;var hN=dF;var aO={DOMImplementation:at,XMLSerializer:hN};var M=g8(function(on,qp){function qj(qq){this.options=qq||{locator:{}}}qj.prototype.parseFromString=function(qr,qs){var qy=this.options;var qq=new qm();var qv=qy.domBuilder||new qc();var qw=qy.errorHandler;var qt=qy.locator;var qx=qy.xmlns||{};var qu={lt:"<",gt:">",amp:"&",quot:'"',apos:"'"};if(qt){qv.setDocumentLocator(qt)}qq.errorHandler=qh(qw,qv,qt);qq.domBuilder=qy.domBuilder||qv;if(/\/x?html?$/.test(qs)){qu.nbsp="\xa0";qu.copy="\xa9";qx[""]="http://www.w3.org/1999/xhtml"}qx.xml=qx.xml||"http://www.w3.org/XML/1998/namespace";if(qr){qq.parse(qr,qx,qu)}else{qq.errorHandler.error("invalid doc source")}return qv.doc};function qh(qs,qt,qq){if(!qs){if(qt instanceof qc){return qt}qs=qt}var qr={};var qu=qs instanceof Function;qq=qq||{};function qv(qw){var qx=qs[qw];if(!qx&&qu){qx=qs.length==2?function(qy){qs(qw,qy)}:qs}qr[qw]=qx&&function(qy){qx("[xmldom "+qw+"]\t"+qy+qd(qq))}||function(){}}qv("warning");qv("error");qv("fatalError");return qr}function qc(){this.cdata=false}function qo(qq,qr){qr.lineNumber=qq.lineNumber;qr.columnNumber=qq.columnNumber}qc.prototype={startDocument:function p3(){this.doc=new d().createDocument(null,null,null);if(this.locator){this.doc.documentURI=this.locator.systemId}},startElement:function e(qr,qs,qw,qz){var qy=this.doc;var qq=qy.createElementNS(qr,qw||qs);var qu=qz.length;qe(this,qq);this.currentElement=qq;this.locator&&qo(this.locator,qq);for(var qt=0;qt<qu;qt++){var qr=qz.getURI(qt);var qx=qz.getValue(qt);var qw=qz.getQName(qt);var qv=qy.createAttributeNS(qr,qw);this.locator&&qo(qz.getLocator(qt),qv);qv.value=qv.nodeValue=qx;qq.setAttributeNode(qv)}},endElement:function qa(qr,qq,qt){var qu=this.currentElement;var qs=qu.tagName;this.currentElement=qu.parentNode},startPrefixMapping:function qb(qr,qq){},endPrefixMapping:function ql(qq){},processingInstruction:function qi(qs,qr){var qq=this.doc.createProcessingInstruction(qs,qr);this.locator&&qo(this.locator,qq);qe(this,qq)},ignorableWhitespace:function qk(qq,qs,qr){},characters:function i(qs,qt,qr){qs=qn.apply(this,arguments);if(qs){if(this.cdata){var qq=this.doc.createCDATASection(qs)}else{var qq=this.doc.createTextNode(qs)}if(this.currentElement){this.currentElement.appendChild(qq)}else{if(/^\s*$/.test(qs)){this.doc.appendChild(qq)}}this.locator&&qo(this.locator,qq)}},skippedEntity:function t(qq){},endDocument:function p6(){this.doc.normalize()},setDocumentLocator:function p9(qq){if(this.locator=qq){qq.lineNumber=0}},comment:function r(qs,qt,qr){qs=qn.apply(this,arguments);var qq=this.doc.createComment(qs);this.locator&&qo(this.locator,qq);qe(this,qq)},startCDATA:function p8(){this.cdata=true},endCDATA:function p5(){this.cdata=false},startDTD:function p4(qs,qu,qq){var qr=this.doc.implementation;if(qr&&qr.createDocumentType){var qt=qr.createDocumentType(qs,qu,qq);this.locator&&qo(this.locator,qt);qe(this,qt)}},warning:function qg(qq){console.warn("[xmldom warning]\t"+qq,qd(this.locator))},error:function qf(qq){console.error("[xmldom error]\t"+qq,qd(this.locator))},fatalError:function p7(qq){console.error("[xmldom fatalError]\t"+qq,qd(this.locator));throw qq}};function qd(qq){if(qq){return"\n@"+(qq.systemId||"")+"#[line:"+qq.lineNumber+",col:"+qq.columnNumber+"]"}}function qn(qr,qs,qq){if(typeof qr=="string"){return qr.substr(qs,qq)}else{if(qr.length>=qs+qq||qs){return new java.lang.String(qr,qs,qq)+""}return qr}}"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(qq){qc.prototype[qq]=function(){return null}});function qe(qq,qr){if(!qq.currentElement){qq.doc.appendChild(qr)}else{qq.currentElement.appendChild(qr)}}var qm=py.XMLReader;var d=qp.DOMImplementation=aO.DOMImplementation;qp.XMLSerializer=aO.XMLSerializer;qp.DOMParser=qj});var h8=M.DOMImplementation;var h6=M.XMLSerializer;var h3=M.DOMParser;
/*! @name mpd-parser @version 0.10.0 @license Apache-2.0 */
var kV=function ci(d){return !!d&&typeof d==="object"};var d7=function d7(){for(var d=arguments.length,i=new Array(d),e=0;e<d;e++){i[e]=arguments[e]}return i.reduce(function(r,t){Object.keys(t).forEach(function(on){if(Array.isArray(r[on])&&Array.isArray(t[on])){r[on]=r[on].concat(t[on])}else{if(kV(r[on])&&kV(t[on])){r[on]=d7(r[on],t[on])}else{r[on]=t[on]}}});return r},{})};var lu=function lu(d){return Object.keys(d).map(function(e){return d[e]})};var cR=function cR(t,e){var d=[];for(var r=t;r<e;r++){d.push(r)}return d};var hE=function hE(d){return d.reduce(function(e,i){return e.concat(i)},[])};var lg=function lg(r){if(!r.length){return[]}var d=[];for(var e=0;e<r.length;e++){d.push(r[e])}return d};var h2=function h2(d,e){return d.reduce(function(r,on,t){if(on[e]){r.push(t)}return r},[])};var fC={INVALID_NUMBER_OF_PERIOD:"INVALID_NUMBER_OF_PERIOD",DASH_EMPTY_MANIFEST:"DASH_EMPTY_MANIFEST",DASH_INVALID_XML:"DASH_INVALID_XML",NO_BASE_URL:"NO_BASE_URL",MISSING_SEGMENT_INFORMATION:"MISSING_SEGMENT_INFORMATION",SEGMENT_TIME_UNSPECIFIED:"SEGMENT_TIME_UNSPECIFIED",UNSUPPORTED_UTC_TIMING_SCHEME:"UNSUPPORTED_UTC_TIMING_SCHEME"};var dN=function dN(p4){var r=p4.baseUrl,p7=r===void 0?"":r,qa=p4.source,d=qa===void 0?"":qa,i=p4.range,p5=i===void 0?"":i,on=p4.indexRange,p8=on===void 0?"":on;var p6={uri:d,resolvedUri:n0(p7||"",d)};if(p5||p8){var p3=p5?p5:p8;var e=p3.split("-");var p9=parseInt(e[0],10);var t=parseInt(e[1],10);p6.byterange={length:t-p9+1,offset:p9}}return p6};var iE=function iE(e){var d=e.offset+e.length-1;return e.offset+"-"+d};var oz={"static":function cC(r){var t=r.duration,i=r.timescale,e=i===void 0?1:i,d=r.sourceDuration;return{start:0,end:Math.ceil(d/(t/e))}},dynamic:function mu(p7){var t=p7.NOW,qg=p7.clientOffset,on=p7.availabilityStartTime,p4=p7.timescale,qa=p4===void 0?1:p4,d=p7.duration,qc=p7.start,p3=qc===void 0?0:qc,qf=p7.minimumUpdatePeriod,i=qf===void 0?0:qf,qe=p7.timeShiftBufferDepth,p5=qe===void 0?Infinity:qe;var r=(t+qg)/1000;var p8=on+p3;var e=r+i;var p9=e-p8;var p6=Math.ceil(p9*qa/d);var qb=Math.floor((r-p8-p5)*qa/d);var qd=Math.floor((r-p8)*qa/d);return{start:Math.max(0,qb),end:Math.min(p6,qd)}}};var hk=function hk(d){return function(p3,on){var p5=d.duration,t=d.timescale,r=t===void 0?1:t,i=d.periodIndex,e=d.startNumber,p4=e===void 0?1:e;return{number:p4+p3,duration:p5/r,timeline:i,time:on*p5}}};var pt=function pt(p4){var r=p4.type,p7=r===void 0?"static":r,on=p4.duration,p3=p4.timescale,p8=p3===void 0?1:p3,e=p4.sourceDuration;var i=oz[p7](p4),d=i.start,t=i.end;var p5=cR(d,t).map(hk(p4));if(p7==="static"){var p6=p5.length-1;p5[p6].duration=e-on/p8*p6}return p5};var dZ=function dZ(on){var p6=on.baseUrl,r=on.initialization,p8=r===void 0?{}:r,i=on.sourceDuration,p5=on.timescale,p9=p5===void 0?1:p5,e=on.indexRange,p7=e===void 0?"":e,t=on.duration;if(!p6){throw new Error(fC.NO_BASE_URL)}var p4=dN({baseUrl:p6,source:p8.sourceURL,range:p8.range});var p3=dN({baseUrl:p6,source:p6,indexRange:p7});p3.map=p4;if(t){var d=pt(on);if(d.length){p3.duration=d[0].duration;p3.timeline=d[0].timeline}}else{if(i){p3.duration=i/p9;p3.timeline=0}}p3.number=0;return[p3]};var oZ=function oZ(qg,qd,r){var p4=qg.sidx.map?qg.sidx.map:null;var qh=qg.sidx.duration;var p5=qg.timeline||0;var qc=qg.sidx.byterange;var d=qc.offset+qc.length;var p9=qd.timescale;var qa=qd.references.filter(function(i){return i.referenceType!==1});var qe=[];var p3=d+qd.firstOffset;for(var qf=0;qf<qa.length;qf++){var p6=qd.references[qf];var qb=p6.referencedSize;var e=p6.subsegmentDuration;var on=p3+qb-1;var p7=p3+"-"+on;var p8={baseUrl:r,timescale:p9,timeline:p5,periodIndex:p5,duration:e,sourceDuration:qh,indexRange:p7};var t=dZ(p8)[0];if(p4){t.map=p4}qe.push(t);p3+=qb}qg.segments=qe;return qg};var jN=function jN(d){var e=lu(d.reduce(function(r,t){var i=t.attributes.id+(t.attributes.lang||"");if(r[i]){var on;if(t.segments[0]){t.segments[0].discontinuity=true}(on=r[i].segments).push.apply(on,t.segments);if(t.attributes.contentProtection){r[i].attributes.contentProtection=t.attributes.contentProtection}}else{r[i]=t}return r},{}));return e.map(function(i){i.discontinuityStarts=h2(i.segments,"discontinuity");return i})};var oF=function oF(t,e){if(e===void 0){e={}}if(!Object.keys(e).length){return t}for(var r in t){var on=t[r];if(!on.sidx){continue}var p3=on.sidx.uri+"-"+iE(on.sidx.byterange);var d=e[p3]&&e[p3].sidx;if(on.sidx&&d){oZ(on,d,on.sidx.resolvedUri)}}return t};var lp=function lp(r){var on;var d=r.attributes,e=r.segments,i=r.sidx;var t={attributes:(on={NAME:d.id,BANDWIDTH:d.bandwidth,CODECS:d.codecs},on["PROGRAM-ID"]=1,on),uri:"",endList:(d.type||"static")==="static",timeline:d.periodIndex,resolvedUri:"",targetDuration:d.duration,segments:e,mediaSequence:e.length?e[0].number:1};if(d.contentProtection){t.contentProtection=d.contentProtection}if(i){t.sidx=i}return t};var lV=function lV(r){var i;var d=r.attributes,e=r.segments;if(typeof e==="undefined"){e=[{uri:d.baseUrl,timeline:d.periodIndex,resolvedUri:d.baseUrl||"",duration:d.sourceDuration,number:0}];d.duration=d.sourceDuration}return{attributes:(i={NAME:d.id,BANDWIDTH:d.bandwidth},i["PROGRAM-ID"]=1,i),uri:"",endList:(d.type||"static")==="static",timeline:d.periodIndex,resolvedUri:d.baseUrl||"",targetDuration:d.duration,segments:e,mediaSequence:e.length?e[0].number:1}};var aq=function aq(t,r){if(r===void 0){r={}}var i;var e=t.reduce(function(on,p5){var p7=p5.attributes.role&&p5.attributes.role.value||"";var p6=p5.attributes.lang||"";var p3="main";if(p6){var p4=p7?" ("+p7+")":"";p3=""+p5.attributes.lang+p4}if(on[p3]&&on[p3].playlists[0].attributes.BANDWIDTH>p5.attributes.bandwidth){return on}on[p3]={language:p6,autoselect:true,"default":p7==="main",playlists:oF([lp(p5)],r),uri:""};if(typeof i==="undefined"&&p7==="main"){i=p5;i["default"]=true}return on},{});if(!i){var d=Object.keys(e)[0];e[d]["default"]=true}return e};var e5=function e5(e,d){if(d===void 0){d={}}return e.reduce(function(i,t){var r=t.attributes.lang||"text";if(i[r]){return i}i[r]={language:r,"default":false,autoselect:false,playlists:oF([lV(t)],d),uri:""};return i},{})};var cQ=function cQ(on){var i;var d=on.attributes,e=on.segments,r=on.sidx;var t={attributes:(i={NAME:d.id,AUDIO:"audio",SUBTITLES:"subs",RESOLUTION:{width:d.width,height:d.height},CODECS:d.codecs,BANDWIDTH:d.bandwidth},i["PROGRAM-ID"]=1,i),uri:"",endList:(d.type||"static")==="static",timeline:d.periodIndex,resolvedUri:"",targetDuration:d.duration,segments:e,mediaSequence:e.length?e[0].number:1};if(d.contentProtection){t.contentProtection=d.contentProtection}if(r){t.sidx=r}return t};var ds=function ds(p9,p5){var p7;if(p5===void 0){p5={}}if(!p9.length){return{}}var qc=p9[0].attributes,p4=qc.sourceDuration,qd=qc.type,qa=qd===void 0?"static":qd,t=qc.suggestedPresentationDelay,qb=qc.minimumUpdatePeriod,p6=qb===void 0?0:qb;var r=function r(qf){var qe=qf.attributes;return qe.mimeType==="video/mp4"||qe.contentType==="video"};var p3=function p3(qf){var qe=qf.attributes;return qe.mimeType==="audio/mp4"||qe.contentType==="audio"};var d=function d(qf){var qe=qf.attributes;return qe.mimeType==="text/vtt"||qe.contentType==="text"};var i=jN(p9.filter(r)).map(cQ);var on=jN(p9.filter(p3));var p8=p9.filter(d);var e={allowCache:true,discontinuityStarts:[],segments:[],endList:true,mediaGroups:(p7={AUDIO:{},VIDEO:{}},p7["CLOSED-CAPTIONS"]={},p7.SUBTITLES={},p7),uri:"",duration:p4,playlists:oF(i,p5),minimumUpdatePeriod:p6*1000};if(qa==="dynamic"){e.suggestedPresentationDelay=t}if(on.length){e.mediaGroups.AUDIO.audio=aq(on,p5)}if(p8.length){e.mediaGroups.SUBTITLES.subs=e5(p8,p5)}return e};var kT=function kT(p3,r,t){var p7=p3.NOW,qc=p3.clientOffset,p9=p3.availabilityStartTime,p5=p3.timescale,qb=p5===void 0?1:p5,p6=p3.start,e=p6===void 0?0:p6,i=p3.minimumUpdatePeriod,p4=i===void 0?0:i;var d=(p7+qc)/1000;var qa=p9+e;var on=d+p4;var p8=on-qa;return Math.ceil((p8*qb-r)/t)};var lG=function lG(p9,qk){var ql=p9.type,on=ql===void 0?"static":ql,qg=p9.minimumUpdatePeriod,r=qg===void 0?0:qg,qh=p9.media,p6=qh===void 0?"":qh,qj=p9.sourceDuration,p4=p9.timescale,qb=p4===void 0?1:p4,qd=p9.startNumber,qc=qd===void 0?1:qd,p5=p9.periodIndex;var qf=[];var p8=-1;for(var qe=0;qe<qk.length;qe++){var p3=qk[qe];var e=p3.d;var qa=p3.r||0;var qi=p3.t||0;if(p8<0){p8=qi}if(qi&&qi>p8){p8=qi}var p7=void 0;if(qa<0){var d=qe+1;if(d===qk.length){if(on==="dynamic"&&r>0&&p6.indexOf("$Number$")>0){p7=kT(p9,p8,e)}else{p7=(qj*qb-p8)/e}}else{p7=(qk[d].t-p8)/e}}else{p7=qa+1}var t=qc+qf.length+p7;var i=qc+qf.length;while(i<t){qf.push({number:i,duration:e/qb,time:p8,timeline:p5});p8+=e;i++}}return qf};var kD=/\$([A-z]*)(?:(%0)([0-9]+)d)?\$/g;var ge=function ge(d){return function(i,e,on,r){if(i==="$$"){return"$"}if(typeof d[e]==="undefined"){return i}var t=""+d[e];if(e==="RepresentationID"){return t}if(!on){r=1}else{r=parseInt(r,10)}if(t.length>=r){return t}return""+new Array(r-t.length+1).join("0")+t}};var nw=function nw(e,d){return e.replace(kD,ge(d))};var dJ=function dJ(e,d){if(!e.duration&&!d){return[{number:e.startNumber||1,duration:e.sourceDuration,time:0,timeline:e.periodIndex}]}if(e.duration){return pt(e)}return lG(e,d)};var cN=function cN(i,e){var p3={RepresentationID:i.id,Bandwidth:i.bandwidth||0};var d=i.initialization,t=d===void 0?{sourceURL:"",range:""}:d;var on=dN({baseUrl:i.baseUrl,source:nw(t.sourceURL,p3),range:t.range});var r=dJ(i,e);return r.map(function(p5){p3.Number=p5.number;p3.Time=p5.time;var p4=nw(i.media||"",p3);return{uri:p4,timeline:p5.timeline,duration:p5.duration,resolvedUri:n0(i.baseUrl||"",p4),map:on,number:p5.number}})};var gN=function gN(i,e){var on=i.baseUrl,d=i.initialization,r=d===void 0?{}:d;var p3=dN({baseUrl:on,source:r.sourceURL,range:r.range});var t=dN({baseUrl:on,source:e.media,range:e.mediaRange});t.map=p3;return t};var cc=function cc(r,e){var p4=r.duration,i=r.segmentUrls,d=i===void 0?[]:i;if(!p4&&!e||p4&&e){throw new Error(fC.SEGMENT_TIME_UNSPECIFIED)}var p3=d.map(function(p5){return gN(r,p5)});var on;if(p4){on=pt(r)}if(e){on=lG(r,e)}var t=on.map(function(p5,p6){if(p3[p6]){var p7=p3[p6];p7.timeline=p5.timeline;p7.duration=p5.duration;p7.number=p5.number;return p7}}).filter(function(p5){return p5});return t};var iY=function iY(t){var i=t.attributes,r=t.segmentInfo;var p7;var p3;if(r.template){p3=cN;p7=d7(i,r.template)}else{if(r.base){p3=dZ;p7=d7(i,r.base)}else{if(r.list){p3=cc;p7=d7(i,r.list)}}}var p4={attributes:i};if(!p3){return p4}var on=p3(p7,r.timeline);if(p7.duration){var d=p7,e=d.duration,p6=d.timescale,p5=p6===void 0?1:p6;p7.duration=e/p5}else{if(on.length){p7.duration=on.reduce(function(p8,p9){return Math.max(p8,Math.ceil(p9.duration))},0)}else{p7.duration=0}}p4.attributes=p7;p4.segments=on;if(r.base&&p7.indexRange){p4.sidx=on[0];p4.segments=[]}return p4};var bN=function bN(d){return d.map(iY)};var dD=function dD(e,d){return lg(e.childNodes).filter(function(r){var i=r.tagName;return i===d})};var ee=function ee(d){return d.textContent.trim()};var np=function np(p5){var e=365*24*60*60;var p7=30*24*60*60;var r=24*60*60;var p8=60*60;var qb=60;var p9=/P(?:(\d*)Y)?(?:(\d*)M)?(?:(\d*)D)?(?:T(?:(\d*)H)?(?:(\d*)M)?(?:([\d.]*)S)?)?/;var on=p9.exec(p5);if(!on){return 0}var qa=on.slice(1),p4=qa[0],p3=qa[1],p6=qa[2],t=qa[3],i=qa[4],d=qa[5];return parseFloat(p4||0)*e+parseFloat(p3||0)*p7+parseFloat(p6||0)*r+parseFloat(t||0)*p8+parseFloat(i||0)*qb+parseFloat(d||0)};var kP=function kP(e){var d=/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/;if(d.test(e)){e+="Z"}return Date.parse(e)};var m1={mediaPresentationDuration:function gA(d){return np(d)},availabilityStartTime:function oE(d){return kP(d)/1000},minimumUpdatePeriod:function oa(d){return np(d)},suggestedPresentationDelay:function cg(d){return np(d)},type:function jq(d){return d},timeShiftBufferDepth:function nB(d){return np(d)},start:function lc(d){return np(d)},width:function lj(d){return parseInt(d,10)},height:function nL(d){return parseInt(d,10)},bandwidth:function m5(d){return parseInt(d,10)},startNumber:function v(d){return parseInt(d,10)},timescale:function ak(d){return parseInt(d,10)},duration:function mQ(e){var d=parseInt(e,10);if(isNaN(d)){return np(e)}return d},d:function o5(d){return parseInt(d,10)},t:function oR(d){return parseInt(d,10)},r:function oT(d){return parseInt(d,10)},DEFAULT:function aw(d){return d}};var kC=function d4(d){if(!(d&&d.attributes)){return{}}return lg(d.attributes).reduce(function(i,r){var t=m1[r.name]||m1.DEFAULT;i[r.name]=t(r.value);return i},{})};var dL={"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime"};var ka=function ka(e,d){if(!d.length){return e}return hE(e.map(function(i){return d.map(function(r){return n0(i,ee(r))})}))};var mb=function mb(t){var on=dD(t,"SegmentTemplate")[0];var p4=dD(t,"SegmentList")[0];var p6=p4&&dD(p4,"SegmentURL").map(function(p8){return d7({tag:"SegmentURL"},kC(p8))});var i=dD(t,"SegmentBase")[0];var e=p4||on;var p3=e&&dD(e,"SegmentTimeline")[0];var d=p4||i||on;var p7=d&&dD(d,"Initialization")[0];var p5=on&&kC(on);if(p5&&p7){p5.initialization=p7&&kC(p7)}else{if(p5&&p5.initialization){p5.initialization={sourceURL:p5.initialization}}}var r={template:p5,timeline:p3&&dD(p3,"S").map(function(p8){return kC(p8)}),list:p4&&d7(kC(p4),{segmentUrls:p6,initialization:kC(p7)}),base:i&&d7(kC(i),{initialization:kC(p7)})};Object.keys(r).forEach(function(p8){if(!r[p8]){delete r[p8]}});return r};var jf=function jf(e,d,i){return function(p3){var p4=dD(p3,"BaseURL");var r=ka(d,p4);var t=d7(e,kC(p3));var on=mb(p3);return r.map(function(p5){return{segmentInfo:d7(i,on),attributes:d7(t,{baseUrl:p5})}})}};var fV=function fV(d){return d.reduce(function(p3,on){var i=kC(on);var r=dL[i.schemeIdUri];if(r){p3[r]={attributes:i};var t=dD(on,"cenc:pssh")[0];if(t){var e=ee(t);var p4=e&&hn(e);p3[r].pssh=p4}}return p3},{})};var pB=function pB(i,d,e){return function(p4){var r=kC(p4);var t=ka(d,dD(p4,"BaseURL"));var p3=dD(p4,"Role")[0];var p5={role:kC(p3)};var p8=d7(i,r,p5);var p7=fV(dD(p4,"ContentProtection"));if(Object.keys(p7).length){p8=d7(p8,{contentProtection:p7})}var on=mb(p4);var p9=dD(p4,"Representation");var p6=d7(e,on);return hE(p9.map(jf(p8,t,p6)))}};var d6=function d6(e,d){return function(p4,p3){var i=ka(d,dD(p4,"BaseURL"));var t=kC(p4);var on=parseInt(t.id,10);var p6=cb.isNaN(on)?p3:on;var p5=d7(e,{periodIndex:p6});var p7=dD(p4,"AdaptationSet");var r=mb(p4);return hE(p7.map(pB(p5,i,r)))}};var iz=function iz(i,p8){if(p8===void 0){p8={}}var p6=p8,on=p6.manifestUri,t=on===void 0?"":on,p3=p6.NOW,p4=p3===void 0?Date.now():p3,e=p6.clientOffset,p7=e===void 0?0:e;var p5=dD(i,"Period");if(!p5.length){throw new Error(fC.INVALID_NUMBER_OF_PERIOD)}var r=kC(i);var d=ka([t],dD(i,"BaseURL"));r.sourceDuration=r.mediaPresentationDuration||0;r.NOW=p4;r.clientOffset=p7;return hE(p5.map(d6(r,d)))};var i0=function i0(i){if(i===""){throw new Error(fC.DASH_EMPTY_MANIFEST)}var r=new h3();var d=r.parseFromString(i,"application/xml");var e=d&&d.documentElement.tagName==="MPD"?d.documentElement:null;if(!e||e&&e.getElementsByTagName("parsererror").length>0){throw new Error(fC.DASH_INVALID_XML)}return e};var fT=function fT(i){var e=dD(i,"UTCTiming")[0];if(!e){return null}var d=kC(e);switch(d.schemeIdUri){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":d.method="HEAD";break;case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":d.method="GET";break;case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":d.method="DIRECT";d.value=Date.parse(d.value);break;case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":default:throw new Error(fC.UNSUPPORTED_UTC_TIMING_SCHEME)}return d};var lz=function lz(e,d){if(d===void 0){d={}}return ds(bN(iz(i0(e),d)),d.sidxMapping)};var jO=function jO(d){return fT(i0(d))};var Q=function Q(d){return d>>>0};var ez=function ez(d){return("00"+d.toString(16)).slice(-2)};var gR={toUnsigned:Q,toHexString:ez};var jE,j0,d3=gR.toUnsigned,oG=function oG(d){return new Date(d*1000-2082844800000)},ph=function ph(d){return{isLeading:(d[0]&12)>>>2,dependsOn:d[0]&3,isDependedOn:(d[1]&192)>>>6,hasRedundancy:(d[1]&48)>>>4,paddingValue:(d[1]&14)>>>1,isNonSyncSample:d[1]&1,degradationPriority:d[2]<<8|d[3]}},dc=function dc(e){var d="";d+=String.fromCharCode(e[0]);d+=String.fromCharCode(e[1]);d+=String.fromCharCode(e[2]);d+=String.fromCharCode(e[3]);return d},hM=function hM(p4,p5){var on=[],t,r,p3,d,e;if(!p5.length){return null}for(t=0;t<p4.byteLength;){r=d3(p4[t]<<24|p4[t+1]<<16|p4[t+2]<<8|p4[t+3]);p3=dc(p4.subarray(t+4,t+8));d=r>1?t+r:p4.byteLength;if(p3===p5[0]){if(p5.length===1){on.push(p4.subarray(t+8,d))}else{e=hM(p4.subarray(t+8,d),p5.slice(1));if(e.length){on=on.concat(e)}}}t=d}return on},kZ=function kZ(e){var r=new DataView(e.buffer,e.byteOffset,e.byteLength),d=[],t,on;for(t=0;t+4<e.length;t+=on){on=r.getUint32(t);t+=4;if(on<=0){d.push("<span style='color:red;'>MALFORMED DATA</span>");continue}switch(e[t]&31){case 1:d.push("slice_layer_without_partitioning_rbsp");break;case 5:d.push("slice_layer_without_partitioning_rbsp_idr");break;case 6:d.push("sei_rbsp");break;case 7:d.push("seq_parameter_set_rbsp");break;case 8:d.push("pic_parameter_set_rbsp");break;case 9:d.push("access_unit_delimiter_rbsp");break;default:d.push("UNKNOWN NAL - "+e[t]&31);break}}return d},gk={avc1:function ig(e){var d=new DataView(e.buffer,e.byteOffset,e.byteLength);return{dataReferenceIndex:d.getUint16(6),width:d.getUint16(24),height:d.getUint16(26),horizresolution:d.getUint16(28)+d.getUint16(30)/16,vertresolution:d.getUint16(32)+d.getUint16(34)/16,frameCount:d.getUint16(40),depth:d.getUint16(74),config:jE(e.subarray(78,e.byteLength))}},avcC:function h5(p3){var e=new DataView(p3.buffer,p3.byteOffset,p3.byteLength),d={configurationVersion:p3[0],avcProfileIndication:p3[1],profileCompatibility:p3[2],avcLevelIndication:p3[3],lengthSizeMinusOne:p3[4]&3,sps:[],pps:[]},on=p3[5]&31,p5,t,p4,r;p4=6;for(r=0;r<on;r++){t=e.getUint16(p4);p4+=2;d.sps.push(new Uint8Array(p3.subarray(p4,p4+t)));p4+=t}p5=p3[p4];p4++;for(r=0;r<p5;r++){t=e.getUint16(p4);p4+=2;d.pps.push(new Uint8Array(p3.subarray(p4,p4+t)));p4+=t}return d},btrt:function L(e){var d=new DataView(e.buffer,e.byteOffset,e.byteLength);return{bufferSizeDB:d.getUint32(0),maxBitrate:d.getUint32(4),avgBitrate:d.getUint32(8)}},esds:function lf(d){return{version:d[0],flags:new Uint8Array(d.subarray(1,4)),esId:d[6]<<8|d[7],streamPriority:d[8]&31,decoderConfig:{objectProfileIndication:d[11],streamType:d[12]>>>2&63,bufferSize:d[13]<<16|d[14]<<8|d[15],maxBitrate:d[16]<<24|d[17]<<16|d[18]<<8|d[19],avgBitrate:d[20]<<24|d[21]<<16|d[22]<<8|d[23],decoderConfigDescriptor:{tag:d[24],length:d[25],audioObjectType:d[26]>>>3&31,samplingFrequencyIndex:(d[26]&7)<<1|d[27]>>>7&1,channelConfiguration:d[27]>>>3&15}}}},ftyp:function dP(t){var e=new DataView(t.buffer,t.byteOffset,t.byteLength),d={majorBrand:dc(t.subarray(0,4)),minorVersion:e.getUint32(4),compatibleBrands:[]},r=8;while(r<t.byteLength){d.compatibleBrands.push(dc(t.subarray(r,r+4)));r+=4}return d},dinf:function cI(d){return{boxes:jE(d)}},dref:function lA(d){return{version:d[0],flags:new Uint8Array(d.subarray(1,4)),dataReferences:jE(d.subarray(8))}},hdlr:function ll(t){var e=new DataView(t.buffer,t.byteOffset,t.byteLength),d={version:e.getUint8(0),flags:new Uint8Array(t.subarray(1,4)),handlerType:dc(t.subarray(8,12)),name:""},r=8;for(r=24;r<t.byteLength;r++){if(t[r]===0){r++;break}d.name+=String.fromCharCode(t[r])}d.name=decodeURIComponent(escape(d.name));return d},mdat:function oq(d){return{byteLength:d.byteLength,nals:kZ(d)}},mdhd:function mq(t){var e=new DataView(t.buffer,t.byteOffset,t.byteLength),r=4,on,d={version:e.getUint8(0),flags:new Uint8Array(t.subarray(1,4)),language:""};if(d.version===1){r+=4;d.creationTime=oG(e.getUint32(r));r+=8;d.modificationTime=oG(e.getUint32(r));r+=4;d.timescale=e.getUint32(r);r+=8;d.duration=e.getUint32(r)}else{d.creationTime=oG(e.getUint32(r));r+=4;d.modificationTime=oG(e.getUint32(r));r+=4;d.timescale=e.getUint32(r);r+=4;d.duration=e.getUint32(r)}r+=4;on=e.getUint16(r);d.language+=String.fromCharCode((on>>10)+96);d.language+=String.fromCharCode(((on&992)>>5)+96);d.language+=String.fromCharCode((on&31)+96);return d},mdia:function lW(d){return{boxes:jE(d)}},mfhd:function h7(d){return{version:d[0],flags:new Uint8Array(d.subarray(1,4)),sequenceNumber:d[4]<<24|d[5]<<16|d[6]<<8|d[7]}},minf:function h4(d){return{boxes:jE(d)}},mp4a:function eH(i){var e=new DataView(i.buffer,i.byteOffset,i.byteLength),d={dataReferenceIndex:e.getUint16(6),channelcount:e.getUint16(16),samplesize:e.getUint16(18),samplerate:e.getUint16(24)+e.getUint16(26)/65536};if(i.byteLength>28){d.streamDescriptor=jE(i.subarray(28))[0]}return d},moof:function lI(d){return{boxes:jE(d)}},moov:function lv(d){return{boxes:jE(d)}},mvex:function iI(d){return{boxes:jE(d)}},mvhd:function hQ(t){var e=new DataView(t.buffer,t.byteOffset,t.byteLength),r=4,d={version:e.getUint8(0),flags:new Uint8Array(t.subarray(1,4))};if(d.version===1){r+=4;d.creationTime=oG(e.getUint32(r));r+=8;d.modificationTime=oG(e.getUint32(r));r+=4;d.timescale=e.getUint32(r);r+=8;d.duration=e.getUint32(r)}else{d.creationTime=oG(e.getUint32(r));r+=4;d.modificationTime=oG(e.getUint32(r));r+=4;d.timescale=e.getUint32(r);r+=4;d.duration=e.getUint32(r)}r+=4;d.rate=e.getUint16(r)+e.getUint16(r+2)/16;r+=4;d.volume=e.getUint8(r)+e.getUint8(r+1)/8;r+=2;r+=2;r+=2*4;d.matrix=new Uint32Array(t.subarray(r,r+9*4));r+=9*4;r+=6*4;d.nextTrackId=e.getUint32(r);return d},pdin:function ia(e){var d=new DataView(e.buffer,e.byteOffset,e.byteLength);return{version:d.getUint8(0),flags:new Uint8Array(e.subarray(1,4)),rate:d.getUint32(4),initialDelay:d.getUint32(8)}},sdtp:function aI(r){var d={version:r[0],flags:new Uint8Array(r.subarray(1,4)),samples:[]},e;for(e=4;e<r.byteLength;e++){d.samples.push({dependsOn:(r[e]&48)>>4,isDependedOn:(r[e]&12)>>2,hasRedundancy:r[e]&3})}return d},sidx:function dY(on){var e=new DataView(on.buffer,on.byteOffset,on.byteLength),d={version:on[0],flags:new Uint8Array(on.subarray(1,4)),references:[],referenceId:e.getUint32(4),timescale:e.getUint32(8),earliestPresentationTime:e.getUint32(12),firstOffset:e.getUint32(16)},t=e.getUint16(22),r;for(r=24;t;r+=12,t--){d.references.push({referenceType:(on[r]&128)>>>7,referencedSize:e.getUint32(r)&2147483647,subsegmentDuration:e.getUint32(r+4),startsWithSap:!!(on[r+8]&128),sapType:(on[r+8]&112)>>>4,sapDeltaTime:e.getUint32(r+8)&268435455})}return d},smhd:function kR(d){return{version:d[0],flags:new Uint8Array(d.subarray(1,4)),balance:d[4]+d[5]/256}},stbl:function gp(d){return{boxes:jE(d)}},stco:function f3(on){var e=new DataView(on.buffer,on.byteOffset,on.byteLength),d={version:on[0],flags:new Uint8Array(on.subarray(1,4)),chunkOffsets:[]},t=e.getUint32(4),r;for(r=8;t;r+=4,t--){d.chunkOffsets.push(e.getUint32(r))}return d},stsc:function aZ(on){var e=new DataView(on.buffer,on.byteOffset,on.byteLength),t=e.getUint32(4),d={version:on[0],flags:new Uint8Array(on.subarray(1,4)),sampleToChunks:[]},r;for(r=8;t;r+=12,t--){d.sampleToChunks.push({firstChunk:e.getUint32(r),samplesPerChunk:e.getUint32(r+4),sampleDescriptionIndex:e.getUint32(r+8)})}return d},stsd:function aX(d){return{version:d[0],flags:new Uint8Array(d.subarray(1,4)),sampleDescriptions:jE(d.subarray(8))}},stsz:function ay(t){var e=new DataView(t.buffer,t.byteOffset,t.byteLength),d={version:t[0],flags:new Uint8Array(t.subarray(1,4)),sampleSize:e.getUint32(4),entries:[]},r;for(r=12;r<t.byteLength;r+=4){d.entries.push(e.getUint32(r))}return d},stts:function ah(on){var e=new DataView(on.buffer,on.byteOffset,on.byteLength),d={version:on[0],flags:new Uint8Array(on.subarray(1,4)),timeToSamples:[]},t=e.getUint32(4),r;for(r=8;t;r+=8,t--){d.timeToSamples.push({sampleCount:e.getUint32(r),sampleDelta:e.getUint32(r+4)})}return d},styp:function pv(d){return gk.ftyp(d)},tfdt:function ly(e){var d={version:e[0],flags:new Uint8Array(e.subarray(1,4)),baseMediaDecodeTime:d3(e[4]<<24|e[5]<<16|e[6]<<8|e[7])};if(d.version===1){d.baseMediaDecodeTime*=Math.pow(2,32);d.baseMediaDecodeTime+=d3(e[8]<<24|e[9]<<16|e[10]<<8|e[11])}return d},tfhd:function kk(t){var p6=new DataView(t.buffer,t.byteOffset,t.byteLength),p8={version:t[0],flags:new Uint8Array(t.subarray(1,4)),trackId:p6.getUint32(4)},e=p8.flags[2]&1,p4=p8.flags[2]&2,d=p8.flags[2]&8,p5=p8.flags[2]&16,p3=p8.flags[2]&32,on=p8.flags[0]&65536,p7=p8.flags[0]&131072,r;r=8;if(e){r+=4;p8.baseDataOffset=p6.getUint32(12);r+=4}if(p4){p8.sampleDescriptionIndex=p6.getUint32(r);r+=4}if(d){p8.defaultSampleDuration=p6.getUint32(r);r+=4}if(p5){p8.defaultSampleSize=p6.getUint32(r);r+=4}if(p3){p8.defaultSampleFlags=p6.getUint32(r)}if(on){p8.durationIsEmpty=true}if(!e&&p7){p8.baseDataOffsetIsMoof=true}return p8},tkhd:function il(t){var e=new DataView(t.buffer,t.byteOffset,t.byteLength),r=4,d={version:e.getUint8(0),flags:new Uint8Array(t.subarray(1,4))};if(d.version===1){r+=4;d.creationTime=oG(e.getUint32(r));r+=8;d.modificationTime=oG(e.getUint32(r));r+=4;d.trackId=e.getUint32(r);r+=4;r+=8;d.duration=e.getUint32(r)}else{d.creationTime=oG(e.getUint32(r));r+=4;d.modificationTime=oG(e.getUint32(r));r+=4;d.trackId=e.getUint32(r);r+=4;r+=4;d.duration=e.getUint32(r)}r+=4;r+=2*4;d.layer=e.getUint16(r);r+=2;d.alternateGroup=e.getUint16(r);r+=2;d.volume=e.getUint8(r)+e.getUint8(r+1)/8;r+=2;r+=2;d.matrix=new Uint32Array(t.subarray(r,r+9*4));r+=9*4;d.width=e.getUint16(r)+e.getUint16(r+2)/16;r+=4;d.height=e.getUint16(r)+e.getUint16(r+2)/16;return d},traf:function es(d){return{boxes:jE(d)}},trak:function eo(d){return{boxes:jE(d)}},trex:function cW(e){var d=new DataView(e.buffer,e.byteOffset,e.byteLength);return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),trackId:d.getUint32(4),defaultSampleDescriptionIndex:d.getUint32(8),defaultSampleDuration:d.getUint32(12),defaultSampleSize:d.getUint32(16),sampleDependsOn:e[20]&3,sampleIsDependedOn:(e[21]&192)>>6,sampleHasRedundancy:(e[21]&48)>>4,samplePaddingValue:(e[21]&14)>>1,sampleIsDifferenceSample:!!(e[21]&1),sampleDegradationPriority:d.getUint16(22)}},trun:function n4(e){var p8={version:e[0],flags:new Uint8Array(e.subarray(1,4)),samples:[]},on=new DataView(e.buffer,e.byteOffset,e.byteLength),p7=p8.flags[2]&1,i=p8.flags[2]&4,p5=p8.flags[1]&1,t=p8.flags[1]&2,r=p8.flags[1]&4,p4=p8.flags[1]&8,p6=on.getUint32(4),d=8,p3;if(p7){p8.dataOffset=on.getInt32(d);d+=4}if(i&&p6){p3={flags:ph(e.subarray(d,d+4))};d+=4;if(p5){p3.duration=on.getUint32(d);d+=4}if(t){p3.size=on.getUint32(d);d+=4}if(p4){p3.compositionTimeOffset=on.getUint32(d);d+=4}p8.samples.push(p3);p6--}while(p6--){p3={};if(p5){p3.duration=on.getUint32(d);d+=4}if(t){p3.size=on.getUint32(d);d+=4}if(r){p3.flags=ph(e.subarray(d,d+4));d+=4}if(p4){p3.compositionTimeOffset=on.getUint32(d);d+=4}p8.samples.push(p3)}return p8},"url ":function fE(d){return{version:d[0],flags:new Uint8Array(d.subarray(1,4))}},vmhd:function he(e){var d=new DataView(e.buffer,e.byteOffset,e.byteLength);return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),graphicsmode:d.getUint16(4),opcolor:new Uint16Array([d.getUint16(6),d.getUint16(8),d.getUint16(10)])}}};jE=function jE(e){var r=0,p8=[],p4,p7,p3,d,t;var p6=new ArrayBuffer(e.length);var p5=new Uint8Array(p6);for(var on=0;on<e.length;++on){p5[on]=e[on]}p4=new DataView(p6);while(r<e.byteLength){p7=p4.getUint32(r);p3=dc(e.subarray(r+4,r+8));d=p7>1?r+p7:e.byteLength;t=(gk[p3]||function(i){return{data:i}})(e.subarray(r+8,d));t.size=p7;t.type=p3;p8.push(t);r=d}return p8};j0=function fj(e,i){var d;i=i||0;d=new Array(i*2+1).join(" ");return e.map(function(t,r){return d+t.type+"\n"+Object.keys(t).filter(function(on){return on!=="type"&&on!=="boxes"}).map(function(p3){var p5=d+"  "+p3+": ",p4=t[p3];if(p4 instanceof Uint8Array||p4 instanceof Uint32Array){var on=Array.prototype.slice.call(new Uint8Array(p4.buffer,p4.byteOffset,p4.byteLength)).map(function(p6){return" "+("00"+p6.toString(16)).slice(-2)}).join("").match(/.{1,24}/g);if(!on){return p5+"<>"}if(on.length===1){return p5+"<"+on.join("").slice(1)+">"}return p5+"<\n"+on.map(function(p6){return d+"  "+p6}).join("\n")+"\n"+d+"  >"}return p5+JSON.stringify(p4,null,2).split("\n").map(function(p6,p7){if(p7===0){return p6}return d+"  "+p6}).join("\n")}).join("\n")+(t.boxes?"\n"+j0(t.boxes,i+1):"")}).join("\n")};var ec={inspect:jE,textify:j0,parseType:dc,findBox:hM,parseTraf:gk.traf,parseTfdt:gk.tfdt,parseHdlr:gk.hdlr,parseTfhd:gk.tfhd,parseTrun:gk.trun,parseSidx:gk.sidx};var d2=gR.toUnsigned;var nN=gR.toHexString;var ak,iQ,W,f4,ji;ak=function ak(i){var d={},e=ec.findBox(i,["moov","trak"]);return e.reduce(function(r,p5){var on,t,p3,p6,p4;on=ec.findBox(p5,["tkhd"])[0];if(!on){return null}t=on[0];p3=t===0?12:20;p6=d2(on[p3]<<24|on[p3+1]<<16|on[p3+2]<<8|on[p3+3]);p4=ec.findBox(p5,["mdia","mdhd"])[0];if(!p4){return null}t=p4[0];p3=t===0?12:20;r[p6]=d2(p4[p3]<<24|p4[p3+1]<<16|p4[p3+2]<<8|p4[p3+3]);return r},d)};iQ=function iQ(e,i){var t,r,d;t=ec.findBox(i,["moof","traf"]);r=[].concat.apply([],t.map(function(on){return ec.findBox(on,["tfhd"]).map(function(p3){var p6,p4,p5;p6=d2(p3[4]<<24|p3[5]<<16|p3[6]<<8|p3[7]);p4=e[p6]||90000;p5=ec.findBox(on,["tfdt"]).map(function(p9){var p8,p7;p8=p9[0];p7=d2(p9[4]<<24|p9[5]<<16|p9[6]<<8|p9[7]);if(p8===1){p7*=Math.pow(2,32);p7+=d2(p9[8]<<24|p9[9]<<16|p9[10]<<8|p9[11])}return p7})[0];p5=p5||Infinity;return p5/p4})}));d=Math.min.apply(null,r);return isFinite(d)?d:0};W=function W(p6,t){var p5=ec.findBox(t,["moof","traf"]);var d=0;var p4=0;var e;if(p5&&p5.length){var p3=ec.parseTraf(p5[0]);for(var r=0;r<p3.boxes.length;r++){if(p3.boxes[r].type==="tfhd"){e=p3.boxes[r].trackId}else{if(p3.boxes[r].type==="tfdt"){d=p3.boxes[r].baseMediaDecodeTime}else{if(p3.boxes[r].type==="trun"&&p3.boxes[r].samples.length){p4=p3.boxes[r].samples[0].compositionTimeOffset||0}}}}}var on=p6[e]||90000;return(d+p4)/on};f4=function f4(i){var e=ec.findBox(i,["moov","trak"]);var d=[];e.forEach(function(t){var r=ec.findBox(t,["mdia","hdlr"]);var on=ec.findBox(t,["tkhd"]);r.forEach(function(p8,p6){var p7=ec.parseType(p8.subarray(8,12));var p5=on[p6];var p4;var p3;var p9;if(p7==="vide"){p4=new DataView(p5.buffer,p5.byteOffset,p5.byteLength);p3=p4.getUint8(0);p9=p3===0?p4.getUint32(12):p4.getUint32(20);d.push(p9)}})});return d};ji=function ji(i){var e=ec.findBox(i,["moov","trak"]);var d=[];e.forEach(function(t){var on={};var p3=ec.findBox(t,["tkhd"])[0];var p8,p5;if(p3){p8=new DataView(p3.buffer,p3.byteOffset,p3.byteLength);p5=p8.getUint8(0);on.id=p5===0?p8.getUint32(12):p8.getUint32(20)}var r=ec.findBox(t,["mdia","hdlr"])[0];if(r){var p7=ec.parseType(r.subarray(8,12));if(p7==="vide"){on.type="video"}else{if(p7==="soun"){on.type="audio"}else{on.type=p7}}}var qb=ec.findBox(t,["mdia","minf","stbl","stsd"])[0];if(qb){var qc=qb.subarray(8);on.codec=ec.parseType(qc.subarray(4,8));var qd=ec.findBox(qc,[on.codec])[0];var qa,p6;if(qd){if(/^[a-z]vc[1-9]$/i.test(on.codec)){qa=qd.subarray(78);p6=ec.parseType(qa.subarray(4,8));if(p6==="avcC"&&qa.length>11){on.codec+=".";on.codec+=nN(qa[9]);on.codec+=nN(qa[10]);on.codec+=nN(qa[11])}else{on.codec="avc1.4d400d"}}else{if(/^mp4[a,v]$/i.test(on.codec)){qa=qd.subarray(28);p6=ec.parseType(qa.subarray(4,8));if(p6==="esds"&&qa.length>20&&qa[19]!==0){on.codec+="."+nN(qa[19]);on.codec+="."+nN(qa[20]>>>2&63).replace(/^0/,"")}else{on.codec="mp4a.40.2"}}}}}var p9=ec.findBox(t,["mdia","mdhd"])[0];if(p9&&p3){var p4=p5===0?12:20;on.timescale=d2(p9[p4]<<24|p9[p4+1]<<16|p9[p4+2]<<8|p9[p4+3])}d.push(on)});return d};var G={findBox:ec.findBox,parseType:ec.parseType,timescale:ak,startTime:iQ,compositionStartTime:W,videoTrackIds:f4,tracks:ji};var o8=4,hq=128;var gL=function gL(e){var t=0,d={payloadType:-1,payloadSize:0},on=0,r=0;while(t<e.byteLength){if(e[t]===hq){break}while(e[t]===255){on+=255;t++}on+=e[t++];while(e[t]===255){r+=255;t++}r+=e[t++];if(!d.payload&&on===o8){d.payloadType=on;d.payloadSize=r;d.payload=e.subarray(t,t+r);break}t+=r;on=0;r=0}return d};var dG=function dG(d){if(d.payload[0]!==181){return null}if((d.payload[1]<<8|d.payload[2])!==49){return null}if(String.fromCharCode(d.payload[3],d.payload[4],d.payload[5],d.payload[6])!=="GA94"){return null}if(d.payload[7]!==3){return null}return d.payload.subarray(8,d.payload.length-1)};var o4=function o4(p4,d){var r=[],e,t,p3,on;if(!(d[0]&64)){return r}t=d[0]&31;for(e=0;e<t;e++){p3=e*3;on={type:d[p3+2]&3,pts:p4};if(d[p3+2]&4){on.ccData=d[p3+3]<<8|d[p3+4];r.push(on)}}return r};var ls=function ls(p4){var on=p4.byteLength,e=[],r=1,p3,t;while(r<on-2){if(p4[r]===0&&p4[r+1]===0&&p4[r+2]===3){e.push(r+2);r+=2}else{r++}}if(e.length===0){return p4}p3=on-e.length;t=new Uint8Array(p3);var d=0;for(r=0;r<p3;d++,r++){if(d===e[0]){d++;e.shift()}t[r]=p4[d]}return t};var aj={parseSei:gL,parseUserData:dG,parseCaptionPackets:o4,discardEmulationPreventionBytes:ls,USER_DATA_REGISTERED_ITU_T_T35:o8};var jK=function bA(){this.init=function(){var d={};this.on=function(e,i){if(!d[e]){d[e]=[]}d[e]=d[e].concat(i)};this.off=function(i,r){var e;if(!d[i]){return false}e=d[i].indexOf(r);d[i]=d[i].slice();d[i].splice(e,1);return e>-1};this.trigger=function(t){var p3,r,on,e;p3=d[t];if(!p3){return}if(arguments.length===2){on=p3.length;for(r=0;r<on;++r){p3[r].call(this,arguments[1])}}else{e=[];r=arguments.length;for(r=1;r<arguments.length;++r){e.push(arguments[r])}on=p3.length;for(r=0;r<on;++r){p3[r].apply(this,e)}}};this.dispose=function(){d={}}}};jK.prototype.pipe=function(d){this.on("data",function(e){d.push(e)});this.on("done",function(e){d.flush(e)});this.on("partialdone",function(e){d.partialFlush(e)});this.on("endedtimeline",function(e){d.endTimeline(e)});this.on("reset",function(e){d.reset(e)});return d};jK.prototype.push=function(d){this.trigger("data",d)};jK.prototype.flush=function(d){this.trigger("done",d)};jK.prototype.partialFlush=function(d){this.trigger("partialdone",d)};jK.prototype.endTimeline=function(d){this.trigger("endedtimeline",d)};jK.prototype.reset=function(d){this.trigger("reset",d)};var oN=jK;var A=function A(){A.prototype.init.call(this);this.captionPackets_=[];this.ccStreams_=[new lP(0,0),new lP(0,1),new lP(1,0),new lP(1,1)];this.reset();this.ccStreams_.forEach(function(d){d.on("data",this.trigger.bind(this,"data"));d.on("partialdone",this.trigger.bind(this,"partialdone"));d.on("done",this.trigger.bind(this,"done"))},this)};A.prototype=new oN();A.prototype.push=function(i){var r,d,e;if(i.nalUnitType!=="sei_rbsp"){return}r=aj.parseSei(i.escapedRBSP);if(r.payloadType!==aj.USER_DATA_REGISTERED_ITU_T_T35){return}d=aj.parseUserData(r);if(!d){return}if(i.dts<this.latestDts_){this.ignoreNextEqualDts_=true;return}else{if(i.dts===this.latestDts_&&this.ignoreNextEqualDts_){this.numSameDts_--;if(!this.numSameDts_){this.ignoreNextEqualDts_=false}return}}e=aj.parseCaptionPackets(i.pts,d);this.captionPackets_=this.captionPackets_.concat(e);if(this.latestDts_!==i.dts){this.numSameDts_=0}this.numSameDts_++;this.latestDts_=i.dts};A.prototype.flushCCStreams=function(d){this.ccStreams_.forEach(function(e){return d==="flush"?e.flush():e.partialFlush()},this)};A.prototype.flushStream=function(d){if(!this.captionPackets_.length){this.flushCCStreams(d);return}this.captionPackets_.forEach(function(i,e){i.presortIndex=e});this.captionPackets_.sort(function(i,e){if(i.pts===e.pts){return i.presortIndex-e.presortIndex}return i.pts-e.pts});this.captionPackets_.forEach(function(e){if(e.type<2){this.dispatchCea608Packet(e)}},this);this.captionPackets_.length=0;this.flushCCStreams(d)};A.prototype.flush=function(){return this.flushStream("flush")};A.prototype.partialFlush=function(){return this.flushStream("partialFlush")};A.prototype.reset=function(){this.latestDts_=null;this.ignoreNextEqualDts_=false;this.numSameDts_=0;this.activeCea608Channel_=[null,null];this.ccStreams_.forEach(function(d){d.reset()})};A.prototype.dispatchCea608Packet=function(d){if(this.setsTextOrXDSActive(d)){this.activeCea608Channel_[d.type]=null}else{if(this.setsChannel1Active(d)){this.activeCea608Channel_[d.type]=0}else{if(this.setsChannel2Active(d)){this.activeCea608Channel_[d.type]=1}}}if(this.activeCea608Channel_[d.type]===null){return}this.ccStreams_[(d.type<<1)+this.activeCea608Channel_[d.type]].push(d)};A.prototype.setsChannel1Active=function(d){return(d.ccData&30720)===4096};A.prototype.setsChannel2Active=function(d){return(d.ccData&30720)===6144};A.prototype.setsTextOrXDSActive=function(d){return(d.ccData&28928)===256||(d.ccData&30974)===4138||(d.ccData&30974)===6186};var ie={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496};var c0=function c0(d){if(d===null){return""}d=ie[d]||d;return String.fromCharCode(d)};var dq=14;var eh=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152];var g5=function g5(){var d=[],e=dq+1;while(e--){d.push("")}return d};var lP=function lP(e,d){lP.prototype.init.call(this);this.field_=e||0;this.dataChannel_=d||0;this.name_="CC"+((this.field_<<1|this.dataChannel_)+1);this.setConstants();this.reset();this.push=function(p3){var t,on,r,i,p5;t=p3.ccData&32639;if(t===this.lastControlCode_){this.lastControlCode_=null;return}if((t&61440)===4096){this.lastControlCode_=t}else{if(t!==this.PADDING_){this.lastControlCode_=null}}r=t>>>8;i=t&255;if(t===this.PADDING_){return}else{if(t===this.RESUME_CAPTION_LOADING_){this.mode_="popOn"}else{if(t===this.END_OF_CAPTION_){this.mode_="popOn";this.clearFormatting(p3.pts);this.flushDisplayed(p3.pts);on=this.displayed_;this.displayed_=this.nonDisplayed_;this.nonDisplayed_=on;this.startPts_=p3.pts}else{if(t===this.ROLL_UP_2_ROWS_){this.rollUpRows_=2;this.setRollUp(p3.pts)}else{if(t===this.ROLL_UP_3_ROWS_){this.rollUpRows_=3;this.setRollUp(p3.pts)}else{if(t===this.ROLL_UP_4_ROWS_){this.rollUpRows_=4;this.setRollUp(p3.pts)}else{if(t===this.CARRIAGE_RETURN_){this.clearFormatting(p3.pts);this.flushDisplayed(p3.pts);this.shiftRowsUp_();this.startPts_=p3.pts}else{if(t===this.BACKSPACE_){if(this.mode_==="popOn"){this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1)}else{this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1)}}else{if(t===this.ERASE_DISPLAYED_MEMORY_){this.flushDisplayed(p3.pts);this.displayed_=g5()}else{if(t===this.ERASE_NON_DISPLAYED_MEMORY_){this.nonDisplayed_=g5()}else{if(t===this.RESUME_DIRECT_CAPTIONING_){if(this.mode_!=="paintOn"){this.flushDisplayed(p3.pts);this.displayed_=g5()}this.mode_="paintOn";this.startPts_=p3.pts}else{if(this.isSpecialCharacter(r,i)){r=(r&3)<<8;p5=c0(r|i);this[this.mode_](p3.pts,p5);this.column_++}else{if(this.isExtCharacter(r,i)){if(this.mode_==="popOn"){this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1)}else{this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1)}r=(r&3)<<8;p5=c0(r|i);this[this.mode_](p3.pts,p5);this.column_++}else{if(this.isMidRowCode(r,i)){this.clearFormatting(p3.pts);this[this.mode_](p3.pts," ");this.column_++;if((i&14)===14){this.addFormatting(p3.pts,["i"])}if((i&1)===1){this.addFormatting(p3.pts,["u"])}}else{if(this.isOffsetControlCode(r,i)){this.column_+=i&3}else{if(this.isPAC(r,i)){var p4=eh.indexOf(t&7968);if(this.mode_==="rollUp"){if(p4-this.rollUpRows_+1<0){p4=this.rollUpRows_-1}this.setRollUp(p3.pts,p4)}if(p4!==this.row_){this.clearFormatting(p3.pts);this.row_=p4}if(i&1&&this.formatting_.indexOf("u")===-1){this.addFormatting(p3.pts,["u"])}if((t&16)===16){this.column_=((t&14)>>1)*4}if(this.isColorPAC(i)){if((i&14)===14){this.addFormatting(p3.pts,["i"])}}}else{if(this.isNormalChar(r)){if(i===0){i=null}p5=c0(r);p5+=c0(i);this[this.mode_](p3.pts,p5);this.column_+=p5.length}}}}}}}}}}}}}}}}}}};lP.prototype=new oN();lP.prototype.flushDisplayed=function(e){var d=this.displayed_.map(function(r){try{return r.trim()}catch(i){console.error("Skipping malformed caption.");return""}}).join("\n").replace(/^\n+|\n+$/g,"");if(d.length){this.trigger("data",{startPts:this.startPts_,endPts:e,text:d,stream:this.name_})}};lP.prototype.reset=function(){this.mode_="popOn";this.topRow_=0;this.startPts_=0;this.displayed_=g5();this.nonDisplayed_=g5();this.lastControlCode_=null;this.column_=0;this.row_=dq;this.rollUpRows_=2;this.formatting_=[]};lP.prototype.setConstants=function(){if(this.dataChannel_===0){this.BASE_=16;this.EXT_=17;this.CONTROL_=(20|this.field_)<<8;this.OFFSET_=23}else{if(this.dataChannel_===1){this.BASE_=24;this.EXT_=25;this.CONTROL_=(28|this.field_)<<8;this.OFFSET_=31}}this.PADDING_=0;this.RESUME_CAPTION_LOADING_=this.CONTROL_|32;this.END_OF_CAPTION_=this.CONTROL_|47;this.ROLL_UP_2_ROWS_=this.CONTROL_|37;this.ROLL_UP_3_ROWS_=this.CONTROL_|38;this.ROLL_UP_4_ROWS_=this.CONTROL_|39;this.CARRIAGE_RETURN_=this.CONTROL_|45;this.RESUME_DIRECT_CAPTIONING_=this.CONTROL_|41;this.BACKSPACE_=this.CONTROL_|33;this.ERASE_DISPLAYED_MEMORY_=this.CONTROL_|44;this.ERASE_NON_DISPLAYED_MEMORY_=this.CONTROL_|46};lP.prototype.isSpecialCharacter=function(e,d){return e===this.EXT_&&d>=48&&d<=63};lP.prototype.isExtCharacter=function(e,d){return(e===this.EXT_+1||e===this.EXT_+2)&&d>=32&&d<=63};lP.prototype.isMidRowCode=function(e,d){return e===this.EXT_&&d>=32&&d<=47};lP.prototype.isOffsetControlCode=function(e,d){return e===this.OFFSET_&&d>=33&&d<=35};lP.prototype.isPAC=function(e,d){return e>=this.BASE_&&e<this.BASE_+8&&d>=64&&d<=127};lP.prototype.isColorPAC=function(d){return d>=64&&d<=79||d>=96&&d<=127};lP.prototype.isNormalChar=function(d){return d>=32&&d<=127};lP.prototype.setRollUp=function(r,e){if(this.mode_!=="rollUp"){this.row_=dq;this.mode_="rollUp";this.flushDisplayed(r);this.nonDisplayed_=g5();this.displayed_=g5()}if(e!==undefined&&e!==this.row_){for(var d=0;d<this.rollUpRows_;d++){this.displayed_[e-d]=this.displayed_[this.row_-d];this.displayed_[this.row_-d]=""}}if(e===undefined){e=this.row_}this.topRow_=e-this.rollUpRows_+1};lP.prototype.addFormatting=function(i,d){this.formatting_=this.formatting_.concat(d);var e=d.reduce(function(t,r){return t+"<"+r+">"},"");this[this.mode_](i,e)};lP.prototype.clearFormatting=function(e){if(!this.formatting_.length){return}var d=this.formatting_.reverse().reduce(function(r,i){return r+"</"+i+">"},"");this.formatting_=[];this[this.mode_](e,d)};lP.prototype.popOn=function(i,e){var d=this.nonDisplayed_[this.row_];d+=e;this.nonDisplayed_[this.row_]=d};lP.prototype.rollUp=function(i,e){var d=this.displayed_[this.row_];d+=e;this.displayed_[this.row_]=d};lP.prototype.shiftRowsUp_=function(){var d;for(d=0;d<this.topRow_;d++){this.displayed_[d]=""}for(d=this.row_+1;d<dq+1;d++){this.displayed_[d]=""}for(d=this.topRow_;d<this.row_;d++){this.displayed_[d]=this.displayed_[d+1]}this.displayed_[this.row_]=""};lP.prototype.paintOn=function(i,e){var d=this.displayed_[this.row_];d+=e;this.displayed_[this.row_]=d};var cO={CaptionStream:A,Cea608Stream:lP};var am=aj.discardEmulationPreventionBytes;var cq=cO.CaptionStream;var fD=function fD(on,d){var r=on;for(var e=0;e<d.length;e++){var t=d[e];if(r<t.size){return t}r-=t.size}return null};var na=function na(p5,p6,d){var r=new DataView(p5.buffer,p5.byteOffset,p5.byteLength),p8=[],p4,on,e,p7;for(on=0;on+4<p5.length;on+=e){e=r.getUint32(on);on+=4;if(e<=0){continue}switch(p5[on]&31){case 6:var t=p5.subarray(on+1,on+1+e);var p3=fD(on,p6);p4={nalUnitType:"sei_rbsp",size:e,data:t,escapedRBSP:am(t),trackId:d};if(p3){p4.pts=p3.pts;p4.dts=p3.dts;p7=p3}else{p4.pts=p7.pts;p4.dts=p7.dts}p8.push(p4);break}}return p8};var pV=function pV(i,r,e){var t=r;var p3=e.defaultSampleDuration||0;var d=e.defaultSampleSize||0;var on=e.trackId;var p4=[];i.forEach(function(p5){var p7=ec.parseTrun(p5);var p6=p7.samples;p6.forEach(function(p8){if(p8.duration===undefined){p8.duration=p3}if(p8.size===undefined){p8.size=d}p8.trackId=on;p8.dts=t;if(p8.compositionTimeOffset===undefined){p8.compositionTimeOffset=0}p8.pts=t+p8.compositionTimeOffset;t+=p8.duration});p4=p4.concat(p6)});return p4};var gI=function gI(e,i){var on=G.findBox(e,["moof","traf"]);var d=G.findBox(e,["mdat"]);var t={};var r=[];d.forEach(function(p5,p4){var p3=on[p4];r.push({mdat:p5,traf:p3})});r.forEach(function(p9){var qb=p9.mdat;var p8=p9.traf;var qa=G.findBox(p8,["tfhd"]);var qd=ec.parseTfhd(qa[0]);var p5=qd.trackId;var p4=G.findBox(p8,["tfdt"]);var p3=p4.length>0?ec.parseTfdt(p4[0]).baseMediaDecodeTime:0;var p7=G.findBox(p8,["trun"]);var qc;var p6;if(i===p5&&p7.length>0){qc=pV(p7,p3,qd);p6=na(qb,qc,p5);if(!t[p5]){t[p5]=[]}t[p5]=t[p5].concat(p6)}});return t};var ln=function ln(i,r,d){var e;if(r===null){return null}e=gI(i,r);return{seiNals:e[r],timescale:d}};var bo=function bo(){var r=false;var d;var p3;var on;var e;var t;var i;this.isInitialized=function(){return r};this.init=function(p4){d=new cq();r=true;i=p4?p4.isPartial:false;d.on("data",function(p5){p5.startTime=p5.startPts/e;p5.endTime=p5.endPts/e;t.captions.push(p5);t.captionStreams[p5.stream]=true})};this.isNewInit=function(p4,p5){if(p4&&p4.length===0||p5&&typeof p5==="object"&&Object.keys(p5).length===0){return false}return on!==p4[0]||e!==p5[on]};this.parse=function(p7,p4,p5){var p8;if(!this.isInitialized()){return null}else{if(!p4||!p5){return null}else{if(this.isNewInit(p4,p5)){on=p4[0];e=p5[on]}else{if(on===null||!e){p3.push(p7);return null}}}}while(p3.length>0){var p6=p3.shift();this.parse(p6,p4,p5)}p8=ln(p7,on,e);if(p8===null||!p8.seiNals){return null}this.pushNals(p8.seiNals);this.flushStream();return t};this.pushNals=function(p4){if(!this.isInitialized()||!p4||p4.length===0){return null}p4.forEach(function(p5){d.push(p5)})};this.flushStream=function(){if(!this.isInitialized()){return null}if(!i){d.flush()}else{d.partialFlush()}};this.clearParsedCaptions=function(){t.captions=[];t.captionStreams={}};this.resetCaptionStream=function(){if(!this.isInitialized()){return null}d.reset()};this.clearAllCaptions=function(){this.clearParsedCaptions();this.resetCaptionStream()};this.reset=function(){p3=[];on=null;e=null;if(!t){t={captions:[],captionStreams:{}}}else{this.clearParsedCaptions()}this.resetCaptionStream()};this.reset()};var el=bo;var b7={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21};var c=8589934592;var o7=4294967296;var b3="shared";var k2=function k2(e,d){var i=1;if(e>d){i=-1}while(Math.abs(d-e)>o7){e+=i*c}return e};var l9=function l9(i){var d,e;l9.prototype.init.call(this);this.type_=i||b3;this.push=function(r){if(this.type_!==b3&&r.type!==this.type_){return}if(e===undefined){e=r.dts}r.dts=k2(r.dts,e);r.pts=k2(r.pts,e);d=r.dts;this.trigger("data",r)};this.flush=function(){e=d;this.trigger("done")};this.endTimeline=function(){this.flush();this.trigger("endedtimeline")};this.discontinuity=function(){e=void 0;d=void 0};this.reset=function(){this.discontinuity();this.trigger("reset")}};l9.prototype=new oN();var O={TimestampRolloverStream:l9,handleRollover:k2};var dx=function dx(e){var d=e[1]&31;d<<=8;d|=e[2];return d};var jp=function jp(d){return !!(d[1]&64)};var fw=function fw(d){var e=0;if((d[3]&48)>>>4>1){e+=d[4]+1}return e};var bQ=function dc(i,e){var d=dx(i);if(d===0){return"pat"}else{if(d===e){return"pmt"}else{if(e){return"pes"}}}return null};var fW=function fW(e){var d=jp(e);var i=4+fw(e);if(d){i+=e[i]+1}return(e[i+10]&31)<<8|e[i+11]};var bY=function bY(d){var on={};var p4=jp(d);var p3=4+fw(d);if(p4){p3+=d[p3]+1}if(!(d[p3+5]&1)){return}var p5,t,p6;p5=(d[p3+1]&15)<<8|d[p3+2];t=3+p5-4;p6=(d[p3+10]&15)<<8|d[p3+11];var e=12+p6;while(e<t){var r=p3+e;on[(d[r+1]&31)<<8|d[r+2]]=d[r];e+=((d[r+3]&15)<<8|d[r+4])+5}return on};var eg=function eg(r,e){var d=dx(r);var i=e[d];switch(i){case b7.H264_STREAM_TYPE:return"video";case b7.ADTS_STREAM_TYPE:return"audio";case b7.METADATA_STREAM_TYPE:return"timed-metadata";default:return null}};var fs=function fs(r){var i=jp(r);if(!i){return null}var t=4+fw(r);if(t>=r.byteLength){return null}var d=null;var e;e=r[t+7];if(e&192){d={};d.pts=(r[t+9]&14)<<27|(r[t+10]&255)<<20|(r[t+11]&254)<<12|(r[t+12]&255)<<5|(r[t+13]&254)>>>3;d.pts*=4;d.pts+=(r[t+13]&6)>>>1;d.dts=d.pts;if(e&64){d.dts=(r[t+14]&14)<<27|(r[t+15]&255)<<20|(r[t+16]&254)<<12|(r[t+17]&255)<<5|(r[t+18]&254)>>>3;d.dts*=4;d.dts+=(r[t+18]&6)>>>1}}return d};var j1=function j1(d){switch(d){case 5:return"slice_layer_without_partitioning_rbsp_idr";case 6:return"sei_rbsp";case 7:return"seq_parameter_set_rbsp";case 8:return"pic_parameter_set_rbsp";case 9:return"access_unit_delimiter_rbsp";default:return null}};var mr=function mr(on){var p3=4+fw(on);var e=on.subarray(p3);var r=0;var t=0;var d=false;var i;for(;t<e.byteLength-3;t++){if(e[t+2]===1){r=t+5;break}}while(r<e.byteLength){switch(e[r]){case 0:if(e[r-1]!==0){r+=2;break}else{if(e[r-2]!==0){r++;break}}if(t+3!==r-2){i=j1(e[t+3]&31);if(i==="slice_layer_without_partitioning_rbsp_idr"){d=true}}do{r++}while(e[r]!==1&&r<e.length);t=r-2;r+=3;break;case 1:if(e[r-1]!==0||e[r-2]!==0){r+=3;break}i=j1(e[t+3]&31);if(i==="slice_layer_without_partitioning_rbsp_idr"){d=true}t=r-2;r+=3;break;default:r+=3;break}}e=e.subarray(t);r-=t;t=0;if(e&&e.byteLength>3){i=j1(e[t+3]&31);if(i==="slice_layer_without_partitioning_rbsp_idr"){d=true}}return d};var mg={parseType:bQ,parsePat:fW,parsePmt:bY,parsePayloadUnitStartIndicator:jp,parsePesType:eg,parsePesTime:fs,videoPacketContainsKeyFrame:mr};var fq=[96000,88200,64000,48000,44100,32000,24000,22050,16000,12000,11025,8000,7350];var hH=function hH(d){if(d[0]==="I".charCodeAt(0)&&d[1]==="D".charCodeAt(0)&&d[2]==="3".charCodeAt(0)){return true}return false};var ow=function ow(d){return d[0]<<21|d[1]<<14|d[2]<<7|d[3]};var jI=function jI(r,on,e){var t,d="";for(t=on;t<e;t++){d+="%"+("00"+r[t].toString(16)).slice(-2)}return d};var ha=function ha(e,i,d){return unescape(jI(e,i,d))};var fd=function fd(t,i){var e=t[i+6]<<21|t[i+7]<<14|t[i+8]<<7|t[i+9],d=t[i+5],r=(d&16)>>4;if(r){return e+20}return e+10};var eM=function eM(t,r){var i=(t[r+5]&224)>>5,e=t[r+4]<<3,d=t[r+3]&3<<11;return d|e|i};var bP=function dc(e,d){if(e[d]==="I".charCodeAt(0)&&e[d+1]==="D".charCodeAt(0)&&e[d+2]==="3".charCodeAt(0)){return"timed-metadata"}else{if(e[d]&255===255&&(e[d+1]&240)===240){return"audio"}}return null};var ov=function ov(e){var d=0;while(d+5<e.length){if(e[d]!==255||(e[d+1]&246)!==240){d++;continue}return fq[(e[d+2]&60)>>>2]}return null};var j2=function j2(t){var p5,on,r,p6;p5=10;if(t[5]&64){p5+=4;p5+=ow(t.subarray(10,14))}do{on=ow(t.subarray(p5+4,p5+8));if(on<1){return null}p6=String.fromCharCode(t[p5],t[p5+1],t[p5+2],t[p5+3]);if(p6==="PRIV"){r=t.subarray(p5+10,p5+on+10);for(var p3=0;p3<r.byteLength;p3++){if(r[p3]===0){var e=ha(r,0,p3);if(e==="com.apple.streaming.transportStreamTimestamp"){var p4=r.subarray(p3+1);var p7=(p4[3]&1)<<30|p4[4]<<22|p4[5]<<14|p4[6]<<6|p4[7]>>>2;p7*=4;p7+=p4[7]&3;return p7}break}}}p5+=10;p5+=on}while(p5<t.byteLength);return null};var iy={isLikelyAacData:hH,parseId3TagSize:fd,parseAdtsSize:eM,parseType:bP,parseSampleRate:ov,parseAacTimestamp:j2};var ep=90000,ag,gX,ab,bj,nH,cK,mA;ag=function ag(d){return d*ep};gX=function gX(e,d){return e*d};ab=function ab(d){return d/ep};bj=function bj(e,d){return e/d};nH=function nH(e,d){return ag(bj(e,d))};cK=function cK(e,d){return gX(ab(e),d)};mA=function mA(i,d,e){return ab(e?i:i-d)};var mX={ONE_SECOND_IN_TS:ep,secondsToVideoTs:ag,secondsToAudioTs:gX,videoTsToSeconds:ab,audioTsToSeconds:bj,audioTsToVideoTs:nH,videoTsToAudioTs:cK,metadataTsToSeconds:mA};var bZ=O.handleRollover;var me={};me.ts=mg;me.aac=iy;var nU=mX.ONE_SECOND_IN_TS;var hG=188,b5=71;var lU=function lU(d,i){var on=0,r=hG,t,e;while(r<d.byteLength){if(d[on]===b5&&d[r]===b5){t=d.subarray(on,r);e=me.ts.parseType(t,i.pid);switch(e){case"pat":if(!i.pid){i.pid=me.ts.parsePat(t)}break;case"pmt":if(!i.table){i.table=me.ts.parsePmt(t)}break}if(i.pid&&i.table){return}on+=hG;r+=hG;continue}on++;r++}};var je=function je(p6,e,p7){var p5=0,i=hG,d,on,p4,r,t;var p3=false;while(i<=p6.byteLength){if(p6[p5]===b5&&(p6[i]===b5||i===p6.byteLength)){d=p6.subarray(p5,i);on=me.ts.parseType(d,e.pid);switch(on){case"pes":p4=me.ts.parsePesType(d,e.table);r=me.ts.parsePayloadUnitStartIndicator(d);if(p4==="audio"&&r){t=me.ts.parsePesTime(d);if(t){t.type="audio";p7.audio.push(t);p3=true}}break}if(p3){break}p5+=hG;i+=hG;continue}p5++;i++}i=p6.byteLength;p5=i-hG;p3=false;while(p5>=0){if(p6[p5]===b5&&(p6[i]===b5||i===p6.byteLength)){d=p6.subarray(p5,i);on=me.ts.parseType(d,e.pid);switch(on){case"pes":p4=me.ts.parsePesType(d,e.table);r=me.ts.parsePayloadUnitStartIndicator(d);if(p4==="audio"&&r){t=me.ts.parsePesTime(d);if(t){t.type="audio";p7.audio.push(t);p3=true}}break}if(p3){break}p5-=hG;i-=hG;continue}p5--;i--}};var cs=function cs(qc,p3,qd){var qb=0,p5=hG,e,p8,qa,p6,p7,d,p4,on;var p9=false;var t={data:[],size:0};while(p5<qc.byteLength){if(qc[qb]===b5&&qc[p5]===b5){e=qc.subarray(qb,p5);p8=me.ts.parseType(e,p3.pid);switch(p8){case"pes":qa=me.ts.parsePesType(e,p3.table);p6=me.ts.parsePayloadUnitStartIndicator(e);if(qa==="video"){if(p6&&!p9){p7=me.ts.parsePesTime(e);if(p7){p7.type="video";qd.video.push(p7);p9=true}}if(!qd.firstKeyFrame){if(p6){if(t.size!==0){d=new Uint8Array(t.size);p4=0;while(t.data.length){on=t.data.shift();d.set(on,p4);p4+=on.byteLength}if(me.ts.videoPacketContainsKeyFrame(d)){var r=me.ts.parsePesTime(d);if(r){qd.firstKeyFrame=r;qd.firstKeyFrame.type="video"}else{console.warn("Failed to extract PTS/DTS from PES at first keyframe. This could be an unusual TS segment, or else mux.js did not parse your TS segment correctly. If you know your TS segments do contain PTS/DTS on keyframes please file a bug report! You can try ffprobe to double check for yourself.")}}t.size=0}}t.data.push(e);t.size+=e.byteLength}}break}if(p9&&qd.firstKeyFrame){break}qb+=hG;p5+=hG;continue}qb++;p5++}p5=qc.byteLength;qb=p5-hG;p9=false;while(qb>=0){if(qc[qb]===b5&&qc[p5]===b5){e=qc.subarray(qb,p5);p8=me.ts.parseType(e,p3.pid);switch(p8){case"pes":qa=me.ts.parsePesType(e,p3.table);p6=me.ts.parsePayloadUnitStartIndicator(e);if(qa==="video"&&p6){p7=me.ts.parsePesTime(e);if(p7){p7.type="video";qd.video.push(p7);p9=true}}break}if(p9){break}qb-=hG;p5-=hG;continue}qb--;p5--}};var l8=function l8(e,d){if(e.audio&&e.audio.length){var t=d;if(typeof t==="undefined"){t=e.audio[0].dts}e.audio.forEach(function(on){on.dts=bZ(on.dts,t);on.pts=bZ(on.pts,t);on.dtsTime=on.dts/nU;on.ptsTime=on.pts/nU})}if(e.video&&e.video.length){var i=d;if(typeof i==="undefined"){i=e.video[0].dts}e.video.forEach(function(on){on.dts=bZ(on.dts,i);on.pts=bZ(on.pts,i);on.dtsTime=on.dts/nU;on.ptsTime=on.pts/nU});if(e.firstKeyFrame){var r=e.firstKeyFrame;r.dts=bZ(r.dts,i);r.pts=bZ(r.pts,i);r.dtsTime=r.dts/nU;r.ptsTime=r.dts/nU}}};var fA=function fA(p7){var p3=false,p4=0,p5=null,t=null,i=0,d=0,e;while(p7.length-d>=3){var on=me.aac.parseType(p7,d);switch(on){case"timed-metadata":if(p7.length-d<10){p3=true;break}i=me.aac.parseId3TagSize(p7,d);if(i>p7.length){p3=true;break}if(t===null){e=p7.subarray(d,d+i);t=me.aac.parseAacTimestamp(e)}d+=i;break;case"audio":if(p7.length-d<7){p3=true;break}i=me.aac.parseAdtsSize(p7,d);if(i>p7.length){p3=true;break}if(p5===null){e=p7.subarray(d,d+i);p5=me.aac.parseSampleRate(e)}p4++;d+=i;break;default:d++;break}if(p3){return null}}if(p5===null||t===null){return null}var r=nU/p5;var p6={audio:[{type:"audio",dts:t,pts:t},{type:"audio",dts:t+p4*1024*r,pts:t+p4*1024*r}]};return p6};var bX=function bX(e){var t={pid:null,table:null};var d={};lU(e,t);for(var i in t.table){if(t.table.hasOwnProperty(i)){var r=t.table[i];switch(r){case b7.H264_STREAM_TYPE:d.video=[];cs(e,t,d);if(d.video.length===0){delete d.video}break;case b7.ADTS_STREAM_TYPE:d.audio=[];je(e,t,d);if(d.audio.length===0){delete d.audio}break}}}return d};var gz=function gz(r,i){var e=me.aac.isLikelyAacData(r);var d;if(e){d=fA(r)}else{d=bX(r)}if(!d||!d.audio&&!d.video){return null}l8(d,i);return d};var F={inspect:gz,parseAudioPes_:je};function nr(d){return d.subarray(0,d.byteLength-d[d.byteLength-1])}var iN=function iN(d,e){if(!(d instanceof e)){throw new TypeError("Cannot call a class as a function")}};var jC=function(){function d(on,r){for(var e=0;e<r.length;e++){var t=r[e];t.enumerable=t.enumerable||false;t.configurable=true;if("value" in t){t.writable=true}Object.defineProperty(on,t.key,t)}}return function(r,e,i){if(e){d(r.prototype,e)}if(i){d(r,i)}return r}}();var ii=function jS(e,d){if(typeof d!=="function"&&d!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof d)}e.prototype=Object.create(d&&d.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(d){Object.setPrototypeOf?Object.setPrototypeOf(e,d):e.__proto__=d}};var m6=function m6(d,e){if(!d){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e&&(typeof e==="object"||typeof e==="function")?e:d};var m3=function m3(){var qb=[[[],[],[],[],[]],[[],[],[],[],[]]];var p6=qb[0];var qe=qb[1];var p5=p6[4];var qa=qe[4];var p4=void 0;var p8=void 0;var p3=void 0;var p7=[];var t=[];var r=void 0;var qd=void 0;var p9=void 0;var qc=void 0;var on=void 0;var e=void 0;for(p4=0;p4<256;p4++){t[(p7[p4]=p4<<1^(p4>>7)*283)^p4]=p4}for(p8=p3=0;!p5[p8];p8^=r||1,p3=t[p3]||1){qc=p3^p3<<1^p3<<2^p3<<3^p3<<4;qc=qc>>8^qc&255^99;p5[p8]=qc;qa[qc]=p8;p9=p7[qd=p7[r=p7[p8]]];e=p9*16843009^qd*65537^r*257^p8*16843008;on=p7[qc]*257^qc*16843008;for(p4=0;p4<4;p4++){p6[p4][p8]=on=on<<24^on>>>8;qe[p4][qc]=e=e<<24^e>>>8}}for(p4=0;p4<5;p4++){p6[p4]=p6[p4].slice(0);qe[p4]=qe[p4].slice(0)}return qb};var V=null;var nE=function(){function e(p7){iN(this,e);if(!V){V=m3()}this._tables=[[V[0][0].slice(),V[0][1].slice(),V[0][2].slice(),V[0][3].slice(),V[0][4].slice()],[V[1][0].slice(),V[1][1].slice(),V[1][2].slice(),V[1][3].slice(),V[1][4].slice()]];var p3=void 0;var on=void 0;var p4=void 0;var p6=void 0;var p9=void 0;var p5=this._tables[0][4];var p8=this._tables[1];var r=p7.length;var t=1;if(r!==4&&r!==6&&r!==8){throw new Error("Invalid aes key size")}p6=p7.slice(0);p9=[];this._key=[p6,p9];for(p3=r;p3<4*r+28;p3++){p4=p6[p3-1];if(p3%r===0||r===8&&p3%r===4){p4=p5[p4>>>24]<<24^p5[p4>>16&255]<<16^p5[p4>>8&255]<<8^p5[p4&255];if(p3%r===0){p4=p4<<8^p4>>>24^t<<24;t=t<<1^(t>>7)*283}}p6[p3]=p6[p3-r]^p4}for(on=0;p3;on++,p3--){p4=p6[on&3?p3:p3-4];if(p3<=4||on<4){p9[on]=p4}else{p9[on]=p8[0][p5[p4>>>24]]^p8[1][p5[p4>>16&255]]^p8[2][p5[p4>>8&255]]^p8[3][p5[p4&255]]}}}e.prototype.decrypt=function d(qj,qi,qg,qe,p8,r){var qm=this._key[1];var qh=qj^qm[0];var qf=qe^qm[1];var qd=qg^qm[2];var qc=qi^qm[3];var qk=void 0;var t=void 0;var p3=void 0;var ql=qm.length/4-2;var p7=void 0;var p4=4;var qb=this._tables[1];var qa=qb[0];var p9=qb[1];var p6=qb[2];var p5=qb[3];var on=qb[4];for(p7=0;p7<ql;p7++){qk=qa[qh>>>24]^p9[qf>>16&255]^p6[qd>>8&255]^p5[qc&255]^qm[p4];t=qa[qf>>>24]^p9[qd>>16&255]^p6[qc>>8&255]^p5[qh&255]^qm[p4+1];p3=qa[qd>>>24]^p9[qc>>16&255]^p6[qh>>8&255]^p5[qf&255]^qm[p4+2];qc=qa[qc>>>24]^p9[qh>>16&255]^p6[qf>>8&255]^p5[qd&255]^qm[p4+3];p4+=4;qh=qk;qf=t;qd=p3}for(p7=0;p7<4;p7++){p8[(3&-p7)+r]=on[qh>>>24]<<24^on[qf>>16&255]<<16^on[qd>>8&255]<<8^on[qc&255]^qm[p4++];qk=qh;qh=qf;qf=qd;qd=qc;qc=qk}};return e}();var jH=function(){function t(){iN(this,t);this.listeners={}}t.prototype.on=function d(p3,p4){if(!this.listeners[p3]){this.listeners[p3]=[]}this.listeners[p3].push(p4)};t.prototype.off=function on(p4,p5){if(!this.listeners[p4]){return false}var p3=this.listeners[p4].indexOf(p5);this.listeners[p4].splice(p3,1);return p3>-1};t.prototype.trigger=function e(p5){var p7=this.listeners[p5];if(!p7){return}if(arguments.length===2){var p6=p7.length;for(var p4=0;p4<p6;++p4){p7[p4].call(this,arguments[1])}}else{var p3=Array.prototype.slice.call(arguments,1);var p9=p7.length;for(var p8=0;p8<p9;++p8){p7[p8].apply(this,p3)}}};t.prototype.dispose=function r(){this.listeners={}};t.prototype.pipe=function i(p3){this.on("data",function(p4){p3.push(p4)})};return t}();var bT=function(i){ii(d,i);function d(){iN(this,d);var t=m6(this,i.call(this,jH));t.jobs=[];t.delay=1;t.timeout_=null;return t}d.prototype.processJob_=function e(){this.jobs.shift()();if(this.jobs.length){this.timeout_=setTimeout(this.processJob_.bind(this),this.delay)}else{this.timeout_=null}};d.prototype.push=function r(t){this.jobs.push(t);if(!this.timeout_){this.timeout_=setTimeout(this.processJob_.bind(this),this.delay)}};return d}(jH);var c2=function c2(d){return d<<24|(d&65280)<<8|(d&16711680)>>8|d>>>24};var hI=function hI(p8,qa,i){var p9=new Int32Array(p8.buffer,p8.byteOffset,p8.byteLength>>2);var p4=new nE(Array.prototype.slice.call(qa));var qb=new Uint8Array(p8.byteLength);var qc=new Int32Array(qb.buffer);var p7=void 0;var p6=void 0;var p5=void 0;var p3=void 0;var on=void 0;var t=void 0;var r=void 0;var e=void 0;var d=void 0;p7=i[0];p6=i[1];p5=i[2];p3=i[3];for(d=0;d<p9.length;d+=4){on=c2(p9[d]);t=c2(p9[d+1]);r=c2(p9[d+2]);e=c2(p9[d+3]);p4.decrypt(on,t,r,e,qc,d);qc[d]=c2(qc[d]^p7);qc[d+1]=c2(qc[d+1]^p6);qc[d+2]=c2(qc[d+2]^p5);qc[d+3]=c2(qc[d+3]^p3);p7=on;p6=t;p5=r;p3=e}return qb};var lF=function(){function i(p6,p4,on,t){iN(this,i);var p5=i.STEP;var p7=new Int32Array(p6.buffer);var r=new Uint8Array(p6.byteLength);var p3=0;this.asyncStream_=new bT();this.asyncStream_.push(this.decryptChunk_(p7.subarray(p3,p3+p5),p4,on,r));for(p3=p5;p3<p7.length;p3+=p5){on=new Uint32Array([c2(p7[p3-4]),c2(p7[p3-3]),c2(p7[p3-2]),c2(p7[p3-1])]);this.asyncStream_.push(this.decryptChunk_(p7.subarray(p3,p3+p5),p4,on,r))}this.asyncStream_.push(function(){t(null,nr(r))})}i.prototype.decryptChunk_=function e(p3,on,t,r){return function(){var p4=hI(p3,on,t);r.set(p4,p3.byteOffset)}};jC(i,null,[{key:"STEP",get:function d(){return 32000}}]);return i}();var aB=function pz(e,d){if(/^[a-z]+:/i.test(d)){return d}if(!/\/\//i.test(e)){e=lE.buildAbsoluteURL(cb.location.href,e)}return lE.buildAbsoluteURL(e,d)};var eY=function eY(d,e,i){if(d&&i.responseURL&&e!==i.responseURL){return i.responseURL}return e};var cP=function iN(d,e){if(!(d instanceof e)){throw new TypeError("Cannot call a class as a function")}};var fG=function(){function d(on,r){for(var e=0;e<r.length;e++){var t=r[e];t.enumerable=t.enumerable||false;t.configurable=true;if("value" in t){t.writable=true}Object.defineProperty(on,t.key,t)}}return function(r,e,i){if(e){d(r.prototype,e)}if(i){d(r,i)}return r}}();var dX=function f0(e,t,r){if(e===null){e=Function.prototype}var on=Object.getOwnPropertyDescriptor(e,t);if(on===undefined){var i=Object.getPrototypeOf(e);if(i===null){return undefined}else{return f0(i,t,r)}}else{if("value" in on){return on.value}else{var d=on.get;if(d===undefined){return undefined}return d.call(r)}}};var ih=function jS(e,d){if(typeof d!=="function"&&d!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof d)}e.prototype=Object.create(d&&d.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(d){Object.setPrototypeOf?Object.setPrototypeOf(e,d):e.__proto__=d}};var a3=function m6(d,e){if(!d){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e&&(typeof e==="object"||typeof e==="function")?e:d};var ad=function(){function d(p3,on){var p6=[];var e=true;var p5=false;var p4=undefined;try{for(var t=p3[Symbol.iterator](),p7;!(e=(p7=t.next()).done);e=true){p6.push(p7.value);if(on&&p6.length===on){break}}}catch(r){p5=true;p4=r}finally{try{if(!e&&t["return"]){t["return"]()}}finally{if(p5){throw p4}}}return p6}return function(e,r){if(Array.isArray(e)){return e}else{if(Symbol.iterator in Object(e)){return d(e,r)}else{throw new TypeError("Invalid attempt to destructure non-iterable instance")}}}}();var f9=d9.mergeOptions,ea=d9.EventTarget,bn=d9.log;var mz=function mz(d,e){["AUDIO","SUBTITLES"].forEach(function(i){for(var t in d.mediaGroups[i]){for(var r in d.mediaGroups[i][t]){var on=d.mediaGroups[i][t][r];e(on,i,t,r)}}})};var hZ=function hZ(r,p3,on){var d=p3.slice();on=on||0;var t=Math.min(r.length,p3.length+on);for(var e=on;e<t;e++){d[e-on]=f9(r[e],d[e-on])}return d};var e9=function e9(d,e){if(!d.resolvedUri){d.resolvedUri=aB(e,d.uri)}if(d.key&&!d.key.resolvedUri){d.key.resolvedUri=aB(e,d.key.uri)}if(d.map&&!d.map.resolvedUri){d.map.resolvedUri=aB(e,d.map.uri)}};var b1=function b1(t,on){var d=f9(t,{});var p3=d.playlists[on.id];if(!p3){return null}if(p3.segments&&on.segments&&p3.segments.length===on.segments.length&&p3.endList===on.endList&&p3.mediaSequence===on.mediaSequence){return null}var e=f9(p3,on);if(p3.segments){e.segments=hZ(p3.segments,on.segments,on.mediaSequence-p3.mediaSequence)}e.segments.forEach(function(i){e9(i,e.resolvedUri)});for(var r=0;r<d.playlists.length;r++){if(d.playlists[r].id===on.id){d.playlists[r]=e}}d.playlists[on.id]=e;d.playlists[on.uri]=e;return d};var k=function k(d,e){return d+"-"+e};var lb=function lb(e){var d=e.playlists.length;while(d--){var r=e.playlists[d];r.resolvedUri=aB(e.uri,r.uri);r.id=k(d,r.uri);e.playlists[r.id]=r;e.playlists[r.uri]=r;if(!r.attributes){r.attributes={};bn.warn("Invalid playlist STREAM-INF detected. Missing BANDWIDTH attribute.")}}};var k6=function k6(d){mz(d,function(e){if(e.uri){e.resolvedUri=aB(d.uri,e.uri)}})};var jU=function jU(i,r){var d=i.segments[i.segments.length-1];var e=void 0;if(r&&d&&d.duration){e=d.duration*1000}else{e=(i.targetDuration||10)*500}return e};var a2=function(i){ih(p4,i);function p4(qd,p7){var qf=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};cP(this,p4);var qc=a3(this,(p4.__proto__||Object.getPrototypeOf(p4)).call(this));var qa=qf.withCredentials,p9=qa===undefined?false:qa,p8=qf.handleManifestRedirects,qe=p8===undefined?false:p8;qc.srcUrl=qd;qc.hls_=p7;qc.withCredentials=p9;qc.handleManifestRedirects=qe;var qb=p7.options_;qc.customTagParsers=qb&&qb.customTagParsers||[];qc.customTagMappers=qb&&qb.customTagMappers||[];if(!qc.srcUrl){throw new Error("A non-empty playlist URL is required")}qc.state="HAVE_NOTHING";qc.on("mediaupdatetimeout",function(){if(qc.state!=="HAVE_METADATA"){return}qc.state="HAVE_CURRENT_METADATA";qc.request=qc.hls_.xhr({uri:aB(qc.master.uri,qc.media().uri),withCredentials:qc.withCredentials},function(qg,qh){if(!qc.request){return}if(qg){return qc.playlistRequestError(qc.request,qc.media(),"HAVE_METADATA")}qc.haveMetadata(qc.request,qc.media().uri,qc.media().id)})});return qc}fG(p4,[{key:"playlistRequestError",value:function r(qa,p9,p7){var p8=p9.uri,qb=p9.id;this.request=null;if(p7){this.state=p7}this.error={playlist:this.master.playlists[qb],status:qa.status,message:"HLS playlist request error at URL: "+p8+".",responseText:qa.responseText,code:qa.status>=500?4:2};this.trigger("error")}},{key:"haveMetadata",value:function on(p9,p7,qc){var p8=this;this.request=null;this.state="HAVE_METADATA";var qb=new de();this.customTagParsers.forEach(function(qd){return qb.addParser(qd)});this.customTagMappers.forEach(function(qd){return qb.addTagMapper(qd)});qb.push(p9.responseText);qb.end();qb.manifest.uri=p7;qb.manifest.id=qc;qb.manifest.attributes=qb.manifest.attributes||{};var qa=b1(this.master,qb.manifest);this.targetDuration=qb.manifest.targetDuration;if(qa){this.master=qa;this.media_=this.master.playlists[qc]}else{this.trigger("playlistunchanged")}if(!this.media().endList){cb.clearTimeout(this.mediaUpdateTimeout);this.mediaUpdateTimeout=cb.setTimeout(function(){p8.trigger("mediaupdatetimeout")},jU(this.media(),!!qa))}this.trigger("loadedplaylist")}},{key:"dispose",value:function p5(){this.trigger("dispose");this.stopRequest();cb.clearTimeout(this.mediaUpdateTimeout);cb.clearTimeout(this.finalRenditionTimeout);this.off()}},{key:"stopRequest",value:function t(){if(this.request){var p7=this.request;this.request=null;p7.onreadystatechange=null;p7.abort()}}},{key:"media",value:function e(qc,qb){var qa=this;if(!qc){return this.media_}if(this.state==="HAVE_NOTHING"){throw new Error("Cannot switch media playlist from "+this.state)}if(typeof qc==="string"){if(!this.master.playlists[qc]){throw new Error("Unknown playlist URI: "+qc)}qc=this.master.playlists[qc]}cb.clearTimeout(this.finalRenditionTimeout);if(qb){var p9=qc.targetDuration/2*1000||5*1000;this.finalRenditionTimeout=cb.setTimeout(this.media.bind(this,qc,false),p9);return}var p7=this.state;var p8=!this.media_||qc.id!==this.media_.id;if(this.master.playlists[qc.id].endList){if(this.request){this.request.onreadystatechange=null;this.request.abort();this.request=null}this.state="HAVE_METADATA";this.media_=qc;if(p8){this.trigger("mediachanging");this.trigger("mediachange")}return}if(!p8){return}this.state="SWITCHING_MEDIA";if(this.request){if(qc.resolvedUri===this.request.url){return}this.request.onreadystatechange=null;this.request.abort();this.request=null}if(this.media_){this.trigger("mediachanging")}this.request=this.hls_.xhr({uri:qc.resolvedUri,withCredentials:this.withCredentials},function(qd,qe){if(!qa.request){return}qc.resolvedUri=eY(qa.handleManifestRedirects,qc.resolvedUri,qe);if(qd){return qa.playlistRequestError(qa.request,qc,p7)}qa.haveMetadata(qe,qc.uri,qc.id);if(p7==="HAVE_MASTER"){qa.trigger("loadedmetadata")}else{qa.trigger("mediachange")}})}},{key:"pause",value:function p6(){this.stopRequest();cb.clearTimeout(this.mediaUpdateTimeout);if(this.state==="HAVE_NOTHING"){this.started=false}if(this.state==="SWITCHING_MEDIA"){if(this.media_){this.state="HAVE_METADATA"}else{this.state="HAVE_MASTER"}}else{if(this.state==="HAVE_CURRENT_METADATA"){this.state="HAVE_METADATA"}}}},{key:"load",value:function p3(p9){var p8=this;cb.clearTimeout(this.mediaUpdateTimeout);var qa=this.media();if(p9){var p7=qa?qa.targetDuration/2*1000:5*1000;this.mediaUpdateTimeout=cb.setTimeout(function(){return p8.load()},p7);return}if(!this.started){this.start();return}if(qa&&!qa.endList){this.trigger("mediaupdatetimeout")}else{this.trigger("loadedplaylist")}}},{key:"start",value:function d(){var p7=this;this.started=true;this.request=this.hls_.xhr({uri:this.srcUrl,withCredentials:this.withCredentials},function(p8,p9){if(!p7.request){return}p7.request=null;if(p8){p7.error={status:p9.status,message:"HLS playlist request error at URL: "+p7.srcUrl+".",responseText:p9.responseText,code:2};if(p7.state==="HAVE_NOTHING"){p7.started=false}return p7.trigger("error")}var qb=new de();p7.customTagParsers.forEach(function(qc){return qb.addParser(qc)});p7.customTagMappers.forEach(function(qc){return qb.addTagMapper(qc)});qb.push(p9.responseText);qb.end();p7.state="HAVE_MASTER";p7.srcUrl=eY(p7.handleManifestRedirects,p7.srcUrl,p9);qb.manifest.uri=p7.srcUrl;if(qb.manifest.playlists){p7.master=qb.manifest;lb(p7.master);k6(p7.master);p7.trigger("loadedplaylist");if(!p7.request){p7.media(qb.manifest.playlists[0])}return}var qa=k(0,p7.srcUrl);p7.master={mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:cb.location.href,playlists:[{uri:p7.srcUrl,id:qa,resolvedUri:p7.srcUrl,attributes:{}}]};p7.master.playlists[qa]=p7.master.playlists[0];p7.master.playlists[p7.srcUrl]=p7.master.playlists[0];p7.haveMetadata(p9,p7.srcUrl,qa);return p7.trigger("loadedmetadata")})}}]);return p4}(ea);var iS=d9.createTimeRange;var bc=function bc(on,r){var d=0;var e=r-on.mediaSequence;var t=on.segments[e];if(t){if(typeof t.start!=="undefined"){return{result:t.start,precise:true}}if(typeof t.end!=="undefined"){return{result:t.end-t.duration,precise:true}}}while(e--){t=on.segments[e];if(typeof t.end!=="undefined"){return{result:d+t.end,precise:true}}d+=t.duration;if(typeof t.start!=="undefined"){return{result:d+t.start,precise:true}}}return{result:d,precise:false}};var oM=function oM(on,r){var d=0;var t=void 0;var e=r-on.mediaSequence;for(;e<on.segments.length;e++){t=on.segments[e];if(typeof t.start!=="undefined"){return{result:t.start-d,precise:true}}d+=t.duration;if(typeof t.end!=="undefined"){return{result:t.end-d,precise:true}}}return{result:-1,precise:false}};var co=function co(t,i,e){var r=void 0;var d=void 0;if(typeof i==="undefined"){i=t.mediaSequence+t.segments.length}if(i<t.mediaSequence){return 0}r=bc(t,i);if(r.precise){return r.result}d=oM(t,i);if(d.precise){return d.result}return r.result+e};var mQ=function mQ(i,e,d){if(!i){return 0}if(typeof d!=="number"){d=0}if(typeof e==="undefined"){if(i.totalDuration){return i.totalDuration}if(!i.endList){return cb.Infinity}}return co(i,e,d)};var gD=function gD(p4,p3,on){var d=0;if(p3>on){var t=[on,p3];p3=t[0];on=t[1]}if(p3<0){for(var e=p3;e<Math.min(0,on);e++){d+=p4.targetDuration}p3=0}for(var r=p3;r<on;r++){d+=p4.segments[r].duration}return d};var oQ=function oQ(p3,d){if(!p3.segments.length){return 0}var e=p3.segments.length;var r=p3.segments[e-1].duration||p3.targetDuration;var t=typeof d==="number"?d:r+p3.targetDuration*2;if(t===0){return e}var on=0;while(e--){on+=p3.segments[e].duration;if(on>=t){break}}return Math.max(0,e)};var aA=function aA(t,r,e,d){if(!t||!t.segments){return null}if(t.endList){return mQ(t)}if(r===null){return null}r=r||0;var i=e?oQ(t,d):t.segments.length;return co(t,t.mediaSequence+i,r)};var pU=function pU(on,r,d){var i=true;var e=r||0;var t=aA(on,r,i,d);if(t===null){return iS()}return iS(e,t)};var j5=function j5(d){return d-Math.floor(d)===0};var bD=function bD(d,r){if(j5(r)){return r+d*0.1}var on=r.toString().split(".")[1].length;for(var t=1;t<=on;t++){var p3=Math.pow(10,t);var e=r*p3;if(j5(e)||t===on){return(e+d)/p3}}};var gH=bD.bind(null,1);var ht=bD.bind(null,-1);var kj=function kj(p5,t,p4,e){var d=void 0;var r=void 0;var on=p5.segments.length;var p3=t-e;if(p3<0){if(p4>0){for(d=p4-1;d>=0;d--){r=p5.segments[d];p3+=ht(r.duration);if(p3>0){return{mediaIndex:d,startTime:e-gD(p5,p4,d)}}}}return{mediaIndex:0,startTime:t}}if(p4<0){for(d=p4;d<0;d++){p3-=p5.targetDuration;if(p3<0){return{mediaIndex:0,startTime:t}}}p4=0}for(d=p4;d<on;d++){r=p5.segments[d];p3-=gH(r.duration);if(p3<0){return{mediaIndex:d,startTime:e+gD(p5,p4,d)}}}return{mediaIndex:on-1,startTime:t}};var dt=function dt(d){return d.excludeUntil&&d.excludeUntil>Date.now()};var oV=function oV(d){return d.excludeUntil&&d.excludeUntil===Infinity};var b4=function b4(e){var d=dt(e);return !e.disabled&&!d};var lX=function lX(d){return d.disabled};var nv=function nv(e){for(var d=0;d<e.segments.length;d++){if(e.segments[d].key){return true}}return false};var fm=function fm(e){for(var d=0;d<e.segments.length;d++){if(e.segments[d].map){return true}}return false};var mt=function mt(d,e){return e.attributes&&e.attributes[d]};var cH=function cH(d,i,t){var r=arguments.length>3&&arguments[3]!==undefined?arguments[3]:0;if(!mt("BANDWIDTH",t)){return NaN}var e=d*t.attributes.BANDWIDTH;return(e-r*8)/i};var ff=function ff(e,i){if(e.playlists.length===1){return true}var d=i.attributes.BANDWIDTH||Number.MAX_VALUE;return e.playlists.filter(function(r){if(!b4(r)){return false}return(r.attributes.BANDWIDTH||0)<d}).length===0};var bl={duration:mQ,seekable:pU,safeLiveIndex:oQ,getMediaInfoForTime:kj,isEnabled:b4,isDisabled:lX,isBlacklisted:dt,isIncompatible:oV,playlistEnd:aA,isAes:nv,isFmp4:fm,hasAttribute:mt,estimateSegmentRequestTime:cH,isLowestEnabledRendition:ff};var gw=d9.xhr,df=d9.mergeOptions;var eI=function eI(){var e=function d(i,p4){i=df({timeout:45000},i);var on=d.beforeRequest||d9.Hls.xhr.beforeRequest;if(on&&typeof on==="function"){var p3=on(i);if(p3){i=p3}}var t=gw(i,function(p6,p5){var p7=t.response;if(!p6&&p7){t.responseTime=Date.now();t.roundTripTime=t.responseTime-t.requestTime;t.bytesReceived=p7.byteLength||p7.length;if(!t.bandwidth){t.bandwidth=Math.floor(t.bytesReceived/t.roundTripTime*8*1000)}}if(p5.headers){t.responseHeaders=p5.headers}if(p6&&p6.code==="ETIMEDOUT"){t.timedout=true}if(!p6&&!t.aborted&&p5.statusCode!==200&&p5.statusCode!==206&&p5.statusCode!==0){p6=new Error("XHR Failed with a response of: "+(t&&(p7||t.responseText)))}p4(p6,t)});var r=t.abort;t.abort=function(){t.aborted=true;return r.apply(t,arguments)};t.uri=i.uri;t.requestTime=Date.now();return t};return e};var k9=function k9(i){var e=void 0;var d=void 0;d=i.offset+i.length-1;e=i.offset;return"bytes="+e+"-"+d};var m8=function m8(d){var e={};if(d.byterange){e.Range=k9(d.byterange)}return e};var iT=function iT(d,e){return d.start(e)+"-"+d.end(e)};var km=function km(t,d){var r=t.toString(16);return"00".substring(0,2-r.length)+r+(d%2?" ":"")};var ib=function ib(d){if(d>=32&&d<126){return String.fromCharCode(d)}return"."};var kX=function kX(e){var d={};Object.keys(e).forEach(function(i){var r=e[i];if(ArrayBuffer.isView(r)){d[i]={bytes:r.buffer,byteOffset:r.byteOffset,byteLength:r.byteLength}}else{d[i]=r}});return d};var dM=function dM(e){var d=e.byterange||{length:Infinity,offset:0};return[d.length,d.offset,e.resolvedUri].join(",")};var hF=function hF(d){return d.resolvedUri};var g0=function g0(p3){var i=Array.prototype.slice.call(p3);var on=16;var e="";var t=void 0;var d=void 0;for(var r=0;r<i.length/on;r++){t=i.slice(r*on,r*on+on).map(km).join("");d=i.slice(r*on,r*on+on).map(ib).join("");e+=t+" "+d+"\n"}return e};var dy=function dy(e){var d=e.bytes;return g0(d)};var mY=function mY(e){var d="";var r=void 0;for(r=0;r<e.length;r++){d+=iT(e,r)+" "}return d};var mC=Object.freeze({createTransferableMessage:kX,initSegmentId:dM,segmentKeyId:hF,hexDump:g0,tagDump:dy,textRanges:mY});var pW=0.25;var hS=function hS(on,i){if(!i.dateTimeObject){return null}var e=i.videoTimingInfo.transmuxerPrependedSeconds;var r=i.videoTimingInfo.transmuxedPresentationStart;var d=r+e;var t=on-d;return new Date(i.dateTimeObject.getTime()+t*1000)};var bz=function bz(d){return d.transmuxedPresentationEnd-d.transmuxedPresentationStart-d.transmuxerPrependedSeconds};var hw=function hw(p7,r){var p8=void 0;try{p8=new Date(p7)}catch(p3){return null}if(!r||!r.segments||r.segments.length===0){return null}var on=r.segments[0];if(p8<on.dateTimeObject){return null}for(var t=0;t<r.segments.length-1;t++){on=r.segments[t];var p9=r.segments[t+1].dateTimeObject;if(p8<p9){break}}var p4=r.segments[r.segments.length-1];var p6=p4.dateTimeObject;var p5=p4.videoTimingInfo?bz(p4.videoTimingInfo):p4.duration+p4.duration*pW;var d=new Date(p6.getTime()+p5*1000);if(p8>d){return null}if(p8>p6){on=p4}return{segment:on,estimatedStart:on.videoTimingInfo?on.videoTimingInfo.transmuxedPresentationStart:bl.duration(r,r.mediaSequence+r.segments.indexOf(on)),type:on.videoTimingInfo?"accurate":"estimate"}};var kB=function kB(t,p3){if(!p3||!p3.segments||p3.segments.length===0){return null}var on=0;var r=void 0;for(var e=0;e<p3.segments.length;e++){r=p3.segments[e];on=r.videoTimingInfo?r.videoTimingInfo.transmuxedPresentationEnd:on+r.duration;if(t<=on){break}}var d=p3.segments[p3.segments.length-1];if(d.videoTimingInfo&&d.videoTimingInfo.transmuxedPresentationEnd<t){return null}if(t>on){if(t>on+d.duration*pW){return null}r=d}return{segment:r,estimatedStart:r.videoTimingInfo?r.videoTimingInfo.transmuxedPresentationStart:on-r.duration,type:r.videoTimingInfo?"accurate":"estimate"}};var cD=function cD(d,t){var i=void 0;var on=void 0;try{i=new Date(d);on=new Date(t)}catch(p3){}var p4=i.getTime();var r=on.getTime();return(r-p4)/1000};var pb=function pb(r){if(!r.segments||r.segments.length===0){return false}for(var d=0;d<r.segments.length;d++){var e=r.segments[d];if(!e.dateTimeObject){return false}}return true};var op=function op(t){var p3=t.playlist,e=t.time,on=e===undefined?undefined:e,p4=t.callback;if(!p4){throw new Error("getProgramTime: callback must be provided")}if(!p3||on===undefined){return p4({message:"getProgramTime: playlist and time must be provided"})}var r=kB(on,p3);if(!r){return p4({message:"valid programTime was not found"})}if(r.type==="estimate"){return p4({message:"Accurate programTime could not be determined. Please seek to e.seekTime and try again",seekTime:r.estimatedStart})}var d={mediaSeconds:on};var i=hS(on,r.segment);if(i){d.programDateTime=i.toISOString()}return p4(null,d)};var er=function er(on){var qa=on.programTime,t=on.playlist,r=on.retryCount,e=r===undefined?2:r,p3=on.seekTo,p6=on.pauseAfterSeek,i=p6===undefined?true:p6,p9=on.tech,qb=on.callback;if(!qb){throw new Error("seekToProgramTime: callback must be provided")}if(typeof qa==="undefined"||!t||!p3){return qb({message:"seekToProgramTime: programTime, seekTo and playlist must be provided"})}if(!t.endList&&!p9.hasStarted_){return qb({message:"player must be playing a live stream to start buffering"})}if(!pb(t)){return qb({message:"programDateTime tags must be provided in the manifest "+t.resolvedUri})}var d=hw(qa,t);if(!d){return qb({message:qa+" was not found in the stream"})}var p7=d.segment;var p5=cD(p7.dateTimeObject,qa);if(d.type==="estimate"){if(e===0){return qb({message:qa+" is not buffered yet. Try again"})}p3(d.estimatedStart+p5);p9.one("seeked",function(){er({programTime:qa,playlist:t,retryCount:e-1,seekTo:p3,pauseAfterSeek:i,tech:p9,callback:qb})});return}var p4=p7.start+p5;var p8=function p8(){return qb(null,p9.currentTime())};p9.one("seeked",p8);if(i){p9.pause()}p3(p4)};var kq=1/30;var b2=kq*3;var e7=function e7(e,d){var t=[];var r=void 0;if(e&&e.length){for(r=0;r<e.length;r++){if(d(e.start(r),e.end(r))){t.push([e.start(r),e.end(r)])}}}return d9.createTimeRanges(t)};var lC=function lC(d,e){return e7(d,function(r,i){return r-b2<=e&&i+b2>=e})};var fB=function fB(d,e){return e7(d,function(i){return i-kq>=e})};var bG=function bG(t){if(t.length<2){return d9.createTimeRanges()}var e=[];for(var r=1;r<t.length;r++){var on=t.end(r-1);var d=t.start(r);e.push([on,d])}return d9.createTimeRanges(e)};var n8=function n8(d){var r=[];if(!d||!d.length){return""}for(var e=0;e<d.length;e++){r.push(d.start(e)+" => "+d.end(e))}return r.join(", ")};var ob=function ob(d,i){var e=arguments.length>2&&arguments[2]!==undefined?arguments[2]:1;var r=d.length?d.end(d.length-1):0;return(r-i)/e};var g4=function g4(d){var r=[];for(var e=0;e<d.length;e++){r.push({start:d.start(e),end:d.end(e)})}return r};var cr=function cr(on,d,r){var i=d.player_;if(r.captions&&r.captions.length){if(!on.inbandTextTracks_){on.inbandTextTracks_={}}for(var t in r.captionStreams){if(!on.inbandTextTracks_[t]){i.tech_.trigger({type:"usage",name:"hls-608"});var e=i.textTracks().getTrackById(t);if(e){on.inbandTextTracks_[t]=e}else{on.inbandTextTracks_[t]=i.addRemoteTextTrack({kind:"captions",id:t,label:t},false).track}}}}if(r.metadata&&r.metadata.length&&!on.metadataTrack_){on.metadataTrack_=i.addRemoteTextTrack({kind:"metadata",label:"Timed Metadata"},false).track;on.metadataTrack_.inBandMetadataTrackDispatchType=r.metadata.dispatchType}};var kx=function kx(on,r,e){var t=void 0;var d=void 0;if(!e){return}if(!e.cues){return}t=e.cues.length;while(t--){d=e.cues[t];if(d.startTime<=r&&d.endTime>=on){e.removeCue(d)}}};var nD=function nD(d){Object.defineProperties(d.frame,{id:{get:function e(){d9.log.warn("cue.frame.id is deprecated. Use cue.value.key instead.");return d.value.key}},value:{get:function e(){d9.log.warn("cue.frame.value is deprecated. Use cue.value.data instead.");return d.value.data}},privateData:{get:function e(){d9.log.warn("cue.frame.privateData is deprecated. Use cue.value.data instead.");return d.value.data}}})};var kt=function kt(e){var d=void 0;if(isNaN(e)||Math.abs(e)===Infinity){d=Number.MAX_VALUE}else{d=e}return d};var iO=function iO(p6,p7,e){var p4=cb.WebKitDataCue||cb.VTTCue;if(p7){p7.forEach(function(p8){var i=p8.stream;this.inbandTextTracks_[i].addCue(new p4(p8.startTime+this.timestampOffset,p8.endTime+this.timestampOffset,p8.text))},p6)}if(e){var t=kt(p6.mediaSource_.duration);e.forEach(function(i){var p8=i.cueTime+this.timestampOffset;if(typeof p8!=="number"||cb.isNaN(p8)||p8<0||!(p8<Infinity)){return}i.frames.forEach(function(qa){var p9=new p4(p8,p8,qa.value||qa.url||qa.data||"");p9.frame=qa;p9.value=qa;nD(p9);this.metadataTrack_.addCue(p9)},this)},p6);if(p6.metadataTrack_&&p6.metadataTrack_.cues&&p6.metadataTrack_.cues.length){var p5=p6.metadataTrack_.cues;var r=[];for(var on=0;on<p5.length;on++){if(p5[on]){r.push(p5[on])}}var d=r.reduce(function(p9,i){var p8=p9[i.startTime]||[];p8.push(i);p9[i.startTime]=p8;return p9},{});var p3=Object.keys(d).sort(function(p8,i){return Number(p8)-Number(i)});p3.forEach(function(qa,p8){var i=d[qa];var p9=Number(p3[p8+1])||t;i.forEach(function(qb){qb.endTime=p9})})}}};var eC=typeof window!=="undefined"?window:{},fO=typeof Symbol==="undefined"?"__target":Symbol(),oo="application/javascript",g9=eC.BlobBuilder||eC.WebKitBlobBuilder||eC.MozBlobBuilder||eC.MSBlobBuilder,aH=eC.URL||eC.webkitURL||aH&&aH.msURL,nx=eC.Worker;function pY(d,e){return function i(t){var p5=this;if(!e){return new nx(d)}else{if(nx&&!t){var p4=e.toString().replace(/^function.+?{/,"").slice(0,-1),p3=gK(p4);this[fO]=new nx(p3);Y(this[fO],p3);return this[fO]}else{var on={postMessage:function r(p6){if(p5.onmessage){setTimeout(function(){p5.onmessage({data:p6,target:on})})}}};e.call(on);this.postMessage=function(p6){setTimeout(function(){on.onmessage({data:p6,target:p5})})};this.isThisThread=true}}}}if(nx){var bO,lx=gK("self.onmessage = function () {}"),eR=new Uint8Array(1);try{bO=new nx(lx);bO.postMessage(eR,[eR.buffer])}catch(o3){nx=null}finally{aH.revokeObjectURL(lx);if(bO){bO.terminate()}}}function gK(r){try{return aH.createObjectURL(new Blob([r],{type:oo}))}catch(i){var d=new g9();d.append(r);return aH.createObjectURL(d.getBlob(jq))}}function Y(i,e){if(!i||!e){return}var d=i.terminate;i.objURL=e;i.terminate=function(){if(i.objURL){aH.revokeObjectURL(i.objURL)}d.call(i)}}var iB=new pY("./transmuxer-worker.worker.js",function(i,r){var e=this;var d=function(){var sd=function sd(){this.init=function(){var sL={};this.on=function(sM,sN){if(!sL[sM]){sL[sM]=[]}sL[sM]=sL[sM].concat(sN)};this.off=function(sN,sO){var sM;if(!sL[sN]){return false}sM=sL[sN].indexOf(sO);sL[sN]=sL[sN].slice();sL[sN].splice(sM,1);return sM>-1};this.trigger=function(sO){var sQ,sN,sP,sM;sQ=sL[sO];if(!sQ){return}if(arguments.length===2){sP=sQ.length;for(sN=0;sN<sP;++sN){sQ[sN].call(this,arguments[1])}}else{sM=[];sN=arguments.length;for(sN=1;sN<arguments.length;++sN){sM.push(arguments[sN])}sP=sQ.length;for(sN=0;sN<sP;++sN){sQ[sN].apply(this,sM)}}};this.dispose=function(){sL={}}}};sd.prototype.pipe=function(sL){this.on("data",function(sM){sL.push(sM)});this.on("done",function(sM){sL.flush(sM)});this.on("partialdone",function(sM){sL.partialFlush(sM)});this.on("endedtimeline",function(sM){sL.endTimeline(sM)});this.on("reset",function(sM){sL.reset(sM)});return sL};sd.prototype.push=function(sL){this.trigger("data",sL)};sd.prototype.flush=function(sL){this.trigger("done",sL)};sd.prototype.partialFlush=function(sL){this.trigger("partialdone",sL)};sd.prototype.endTimeline=function(sL){this.trigger("endedtimeline",sL)};sd.prototype.reset=function(sL){this.trigger("reset",sL)};var qg=sd;var r3=Math.pow(2,32)-1;var se,p8,sy,sD,rt,p4,sK,sn,sg,qd,so,sF,sI,sC,p7,rz,qX,rJ,qT,sG,rF,qZ,p5,rn,ru,rB,q9,qy,sk,rd,r7,qF,rC,qW,qK,qA;(function(){var sL;p5={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],pasp:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]};if(typeof Uint8Array==="undefined"){return}for(sL in p5){if(p5.hasOwnProperty(sL)){p5[sL]=[sL.charCodeAt(0),sL.charCodeAt(1),sL.charCodeAt(2),sL.charCodeAt(3)]}}rn=new Uint8Array(["i".charCodeAt(0),"s".charCodeAt(0),"o".charCodeAt(0),"m".charCodeAt(0)]);rB=new Uint8Array(["a".charCodeAt(0),"v".charCodeAt(0),"c".charCodeAt(0),"1".charCodeAt(0)]);ru=new Uint8Array([0,0,0,1]);q9=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]);qy=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);sk={video:q9,audio:qy};qF=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]);r7=new Uint8Array([0,0,0,0,0,0,0,0]);rC=new Uint8Array([0,0,0,0,0,0,0,0]);qW=rC;qK=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]);qA=rC;rd=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])})();se=function se(sP){var sQ=[],sO=0,sN,sL,sM;for(sN=1;sN<arguments.length;sN++){sQ.push(arguments[sN])}sN=sQ.length;while(sN--){sO+=sQ[sN].byteLength}sL=new Uint8Array(sO+8);sM=new DataView(sL.buffer,sL.byteOffset,sL.byteLength);sM.setUint32(0,sL.byteLength);sL.set(sP,4);for(sN=0,sO=8;sN<sQ.length;sN++){sL.set(sQ[sN],sO);sO+=sQ[sN].byteLength}return sL};p8=function p8(){return se(p5.dinf,se(p5.dref,qF))};sy=function sy(sL){return se(p5.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,sL.audioobjecttype<<3|sL.samplingfrequencyindex>>>1,sL.samplingfrequencyindex<<7|sL.channelcount<<3,6,1,2]))};sD=function sD(){return se(p5.ftyp,rn,ru,rn,rB)};rz=function rz(sL){return se(p5.hdlr,sk[sL])};rt=function rt(sL){return se(p5.mdat,sL)};p7=function p7(sM){var sL=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,sM.duration>>>24&255,sM.duration>>>16&255,sM.duration>>>8&255,sM.duration&255,85,196,0,0]);if(sM.samplerate){sL[12]=sM.samplerate>>>24&255;sL[13]=sM.samplerate>>>16&255;sL[14]=sM.samplerate>>>8&255;sL[15]=sM.samplerate&255}return se(p5.mdhd,sL)};sC=function sC(sL){return se(p5.mdia,p7(sL),rz(sL.type),sK(sL))};p4=function p4(sL){return se(p5.mfhd,new Uint8Array([0,0,0,0,(sL&4278190080)>>24,(sL&16711680)>>16,(sL&65280)>>8,sL&255]))};sK=function sK(sL){return se(p5.minf,sL.type==="video"?se(p5.vmhd,rd):se(p5.smhd,r7),p8(),rJ(sL))};sn=function sn(sL,sM){var sO=[],sN=sM.length;while(sN--){sO[sN]=sG(sM[sN])}return se.apply(null,[p5.moof,p4(sL)].concat(sO))};sg=function sg(sL){var sN=sL.length,sM=[];while(sN--){sM[sN]=sF(sL[sN])}return se.apply(null,[p5.moov,so(4294967295)].concat(sM).concat(qd(sL)))};qd=function qd(sL){var sN=sL.length,sM=[];while(sN--){sM[sN]=rF(sL[sN])}return se.apply(null,[p5.mvex].concat(sM))};so=function so(sM){var sL=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(sM&4278190080)>>24,(sM&16711680)>>16,(sM&65280)>>8,sM&255,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return se(p5.mvhd,sL)};qX=function qX(sN){var sO=sN.samples||[],sM=new Uint8Array(4+sO.length),sL,sP;for(sP=0;sP<sO.length;sP++){sL=sO[sP].flags;sM[sP+4]=sL.dependsOn<<4|sL.isDependedOn<<2|sL.hasRedundancy}return se(p5.sdtp,sM)};rJ=function rJ(sL){return se(p5.stbl,qT(sL),se(p5.stts,qA),se(p5.stsc,qW),se(p5.stsz,qK),se(p5.stco,rC))};(function(){var sN,sM;sL=function sL(sO){return se(p5.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),sO.type==="video"?sN(sO):sM(sO))};sN=function sN(sP){var sO=sP.sps||[],sR=sP.pps||[],sQ=[],sU=[],sS,sV;for(sS=0;sS<sO.length;sS++){sQ.push((sO[sS].byteLength&65280)>>>8);sQ.push(sO[sS].byteLength&255);sQ=sQ.concat(Array.prototype.slice.call(sO[sS]))}for(sS=0;sS<sR.length;sS++){sU.push((sR[sS].byteLength&65280)>>>8);sU.push(sR[sS].byteLength&255);sU=sU.concat(Array.prototype.slice.call(sR[sS]))}sV=[p5.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(sP.width&65280)>>8,sP.width&255,(sP.height&65280)>>8,sP.height&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),se(p5.avcC,new Uint8Array([1,sP.profileIdc,sP.profileCompatibility,sP.levelIdc,255].concat([sO.length],sQ,[sR.length],sU))),se(p5.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192]))];if(sP.sarRatio){var sT=sP.sarRatio[0],sW=sP.sarRatio[1];sV.push(se(p5.pasp,new Uint8Array([(sT&4278190080)>>24,(sT&16711680)>>16,(sT&65280)>>8,sT&255,(sW&4278190080)>>24,(sW&16711680)>>16,(sW&65280)>>8,sW&255])))}return se.apply(null,sV)};sM=function sM(sO){return se(p5.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(sO.channelcount&65280)>>8,sO.channelcount&255,(sO.samplesize&65280)>>8,sO.samplesize&255,0,0,0,0,(sO.samplerate&65280)>>8,sO.samplerate&255,0,0]),sy(sO))}})();sI=function sI(sM){var sL=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(sM.id&4278190080)>>24,(sM.id&16711680)>>16,(sM.id&65280)>>8,sM.id&255,0,0,0,0,(sM.duration&4278190080)>>24,(sM.duration&16711680)>>16,(sM.duration&65280)>>8,sM.duration&255,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(sM.width&65280)>>8,sM.width&255,0,0,(sM.height&65280)>>8,sM.height&255,0,0]);return se(p5.tkhd,sL)};sG=function sG(sM){var sR,sO,sP,sN,sL,sS,sQ;sR=se(p5.tfhd,new Uint8Array([0,0,0,58,(sM.id&4278190080)>>24,(sM.id&16711680)>>16,(sM.id&65280)>>8,sM.id&255,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0]));sS=Math.floor(sM.baseMediaDecodeTime/(r3+1));sQ=Math.floor(sM.baseMediaDecodeTime%(r3+1));sO=se(p5.tfdt,new Uint8Array([1,0,0,0,sS>>>24&255,sS>>>16&255,sS>>>8&255,sS&255,sQ>>>24&255,sQ>>>16&255,sQ>>>8&255,sQ&255]));sL=32+20+8+16+8+8;if(sM.type==="audio"){sP=qZ(sM,sL);return se(p5.traf,sR,sO,sP)}sN=qX(sM);sP=qZ(sM,sN.length+sL);return se(p5.traf,sR,sO,sP,sN)};sF=function sF(sL){sL.duration=sL.duration||4294967295;return se(p5.trak,sI(sL),sC(sL))};rF=function rF(sM){var sL=new Uint8Array([0,0,0,0,(sM.id&4278190080)>>24,(sM.id&16711680)>>16,(sM.id&65280)>>8,sM.id&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);if(sM.type!=="video"){sL[sL.length-1]=0}return se(p5.trex,sL)};(function(){var sO,sM,sN;sN=function sN(sR,sU){var sQ=0,sS=0,sT=0,sP=0;if(sR.length){if(sR[0].duration!==undefined){sQ=1}if(sR[0].size!==undefined){sS=2}if(sR[0].flags!==undefined){sT=4}if(sR[0].compositionTimeOffset!==undefined){sP=8}}return[0,0,sQ|sS|sT|sP,1,(sR.length&4278190080)>>>24,(sR.length&16711680)>>>16,(sR.length&65280)>>>8,sR.length&255,(sU&4278190080)>>>24,(sU&16711680)>>>16,(sU&65280)>>>8,sU&255]};sM=function sM(sQ,sU){var sP,sR,sT,sS;sR=sQ.samples||[];sU+=8+12+16*sR.length;sP=sN(sR,sU);for(sS=0;sS<sR.length;sS++){sT=sR[sS];sP=sP.concat([(sT.duration&4278190080)>>>24,(sT.duration&16711680)>>>16,(sT.duration&65280)>>>8,sT.duration&255,(sT.size&4278190080)>>>24,(sT.size&16711680)>>>16,(sT.size&65280)>>>8,sT.size&255,sT.flags.isLeading<<2|sT.flags.dependsOn,sT.flags.isDependedOn<<6|sT.flags.hasRedundancy<<4|sT.flags.paddingValue<<1|sT.flags.isNonSyncSample,sT.flags.degradationPriority&240<<8,sT.flags.degradationPriority&15,(sT.compositionTimeOffset&4278190080)>>>24,(sT.compositionTimeOffset&16711680)>>>16,(sT.compositionTimeOffset&65280)>>>8,sT.compositionTimeOffset&255])}return se(p5.trun,new Uint8Array(sP))};sO=function sO(sQ,sU){var sP,sR,sT,sS;sR=sQ.samples||[];sU+=8+12+8*sR.length;sP=sN(sR,sU);for(sS=0;sS<sR.length;sS++){sT=sR[sS];sP=sP.concat([(sT.duration&4278190080)>>>24,(sT.duration&16711680)>>>16,(sT.duration&65280)>>>8,sT.duration&255,(sT.size&4278190080)>>>24,(sT.size&16711680)>>>16,(sT.size&65280)>>>8,sT.size&255])}return se(p5.trun,new Uint8Array(sP))};sL=function sL(sP,sQ){if(sP.type==="audio"){return sO(sP,sQ)}return sM(sP,sQ)}})();var rK={ftyp:sD,mdat:rt,moof:sn,moov:sg,initSegment:function qH(sO){var sN=sD(),sM=sg(sO),sL;sL=new Uint8Array(sN.byteLength+sM.byteLength);sL.set(sN);sL.set(sM,sN.byteLength);return sL}};var rh=function rh(sM){var sN,sL,sO=[],sP=[];sP.byteLength=0;sP.nalCount=0;sP.duration=0;sO.byteLength=0;for(sN=0;sN<sM.length;sN++){sL=sM[sN];if(sL.nalUnitType==="access_unit_delimiter_rbsp"){if(sO.length){sO.duration=sL.dts-sO.dts;sP.byteLength+=sO.byteLength;sP.nalCount+=sO.length;sP.duration+=sO.duration;sP.push(sO)}sO=[sL];sO.byteLength=sL.data.byteLength;sO.pts=sL.pts;sO.dts=sL.dts}else{if(sL.nalUnitType==="slice_layer_without_partitioning_rbsp_idr"){sO.keyFrame=true}sO.duration=sL.dts-sO.dts;sO.byteLength+=sL.data.byteLength;sO.push(sL)}}if(sP.length&&(!sO.duration||sO.duration<=0)){sO.duration=sP[sP.length-1].duration}sP.byteLength+=sO.byteLength;sP.nalCount+=sO.length;sP.duration+=sO.duration;sP.push(sO);return sP};var sB=function sB(sO){var sM,sN,sP=[],sL=[];sP.byteLength=0;sP.nalCount=0;sP.duration=0;sP.pts=sO[0].pts;sP.dts=sO[0].dts;sL.byteLength=0;sL.nalCount=0;sL.duration=0;sL.pts=sO[0].pts;sL.dts=sO[0].dts;for(sM=0;sM<sO.length;sM++){sN=sO[sM];if(sN.keyFrame){if(sP.length){sL.push(sP);sL.byteLength+=sP.byteLength;sL.nalCount+=sP.nalCount;sL.duration+=sP.duration}sP=[sN];sP.nalCount=sN.length;sP.byteLength=sN.byteLength;sP.pts=sN.pts;sP.dts=sN.dts;sP.duration=sN.duration}else{sP.duration+=sN.duration;sP.nalCount+=sN.length;sP.byteLength+=sN.byteLength;sP.push(sN)}}if(sL.length&&sP.duration<=0){sP.duration=sL[sL.length-1].duration}sL.byteLength+=sP.byteLength;sL.nalCount+=sP.nalCount;sL.duration+=sP.duration;sL.push(sP);return sL};var sa=function sa(sL){var sM;if(!sL[0][0].keyFrame&&sL.length>1){sM=sL.shift();sL.byteLength-=sM.byteLength;sL.nalCount-=sM.nalCount;sL[0][0].dts=sM.dts;sL[0][0].pts=sM.pts;sL[0][0].duration+=sM.duration}return sL};var t=function t(){return{size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:1}}};var sJ=function sJ(sN,sL){var sM=t();sM.dataOffset=sL;sM.compositionTimeOffset=sN.pts-sN.dts;sM.duration=sN.duration;sM.size=4*sN.length;sM.size+=sN.byteLength;if(sN.keyFrame){sM.flags.dependsOn=2;sM.flags.isNonSyncSample=0}return sM};var rQ=function rQ(sN,sM){var sQ,sP,sT,sS,sL,sO=sM||0,sR=[];for(sQ=0;sQ<sN.length;sQ++){sS=sN[sQ];for(sP=0;sP<sS.length;sP++){sL=sS[sP];sT=sJ(sL,sO);sO+=sT.size;sR.push(sT)}}return sR};var qL=function qL(sO){var sU,sT,sQ,sX,sN,sP,sR=0,sV=sO.byteLength,sM=sO.nalCount,sL=sV+4*sM,sS=new Uint8Array(sL),sW=new DataView(sS.buffer);for(sU=0;sU<sO.length;sU++){sX=sO[sU];for(sT=0;sT<sX.length;sT++){sN=sX[sT];for(sQ=0;sQ<sN.length;sQ++){sP=sN[sQ];sW.setUint32(sR,sP.data.byteLength);sR+=4;sS.set(sP.data,sR);sR+=sP.data.byteLength}}}return sS};var sA=function sA(sP,sN){var sO,sL=sN||0,sM=[];sO=sJ(sP,sL);sM.push(sO);return sM};var qj=function qj(sM){var sR,sO,sP=0,sS=sM.byteLength,sN=sM.length,sL=sS+4*sN,sQ=new Uint8Array(sL),sT=new DataView(sQ.buffer);for(sR=0;sR<sM.length;sR++){sO=sM[sR];sT.setUint32(sP,sO.data.byteLength);sP+=4;sQ.set(sO.data,sP);sP+=sO.data.byteLength}return sQ};var rW={groupNalsIntoFrames:rh,groupFramesIntoGops:sB,extendFirstKeyFrame:sa,generateSampleTable:rQ,concatenateNalData:qL,generateSampleTableForFrame:sA,concatenateNalDataForFrame:qj};var sh=[33,16,5,32,164,27];var ro=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252];var qt=function qt(sM){var sL=[];while(sM--){sL.push(0)}return sL};var r2=function r2(sL){return Object.keys(sL).reduce(function(sN,sM){sN[sM]=new Uint8Array(sL[sM].reduce(function(sO,sP){return sO.concat(sP)},[]));return sN},{})};var rl={96000:[sh,[227,64],qt(154),[56]],88200:[sh,[231],qt(170),[56]],64000:[sh,[248,192],qt(240),[56]],48000:[sh,[255,192],qt(268),[55,148,128],qt(54),[112]],44100:[sh,[255,192],qt(268),[55,163,128],qt(84),[112]],32000:[sh,[255,192],qt(268),[55,234],qt(226),[112]],24000:[sh,[255,192],qt(268),[55,255,128],qt(268),[111,112],qt(126),[224]],16000:[sh,[255,192],qt(268),[55,255,128],qt(268),[111,255],qt(269),[223,108],qt(195),[1,192]],12000:[ro,qt(268),[3,127,248],qt(268),[6,255,240],qt(268),[13,255,224],qt(268),[27,253,128],qt(259),[56]],11025:[ro,qt(268),[3,127,248],qt(268),[6,255,240],qt(268),[13,255,224],qt(268),[27,255,192],qt(268),[55,175,128],qt(108),[112]],8000:[ro,qt(268),[3,121,16],qt(47),[7]]};var rM=r2(rl);var rE=90000,qV,rU,qr,q7,r0,sm,qp;qV=function qV(sL){return sL*rE};rU=function rU(sM,sL){return sM*sL};qr=function qr(sL){return sL/rE};q7=function q7(sM,sL){return sM/sL};r0=function r0(sM,sL){return qV(q7(sM,sL))};sm=function sm(sM,sL){return rU(qr(sM),sL)};qp=function qp(sN,sL,sM){return qr(sM?sN:sN-sL)};var rR={ONE_SECOND_IN_TS:rE,secondsToVideoTs:qV,secondsToAudioTs:rU,videoTsToSeconds:qr,audioTsToSeconds:q7,audioTsToVideoTs:r0,videoTsToAudioTs:sm,metadataTsToSeconds:qp};var sb=function sb(sO){var sM,sL,sN=0;for(sM=0;sM<sO.length;sM++){sL=sO[sM];sN+=sL.data.byteLength}return sN};var qc=function qc(sM,sQ,sN,sS){var sV,sL=0,sW=0,sP=0,sU=0,sT,sO,sR;if(!sQ.length){return}sV=rR.audioTsToVideoTs(sM.baseMediaDecodeTime,sM.samplerate);sL=Math.ceil(rR.ONE_SECOND_IN_TS/(sM.samplerate/1024));if(sN&&sS){sW=sV-Math.max(sN,sS);sP=Math.floor(sW/sL);sU=sP*sL}if(sP<1||sU>rR.ONE_SECOND_IN_TS/2){return}sT=rM[sM.samplerate];if(!sT){sT=sQ[0].data}for(sO=0;sO<sP;sO++){sR=sQ[0];sQ.splice(0,0,{data:sT,dts:sR.dts-sL,pts:sR.pts-sL})}sM.baseMediaDecodeTime-=Math.floor(rR.videoTsToAudioTs(sU,sM.samplerate))};var rP=function rP(sM,sL,sN){if(sL.minSegmentDts>=sN){return sM}sL.minSegmentDts=Infinity;return sM.filter(function(sO){if(sO.dts>=sN){sL.minSegmentDts=Math.min(sL.minSegmentDts,sO.dts);sL.minSegmentPts=sL.minSegmentDts;return true}return false})};var qQ=function rQ(sO){var sM,sN,sL=[];for(sM=0;sM<sO.length;sM++){sN=sO[sM];sL.push({size:sN.data.byteLength,duration:1024})}return sL};var q1=function q1(sP){var sM,sO,sL=0,sN=new Uint8Array(sb(sP));for(sM=0;sM<sP.length;sM++){sO=sP[sM];sN.set(sO.data,sL);sL+=sO.data.byteLength}return sN};var qk={prefixWithSilence:qc,trimAdtsFramesByEarliestDts:rP,generateSampleTable:qQ,concatenateFrameData:q1};var qi=rR.ONE_SECOND_IN_TS;var sH=function sH(sL,sM){if(typeof sM.pts==="number"){if(sL.timelineStartInfo.pts===undefined){sL.timelineStartInfo.pts=sM.pts}if(sL.minSegmentPts===undefined){sL.minSegmentPts=sM.pts}else{sL.minSegmentPts=Math.min(sL.minSegmentPts,sM.pts)}if(sL.maxSegmentPts===undefined){sL.maxSegmentPts=sM.pts}else{sL.maxSegmentPts=Math.max(sL.maxSegmentPts,sM.pts)}}if(typeof sM.dts==="number"){if(sL.timelineStartInfo.dts===undefined){sL.timelineStartInfo.dts=sM.dts}if(sL.minSegmentDts===undefined){sL.minSegmentDts=sM.dts}else{sL.minSegmentDts=Math.min(sL.minSegmentDts,sM.dts)}if(sL.maxSegmentDts===undefined){sL.maxSegmentDts=sM.dts}else{sL.maxSegmentDts=Math.max(sL.maxSegmentDts,sM.dts)}}};var sc=function sc(sL){delete sL.minSegmentDts;delete sL.maxSegmentDts;delete sL.minSegmentPts;delete sL.maxSegmentPts};var qo=function qo(sL,sN){var sM,sP,sO=sL.minSegmentDts;if(!sN){sO-=sL.timelineStartInfo.dts}sM=sL.timelineStartInfo.baseMediaDecodeTime;sM+=sO;sM=Math.max(0,sM);if(sL.type==="audio"){sP=sL.samplerate/qi;sM*=sP;sM=Math.floor(sM)}return sM};var rD={clearDtsInfo:sc,calculateTrackBaseMediaDecodeTime:qo,collectDtsInfo:sH};var rZ=4,rA=128;var rH=function rH(sM){var sO=0,sL={payloadType:-1,payloadSize:0},sP=0,sN=0;while(sO<sM.byteLength){if(sM[sO]===rA){break}while(sM[sO]===255){sP+=255;sO++}sP+=sM[sO++];while(sM[sO]===255){sN+=255;sO++}sN+=sM[sO++];if(!sL.payload&&sP===rZ){sL.payloadType=sP;sL.payloadSize=sN;sL.payload=sM.subarray(sO,sO+sN);break}sO+=sN;sP=0;sN=0}return sL};var qN=function qN(sL){if(sL.payload[0]!==181){return null}if((sL.payload[1]<<8|sL.payload[2])!==49){return null}if(String.fromCharCode(sL.payload[3],sL.payload[4],sL.payload[5],sL.payload[6])!=="GA94"){return null}if(sL.payload[7]!==3){return null}return sL.payload.subarray(8,sL.payload.length-1)};var qs=function qs(sR,sL){var sN=[],sM,sO,sQ,sP;if(!(sL[0]&64)){return sN}sO=sL[0]&31;for(sM=0;sM<sO;sM++){sQ=sM*3;sP={type:sL[sQ+2]&3,pts:sR};if(sL[sQ+2]&4){sP.ccData=sL[sQ+3]<<8|sL[sQ+4];sN.push(sP)}}return sN};var ql=function ql(sR){var sP=sR.byteLength,sM=[],sN=1,sQ,sO;while(sN<sP-2){if(sR[sN]===0&&sR[sN+1]===0&&sR[sN+2]===3){sM.push(sN+2);sN+=2}else{sN++}}if(sM.length===0){return sR}sQ=sP-sM.length;sO=new Uint8Array(sQ);var sL=0;for(sN=0;sN<sQ;sL++,sN++){if(sL===sM[0]){sL++;sM.shift()}sO[sN]=sR[sL]}return sO};var sx={parseSei:rH,parseUserData:qN,parseCaptionPackets:qs,discardEmulationPreventionBytes:ql,USER_DATA_REGISTERED_ITU_T_T35:rZ};var p6=function p6(){p6.prototype.init.call(this);this.captionPackets_=[];this.ccStreams_=[new rG(0,0),new rG(0,1),new rG(1,0),new rG(1,1)];this.reset();this.ccStreams_.forEach(function(sL){sL.on("data",this.trigger.bind(this,"data"));sL.on("partialdone",this.trigger.bind(this,"partialdone"));sL.on("done",this.trigger.bind(this,"done"))},this)};p6.prototype=new qg();p6.prototype.push=function(sN){var sO,sL,sM;if(sN.nalUnitType!=="sei_rbsp"){return}sO=sx.parseSei(sN.escapedRBSP);if(sO.payloadType!==sx.USER_DATA_REGISTERED_ITU_T_T35){return}sL=sx.parseUserData(sO);if(!sL){return}if(sN.dts<this.latestDts_){this.ignoreNextEqualDts_=true;return}else{if(sN.dts===this.latestDts_&&this.ignoreNextEqualDts_){this.numSameDts_--;if(!this.numSameDts_){this.ignoreNextEqualDts_=false}return}}sM=sx.parseCaptionPackets(sN.pts,sL);this.captionPackets_=this.captionPackets_.concat(sM);if(this.latestDts_!==sN.dts){this.numSameDts_=0}this.numSameDts_++;this.latestDts_=sN.dts};p6.prototype.flushCCStreams=function(sL){this.ccStreams_.forEach(function(sM){return sL==="flush"?sM.flush():sM.partialFlush()},this)};p6.prototype.flushStream=function(sL){if(!this.captionPackets_.length){this.flushCCStreams(sL);return}this.captionPackets_.forEach(function(sN,sM){sN.presortIndex=sM});this.captionPackets_.sort(function(sN,sM){if(sN.pts===sM.pts){return sN.presortIndex-sM.presortIndex}return sN.pts-sM.pts});this.captionPackets_.forEach(function(sM){if(sM.type<2){this.dispatchCea608Packet(sM)}},this);this.captionPackets_.length=0;this.flushCCStreams(sL)};p6.prototype.flush=function(){return this.flushStream("flush")};p6.prototype.partialFlush=function(){return this.flushStream("partialFlush")};p6.prototype.reset=function(){this.latestDts_=null;this.ignoreNextEqualDts_=false;this.numSameDts_=0;this.activeCea608Channel_=[null,null];this.ccStreams_.forEach(function(sL){sL.reset()})};p6.prototype.dispatchCea608Packet=function(sL){if(this.setsTextOrXDSActive(sL)){this.activeCea608Channel_[sL.type]=null}else{if(this.setsChannel1Active(sL)){this.activeCea608Channel_[sL.type]=0}else{if(this.setsChannel2Active(sL)){this.activeCea608Channel_[sL.type]=1}}}if(this.activeCea608Channel_[sL.type]===null){return}this.ccStreams_[(sL.type<<1)+this.activeCea608Channel_[sL.type]].push(sL)};p6.prototype.setsChannel1Active=function(sL){return(sL.ccData&30720)===4096};p6.prototype.setsChannel2Active=function(sL){return(sL.ccData&30720)===6144};p6.prototype.setsTextOrXDSActive=function(sL){return(sL.ccData&28928)===256||(sL.ccData&30974)===4138||(sL.ccData&30974)===6186};var qR={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496};var r6=function r6(sL){if(sL===null){return""}sL=qR[sL]||sL;return String.fromCharCode(sL)};var rq=14;var qS=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152];var sp=function sp(){var sL=[],sM=rq+1;while(sM--){sL.push("")}return sL};var rG=function rG(sM,sL){rG.prototype.init.call(this);this.field_=sM||0;this.dataChannel_=sL||0;this.name_="CC"+((this.field_<<1|this.dataChannel_)+1);this.setConstants();this.reset();this.push=function(sR){var sP,sQ,sO,sN,sT;sP=sR.ccData&32639;if(sP===this.lastControlCode_){this.lastControlCode_=null;return}if((sP&61440)===4096){this.lastControlCode_=sP}else{if(sP!==this.PADDING_){this.lastControlCode_=null}}sO=sP>>>8;sN=sP&255;if(sP===this.PADDING_){return}else{if(sP===this.RESUME_CAPTION_LOADING_){this.mode_="popOn"}else{if(sP===this.END_OF_CAPTION_){this.mode_="popOn";this.clearFormatting(sR.pts);this.flushDisplayed(sR.pts);sQ=this.displayed_;this.displayed_=this.nonDisplayed_;this.nonDisplayed_=sQ;this.startPts_=sR.pts}else{if(sP===this.ROLL_UP_2_ROWS_){this.rollUpRows_=2;this.setRollUp(sR.pts)}else{if(sP===this.ROLL_UP_3_ROWS_){this.rollUpRows_=3;this.setRollUp(sR.pts)}else{if(sP===this.ROLL_UP_4_ROWS_){this.rollUpRows_=4;this.setRollUp(sR.pts)}else{if(sP===this.CARRIAGE_RETURN_){this.clearFormatting(sR.pts);this.flushDisplayed(sR.pts);this.shiftRowsUp_();this.startPts_=sR.pts}else{if(sP===this.BACKSPACE_){if(this.mode_==="popOn"){this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1)}else{this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1)}}else{if(sP===this.ERASE_DISPLAYED_MEMORY_){this.flushDisplayed(sR.pts);this.displayed_=sp()}else{if(sP===this.ERASE_NON_DISPLAYED_MEMORY_){this.nonDisplayed_=sp()}else{if(sP===this.RESUME_DIRECT_CAPTIONING_){if(this.mode_!=="paintOn"){this.flushDisplayed(sR.pts);this.displayed_=sp()}this.mode_="paintOn";this.startPts_=sR.pts}else{if(this.isSpecialCharacter(sO,sN)){sO=(sO&3)<<8;sT=r6(sO|sN);this[this.mode_](sR.pts,sT);this.column_++}else{if(this.isExtCharacter(sO,sN)){if(this.mode_==="popOn"){this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1)}else{this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1)}sO=(sO&3)<<8;sT=r6(sO|sN);this[this.mode_](sR.pts,sT);this.column_++}else{if(this.isMidRowCode(sO,sN)){this.clearFormatting(sR.pts);this[this.mode_](sR.pts," ");this.column_++;if((sN&14)===14){this.addFormatting(sR.pts,["i"])}if((sN&1)===1){this.addFormatting(sR.pts,["u"])}}else{if(this.isOffsetControlCode(sO,sN)){this.column_+=sN&3}else{if(this.isPAC(sO,sN)){var sS=qS.indexOf(sP&7968);if(this.mode_==="rollUp"){if(sS-this.rollUpRows_+1<0){sS=this.rollUpRows_-1}this.setRollUp(sR.pts,sS)}if(sS!==this.row_){this.clearFormatting(sR.pts);this.row_=sS}if(sN&1&&this.formatting_.indexOf("u")===-1){this.addFormatting(sR.pts,["u"])}if((sP&16)===16){this.column_=((sP&14)>>1)*4}if(this.isColorPAC(sN)){if((sN&14)===14){this.addFormatting(sR.pts,["i"])}}}else{if(this.isNormalChar(sO)){if(sN===0){sN=null}sT=r6(sO);sT+=r6(sN);this[this.mode_](sR.pts,sT);this.column_+=sT.length}}}}}}}}}}}}}}}}}}};rG.prototype=new qg();rG.prototype.flushDisplayed=function(sM){var sL=this.displayed_.map(function(sO){try{return sO.trim()}catch(sN){console.error("Skipping malformed caption.");return""}}).join("\n").replace(/^\n+|\n+$/g,"");if(sL.length){this.trigger("data",{startPts:this.startPts_,endPts:sM,text:sL,stream:this.name_})}};rG.prototype.reset=function(){this.mode_="popOn";this.topRow_=0;this.startPts_=0;this.displayed_=sp();this.nonDisplayed_=sp();this.lastControlCode_=null;this.column_=0;this.row_=rq;this.rollUpRows_=2;this.formatting_=[]};rG.prototype.setConstants=function(){if(this.dataChannel_===0){this.BASE_=16;this.EXT_=17;this.CONTROL_=(20|this.field_)<<8;this.OFFSET_=23}else{if(this.dataChannel_===1){this.BASE_=24;this.EXT_=25;this.CONTROL_=(28|this.field_)<<8;this.OFFSET_=31}}this.PADDING_=0;this.RESUME_CAPTION_LOADING_=this.CONTROL_|32;this.END_OF_CAPTION_=this.CONTROL_|47;this.ROLL_UP_2_ROWS_=this.CONTROL_|37;this.ROLL_UP_3_ROWS_=this.CONTROL_|38;this.ROLL_UP_4_ROWS_=this.CONTROL_|39;this.CARRIAGE_RETURN_=this.CONTROL_|45;this.RESUME_DIRECT_CAPTIONING_=this.CONTROL_|41;this.BACKSPACE_=this.CONTROL_|33;this.ERASE_DISPLAYED_MEMORY_=this.CONTROL_|44;this.ERASE_NON_DISPLAYED_MEMORY_=this.CONTROL_|46};rG.prototype.isSpecialCharacter=function(sM,sL){return sM===this.EXT_&&sL>=48&&sL<=63};rG.prototype.isExtCharacter=function(sM,sL){return(sM===this.EXT_+1||sM===this.EXT_+2)&&sL>=32&&sL<=63};rG.prototype.isMidRowCode=function(sM,sL){return sM===this.EXT_&&sL>=32&&sL<=47};rG.prototype.isOffsetControlCode=function(sM,sL){return sM===this.OFFSET_&&sL>=33&&sL<=35};rG.prototype.isPAC=function(sM,sL){return sM>=this.BASE_&&sM<this.BASE_+8&&sL>=64&&sL<=127};rG.prototype.isColorPAC=function(sL){return sL>=64&&sL<=79||sL>=96&&sL<=127};rG.prototype.isNormalChar=function(sL){return sL>=32&&sL<=127};rG.prototype.setRollUp=function(sN,sM){if(this.mode_!=="rollUp"){this.row_=rq;this.mode_="rollUp";this.flushDisplayed(sN);this.nonDisplayed_=sp();this.displayed_=sp()}if(sM!==undefined&&sM!==this.row_){for(var sL=0;sL<this.rollUpRows_;sL++){this.displayed_[sM-sL]=this.displayed_[this.row_-sL];this.displayed_[this.row_-sL]=""}}if(sM===undefined){sM=this.row_}this.topRow_=sM-this.rollUpRows_+1};rG.prototype.addFormatting=function(sN,sL){this.formatting_=this.formatting_.concat(sL);var sM=sL.reduce(function(sP,sO){return sP+"<"+sO+">"},"");this[this.mode_](sN,sM)};rG.prototype.clearFormatting=function(sM){if(!this.formatting_.length){return}var sL=this.formatting_.reverse().reduce(function(sO,sN){return sO+"</"+sN+">"},"");this.formatting_=[];this[this.mode_](sM,sL)};rG.prototype.popOn=function(sN,sM){var sL=this.nonDisplayed_[this.row_];sL+=sM;this.nonDisplayed_[this.row_]=sL};rG.prototype.rollUp=function(sN,sM){var sL=this.displayed_[this.row_];sL+=sM;this.displayed_[this.row_]=sL};rG.prototype.shiftRowsUp_=function(){var sL;for(sL=0;sL<this.topRow_;sL++){this.displayed_[sL]=""}for(sL=this.row_+1;sL<rq+1;sL++){this.displayed_[sL]=""}for(sL=this.topRow_;sL<this.row_;sL++){this.displayed_[sL]=this.displayed_[sL+1]}this.displayed_[this.row_]=""};rG.prototype.paintOn=function(sN,sM){var sL=this.displayed_[this.row_];sL+=sM;this.displayed_[this.row_]=sL};var rY={CaptionStream:p6,Cea608Stream:rG};var st={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21};var qu=8589934592;var rc=4294967296;var rS="shared";var qO=function qO(sM,sL){var sN=1;if(sM>sL){sN=-1}while(Math.abs(sL-sM)>rc){sM+=sN*qu}return sM};var rb=function rb(sN){var sL,sM;rb.prototype.init.call(this);this.type_=sN||rS;this.push=function(sO){if(this.type_!==rS&&sO.type!==this.type_){return}if(sM===undefined){sM=sO.dts}sO.dts=qO(sO.dts,sM);sO.pts=qO(sO.pts,sM);sL=sO.dts;this.trigger("data",sO)};this.flush=function(){sM=sL;this.trigger("done")};this.endTimeline=function(){this.flush();this.trigger("endedtimeline")};this.discontinuity=function(){sM=void 0;sL=void 0};this.reset=function(){this.discontinuity();this.trigger("reset")}};rb.prototype=new qg();var ss={TimestampRolloverStream:rb,handleRollover:qO};var rs=function rs(sN,sP,sM){var sO,sL="";for(sO=sP;sO<sM;sO++){sL+="%"+("00"+sN[sO].toString(16)).slice(-2)}return sL},qv=function qv(sM,sN,sL){return decodeURIComponent(rs(sM,sN,sL))},qY=function qY(sM,sN,sL){return unescape(rs(sM,sN,sL))},sw=function sw(sL){return sL[0]<<21|sL[1]<<14|sL[2]<<7|sL[3]},qq={TXXX:function qa(sL){var sM;if(sL.data[0]!==3){return}for(sM=1;sM<sL.data.length;sM++){if(sL.data[sM]===0){sL.description=qv(sL.data,1,sM);sL.value=qv(sL.data,sM+1,sL.data.length).replace(/\0*$/,"");break}}sL.data=sL.value},WXXX:function rT(sL){var sM;if(sL.data[0]!==3){return}for(sM=1;sM<sL.data.length;sM++){if(sL.data[sM]===0){sL.description=qv(sL.data,1,sM);sL.url=qv(sL.data,sM+1,sL.data.length);break}}},PRIV:function rf(sL){var sM;for(sM=0;sM<sL.data.length;sM++){if(sL.data[sM]===0){sL.owner=qY(sL.data,0,sM);break}}sL.privateData=sL.data.subarray(sM+1);sL.data=sL.privateData}},q6;q6=function rg(sM){var sP={debug:!!(sM&&sM.debug),descriptor:sM&&sM.descriptor},sO=0,sL=[],sQ=0,sN;q6.prototype.init.call(this);this.dispatchType=st.METADATA_STREAM_TYPE.toString(16);if(sP.descriptor){for(sN=0;sN<sP.descriptor.length;sN++){this.dispatchType+=("00"+sP.descriptor[sN].toString(16)).slice(-2)}}this.push=function(sW){var sZ,sV,sS,sR,sT,sX;if(sW.type!=="timed-metadata"){return}if(sW.dataAlignmentIndicator){sQ=0;sL.length=0}if(sL.length===0&&(sW.data.length<10||sW.data[0]!=="I".charCodeAt(0)||sW.data[1]!=="D".charCodeAt(0)||sW.data[2]!=="3".charCodeAt(0))){if(sP.debug){console.log("Skipping unrecognized metadata packet")}return}sL.push(sW);sQ+=sW.data.byteLength;if(sL.length===1){sO=sw(sW.data.subarray(6,10));sO+=10}if(sQ<sO){return}sZ={data:new Uint8Array(sO),frames:[],pts:sL[0].pts,dts:sL[0].dts};for(sT=0;sT<sO;){sZ.data.set(sL[0].data.subarray(0,sO-sT),sT);sT+=sL[0].data.byteLength;sQ-=sL[0].data.byteLength;sL.shift()}sV=10;if(sZ.data[5]&64){sV+=4;sV+=sw(sZ.data.subarray(10,14));sO-=sw(sZ.data.subarray(16,20))}do{sS=sw(sZ.data.subarray(sV+4,sV+8));if(sS<1){return console.log("Malformed ID3 frame encountered. Skipping metadata parsing.")}sX=String.fromCharCode(sZ.data[sV],sZ.data[sV+1],sZ.data[sV+2],sZ.data[sV+3]);sR={id:sX,data:sZ.data.subarray(sV+10,sV+sS+10)};sR.key=sR.id;if(qq[sR.id]){qq[sR.id](sR);if(sR.owner==="com.apple.streaming.transportStreamTimestamp"){var sU=sR.data,sY=(sU[3]&1)<<30|sU[4]<<22|sU[5]<<14|sU[6]<<6|sU[7]>>>2;sY*=4;sY+=sU[7]&3;sR.timeStamp=sY;if(sZ.pts===undefined&&sZ.dts===undefined){sZ.pts=sR.timeStamp;sZ.dts=sR.timeStamp}this.trigger("timestamp",sR)}}sZ.frames.push(sR);sV+=10;sV+=sS}while(sV<sO);this.trigger("data",sZ)}};q6.prototype=new qg();var qM=q6;var si=ss.TimestampRolloverStream;var su,qb,q5;var qI=188,rv=71;su=function rL(){var sL=new Uint8Array(qI),sM=0;su.prototype.init.call(this);this.push=function(sN){var sQ=0,sP=qI,sO;if(sM){sO=new Uint8Array(sN.byteLength+sM);sO.set(sL.subarray(0,sM));sO.set(sN,sM);sM=0}else{sO=sN}while(sP<sO.byteLength){if(sO[sQ]===rv&&sO[sP]===rv){this.trigger("data",sO.subarray(sQ,sP));sQ+=qI;sP+=qI;continue}sQ++;sP++}if(sQ<sO.byteLength){sL.set(sO.subarray(sQ),0);sM=sO.byteLength-sQ}};this.flush=function(){if(sM===qI&&sL[0]===rv){this.trigger("data",sL);sM=0}this.trigger("done")};this.endTimeline=function(){this.flush();this.trigger("endedtimeline")};this.reset=function(){sM=0;this.trigger("reset")}};su.prototype=new qg();qb=function rp(){var sO,sL,sN,sM;qb.prototype.init.call(this);sM=this;this.packetsWaitingForPmt=[];this.programMapTable=undefined;sO=function sO(sQ,sP){var sR=0;if(sP.payloadUnitStartIndicator){sR+=sQ[sR]+1}if(sP.type==="pat"){sL(sQ.subarray(sR),sP)}else{sN(sQ.subarray(sR),sP)}};sL=function sL(sQ,sP){sP.section_number=sQ[7];sP.last_section_number=sQ[8];sM.pmtPid=(sQ[10]&31)<<8|sQ[11];sP.pmtPid=sM.pmtPid};sN=function sN(sV,sU){var sP,sS,sR,sW;if(!(sV[5]&1)){return}sM.programMapTable={video:null,audio:null,"timed-metadata":{}};sP=(sV[1]&15)<<8|sV[2];sS=3+sP-4;sR=(sV[10]&15)<<8|sV[11];sW=12+sR;while(sW<sS){var sT=sV[sW];var sQ=(sV[sW+1]&31)<<8|sV[sW+2];if(sT===st.H264_STREAM_TYPE&&sM.programMapTable.video===null){sM.programMapTable.video=sQ}else{if(sT===st.ADTS_STREAM_TYPE&&sM.programMapTable.audio===null){sM.programMapTable.audio=sQ}else{if(sT===st.METADATA_STREAM_TYPE){sM.programMapTable["timed-metadata"][sQ]=sT}}}sW+=((sV[sW+3]&15)<<8|sV[sW+4])+5}sU.programMapTable=sM.programMapTable};this.push=function(sQ){var sP={},sR=4;sP.payloadUnitStartIndicator=!!(sQ[1]&64);sP.pid=sQ[1]&31;sP.pid<<=8;sP.pid|=sQ[2];if((sQ[3]&48)>>>4>1){sR+=sQ[sR]+1}if(sP.pid===0){sP.type="pat";sO(sQ.subarray(sR),sP);this.trigger("data",sP)}else{if(sP.pid===this.pmtPid){sP.type="pmt";sO(sQ.subarray(sR),sP);this.trigger("data",sP);while(this.packetsWaitingForPmt.length){this.processPes_.apply(this,this.packetsWaitingForPmt.shift())}}else{if(this.programMapTable===undefined){this.packetsWaitingForPmt.push([sQ,sR,sP])}else{this.processPes_(sQ,sR,sP)}}}};this.processPes_=function(sQ,sR,sP){if(sP.pid===this.programMapTable.video){sP.streamType=st.H264_STREAM_TYPE}else{if(sP.pid===this.programMapTable.audio){sP.streamType=st.ADTS_STREAM_TYPE}else{sP.streamType=this.programMapTable["timed-metadata"][sP.pid]}}sP.type="pes";sP.data=sQ.subarray(sR);this.trigger("data",sP)}};qb.prototype=new qg();qb.STREAM_TYPES={h264:27,adts:15};q5=function rr(){var sO=this,sQ={data:[],size:0},sP={data:[],size:0},sM={data:[],size:0},sN,sR=function sR(sU,sS){var sT;sS.packetLength=6+(sU[4]<<8|sU[5]);sS.dataAlignmentIndicator=(sU[6]&4)!==0;sT=sU[7];if(sT&192){sS.pts=(sU[9]&14)<<27|(sU[10]&255)<<20|(sU[11]&254)<<12|(sU[12]&255)<<5|(sU[13]&254)>>>3;sS.pts*=4;sS.pts+=(sU[13]&6)>>>1;sS.dts=sS.pts;if(sT&64){sS.dts=(sU[14]&14)<<27|(sU[15]&255)<<20|(sU[16]&254)<<12|(sU[17]&255)<<5|(sU[18]&254)>>>3;sS.dts*=4;sS.dts+=(sU[18]&6)>>>1}}sS.data=sU.subarray(9+sU[8])},sL=function sL(s0,sY,sZ){var sS=new Uint8Array(s0.size),sT={type:sY},sW=0,sU=0,sV=false,sX;if(!s0.data.length||s0.size<9){return}sT.trackId=s0.data[0].pid;for(sW=0;sW<s0.data.length;sW++){sX=s0.data[sW];sS.set(sX.data,sU);sU+=sX.data.byteLength}sR(sS,sT);sV=sY==="video"||sT.packetLength<=s0.size;if(sZ||sV){s0.size=0;s0.data.length=0}if(sV){sO.trigger("data",sT)}};q5.prototype.init.call(this);this.push=function(sV){({pat:function sT(){},pes:function sS(){var sW,sX;switch(sV.streamType){case st.H264_STREAM_TYPE:case st.H264_STREAM_TYPE:sW=sQ;sX="video";break;case st.ADTS_STREAM_TYPE:sW=sP;sX="audio";break;case st.METADATA_STREAM_TYPE:sW=sM;sX="timed-metadata";break;default:return}if(sV.payloadUnitStartIndicator){sL(sW,sX,true)}sW.data.push(sV);sW.size+=sV.data.byteLength},pmt:function sU(){var sW={type:"metadata",tracks:[]};sN=sV.programMapTable;if(sN.video!==null){sW.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+sN.video,codec:"avc",type:"video"})}if(sN.audio!==null){sW.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+sN.audio,codec:"adts",type:"audio"})}sO.trigger("data",sW)}})[sV.type]()};this.reset=function(){sQ.size=0;sQ.data.length=0;sP.size=0;sP.data.length=0;this.trigger("reset")};this.flushStreams_=function(){sL(sQ,"video");sL(sP,"audio");sL(sM,"timed-metadata")};this.flush=function(){this.flushStreams_();this.trigger("done")}};q5.prototype=new qg();var ri={PAT_PID:0,MP2T_PACKET_LENGTH:qI,TransportPacketStream:su,TransportParseStream:qb,ElementaryStream:q5,TimestampRolloverStream:si,CaptionStream:rY.CaptionStream,Cea608Stream:rY.Cea608Stream,MetadataStream:qM};for(var qz in st){if(st.hasOwnProperty(qz)){ri[qz]=st[qz]}}var r4=ri;var qh=rR.ONE_SECOND_IN_TS;var rk;var q3=[96000,88200,64000,48000,44100,32000,24000,22050,16000,12000,11025,8000,7350];rk=function qw(sN){var sM,sL=0;rk.prototype.init.call(this);this.push=function(sT){var sQ=0,sV,sS,sU,sO,sP,sR;if(!sN){sL=0}if(sT.type!=="audio"){return}if(sM){sO=sM;sM=new Uint8Array(sO.byteLength+sT.data.byteLength);sM.set(sO);sM.set(sT.data,sO.byteLength)}else{sM=sT.data}while(sQ+5<sM.length){if(sM[sQ]!==255||(sM[sQ+1]&246)!==240){sQ++;continue}sS=(~sM[sQ+1]&1)*2;sV=(sM[sQ+3]&3)<<11|sM[sQ+4]<<3|(sM[sQ+5]&224)>>5;sP=((sM[sQ+6]&3)+1)*1024;sR=sP*qh/q3[(sM[sQ+2]&60)>>>2];sU=sQ+sV;if(sM.byteLength<sU){return}this.trigger("data",{pts:sT.pts+sL*sR,dts:sT.dts+sL*sR,sampleCount:sP,audioobjecttype:(sM[sQ+2]>>>6&3)+1,channelcount:(sM[sQ+2]&1)<<2|(sM[sQ+3]&192)>>>6,samplerate:q3[(sM[sQ+2]&60)>>>2],samplingfrequencyindex:(sM[sQ+2]&60)>>>2,samplesize:16,data:sM.subarray(sQ+7+sS,sU)});sL++;if(sM.byteLength===sU){sM=undefined;return}sM=sM.subarray(sU)}};this.flush=function(){sL=0;this.trigger("done")};this.reset=function(){sM=void 0;this.trigger("reset")};this.endTimeline=function(){sM=void 0;this.trigger("endedtimeline")}};rk.prototype=new qg();var ra=rk;var sr;sr=function sr(sL){var sO=sL.byteLength,sM=0,sN=0;this.length=function(){return 8*sO};this.bitsAvailable=function(){return 8*sO+sN};this.loadWord=function(){var sQ=sL.byteLength-sO,sP=new Uint8Array(4),sR=Math.min(4,sO);if(sR===0){throw new Error("no bytes available")}sP.set(sL.subarray(sQ,sQ+sR));sM=new DataView(sP.buffer).getUint32(0);sN=sR*8;sO-=sR};this.skipBits=function(sP){var sQ;if(sN>sP){sM<<=sP;sN-=sP}else{sP-=sN;sQ=Math.floor(sP/8);sP-=sQ*8;sO-=sQ;this.loadWord();sM<<=sP;sN-=sP}};this.readBits=function(sP){var sR=Math.min(sN,sP),sQ=sM>>>32-sR;sN-=sR;if(sN>0){sM<<=sR}else{if(sO>0){this.loadWord()}}sR=sP-sR;if(sR>0){return sQ<<sR|this.readBits(sR)}return sQ};this.skipLeadingZeros=function(){var sP;for(sP=0;sP<sN;++sP){if((sM&2147483648>>>sP)!==0){sM<<=sP;sN-=sP;return sP}}this.loadWord();return sP+this.skipLeadingZeros()};this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())};this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())};this.readUnsignedExpGolomb=function(){var sP=this.skipLeadingZeros();return this.readBits(sP+1)-1};this.readExpGolomb=function(){var sP=this.readUnsignedExpGolomb();if(1&sP){return 1+sP>>>1}return -1*(sP>>>1)};this.readBoolean=function(){return this.readBits(1)===1};this.readUnsignedByte=function(){return this.readBits(8)};this.loadWord()};var qU=sr;var rO,sq;var rX;sq=function p9(){var sN=0,sM,sL;sq.prototype.init.call(this);this.push=function(sQ){var sP;if(!sL){sL=sQ.data}else{sP=new Uint8Array(sL.byteLength+sQ.data.byteLength);sP.set(sL);sP.set(sQ.data,sL.byteLength);sL=sP}var sO=sL.byteLength;for(;sN<sO-3;sN++){if(sL[sN+2]===1){sM=sN+5;break}}while(sM<sO){switch(sL[sM]){case 0:if(sL[sM-1]!==0){sM+=2;break}else{if(sL[sM-2]!==0){sM++;break}}if(sN+3!==sM-2){this.trigger("data",sL.subarray(sN+3,sM-2))}do{sM++}while(sL[sM]!==1&&sM<sO);sN=sM-2;sM+=3;break;case 1:if(sL[sM-1]!==0||sL[sM-2]!==0){sM+=3;break}this.trigger("data",sL.subarray(sN+3,sM-2));sN=sM-2;sM+=3;break;default:sM+=3;break}}sL=sL.subarray(sN);sM-=sN;sN=0};this.reset=function(){sL=null;sN=0;this.trigger("reset")};this.flush=function(){if(sL&&sL.byteLength>3){this.trigger("data",sL.subarray(sN+3))}sL=null;sN=0;this.trigger("done")};this.endTimeline=function(){this.flush();this.trigger("endedtimeline")}};sq.prototype=new qg();rX={100:true,110:true,122:true,244:true,44:true,83:true,86:true,118:true,128:true,138:true,139:true,134:true};rO=function q2(){var sN=new sq(),sL,sS,sM,sR,sO,sQ,sP;rO.prototype.init.call(this);sL=this;this.push=function(sT){if(sT.type!=="video"){return}sS=sT.trackId;sM=sT.pts;sR=sT.dts;sN.push(sT)};sN.on("data",function(sU){var sT={trackId:sS,pts:sM,dts:sR,data:sU};switch(sU[0]&31){case 5:sT.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:sT.nalUnitType="sei_rbsp";sT.escapedRBSP=sO(sU.subarray(1));break;case 7:sT.nalUnitType="seq_parameter_set_rbsp";sT.escapedRBSP=sO(sU.subarray(1));sT.config=sQ(sT.escapedRBSP);break;case 8:sT.nalUnitType="pic_parameter_set_rbsp";break;case 9:sT.nalUnitType="access_unit_delimiter_rbsp";break}sL.trigger("data",sT)});sN.on("done",function(){sL.trigger("done")});sN.on("partialdone",function(){sL.trigger("partialdone")});sN.on("reset",function(){sL.trigger("reset")});sN.on("endedtimeline",function(){sL.trigger("endedtimeline")});this.flush=function(){sN.flush()};this.partialFlush=function(){sN.partialFlush()};this.reset=function(){sN.reset()};this.endTimeline=function(){sN.endTimeline()};sP=function sP(sW,sY){var sU=8,sV=8,sT,sX;for(sT=0;sT<sW;sT++){if(sV!==0){sX=sY.readExpGolomb();sV=(sU+sX+256)%256}sU=sV===0?sU:sV}};sO=function sO(sZ){var sX=sZ.byteLength,sU=[],sV=1,sY,sW;while(sV<sX-2){if(sZ[sV]===0&&sZ[sV+1]===0&&sZ[sV+2]===3){sU.push(sV+2);sV+=2}else{sV++}}if(sU.length===0){return sZ}sY=sX-sU.length;sW=new Uint8Array(sY);var sT=0;for(sV=0;sV<sY;sT++,sV++){if(sT===sU[0]){sT++;sU.shift()}sW[sV]=sZ[sT]}return sW};sQ=function sQ(tb){var s4=0,s5=0,sY=0,s6=0,sU=1,s0,s9,s2,s3,sV,ta,sW,sT,sX,tc,sZ,s8,s1,s7;s0=new qU(tb);s9=s0.readUnsignedByte();s3=s0.readUnsignedByte();s2=s0.readUnsignedByte();s0.skipUnsignedExpGolomb();if(rX[s9]){sV=s0.readUnsignedExpGolomb();if(sV===3){s0.skipBits(1)}s0.skipUnsignedExpGolomb();s0.skipUnsignedExpGolomb();s0.skipBits(1);if(s0.readBoolean()){sZ=sV!==3?8:12;for(s7=0;s7<sZ;s7++){if(s0.readBoolean()){if(s7<6){sP(16,s0)}else{sP(64,s0)}}}}}s0.skipUnsignedExpGolomb();ta=s0.readUnsignedExpGolomb();if(ta===0){s0.readUnsignedExpGolomb()}else{if(ta===1){s0.skipBits(1);s0.skipExpGolomb();s0.skipExpGolomb();sW=s0.readUnsignedExpGolomb();for(s7=0;s7<sW;s7++){s0.skipExpGolomb()}}}s0.skipUnsignedExpGolomb();s0.skipBits(1);sT=s0.readUnsignedExpGolomb();sX=s0.readUnsignedExpGolomb();tc=s0.readBits(1);if(tc===0){s0.skipBits(1)}s0.skipBits(1);if(s0.readBoolean()){s4=s0.readUnsignedExpGolomb();s5=s0.readUnsignedExpGolomb();sY=s0.readUnsignedExpGolomb();s6=s0.readUnsignedExpGolomb()}if(s0.readBoolean()){if(s0.readBoolean()){s1=s0.readUnsignedByte();switch(s1){case 1:s8=[1,1];break;case 2:s8=[12,11];break;case 3:s8=[10,11];break;case 4:s8=[16,11];break;case 5:s8=[40,33];break;case 6:s8=[24,11];break;case 7:s8=[20,11];break;case 8:s8=[32,11];break;case 9:s8=[80,33];break;case 10:s8=[18,11];break;case 11:s8=[15,11];break;case 12:s8=[64,33];break;case 13:s8=[160,99];break;case 14:s8=[4,3];break;case 15:s8=[3,2];break;case 16:s8=[2,1];break;case 255:s8=[s0.readUnsignedByte()<<8|s0.readUnsignedByte(),s0.readUnsignedByte()<<8|s0.readUnsignedByte()];break}if(s8){sU=s8[0]/s8[1]}}}return{profileIdc:s9,levelIdc:s2,profileCompatibility:s3,width:Math.ceil(((sT+1)*16-s4*2-s5*2)*sU),height:(2-tc)*(sX+1)*16-sY*2-s6*2,sarRatio:s8}}};rO.prototype=new qg();var rx={H264Stream:rO,NalByteStream:sq};var rw=[96000,88200,64000,48000,44100,32000,24000,22050,16000,12000,11025,8000,7350];var r8=function r8(sL){if(sL[0]==="I".charCodeAt(0)&&sL[1]==="D".charCodeAt(0)&&sL[2]==="3".charCodeAt(0)){return true}return false};var qn=function sw(sL){return sL[0]<<21|sL[1]<<14|sL[2]<<7|sL[3]};var q0=function rs(sN,sP,sM){var sO,sL="";for(sO=sP;sO<sM;sO++){sL+="%"+("00"+sN[sO].toString(16)).slice(-2)}return sL};var qD=function qY(sM,sN,sL){return unescape(q0(sM,sN,sL))};var qm=function qm(sP,sN){var sM=sP[sN+6]<<21|sP[sN+7]<<14|sP[sN+8]<<7|sP[sN+9],sL=sP[sN+5],sO=(sL&16)>>4;if(sO){return sM+20}return sM+10};var sl=function sl(sP,sO){var sN=(sP[sO+5]&224)>>5,sM=sP[sO+4]<<3,sL=sP[sO+3]&3<<11;return sL|sM|sN};var rj=function rj(sM,sL){if(sM[sL]==="I".charCodeAt(0)&&sM[sL+1]==="D".charCodeAt(0)&&sM[sL+2]==="3".charCodeAt(0)){return"timed-metadata"}else{if(sM[sL]&255===255&&(sM[sL+1]&240)===240){return"audio"}}return null};var r1=function r1(sM){var sL=0;while(sL+5<sM.length){if(sM[sL]!==255||(sM[sL+1]&246)!==240){sL++;continue}return rw[(sM[sL+2]&60)>>>2]}return null};var qx=function qx(sN){var sR,sO,sM,sS;sR=10;if(sN[5]&64){sR+=4;sR+=qn(sN.subarray(10,14))}do{sO=qn(sN.subarray(sR+4,sR+8));if(sO<1){return null}sS=String.fromCharCode(sN[sR],sN[sR+1],sN[sR+2],sN[sR+3]);if(sS==="PRIV"){sM=sN.subarray(sR+10,sR+sO+10);for(var sP=0;sP<sM.byteLength;sP++){if(sM[sP]===0){var sL=qD(sM,0,sP);if(sL==="com.apple.streaming.transportStreamTimestamp"){var sQ=sM.subarray(sP+1);var sT=(sQ[3]&1)<<30|sQ[4]<<22|sQ[5]<<14|sQ[6]<<6|sQ[7]>>>2;sT*=4;sT+=sQ[7]&3;return sT}break}}}sR+=10;sR+=sO}while(sR<sN.byteLength);return null};var rI={isLikelyAacData:r8,parseId3TagSize:qm,parseAdtsSize:sl,parseType:rj,parseSampleRate:r1,parseAacTimestamp:qx};var q4;q4=function sv(){var sM=new Uint8Array(),sL=0;q4.prototype.init.call(this);this.setTimestamp=function(sN){sL=sN};this.push=function(sN){var sO=0,sQ=0,sT,sP,sR,sS;if(sM.length){sS=sM.length;sM=new Uint8Array(sN.byteLength+sS);sM.set(sM.subarray(0,sS));sM.set(sN,sS)}else{sM=sN}while(sM.length-sQ>=3){if(sM[sQ]==="I".charCodeAt(0)&&sM[sQ+1]==="D".charCodeAt(0)&&sM[sQ+2]==="3".charCodeAt(0)){if(sM.length-sQ<10){break}sO=rI.parseId3TagSize(sM,sQ);if(sQ+sO>sM.length){break}sP={type:"timed-metadata",data:sM.subarray(sQ,sQ+sO)};this.trigger("data",sP);sQ+=sO;continue}else{if((sM[sQ]&255)===255&&(sM[sQ+1]&240)===240){if(sM.length-sQ<7){break}sO=rI.parseAdtsSize(sM,sQ);if(sQ+sO>sM.length){break}sR={type:"audio",data:sM.subarray(sQ,sQ+sO),pts:sL,dts:sL};this.trigger("data",sR);sQ+=sO;continue}}sQ++}sT=sM.length-sQ;if(sT>0){sM=sM.subarray(sQ)}else{sM=new Uint8Array()}};this.reset=function(){sM=new Uint8Array();this.trigger("reset")};this.endTimeline=function(){sM=new Uint8Array();this.trigger("endedtimeline")}};q4.prototype=new qg();var rm=q4;var q2=rx.H264Stream;var q8=rI.isLikelyAacData;var qf=rR.ONE_SECOND_IN_TS;var qe=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"];var sf=["width","height","profileIdc","levelIdc","profileCompatibility","sarRatio"];var qJ,re,qC,qE;var qG=function qG(sM,sL){var sN;if(sM.length!==sL.length){return false}for(sN=0;sN<sM.length;sN++){if(sM[sN]!==sL[sN]){return false}}return true};var r5=function r5(sL,sO,sS,sR,sQ,sP){var sT=sS-sO,sM=sR-sO,sN=sQ-sS;return{start:{dts:sL,pts:sL+sT},end:{dts:sL+sM,pts:sL+sN},prependedContentDuration:sP,baseMediaDecodeTime:sL}};re=function sE(sM,sQ){var sO=[],sN=0,sP=0,sR=0,sL=Infinity;sQ=sQ||{};re.prototype.init.call(this);this.push=function(sS){rD.collectDtsInfo(sM,sS);if(sM){qe.forEach(function(sT){sM[sT]=sS[sT]})}sO.push(sS)};this.setEarliestDts=function(sS){sP=sS-sM.timelineStartInfo.baseMediaDecodeTime};this.setVideoBaseMediaDecodeTime=function(sS){sL=sS};this.setAudioAppendStart=function(sS){sR=sS};this.flush=function(){var sU,sT,sW,sS,sV;if(sO.length===0){this.trigger("done","AudioSegmentStream");return}sU=qk.trimAdtsFramesByEarliestDts(sO,sM,sP);sM.baseMediaDecodeTime=rD.calculateTrackBaseMediaDecodeTime(sM,sQ.keepOriginalTimestamps);qk.prefixWithSilence(sM,sU,sR,sL);sM.samples=qk.generateSampleTable(sU);sW=rK.mdat(qk.concatenateFrameData(sU));sO=[];sT=rK.moof(sN,[sM]);sS=new Uint8Array(sT.byteLength+sW.byteLength);sN++;sS.set(sT);sS.set(sW,sT.byteLength);rD.clearDtsInfo(sM);sV=Math.ceil(qf*1024/sM.samplerate);if(sU.length){this.trigger("timingInfo",{start:sU[0].pts,end:sU[0].pts+sU.length*sV})}this.trigger("data",{track:sM,boxes:sS});this.trigger("done","AudioSegmentStream")};this.reset=function(){rD.clearDtsInfo(sM);sO=[];this.trigger("reset")}};re.prototype=new qg();qJ=function r9(sM,sQ){var sO=0,sN=[],sR=[],sP,sL;sQ=sQ||{};qJ.prototype.init.call(this);delete sM.minPTS;this.gopCache_=[];this.push=function(sS){rD.collectDtsInfo(sM,sS);if(sS.nalUnitType==="seq_parameter_set_rbsp"&&!sP){sP=sS.config;sM.sps=[sS.data];sf.forEach(function(sT){sM[sT]=sP[sT]},this)}if(sS.nalUnitType==="pic_parameter_set_rbsp"&&!sL){sL=sS.data;sM.pps=[sS.data]}sN.push(sS)};this.flush=function(){var sZ,sS,sV,s0,sX,sW,sU=0,sT,s1;while(sN.length){if(sN[0].nalUnitType==="access_unit_delimiter_rbsp"){break}sN.shift()}if(sN.length===0){this.resetStream_();this.trigger("done","VideoSegmentStream");return}sZ=rW.groupNalsIntoFrames(sN);sV=rW.groupFramesIntoGops(sZ);if(!sV[0][0].keyFrame){sS=this.getGopForFusion_(sN[0],sM);if(sS){sU=sS.duration;sV.unshift(sS);sV.byteLength+=sS.byteLength;sV.nalCount+=sS.nalCount;sV.pts=sS.pts;sV.dts=sS.dts;sV.duration+=sS.duration}else{sV=rW.extendFirstKeyFrame(sV)}}if(sR.length){var sY;if(sQ.alignGopsAtEnd){sY=this.alignGopsAtEnd_(sV)}else{sY=this.alignGopsAtStart_(sV)}if(!sY){this.gopCache_.unshift({gop:sV.pop(),pps:sM.pps,sps:sM.sps});this.gopCache_.length=Math.min(6,this.gopCache_.length);sN=[];this.resetStream_();this.trigger("done","VideoSegmentStream");return}rD.clearDtsInfo(sM);sV=sY}rD.collectDtsInfo(sM,sV);sM.samples=rW.generateSampleTable(sV);sX=rK.mdat(rW.concatenateNalData(sV));sM.baseMediaDecodeTime=rD.calculateTrackBaseMediaDecodeTime(sM,sQ.keepOriginalTimestamps);this.trigger("processedGopsInfo",sV.map(function(s2){return{pts:s2.pts,dts:s2.dts,byteLength:s2.byteLength}}));sT=sV[0];s1=sV[sV.length-1];this.trigger("segmentTimingInfo",r5(sM.baseMediaDecodeTime,sT.dts,sT.pts,s1.dts+s1.duration,s1.pts+s1.duration,sU));this.trigger("timingInfo",{start:sV[0].pts,end:sV[sV.length-1].pts+sV[sV.length-1].duration});this.gopCache_.unshift({gop:sV.pop(),pps:sM.pps,sps:sM.sps});this.gopCache_.length=Math.min(6,this.gopCache_.length);sN=[];this.trigger("baseMediaDecodeTime",sM.baseMediaDecodeTime);this.trigger("timelineStartInfo",sM.timelineStartInfo);s0=rK.moof(sO,[sM]);sW=new Uint8Array(s0.byteLength+sX.byteLength);sO++;sW.set(s0);sW.set(sX,s0.byteLength);this.trigger("data",{track:sM,boxes:sW});this.resetStream_();this.trigger("done","VideoSegmentStream")};this.reset=function(){this.resetStream_();sN=[];this.gopCache_.length=0;sR.length=0;this.trigger("reset")};this.resetStream_=function(){rD.clearDtsInfo(sM);sP=undefined;sL=undefined};this.getGopForFusion_=function(sT){var s0=45000,sV=10000,sX=Infinity,sS,sZ,sY,sW,sU;for(sU=0;sU<this.gopCache_.length;sU++){sW=this.gopCache_[sU];sY=sW.gop;if(!(sM.pps&&qG(sM.pps[0],sW.pps[0]))||!(sM.sps&&qG(sM.sps[0],sW.sps[0]))){continue}if(sY.dts<sM.timelineStartInfo.dts){continue}sS=sT.dts-sY.dts-sY.duration;if(sS>=-sV&&sS<=s0){if(!sZ||sX>sS){sZ=sW;sX=sS}}}if(sZ){return sZ.gop}return null};this.alignGopsAtStart_=function(sU){var sY,sT,sW,sZ,s0,sS,sV,sX;s0=sU.byteLength;sS=sU.nalCount;sV=sU.duration;sY=sT=0;while(sY<sR.length&&sT<sU.length){sW=sR[sY];sZ=sU[sT];if(sW.pts===sZ.pts){break}if(sZ.pts>sW.pts){sY++;continue}sT++;s0-=sZ.byteLength;sS-=sZ.nalCount;sV-=sZ.duration}if(sT===0){return sU}if(sT===sU.length){return null}sX=sU.slice(sT);sX.byteLength=s0;sX.duration=sV;sX.nalCount=sS;sX.pts=sX[0].pts;sX.dts=sX[0].dts;return sX};this.alignGopsAtEnd_=function(sU){var sZ,sT,sX,s1,sV,sS;sZ=sR.length-1;sT=sU.length-1;sV=null;sS=false;while(sZ>=0&&sT>=0){sX=sR[sZ];s1=sU[sT];if(sX.pts===s1.pts){sS=true;break}if(sX.pts>s1.pts){sZ--;continue}if(sZ===sR.length-1){sV=sT}sT--}if(!sS&&sV===null){return null}var sW;if(sS){sW=sT}else{sW=sV}if(sW===0){return sU}var sY=sU.slice(sW);var s0=sY.reduce(function(s3,s2){s3.byteLength+=s2.byteLength;s3.duration+=s2.duration;s3.nalCount+=s2.nalCount;return s3},{byteLength:0,duration:0,nalCount:0});sY.byteLength=s0.byteLength;sY.duration=s0.duration;sY.nalCount=s0.nalCount;sY.pts=sY[0].pts;sY.dts=sY[0].dts;return sY};this.alignGopsWith=function(sS){sR=sS}};qJ.prototype=new qg();qE=function qP(sL,sM){this.numberOfTracks=0;this.metadataStream=sM;sL=sL||{};if(typeof sL.remux!=="undefined"){this.remuxTracks=!!sL.remux}else{this.remuxTracks=true}if(typeof sL.keepOriginalTimestamps==="boolean"){this.keepOriginalTimestamps=sL.keepOriginalTimestamps}else{this.keepOriginalTimestamps=false}this.pendingTracks=[];this.videoTrack=null;this.pendingBoxes=[];this.pendingCaptions=[];this.pendingMetadata=[];this.pendingBytes=0;this.emittedTracks=0;qE.prototype.init.call(this);this.push=function(sN){if(sN.text){return this.pendingCaptions.push(sN)}if(sN.frames){return this.pendingMetadata.push(sN)}this.pendingTracks.push(sN.track);this.pendingBytes+=sN.boxes.byteLength;if(sN.track.type==="video"){this.videoTrack=sN.track;this.pendingBoxes.push(sN.boxes)}if(sN.track.type==="audio"){this.audioTrack=sN.track;this.pendingBoxes.unshift(sN.boxes)}}};qE.prototype=new qg();qE.prototype.flush=function(sS){var sR=0,sP={captions:[],captionStreams:{},metadata:[],info:{}},sL,sM,sQ,sO=0,sN;if(this.pendingTracks.length<this.numberOfTracks){if(sS!=="VideoSegmentStream"&&sS!=="AudioSegmentStream"){return}else{if(this.remuxTracks){return}else{if(this.pendingTracks.length===0){this.emittedTracks++;if(this.emittedTracks>=this.numberOfTracks){this.trigger("done");this.emittedTracks=0}return}}}}if(this.videoTrack){sO=this.videoTrack.timelineStartInfo.pts;sf.forEach(function(sT){sP.info[sT]=this.videoTrack[sT]},this)}else{if(this.audioTrack){sO=this.audioTrack.timelineStartInfo.pts;qe.forEach(function(sT){sP.info[sT]=this.audioTrack[sT]},this)}}if(this.videoTrack||this.audioTrack){if(this.pendingTracks.length===1){sP.type=this.pendingTracks[0].type}else{sP.type="combined"}this.emittedTracks+=this.pendingTracks.length;sQ=rK.initSegment(this.pendingTracks);sP.initSegment=new Uint8Array(sQ.byteLength);sP.initSegment.set(sQ);sP.data=new Uint8Array(this.pendingBytes);for(sN=0;sN<this.pendingBoxes.length;sN++){sP.data.set(this.pendingBoxes[sN],sR);sR+=this.pendingBoxes[sN].byteLength}for(sN=0;sN<this.pendingCaptions.length;sN++){sL=this.pendingCaptions[sN];sL.startTime=rR.metadataTsToSeconds(sL.startPts,sO,this.keepOriginalTimestamps);sL.endTime=rR.metadataTsToSeconds(sL.endPts,sO,this.keepOriginalTimestamps);sP.captionStreams[sL.stream]=true;sP.captions.push(sL)}for(sN=0;sN<this.pendingMetadata.length;sN++){sM=this.pendingMetadata[sN];sM.cueTime=rR.metadataTsToSeconds(sM.pts,sO,this.keepOriginalTimestamps);sP.metadata.push(sM)}sP.metadata.dispatchType=this.metadataStream.dispatchType;this.pendingTracks.length=0;this.videoTrack=null;this.pendingBoxes.length=0;this.pendingCaptions.length=0;this.pendingBytes=0;this.pendingMetadata.length=0;this.trigger("data",sP);for(sN=0;sN<sP.captions.length;sN++){sL=sP.captions[sN];this.trigger("caption",sL)}for(sN=0;sN<sP.metadata.length;sN++){sM=sP.metadata[sN];this.trigger("id3Frame",sM)}}if(this.emittedTracks>=this.numberOfTracks){this.trigger("done");this.emittedTracks=0}};qE.prototype.setRemux=function(sL){this.remuxTracks=sL};qC=function sj(sN){var sM=this,sP=true,sO,sL;qC.prototype.init.call(this);sN=sN||{};this.baseMediaDecodeTime=sN.baseMediaDecodeTime||0;this.transmuxPipeline_={};this.setupAacPipeline=function(){var sQ={};this.transmuxPipeline_=sQ;sQ.type="aac";sQ.metadataStream=new r4.MetadataStream();sQ.aacStream=new rm();sQ.audioTimestampRolloverStream=new r4.TimestampRolloverStream("audio");sQ.timedMetadataTimestampRolloverStream=new r4.TimestampRolloverStream("timed-metadata");sQ.adtsStream=new ra();sQ.coalesceStream=new qE(sN,sQ.metadataStream);sQ.headOfPipeline=sQ.aacStream;sQ.aacStream.pipe(sQ.audioTimestampRolloverStream).pipe(sQ.adtsStream);sQ.aacStream.pipe(sQ.timedMetadataTimestampRolloverStream).pipe(sQ.metadataStream).pipe(sQ.coalesceStream);sQ.metadataStream.on("timestamp",function(sR){sQ.aacStream.setTimestamp(sR.timeStamp)});sQ.aacStream.on("data",function(sR){if(sR.type==="timed-metadata"&&!sQ.audioSegmentStream){sL=sL||{timelineStartInfo:{baseMediaDecodeTime:sM.baseMediaDecodeTime},codec:"adts",type:"audio"};sQ.coalesceStream.numberOfTracks++;sQ.audioSegmentStream=new re(sL,sN);sQ.audioSegmentStream.on("timingInfo",sM.trigger.bind(sM,"audioTimingInfo"));sQ.adtsStream.pipe(sQ.audioSegmentStream).pipe(sQ.coalesceStream)}sM.trigger("trackinfo",{hasAudio:!!sL,hasVideo:!!sO})});sQ.coalesceStream.on("data",this.trigger.bind(this,"data"));sQ.coalesceStream.on("done",this.trigger.bind(this,"done"))};this.setupTsPipeline=function(){var sQ={};this.transmuxPipeline_=sQ;sQ.type="ts";sQ.metadataStream=new r4.MetadataStream();sQ.packetStream=new r4.TransportPacketStream();sQ.parseStream=new r4.TransportParseStream();sQ.elementaryStream=new r4.ElementaryStream();sQ.timestampRolloverStream=new r4.TimestampRolloverStream();sQ.adtsStream=new ra();sQ.h264Stream=new q2();sQ.captionStream=new r4.CaptionStream();sQ.coalesceStream=new qE(sN,sQ.metadataStream);sQ.headOfPipeline=sQ.packetStream;sQ.packetStream.pipe(sQ.parseStream).pipe(sQ.elementaryStream).pipe(sQ.timestampRolloverStream);sQ.timestampRolloverStream.pipe(sQ.h264Stream);sQ.timestampRolloverStream.pipe(sQ.adtsStream);sQ.timestampRolloverStream.pipe(sQ.metadataStream).pipe(sQ.coalesceStream);sQ.h264Stream.pipe(sQ.captionStream).pipe(sQ.coalesceStream);sQ.elementaryStream.on("data",function(sS){var sR;if(sS.type==="metadata"){sR=sS.tracks.length;while(sR--){if(!sO&&sS.tracks[sR].type==="video"){sO=sS.tracks[sR];sO.timelineStartInfo.baseMediaDecodeTime=sM.baseMediaDecodeTime}else{if(!sL&&sS.tracks[sR].type==="audio"){sL=sS.tracks[sR];sL.timelineStartInfo.baseMediaDecodeTime=sM.baseMediaDecodeTime}}}if(sO&&!sQ.videoSegmentStream){sQ.coalesceStream.numberOfTracks++;sQ.videoSegmentStream=new qJ(sO,sN);sQ.videoSegmentStream.on("timelineStartInfo",function(sT){if(sL){sL.timelineStartInfo=sT;sQ.audioSegmentStream.setEarliestDts(sT.dts)}});sQ.videoSegmentStream.on("processedGopsInfo",sM.trigger.bind(sM,"gopInfo"));sQ.videoSegmentStream.on("segmentTimingInfo",sM.trigger.bind(sM,"videoSegmentTimingInfo"));sQ.videoSegmentStream.on("baseMediaDecodeTime",function(sT){if(sL){sQ.audioSegmentStream.setVideoBaseMediaDecodeTime(sT)}});sQ.videoSegmentStream.on("timingInfo",sM.trigger.bind(sM,"videoTimingInfo"));sQ.h264Stream.pipe(sQ.videoSegmentStream).pipe(sQ.coalesceStream)}if(sL&&!sQ.audioSegmentStream){sQ.coalesceStream.numberOfTracks++;sQ.audioSegmentStream=new re(sL,sN);sQ.audioSegmentStream.on("timingInfo",sM.trigger.bind(sM,"audioTimingInfo"));sQ.adtsStream.pipe(sQ.audioSegmentStream).pipe(sQ.coalesceStream)}sM.trigger("trackinfo",{hasAudio:!!sL,hasVideo:!!sO})}});sQ.coalesceStream.on("data",this.trigger.bind(this,"data"));sQ.coalesceStream.on("id3Frame",function(sR){sR.dispatchType=sQ.metadataStream.dispatchType;sM.trigger("id3Frame",sR)});sQ.coalesceStream.on("caption",this.trigger.bind(this,"caption"));sQ.coalesceStream.on("done",this.trigger.bind(this,"done"))};this.setBaseMediaDecodeTime=function(sR){var sQ=this.transmuxPipeline_;if(!sN.keepOriginalTimestamps){this.baseMediaDecodeTime=sR}if(sL){sL.timelineStartInfo.dts=undefined;sL.timelineStartInfo.pts=undefined;rD.clearDtsInfo(sL);if(!sN.keepOriginalTimestamps){sL.timelineStartInfo.baseMediaDecodeTime=sR}if(sQ.audioTimestampRolloverStream){sQ.audioTimestampRolloverStream.discontinuity()}}if(sO){if(sQ.videoSegmentStream){sQ.videoSegmentStream.gopCache_=[]}sO.timelineStartInfo.dts=undefined;sO.timelineStartInfo.pts=undefined;rD.clearDtsInfo(sO);sQ.captionStream.reset();if(!sN.keepOriginalTimestamps){sO.timelineStartInfo.baseMediaDecodeTime=sR}}if(sQ.timestampRolloverStream){sQ.timestampRolloverStream.discontinuity()}};this.setAudioAppendStart=function(sQ){if(sL){this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(sQ)}};this.setRemux=function(sR){var sQ=this.transmuxPipeline_;sN.remux=sR;if(sQ&&sQ.coalesceStream){sQ.coalesceStream.setRemux(sR)}};this.alignGopsWith=function(sQ){if(sO&&this.transmuxPipeline_.videoSegmentStream){this.transmuxPipeline_.videoSegmentStream.alignGopsWith(sQ)}};this.push=function(sQ){if(sP){var sR=q8(sQ);if(sR&&this.transmuxPipeline_.type!=="aac"){this.setupAacPipeline()}else{if(!sR&&this.transmuxPipeline_.type!=="ts"){this.setupTsPipeline()}}sP=false}this.transmuxPipeline_.headOfPipeline.push(sQ)};this.flush=function(){sP=true;this.transmuxPipeline_.headOfPipeline.flush()};this.endTimeline=function(){this.transmuxPipeline_.headOfPipeline.endTimeline()};this.reset=function(){if(this.transmuxPipeline_.headOfPipeline){this.transmuxPipeline_.headOfPipeline.reset()}};this.resetCaptions=function(){if(this.transmuxPipeline_.captionStream){this.transmuxPipeline_.captionStream.reset()}}};qC.prototype=new qg();var p3={Transmuxer:qC,VideoSegmentStream:qJ,AudioSegmentStream:re,AUDIO_PROPERTIES:qe,VIDEO_PROPERTIES:sf,generateVideoSegmentTimingInfo:r5};var ry=function ry(sL,sM){if(!(sL instanceof sM)){throw new TypeError("Cannot call a class as a function")}};var on=function(){function sL(sP,sN){for(var sM=0;sM<sN.length;sM++){var sO=sN[sM];sO.enumerable=sO.enumerable||false;sO.configurable=true;if("value" in sO){sO.writable=true}Object.defineProperty(sP,sO.key,sO)}}return function(sO,sM,sN){if(sM){sL(sO.prototype,sM)}if(sN){sL(sO,sN)}return sO}}();var qB=function qB(sL,sM){sM.on("data",function(sN){var sP=sN.initSegment;sN.initSegment={data:sP.buffer,byteOffset:sP.byteOffset,byteLength:sP.byteLength};var sO=sN.data;sN.data=sO.buffer;sL.postMessage({action:"data",segment:sN,byteOffset:sO.byteOffset,byteLength:sO.byteLength},[sN.data])});if(sM.captionStream){sM.captionStream.on("data",function(sN){sL.postMessage({action:"caption",data:sN})})}sM.on("done",function(sN){sL.postMessage({action:"done"})});sM.on("gopInfo",function(sN){sL.postMessage({action:"gopInfo",gopInfo:sN})});sM.on("videoSegmentTimingInfo",function(sN){sL.postMessage({action:"videoSegmentTimingInfo",videoSegmentTimingInfo:sN})})};var rV=function(){function sM(sU,sV){ry(this,sM);this.options=sV||{};this.self=sU;this.init()}on(sM,[{key:"init",value:function sT(){if(this.transmuxer){this.transmuxer.dispose()}this.transmuxer=new p3.Transmuxer(this.options);qB(this.self,this.transmuxer)}},{key:"push",value:function sP(sV){var sU=new Uint8Array(sV.data,sV.byteOffset,sV.byteLength);this.transmuxer.push(sU)}},{key:"reset",value:function sO(){this.init()}},{key:"setTimestampOffset",value:function sR(sV){var sU=sV.timestampOffset||0;this.transmuxer.setBaseMediaDecodeTime(Math.round(sU*90000))}},{key:"setAudioAppendStart",value:function sN(sU){this.transmuxer.setAudioAppendStart(Math.ceil(sU.appendStart*90000))}},{key:"flush",value:function sS(sU){this.transmuxer.flush()}},{key:"resetCaptions",value:function sQ(){this.transmuxer.resetCaptions()}},{key:"alignGopsWith",value:function sL(sU){this.transmuxer.alignGopsWith(sU.gopsToAlignWith.slice())}}]);return sM}();var sz=function sz(sL){sL.onmessage=function(sM){if(sM.data.action==="init"&&sM.data.options){this.messageHandlers=new rV(sL,sM.data.options);return}if(!this.messageHandlers){this.messageHandlers=new rV(sL)}if(sM.data&&sM.data.action&&sM.data.action!=="init"){if(this.messageHandlers[sM.data.action]){this.messageHandlers[sM.data.action](sM.data)}}}};var rN=new sz(e);return rN}()});var pi={videoCodec:"avc1",videoObjectTypeIndicator:".4d400d",audioProfile:"2"};var n3=function n3(d){return d.map(function(e){return e.replace(/avc1\.(\d+)\.(\d+)/i,function(p3,i,t){var on=("00"+Number(i).toString(16)).slice(-2);var r=("00"+Number(t).toString(16)).slice(-2);return"avc1."+on+"00"+r})})};var kg=function kg(){var i=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";var d={codecCount:0};var e=void 0;d.codecCount=i.split(",").length;d.codecCount=d.codecCount||2;e=/(^|\s|,)+(avc[13])([^ ,]*)/i.exec(i);if(e){d.videoCodec=e[2];d.videoObjectTypeIndicator=e[3]}d.audioProfile=/(^|\s|,)+mp4a.[0-9A-Fa-f]+\.([0-9A-Fa-f]+)/i.exec(i);d.audioProfile=d.audioProfile&&d.audioProfile[2];return d};var iR=function iR(d){return d.replace(/avc1\.(\d+)\.(\d+)/i,function(e){return n3([e])[0]})};var kE=function kE(i,d,e){return i+"/"+d+'; codecs="'+e.filter(function(r){return !!r}).join(", ")+'"'};var iZ=function iZ(d){if(d.segments&&d.segments.length&&d.segments[0].map){return"mp4"}return"mp2t"};var lk=function lk(e){var d=e.attributes||{};if(d.CODECS){return kg(d.CODECS)}return pi};var J=function J(i,t){if(!i.mediaGroups.AUDIO||!t){return null}var r=i.mediaGroups.AUDIO[t];if(!r){return null}for(var e in r){var d=r[e];if(d["default"]&&d.playlists){return kg(d.playlists[0].attributes.CODECS).audioProfile}}return null};var bp=function bp(t,on){var p7=iZ(on);var i=lk(on);var p8=on.attributes||{};var p5=true;var p4=false;if(!on){return[]}if(t.mediaGroups.AUDIO&&p8.AUDIO){var r=t.mediaGroups.AUDIO[p8.AUDIO];if(r){p4=true;p5=false;for(var p3 in r){if(!r[p3].uri&&!r[p3].playlists){p5=true;break}}}}if(p4&&!i.audioProfile){if(!p5){i.audioProfile=J(t,p8.AUDIO)}if(!i.audioProfile){d9.log.warn("Multiple audio tracks present but no audio codec string is specified. Attempting to use the default audio codec (mp4a.40.2)");i.audioProfile=pi.audioProfile}}var e={};if(i.videoCodec){e.video=""+i.videoCodec+i.videoObjectTypeIndicator}if(i.audioProfile){e.audio="mp4a.40."+i.audioProfile}var p9=kE("audio",p7,[e.audio]);var p6=kE("video",p7,[e.video]);var d=kE("video",p7,[e.video,e.audio]);if(p4){if(!p5&&e.video){return[p6,p9]}if(!p5&&!e.video){return[p9,p9]}return[d,p9]}if(!e.video){return[p9]}return[d]};var S=function S(e){var d={type:"",parameters:{}};var i=e.trim().split(";");d.type=i.shift().trim();i.forEach(function(p3){var on=p3.trim().split("=");if(on.length>1){var r=on[0].replace(/"/g,"").trim();var t=on[1].replace(/"/g,"").trim();d.parameters[r]=t}});return d};var K=function K(d){return/mp4a\.\d+.\d+/i.test(d)};var gP=function gP(d){return/avc1\.[\da-f]+/i.test(d)};var dh=function dh(d,t,e){if(typeof t==="undefined"||t===null||!d.length){return[]}var on=Math.ceil((t-e+3)*90000);var r=void 0;for(r=0;r<d.length;r++){if(d[r].pts>on){break}}return d.slice(r)};var gm=function gm(d,t,r){if(!t.length){return d}if(r){return t.slice()}var on=t[0].pts;var e=0;for(e;e<d.length;e++){if(d[e].pts>=on){break}}return d.slice(0,e).concat(t)};var y=function y(p4,e,t,d){var p6=Math.ceil((e-d)*90000);var p3=Math.ceil((t-d)*90000);var r=p4.slice();var p5=p4.length;while(p5--){if(p4[p5].pts<=p3){break}}if(p5===-1){return r}var on=p5+1;while(on--){if(p4[on].pts<=p6){break}}on=Math.max(on,0);r.splice(on,p5-on+1);return r};var i6=function i6(r,p6,p5){var i=null;var t=null;var d=0;var p7=[];var e=[];if(!r&&!p6){return d9.createTimeRange()}if(!r){return p6.buffered}if(!p6){return r.buffered}if(p5){return r.buffered}if(r.buffered.length===0&&p6.buffered.length===0){return d9.createTimeRange()}var p4=r.buffered;var on=p6.buffered;var p3=p4.length;while(p3--){p7.push({time:p4.start(p3),type:"start"});p7.push({time:p4.end(p3),type:"end"})}p3=on.length;while(p3--){p7.push({time:on.start(p3),type:"start"});p7.push({time:on.end(p3),type:"end"})}p7.sort(function(p9,p8){return p9.time-p8.time});for(p3=0;p3<p7.length;p3++){if(p7[p3].type==="start"){d++;if(d===2){i=p7[p3].time}}else{if(p7[p3].type==="end"){d--;if(d===1){t=p7[p3].time}}}if(i!==null&&t!==null){e.push([i,t]);i=null;t=null}}return d9.createTimeRanges(e)};var nS=90000;var oy=function oy(d,r){var i=d.addSourceBuffer(r);var on=Object.create(null);on.updating=false;on.realBuffer_=i;var t=function t(p5){if(typeof i[p5]==="function"){on[p5]=function(){return i[p5].apply(i,arguments)}}else{if(typeof on[p5]==="undefined"){Object.defineProperty(on,p5,{get:function p4(){return i[p5]},set:function p3(p6){return i[p5]=p6}})}}};for(var e in i){t(e)}return on};var ca=function(p5){ih(p3,p5);function p3(qa,qd){cP(this,p3);var qf=a3(this,(p3.__proto__||Object.getPrototypeOf(p3)).call(this,d9.EventTarget));qf.timestampOffset_=0;qf.pendingBuffers_=[];qf.bufferUpdating_=false;qf.mediaSource_=qa;qf.codecs_=qd;qf.audioCodec_=null;qf.videoCodec_=null;qf.audioDisabled_=false;qf.appendAudioInitSegment_=true;qf.gopBuffer_=[];qf.timeMapping_=0;qf.safeAppend_=d9.browser.IE_VERSION>=11;var qe={remux:false,alignGopsAtEnd:qf.safeAppend_};qf.codecs_.forEach(function(qg){if(K(qg)){qf.audioCodec_=qg}else{if(gP(qg)){qf.videoCodec_=qg}}});qf.transmuxer_=new iB();qf.transmuxer_.postMessage({action:"init",options:qe});qf.transmuxer_.onmessage=function(qg){if(qg.data.action==="data"){return qf.data_(qg)}if(qg.data.action==="done"){return qf.done_(qg)}if(qg.data.action==="gopInfo"){return qf.appendGopInfo_(qg)}if(qg.data.action==="videoSegmentTimingInfo"){return qf.videoSegmentTimingInfo_(qg.data.videoSegmentTimingInfo)}};Object.defineProperty(qf,"timestampOffset",{get:function qc(){return this.timestampOffset_},set:function qb(qg){if(typeof qg==="number"&&qg>=0){this.timestampOffset_=qg;this.appendAudioInitSegment_=true;this.gopBuffer_.length=0;this.timeMapping_=0;this.transmuxer_.postMessage({action:"setTimestampOffset",timestampOffset:qg})}}});Object.defineProperty(qf,"appendWindowStart",{get:function qc(){return(this.videoBuffer_||this.audioBuffer_).appendWindowStart},set:function qb(qg){if(this.videoBuffer_){this.videoBuffer_.appendWindowStart=qg}if(this.audioBuffer_){this.audioBuffer_.appendWindowStart=qg}}});Object.defineProperty(qf,"updating",{get:function qc(){return !!(this.bufferUpdating_||!this.audioDisabled_&&this.audioBuffer_&&this.audioBuffer_.updating||this.videoBuffer_&&this.videoBuffer_.updating)}});Object.defineProperty(qf,"buffered",{get:function qc(){return i6(this.videoBuffer_,this.audioBuffer_,this.audioDisabled_)}});return qf}fG(p3,[{key:"data_",value:function i(qb){var qa=qb.data.segment;qa.data=new Uint8Array(qa.data,qb.data.byteOffset,qb.data.byteLength);qa.initSegment=new Uint8Array(qa.initSegment.data,qa.initSegment.byteOffset,qa.initSegment.byteLength);cr(this,this.mediaSource_,qa);this.pendingBuffers_.push(qa);return}},{key:"done_",value:function p9(qa){if(this.mediaSource_.readyState==="closed"){this.pendingBuffers_.length=0;return}this.processPendingSegments_();return}},{key:"videoSegmentTimingInfo_",value:function p4(qb){var qa={start:{decode:qb.start.dts/nS,presentation:qb.start.pts/nS},end:{decode:qb.end.dts/nS,presentation:qb.end.pts/nS},baseMediaDecodeTime:qb.baseMediaDecodeTime/nS};if(qb.prependedContentDuration){qa.prependedContentDuration=qb.prependedContentDuration/nS}this.trigger({type:"videoSegmentTimingInfo",videoSegmentTimingInfo:qa})}},{key:"createRealSourceBuffers_",value:function p7(){var qb=this;var qa=["audio","video"];qa.forEach(function(qe){if(!qb[qe+"Codec_"]){return}if(qb[qe+"Buffer_"]){return}var qc=null;if(qb.mediaSource_[qe+"Buffer_"]){qc=qb.mediaSource_[qe+"Buffer_"];qc.updating=false}else{var qd=qe+"Codec_";var qf=qe+'/mp4;codecs="'+qb[qd]+'"';qc=oy(qb.mediaSource_.nativeMediaSource_,qf);qb.mediaSource_[qe+"Buffer_"]=qc}qb[qe+"Buffer_"]=qc;["update","updatestart","updateend"].forEach(function(qg){qc.addEventListener(qg,function(){if(qe==="audio"&&qb.audioDisabled_){return}if(qg==="updateend"){qb[qe+"Buffer_"].updating=false}var qh=qa.every(function(qi){if(qi==="audio"&&qb.audioDisabled_){return true}if(qe!==qi&&qb[qi+"Buffer_"]&&qb[qi+"Buffer_"].updating){return false}return true});if(qh){return qb.trigger(qg)}})})})}},{key:"appendBuffer",value:function e(qa){this.bufferUpdating_=true;if(this.audioBuffer_&&this.audioBuffer_.buffered.length){var qb=this.audioBuffer_.buffered;this.transmuxer_.postMessage({action:"setAudioAppendStart",appendStart:qb.end(qb.length-1)})}if(this.videoBuffer_){this.transmuxer_.postMessage({action:"alignGopsWith",gopsToAlignWith:dh(this.gopBuffer_,this.mediaSource_.player_?this.mediaSource_.player_.currentTime():null,this.timeMapping_)})}this.transmuxer_.postMessage({action:"push",data:qa.buffer,byteOffset:qa.byteOffset,byteLength:qa.byteLength},[qa.buffer]);this.transmuxer_.postMessage({action:"flush"})}},{key:"appendGopInfo_",value:function p6(qa){this.gopBuffer_=gm(this.gopBuffer_,qa.data.gopInfo,this.safeAppend_)}},{key:"remove",value:function on(qc,qb){if(this.videoBuffer_){this.videoBuffer_.updating=true;this.videoBuffer_.remove(qc,qb);this.gopBuffer_=y(this.gopBuffer_,qc,qb,this.timeMapping_)}if(!this.audioDisabled_&&this.audioBuffer_){this.audioBuffer_.updating=true;this.audioBuffer_.remove(qc,qb)}kx(qc,qb,this.metadataTrack_);if(this.inbandTextTracks_){for(var qa in this.inbandTextTracks_){kx(qc,qb,this.inbandTextTracks_[qa])}}}},{key:"processPendingSegments_",value:function t(){var qa={video:{segments:[],bytes:0},audio:{segments:[],bytes:0},captions:[],metadata:[]};if(!this.pendingBuffers_.length){this.trigger("updateend");this.bufferUpdating_=false;return}qa=this.pendingBuffers_.reduce(function(qd,qe){var qc=qe.type;var qf=qe.data;var qg=qe.initSegment;qd[qc].segments.push(qf);qd[qc].bytes+=qf.byteLength;qd[qc].initSegment=qg;if(qe.captions){qd.captions=qd.captions.concat(qe.captions)}if(qe.info){qd[qc].info=qe.info}if(qe.metadata){qd.metadata=qd.metadata.concat(qe.metadata)}return qd},qa);if(!this.videoBuffer_&&!this.audioBuffer_){if(qa.video.bytes===0){this.videoCodec_=null}if(qa.audio.bytes===0){this.audioCodec_=null}this.createRealSourceBuffers_()}if(qa.audio.info){this.mediaSource_.trigger({type:"audioinfo",info:qa.audio.info})}if(qa.video.info){this.mediaSource_.trigger({type:"videoinfo",info:qa.video.info})}if(this.appendAudioInitSegment_){if(!this.audioDisabled_&&this.audioBuffer_){qa.audio.segments.unshift(qa.audio.initSegment);qa.audio.bytes+=qa.audio.initSegment.byteLength}this.appendAudioInitSegment_=false}var qb=false;if(this.videoBuffer_&&qa.video.bytes){qa.video.segments.unshift(qa.video.initSegment);qa.video.bytes+=qa.video.initSegment.byteLength;this.concatAndAppendSegments_(qa.video,this.videoBuffer_)}else{if(this.videoBuffer_&&(this.audioDisabled_||!this.audioBuffer_)){qb=true}}iO(this,qa.captions,qa.metadata);if(!this.audioDisabled_&&this.audioBuffer_){this.concatAndAppendSegments_(qa.audio,this.audioBuffer_)}this.pendingBuffers_.length=0;if(qb){this.trigger("updateend")}this.bufferUpdating_=false}},{key:"concatAndAppendSegments_",value:function d(qd,qc){var qe=0;var qb=void 0;if(qd.bytes){qb=new Uint8Array(qd.bytes);qd.segments.forEach(function(qf){qb.set(qf,qe);qe+=qf.byteLength});try{qc.updating=true;qc.appendBuffer(qb)}catch(qa){if(this.mediaSource_.player_){this.mediaSource_.player_.error({code:-3,type:"APPEND_BUFFER_ERR",message:qa.message,originalError:qa})}}}}},{key:"abort",value:function r(){if(this.videoBuffer_){this.videoBuffer_.abort()}if(!this.audioDisabled_&&this.audioBuffer_){this.audioBuffer_.abort()}if(this.transmuxer_){this.transmuxer_.postMessage({action:"reset"})}this.pendingBuffers_.length=0;this.bufferUpdating_=false}},{key:"dispose",value:function p8(){if(this.transmuxer_){this.transmuxer_.terminate()}this.trigger("dispose");this.off()}}]);return p3}(d9.EventTarget);var j7=function(i){ih(e,i);function e(){cP(this,e);var p5=a3(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));var p4=void 0;p5.nativeMediaSource_=new cb.MediaSource();for(p4 in p5.nativeMediaSource_){if(!(p4 in e.prototype)&&typeof p5.nativeMediaSource_[p4]==="function"){p5[p4]=p5.nativeMediaSource_[p4].bind(p5.nativeMediaSource_)}}p5.duration_=NaN;Object.defineProperty(p5,"duration",{get:function p3(){if(this.duration_===Infinity){return this.duration_}return this.nativeMediaSource_.duration},set:function on(p6){this.duration_=p6;if(p6!==Infinity){this.nativeMediaSource_.duration=p6;return}}});Object.defineProperty(p5,"seekable",{get:function p3(){if(this.duration_===Infinity){return d9.createTimeRanges([[0,this.nativeMediaSource_.duration]])}return this.nativeMediaSource_.seekable}});Object.defineProperty(p5,"readyState",{get:function p3(){return this.nativeMediaSource_.readyState}});Object.defineProperty(p5,"activeSourceBuffers",{get:function p3(){return this.activeSourceBuffers_}});p5.sourceBuffers=[];p5.activeSourceBuffers_=[];p5.updateActiveSourceBuffers_=function(){p5.activeSourceBuffers_.length=0;if(p5.sourceBuffers.length===1){var qa=p5.sourceBuffers[0];qa.appendAudioInitSegment_=true;qa.audioDisabled_=!qa.audioCodec_;p5.activeSourceBuffers_.push(qa);return}var p9=false;var p7=true;for(var p8=0;p8<p5.player_.audioTracks().length;p8++){var p6=p5.player_.audioTracks()[p8];if(p6.enabled&&p6.kind!=="main"){p9=true;p7=false;break}}p5.sourceBuffers.forEach(function(qc,qb){qc.appendAudioInitSegment_=true;if(qc.videoCodec_&&qc.audioCodec_){qc.audioDisabled_=p9}else{if(qc.videoCodec_&&!qc.audioCodec_){qc.audioDisabled_=true;p7=false}else{if(!qc.videoCodec_&&qc.audioCodec_){qc.audioDisabled_=qb?p7:!p7;if(qc.audioDisabled_){return}}}}p5.activeSourceBuffers_.push(qc)})};p5.onPlayerMediachange_=function(){p5.sourceBuffers.forEach(function(p6){p6.appendAudioInitSegment_=true})};p5.onHlsReset_=function(){p5.sourceBuffers.forEach(function(p6){if(p6.transmuxer_){p6.transmuxer_.postMessage({action:"resetCaptions"})}})};p5.onHlsSegmentTimeMapping_=function(p6){p5.sourceBuffers.forEach(function(p7){return p7.timeMapping_=p6.mapping})};["sourceopen","sourceclose","sourceended"].forEach(function(p6){this.nativeMediaSource_.addEventListener(p6,this.trigger.bind(this))},p5);p5.on("sourceopen",function(p7){var p6=eT.querySelector('[src="'+p5.url_+'"]');if(!p6){return}p5.player_=d9(p6.parentNode);if(!p5.player_){return}p5.player_.tech_.on("hls-reset",p5.onHlsReset_);p5.player_.tech_.on("hls-segment-time-mapping",p5.onHlsSegmentTimeMapping_);if(p5.player_.audioTracks&&p5.player_.audioTracks()){p5.player_.audioTracks().on("change",p5.updateActiveSourceBuffers_);p5.player_.audioTracks().on("addtrack",p5.updateActiveSourceBuffers_);p5.player_.audioTracks().on("removetrack",p5.updateActiveSourceBuffers_)}p5.player_.on("mediachange",p5.onPlayerMediachange_)});p5.on("sourceended",function(p8){var p9=kt(p5.duration);for(var p7=0;p7<p5.sourceBuffers.length;p7++){var qa=p5.sourceBuffers[p7];var p6=qa.metadataTrack_&&qa.metadataTrack_.cues;if(p6&&p6.length){p6[p6.length-1].endTime=p9}}});p5.on("sourceclose",function(p6){this.sourceBuffers.forEach(function(p7){if(p7.transmuxer_){p7.transmuxer_.terminate()}});this.sourceBuffers.length=0;if(!this.player_){return}if(this.player_.audioTracks&&this.player_.audioTracks()){this.player_.audioTracks().off("change",this.updateActiveSourceBuffers_);this.player_.audioTracks().off("addtrack",this.updateActiveSourceBuffers_);this.player_.audioTracks().off("removetrack",this.updateActiveSourceBuffers_)}if(this.player_.el_){this.player_.off("mediachange",this.onPlayerMediachange_)}if(this.player_.tech_&&this.player_.tech_.el_){this.player_.tech_.off("hls-reset",this.onHlsReset_);this.player_.tech_.off("hls-segment-time-mapping",this.onHlsSegmentTimeMapping_)}});return p5}fG(e,[{key:"addSeekableRange_",value:function d(p4,on){var p3=void 0;if(this.duration!==Infinity){p3=new Error("MediaSource.addSeekableRange() can only be invoked when the duration is Infinity");p3.name="InvalidStateError";p3.code=11;throw p3}if(on>this.nativeMediaSource_.duration||isNaN(this.nativeMediaSource_.duration)){this.nativeMediaSource_.duration=on}}},{key:"addSourceBuffer",value:function t(p4){var on=void 0;var p5=S(p4);if(/^(video|audio)\/mp2t$/i.test(p5.type)){var p3=[];if(p5.parameters&&p5.parameters.codecs){p3=p5.parameters.codecs.split(",");p3=n3(p3);p3=p3.filter(function(p6){return K(p6)||gP(p6)})}if(p3.length===0){p3=["avc1.4d400d","mp4a.40.2"]}on=new ca(this,p3);if(this.sourceBuffers.length!==0){this.sourceBuffers[0].createRealSourceBuffers_();on.createRealSourceBuffers_();this.sourceBuffers[0].audioDisabled_=true}}else{on=this.nativeMediaSource_.addSourceBuffer(p4)}this.sourceBuffers.push(on);return on}},{key:"dispose",value:function r(){this.trigger("dispose");this.off();this.sourceBuffers.forEach(function(on){if(on.dispose){on.dispose()}});this.sourceBuffers.length=0}}]);return e}(d9.EventTarget);var c4=0;d9.mediaSources={};var hK=function hK(i,e){var d=d9.mediaSources[i];if(d){d.trigger({type:"sourceopen",swfId:e})}else{throw new Error("Media Source not found (Video.js)")}};var ik=function ik(){return !!cb.MediaSource&&!!cb.MediaSource.isTypeSupported&&cb.MediaSource.isTypeSupported('video/mp4;codecs="avc1.4d400d,mp4a.40.2"')};var fi=function fi(){this.MediaSource={open:hK,supportsNativeMediaSources:ik};if(ik()){return new j7()}throw new Error("Cannot use create a virtual MediaSource for this video")};fi.open=hK;fi.supportsNativeMediaSources=ik;var jB={createObjectURL:function n2(e){var i="blob:vjs-media-source/";var d=void 0;if(e instanceof j7){d=cb.URL.createObjectURL(e.nativeMediaSource_);e.url_=d;return d}if(!(e instanceof j7)){d=cb.URL.createObjectURL(e);e.url_=d;return d}d=i+c4;c4++;d9.mediaSources[d]=e;return d}};d9.MediaSource=fi;d9.URL=jB;var c3=d9.EventTarget,f8=d9.mergeOptions;var g1=function nZ(r,on){var t=void 0;var p3=f8(r,{duration:on.duration,minimumUpdatePeriod:on.minimumUpdatePeriod});for(var e=0;e<on.playlists.length;e++){var d=b1(p3,on.playlists[e]);if(d){p3=d}else{t=true}}mz(on,function(p5,p6,p7,p4){if(p5.playlists&&p5.playlists.length){var p8=p5.playlists[0].id;var i=b1(p3,p5.playlists[0]);if(i){p3=i;p3.mediaGroups[p6][p7][p4].playlists[0]=p3.playlists[p8];t=false}}});if(t){return null}return p3};var mV=function mV(d){var e=d.byterange.offset+d.byterange.length-1;return d.uri+"-"+d.byterange.offset+"-"+e};var oU=function oU(i,e){var r=Boolean(!i.map&&!e.map);var d=r||Boolean(i.map&&e.map&&i.map.byterange.offset===e.map.byterange.offset&&i.map.byterange.length===e.map.byterange.length);return d&&i.uri===e.uri&&i.byterange.offset===e.byterange.offset&&i.byterange.length===e.byterange.length};var aF=function aF(r,i){var d={};for(var p4 in r){var p3=r[p4];var t=p3.sidx;if(t){var e=mV(t);if(!i[e]){break}var on=i[e].sidxInfo;if(oU(on,t)){d[e]=i[e]}}}return d};var e2=function e2(e,p3,d,i){var r=lz(e,{manifestUri:p3,clientOffset:d});var t=aF(r.playlists,i);var on=t;mz(r,function(p7,p4,p6,p5){if(p7.playlists&&p7.playlists.length){var p8=p7.playlists;on=f8(on,aF(p8,i))}});return on};var o1=function o1(d,p3,on,i,t){var e={uri:eY(i.handleManifestRedirects,d.resolvedUri),byterange:d.byterange,playlist:p3};var r=d9.mergeOptions(e,{responseType:"arraybuffer",headers:m8(e)});return on(r,t)};var ei=function(i){ih(p9,i);function p9(qm,qf){var qn=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};var qk=arguments[3];cP(this,p9);var qj=a3(this,(p9.__proto__||Object.getPrototypeOf(p9)).call(this));var qi=qn.withCredentials,qh=qi===undefined?false:qi,qg=qn.handleManifestRedirects,ql=qg===undefined?false:qg;qj.hls_=qf;qj.withCredentials=qh;qj.handleManifestRedirects=ql;if(!qm){throw new Error("A non-empty playlist URL or playlist is required")}qj.on("minimumUpdatePeriod",function(){qj.refreshXml_()});qj.on("mediaupdatetimeout",function(){qj.refreshMedia_(qj.media().id)});qj.state="HAVE_NOTHING";qj.loadedPlaylists_={};if(typeof qm==="string"){qj.srcUrl=qm;qj.sidxMapping_={};return a3(qj)}qj.setupChildLoader(qk,qm);return qj}fG(p9,[{key:"setupChildLoader",value:function qc(qf,qg){this.masterPlaylistLoader_=qf;this.childPlaylist_=qg}},{key:"dispose",value:function qd(){this.trigger("dispose");this.stopRequest();this.loadedPlaylists_={};cb.clearTimeout(this.minimumUpdatePeriodTimeout_);cb.clearTimeout(this.mediaRequest_);cb.clearTimeout(this.mediaUpdateTimeout);this.off()}},{key:"hasPendingRequest",value:function r(){return this.request||this.mediaRequest_}},{key:"stopRequest",value:function p7(){if(this.request){var qf=this.request;this.request=null;qf.onreadystatechange=null;qf.abort()}}},{key:"sidxRequestFinished_",value:function qe(qj,qi,qf,qh){var qg=this;return function(qm,ql){if(!qg.request){return}qg.request=null;if(qm){qg.error={status:ql.status,message:"DASH playlist request error at URL: "+qj.uri,response:ql.response,code:2};if(qf){qg.state=qf}qg.trigger("error");return qh(qi,null)}var qk=new Uint8Array(ql.response);var qn=ec.parseSidx(qk.subarray(8));return qh(qi,qn)}}},{key:"media",value:function p4(qk){var qj=this;if(!qk){return this.media_}if(this.state==="HAVE_NOTHING"){throw new Error("Cannot switch media playlist from "+this.state)}var qf=this.state;if(typeof qk==="string"){if(!this.master.playlists[qk]){throw new Error("Unknown playlist URI: "+qk)}qk=this.master.playlists[qk]}var qh=!this.media_||qk.id!==this.media_.id;if(qh&&this.loadedPlaylists_[qk.id]&&this.loadedPlaylists_[qk.id].endList){this.state="HAVE_METADATA";this.media_=qk;if(qh){this.trigger("mediachanging");this.trigger("mediachange")}return}if(!qh){return}if(this.media_){this.trigger("mediachanging")}if(!qk.sidx){this.mediaRequest_=cb.setTimeout(this.haveMetadata.bind(this,{startingState:qf,playlist:qk}),0);return}var qi=void 0;var qg=void 0;if(this.masterPlaylistLoader_){qi=this.masterPlaylistLoader_.master;qg=this.masterPlaylistLoader_.sidxMapping_}else{qi=this.master;qg=this.sidxMapping_}var ql=mV(qk.sidx);qg[ql]={sidxInfo:qk.sidx};this.request=o1(qk.sidx,qk,this.hls_.xhr,{handleManifestRedirects:this.handleManifestRedirects},this.sidxRequestFinished_(qk,qi,qf,function(qn,qm){if(!qn||!qm){throw new Error("failed to request sidx")}qg[ql].sidx=qm;qj.haveMetadata({startingState:qf,playlist:qn.playlists[qk.id]})}))}},{key:"haveMetadata",value:function p6(qg){var qf=qg.startingState,qh=qg.playlist;this.state="HAVE_METADATA";this.loadedPlaylists_[qh.id]=qh;this.mediaRequest_=null;this.refreshMedia_(qh.id);if(qf==="HAVE_MASTER"){this.trigger("loadedmetadata")}else{this.trigger("mediachange")}}},{key:"pause",value:function p3(){this.stopRequest();cb.clearTimeout(this.mediaUpdateTimeout);cb.clearTimeout(this.minimumUpdatePeriodTimeout_);if(this.state==="HAVE_NOTHING"){this.started=false}}},{key:"load",value:function p5(qh){var qg=this;cb.clearTimeout(this.mediaUpdateTimeout);cb.clearTimeout(this.minimumUpdatePeriodTimeout_);var qi=this.media();if(qh){var qf=qi?qi.targetDuration/2*1000:5*1000;this.mediaUpdateTimeout=cb.setTimeout(function(){return qg.load()},qf);return}if(!this.started){this.start();return}if(qi&&!qi.endList){this.trigger("mediaupdatetimeout")}else{this.trigger("loadedplaylist")}}},{key:"parseMasterXml",value:function qb(){var qh=lz(this.masterXml_,{manifestUri:this.srcUrl,clientOffset:this.clientOffset_,sidxMapping:this.sidxMapping_});qh.uri=this.srcUrl;for(var qg=0;qg<qh.playlists.length;qg++){var qf="placeholder-uri-"+qg;qh.playlists[qg].uri=qf}mz(qh,function(qm,qi,qk,qj){if(qm.playlists&&qm.playlists.length){var ql="placeholder-uri-"+qi+"-"+qk+"-"+qj;var qn=k(0,ql);qm.playlists[0].uri=ql;qm.playlists[0].id=qn;qh.playlists[qn]=qm.playlists[0];qh.playlists[ql]=qm.playlists[0]}});lb(qh);k6(qh);return qh}},{key:"start",value:function t(){var qf=this;this.started=true;if(this.masterPlaylistLoader_){this.mediaRequest_=cb.setTimeout(this.haveMaster_.bind(this),0);return}this.request=this.hls_.xhr({uri:this.srcUrl,withCredentials:this.withCredentials},function(qg,qh){if(!qf.request){return}qf.request=null;if(qg){qf.error={status:qh.status,message:"DASH playlist request error at URL: "+qf.srcUrl,responseText:qh.responseText,code:2};if(qf.state==="HAVE_NOTHING"){qf.started=false}return qf.trigger("error")}qf.masterXml_=qh.responseText;if(qh.responseHeaders&&qh.responseHeaders.date){qf.masterLoaded_=Date.parse(qh.responseHeaders.date)}else{qf.masterLoaded_=Date.now()}qf.srcUrl=eY(qf.handleManifestRedirects,qf.srcUrl,qh);qf.syncClientServerClock_(qf.onClientServerClockSync_.bind(qf))})}},{key:"syncClientServerClock_",value:function qa(qf){var qg=this;var qh=jO(this.masterXml_);if(qh===null){this.clientOffset_=this.masterLoaded_-Date.now();return qf()}if(qh.method==="DIRECT"){this.clientOffset_=qh.value-Date.now();return qf()}this.request=this.hls_.xhr({uri:aB(this.srcUrl,qh.value),method:qh.method,withCredentials:this.withCredentials},function(qi,qk){if(!qg.request){return}if(qi){qg.clientOffset_=qg.masterLoaded_-Date.now();return qf()}var qj=void 0;if(qh.method==="HEAD"){if(!qk.responseHeaders||!qk.responseHeaders.date){qj=qg.masterLoaded_}else{qj=Date.parse(qk.responseHeaders.date)}}else{qj=Date.parse(qk.responseText)}qg.clientOffset_=qj-Date.now();qf()})}},{key:"haveMaster_",value:function e(){this.state="HAVE_MASTER";this.mediaRequest_=null;if(!this.masterPlaylistLoader_){this.master=this.parseMasterXml();this.trigger("loadedplaylist")}else{if(!this.media_){this.media(this.childPlaylist_)}}}},{key:"onClientServerClockSync_",value:function p8(){var qf=this;this.haveMaster_();if(!this.hasPendingRequest()&&!this.media_){this.media(this.master.playlists[0])}if(this.master&&this.master.minimumUpdatePeriod){this.minimumUpdatePeriodTimeout_=cb.setTimeout(function(){qf.trigger("minimumUpdatePeriod")},this.master.minimumUpdatePeriod)}}},{key:"refreshXml_",value:function d(){var qf=this;this.request=this.hls_.xhr({uri:this.srcUrl,withCredentials:this.withCredentials},function(qh,qj){if(!qf.request){return}qf.request=null;if(qh){qf.error={status:qj.status,message:"DASH playlist request error at URL: "+qf.srcUrl,responseText:qj.responseText,code:2};if(qf.state==="HAVE_NOTHING"){qf.started=false}return qf.trigger("error")}qf.masterXml_=qj.responseText;qf.sidxMapping_=e2(qf.masterXml_,qf.srcUrl,qf.clientOffset_,qf.sidxMapping_);var qi=qf.parseMasterXml();var qg=g1(qf.master,qi);var qk=qf.media().sidx;if(qg){if(qk){var qm=mV(qk);if(!qf.sidxMapping_[qm]){var ql=qf.media();qf.request=o1(ql.sidx,ql,qf.hls_.xhr,{handleManifestRedirects:qf.handleManifestRedirects},qf.sidxRequestFinished_(ql,qi,qf.state,function(qo,qn){if(!qo||!qn){throw new Error("failed to request sidx on minimumUpdatePeriod")}qf.sidxMapping_[qm].sidx=qn;qf.minimumUpdatePeriodTimeout_=cb.setTimeout(function(){qf.trigger("minimumUpdatePeriod")},qf.master.minimumUpdatePeriod);qf.refreshMedia_(qf.media().id);return}))}}else{qf.master=qg}}qf.minimumUpdatePeriodTimeout_=cb.setTimeout(function(){qf.trigger("minimumUpdatePeriod")},qf.master.minimumUpdatePeriod)})}},{key:"refreshMedia_",value:function on(qi){var qj=this;if(!qi){throw new Error("refreshMedia_ must take a media id")}var qg=void 0;var qh=void 0;if(this.masterPlaylistLoader_){qg=this.masterPlaylistLoader_.master;qh=this.masterPlaylistLoader_.parseMasterXml()}else{qg=this.master;qh=this.parseMasterXml()}var qf=g1(qg,qh);if(qf){if(this.masterPlaylistLoader_){this.masterPlaylistLoader_.master=qf}else{this.master=qf}this.media_=qf.playlists[qi]}else{this.media_=qh.playlists[qi];this.trigger("playlistunchanged")}if(!this.media().endList){this.mediaUpdateTimeout=cb.setTimeout(function(){qj.trigger("mediaupdatetimeout")},jU(this.media(),!!qf))}this.trigger("loadedplaylist")}}]);return p9}(c3);var ko=function ko(d){if(d9.log.debug){return d9.log.debug.bind(d9,"VHS:",d+" >")}return function(){}};function eA(){}var gM=function(){function p5(p9,qc,qb,qa){cP(this,p5);this.callbacks_=[];this.pendingCallback_=null;this.timestampOffset_=0;this.mediaSource=p9;this.processedAppend_=false;this.type_=qb;this.mimeType_=qc;this.logger_=ko("SourceUpdater["+qb+"]["+qc+"]");if(p9.readyState==="closed"){p9.addEventListener("sourceopen",this.createSourceBuffer_.bind(this,qc,qa))}else{this.createSourceBuffer_(qc,qa)}}fG(p5,[{key:"createSourceBuffer_",value:function p6(qa,p9){var qb=this;this.sourceBuffer_=this.mediaSource.addSourceBuffer(qa);this.logger_("created SourceBuffer");if(p9){p9.trigger("sourcebufferadded");if(this.mediaSource.sourceBuffers.length<2){p9.on("sourcebufferadded",function(){qb.start_()});return}}this.start_()}},{key:"start_",value:function r(){var p9=this;this.started_=true;this.onUpdateendCallback_=function(){var qa=p9.pendingCallback_;p9.pendingCallback_=null;p9.sourceBuffer_.removing=false;p9.logger_("buffered ["+n8(p9.buffered())+"]");if(qa){qa()}p9.runCallback_()};this.sourceBuffer_.addEventListener("updateend",this.onUpdateendCallback_);this.runCallback_()}},{key:"abort",value:function p3(p9){var qa=this;if(this.processedAppend_){this.queueCallback_(function(){qa.sourceBuffer_.abort()},p9)}}},{key:"appendBuffer",value:function on(qa,p9){var qb=this;this.processedAppend_=true;this.queueCallback_(function(){if(qa.videoSegmentTimingInfoCallback){qb.sourceBuffer_.addEventListener("videoSegmentTimingInfo",qa.videoSegmentTimingInfoCallback)}qb.sourceBuffer_.appendBuffer(qa.bytes)},function(){if(qa.videoSegmentTimingInfoCallback){qb.sourceBuffer_.removeEventListener("videoSegmentTimingInfo",qa.videoSegmentTimingInfoCallback)}p9()})}},{key:"buffered",value:function t(){if(!this.sourceBuffer_){return d9.createTimeRanges()}return this.sourceBuffer_.buffered}},{key:"remove",value:function p4(qc,qa){var qb=this;var p9=arguments.length>2&&arguments[2]!==undefined?arguments[2]:eA;if(this.processedAppend_){this.queueCallback_(function(){qb.logger_("remove ["+qc+" => "+qa+"]");qb.sourceBuffer_.removing=true;qb.sourceBuffer_.remove(qc,qa)},p9)}}},{key:"updating",value:function p7(){return !this.sourceBuffer_||this.sourceBuffer_.updating||!!this.pendingCallback_&&this.pendingCallback_!==eA}},{key:"timestampOffset",value:function e(qa){var p9=this;if(typeof qa!=="undefined"){this.queueCallback_(function(){p9.sourceBuffer_.timestampOffset=qa;p9.runCallback_()});this.timestampOffset_=qa}return this.timestampOffset_}},{key:"queueCallback_",value:function d(qa,p9){this.callbacks_.push([qa.bind(this),p9]);this.runCallback_()}},{key:"runCallback_",value:function i(){var p9=void 0;if(!this.updating()&&this.callbacks_.length&&this.started_){p9=this.callbacks_.shift();this.pendingCallback_=p9[1];p9[0]()}}},{key:"dispose",value:function p8(){var p9=this;var qa=function qa(){if(p9.sourceBuffer_&&p9.mediaSource.readyState==="open"){p9.sourceBuffer_.abort()}p9.sourceBuffer_.removeEventListener("updateend",qa)};this.sourceBuffer_.removeEventListener("updateend",this.onUpdateendCallback_);if(this.sourceBuffer_.removing){this.sourceBuffer_.addEventListener("updateend",qa)}else{qa()}}}]);return p5}();var jT={GOAL_BUFFER_LENGTH:30,MAX_GOAL_BUFFER_LENGTH:60,GOAL_BUFFER_LENGTH_RATE:1,INITIAL_BANDWIDTH:4194304,BANDWIDTH_VARIANCE:1.2,BUFFER_LOW_WATER_LINE:0,MAX_BUFFER_LOW_WATER_LINE:30,BUFFER_LOW_WATER_LINE_RATE:1};var jc={FAILURE:2,TIMEOUT:-101,ABORTED:-102};var jW=function jW(d){d.forEach(function(e){e.abort()})};var pe=function pe(d){return{bandwidth:d.bandwidth,bytesReceived:d.bytesReceived||0,roundTripTime:d.roundTripTime||0}};var nT=function nT(e){var r=e.target;var d=Date.now()-r.requestTime;var i={bandwidth:Infinity,bytesReceived:0,roundTripTime:d||0};i.bytesReceived=e.loaded;i.bandwidth=Math.floor(i.bytesReceived/i.roundTripTime*8*1000);return i};var la=function la(d,e){if(e.timedout){return{status:e.status,message:"HLS request timed-out at URL: "+e.uri,code:jc.TIMEOUT,xhr:e}}if(e.aborted){return{status:e.status,message:"HLS request aborted at URL: "+e.uri,code:jc.ABORTED,xhr:e}}if(d){return{status:e.status,message:"HLS request errored at URL: "+e.uri,code:jc.FAILURE,xhr:e}}return null};var eP=function eP(d,e){return function(t,p3){var r=p3.response;var on=la(t,p3);if(on){return e(on,d)}if(r.byteLength!==16){return e({status:p3.status,message:"Invalid HLS key at URL: "+p3.uri,code:jc.FAILURE,xhr:p3},d)}var i=new DataView(r);d.key.bytes=new Uint32Array([i.getUint32(0),i.getUint32(4),i.getUint32(8),i.getUint32(12)]);return e(null,d)}};var mo=function mo(e,d,i){return function(t,p3){var r=p3.response;var on=la(t,p3);if(on){return i(on,e)}if(r.byteLength===0){return i({status:p3.status,message:"Empty HLS segment content at URL: "+p3.uri,code:jc.FAILURE,xhr:p3},e)}e.map.bytes=new Uint8Array(p3.response);if(d&&!d.isInitialized()){d.init()}e.map.timescales=G.timescale(e.map.bytes);e.map.videoTrackIds=G.videoTrackIds(e.map.bytes);return i(null,e)}};var dU=function dU(e,d,i){return function(on,p4){var t=p4.response;var p3=la(on,p4);var r=void 0;if(p3){return i(p3,e)}if(t.byteLength===0){return i({status:p4.status,message:"Empty HLS segment content at URL: "+p4.uri,code:jc.FAILURE,xhr:p4},e)}e.stats=pe(p4);if(e.key){e.encryptedBytes=new Uint8Array(p4.response)}else{e.bytes=new Uint8Array(p4.response)}if(d&&e.map&&e.map.bytes){if(!d.isInitialized()){d.init()}r=d.parse(e.bytes,e.map.videoTrackIds,e.map.timescales);if(r&&r.captions){e.captionStreams=r.captionStreams;e.fmp4Captions=r.captions}}return i(null,e)}};var p0=function p0(t,i,e){var r=function r(p3){if(p3.data.source===i.requestId){t.removeEventListener("message",r);var on=p3.data.decrypted;i.bytes=new Uint8Array(on.bytes,on.byteOffset,on.byteLength);return e(null,i)}};t.addEventListener("message",r);var d=void 0;if(i.key.bytes.slice){d=i.key.bytes.slice()}else{d=new Uint32Array(Array.prototype.slice.call(i.key.bytes))}t.postMessage(kX({source:i.requestId,encrypted:i.encryptedBytes,key:d,iv:i.key.iv}),[i.encryptedBytes.buffer,d.buffer])};var H=function H(t,r,i){var e=0;var d=false;return function(on,p3){if(d){return}if(on){d=true;jW(t);return i(on,p3)}e+=1;if(e===t.length){p3.endOfAllRequests=Date.now();if(p3.encryptedBytes){return p0(r,p3,i)}return i(null,p3)}}};var o6=function o6(e,d){return function(i){e.stats=d9.mergeOptions(e.stats,nT(i));if(!e.stats.firstBytesReceivedAt&&e.stats.bytesReceived){e.stats.firstBytesReceivedAt=Date.now()}return d(i,e)}};var kz=function kz(on,qd,p5,e,d,qe,p3){var t=[];var qc=H(t,p5,p3);if(d.key&&!d.key.bytes){var p8=d9.mergeOptions(qd,{uri:d.key.resolvedUri,responseType:"arraybuffer"});var p6=eP(d,qc);var i=on(p8,p6);t.push(i)}if(d.map&&!d.map.bytes){var qa=d9.mergeOptions(qd,{uri:d.map.resolvedUri,responseType:"arraybuffer",headers:m8(d.map)});var r=mo(d,e,qc);var p7=on(qa,r);t.push(p7)}var p9=d9.mergeOptions(qd,{uri:d.resolvedUri,responseType:"arraybuffer",headers:m8(d)});var p4=dU(d,e,qc);var qb=on(p9,p4);qb.addEventListener("progress",o6(d,qe));t.push(qb);return function(){return jW(t)}};var gd=function gd(e,i){var d=void 0;if(!e){return""}d=cb.getComputedStyle(e);if(!d){return""}return d[i]};var o=function o(i,e){var d=i.slice();i.sort(function(on,r){var t=e(on,r);if(t===0){return d.indexOf(on)-d.indexOf(r)}return t})};var mZ=function mZ(r,e){var i=void 0;var d=void 0;if(r.attributes.BANDWIDTH){i=r.attributes.BANDWIDTH}i=i||cb.Number.MAX_VALUE;if(e.attributes.BANDWIDTH){d=e.attributes.BANDWIDTH}d=d||cb.Number.MAX_VALUE;return i-d};var jn=function jn(i,d){var e=void 0;var r=void 0;if(i.attributes.RESOLUTION&&i.attributes.RESOLUTION.width){e=i.attributes.RESOLUTION.width}e=e||cb.Number.MAX_VALUE;if(d.attributes.RESOLUTION&&d.attributes.RESOLUTION.width){r=d.attributes.RESOLUTION.width}r=r||cb.Number.MAX_VALUE;if(e===r&&i.attributes.BANDWIDTH&&d.attributes.BANDWIDTH){return i.attributes.BANDWIDTH-d.attributes.BANDWIDTH}return e-r};var ew=function ew(on,qa,p7,qd,qb){var d=on.playlists.map(function(qi){var qh=void 0;var qf=void 0;var qg=void 0;qh=qi.attributes.RESOLUTION&&qi.attributes.RESOLUTION.width;qf=qi.attributes.RESOLUTION&&qi.attributes.RESOLUTION.height;qg=qi.attributes.BANDWIDTH;qg=qg||cb.Number.MAX_VALUE;return{bandwidth:qg,width:qh,height:qf,playlist:qi}});o(d,function(qg,qf){return qg.bandwidth-qf.bandwidth});d=d.filter(function(qf){return !bl.isIncompatible(qf.playlist)});var i=d.filter(function(qf){return bl.isEnabled(qf.playlist)});if(!i.length){i=d.filter(function(qf){return !bl.isDisabled(qf.playlist)})}var e=i.filter(function(qf){return qf.bandwidth*jT.BANDWIDTH_VARIANCE<qa});var t=e[e.length-1];var qe=e.filter(function(qf){return qf.bandwidth===t.bandwidth})[0];if(qb===false){var qc=qe||i[0]||d[0];return qc?qc.playlist:null}var p9=e.filter(function(qf){return qf.width&&qf.height});o(p9,function(qg,qf){return qg.width-qf.width});var p5=p9.filter(function(qf){return qf.width===p7&&qf.height===qd});t=p5[p5.length-1];var p4=p5.filter(function(qf){return qf.bandwidth===t.bandwidth})[0];var p3=void 0;var r=void 0;var p8=void 0;if(!p4){p3=p9.filter(function(qf){return qf.width>p7||qf.height>qd});r=p3.filter(function(qf){return qf.width===p3[0].width&&qf.height===p3[0].height});t=r[r.length-1];p8=r.filter(function(qf){return qf.bandwidth===t.bandwidth})[0]}var p6=p8||p4||qe||i[0]||d[0];return p6?p6.playlist:null};var aV=function aV(){var d=this.useDevicePixelRatio?cb.devicePixelRatio||1:1;return ew(this.playlists.master,this.systemBandwidth,parseInt(gd(this.tech_.el(),"width"),10)*d,parseInt(gd(this.tech_.el(),"height"),10)*d,this.limitRenditionByPlayerDimensions)};var pf=function pf(t){var d=t.master,e=t.currentTime,p4=t.bandwidth,p5=t.duration,qa=t.segmentDuration,p8=t.timeUntilRebuffer,p6=t.currentTimeline,r=t.syncController;var p3=d.playlists.filter(function(qb){return !bl.isIncompatible(qb)});var on=p3.filter(bl.isEnabled);if(!on.length){on=p3.filter(function(qb){return !bl.isDisabled(qb)})}var i=on.filter(bl.hasAttribute.bind(null,"BANDWIDTH"));var p7=i.map(function(qf){var qe=r.getSyncPoint(qf,p5,p6,e);var qb=qe?1:2;var qc=bl.estimateSegmentRequestTime(qa,p4,qf);var qd=qc*qb-p8;return{playlist:qf,rebufferingImpact:qd}});var p9=p7.filter(function(qb){return qb.rebufferingImpact<=0});o(p9,function(qc,qb){return mZ(qb.playlist,qc.playlist)});if(p9.length){return p9[0]}o(p7,function(qc,qb){return qc.rebufferingImpact-qb.rebufferingImpact});return p7[0]||null};var j8=function j8(){var e=this.playlists.master.playlists.filter(bl.isEnabled);o(e,function(r,i){return mZ(r,i)});var d=e.filter(function(i){return kg(i.attributes.CODECS).videoCodec});return d[0]||null};var b8=function b8(i,e,t){for(var r in t){if(!i[r]){e.trigger({type:"usage",name:"hls-608"});var d=e.textTracks().getTrackById(r);if(d){i[r]=d}else{i[r]=e.addRemoteTextTrack({kind:"captions",id:r,label:r},false).track}}}};var oW=function oW(t){var i=t.inbandTextTracks,d=t.captionArray,e=t.timestampOffset;if(!d){return}var r=window.WebKitDataCue||window.VTTCue;d.forEach(function(p4){var on=p4.stream;var p5=p4.startTime;var p3=p4.endTime;if(!i[on]){return}p5+=e;p3+=e;i[on].addCue(new r(p5,p3,p4.text))})};var dW=500;var lZ=function lZ(r,d,i){if(!r||!d){return false}var e=r.segments;var t=i===e.length;return r.endList&&d.readyState==="open"&&t};var jk=function jk(d){return typeof d==="number"&&isFinite(d)};var aS=function aS(i,d,e){if(i!=="main"||!d||!e){return null}if(!e.containsAudio&&!e.containsVideo){return"Neither audio nor video found in segment."}if(d.containsVideo&&!e.containsVideo){return"Only audio found in segment when we expected video. We can't switch to audio only from a stream that had video. To get rid of this message, please add codec information to the manifest."}if(!d.containsVideo&&e.containsVideo){return"Video found in segment when we expected only audio. We can't switch to a stream with video from an audio only stream. To get rid of this message, please add codec information to the manifest."}return null};var n6=function n6(r,e,d){var t=e-30;if(r.length){t=Math.max(t,r.start(0))}var i=e-d;return Math.min(i,t)};var pM=function pM(t){var p4=t.segment,d=p4.start,i=p4.end,r=t.playlist,p7=r.mediaSequence,e=r.id,p3=r.segments,on=p3===undefined?[]:p3,p5=t.mediaIndex,p6=t.timeline;return["appending ["+p5+"] of ["+p7+", "+(p7+on.length)+"] from playlist ["+e+"]","["+d+" => "+i+"] in timeline ["+p6+"]"].join(" ")};var l7=function(qq){ih(i,qq);function i(qE){cP(this,i);var qF=a3(this,(i.__proto__||Object.getPrototypeOf(i)).call(this));if(!qE){throw new TypeError("Initialization settings are required")}if(typeof qE.currentTime!=="function"){throw new TypeError("No currentTime getter specified")}if(!qE.mediaSource){throw new TypeError("No MediaSource specified")}qF.bandwidth=qE.bandwidth;qF.throughput={rate:0,count:0};qF.roundTrip=NaN;qF.resetStats_();qF.mediaIndex=null;qF.hasPlayed_=qE.hasPlayed;qF.currentTime_=qE.currentTime;qF.seekable_=qE.seekable;qF.seeking_=qE.seeking;qF.duration_=qE.duration;qF.mediaSource_=qE.mediaSource;qF.hls_=qE.hls;qF.loaderType_=qE.loaderType;qF.startingMedia_=void 0;qF.segmentMetadataTrack_=qE.segmentMetadataTrack;qF.goalBufferLength_=qE.goalBufferLength;qF.sourceType_=qE.sourceType;qF.inbandTextTracks_=qE.inbandTextTracks;qF.state_="INIT";qF.checkBufferTimeout_=null;qF.error_=void 0;qF.currentTimeline_=-1;qF.pendingSegment_=null;qF.mimeType_=null;qF.sourceUpdater_=null;qF.xhrOptions_=null;qF.activeInitSegmentId_=null;qF.initSegments_={};qF.cacheEncryptionKeys_=qE.cacheEncryptionKeys;qF.keyCache_={};if(qF.loaderType_==="main"){qF.captionParser_=new el()}else{qF.captionParser_=null}qF.decrypter_=qE.decrypter;qF.syncController_=qE.syncController;qF.syncPoint_={segmentIndex:0,time:0};qF.triggerSyncInfoUpdate_=function(){return qF.trigger("syncinfoupdate")};qF.syncController_.on("syncinfoupdate",qF.triggerSyncInfoUpdate_);qF.mediaSource_.addEventListener("sourceopen",function(){return qF.ended_=false});qF.fetchAtBuffer_=false;qF.logger_=ko("SegmentLoader["+qF.loaderType_+"]");Object.defineProperty(qF,"state",{get:function qD(){return this.state_},set:function qC(qG){if(qG!==this.state_){this.logger_(this.state_+" -> "+qG);this.state_=qG}}});return qF}fG(i,[{key:"resetStats_",value:function qx(){this.mediaBytesTransferred=0;this.mediaRequests=0;this.mediaRequestsAborted=0;this.mediaRequestsTimedout=0;this.mediaRequestsErrored=0;this.mediaTransferDuration=0;this.mediaSecondsLoaded=0}},{key:"dispose",value:function qh(){this.trigger("dispose");this.state="DISPOSED";this.pause();this.abort_();if(this.sourceUpdater_){this.sourceUpdater_.dispose()}this.resetStats_();if(this.captionParser_){this.captionParser_.reset()}if(this.checkBufferTimeout_){cb.clearTimeout(this.checkBufferTimeout_)}if(this.syncController_&&this.triggerSyncInfoUpdate_){this.syncController_.off("syncinfoupdate",this.triggerSyncInfoUpdate_)}this.off()}},{key:"abort",value:function qe(){if(this.state!=="WAITING"){if(this.pendingSegment_){this.pendingSegment_=null}return}this.abort_();this.state="READY";if(!this.paused()){this.monitorBuffer_()}}},{key:"abort_",value:function qt(){if(this.pendingSegment_){this.pendingSegment_.abortRequests()}this.pendingSegment_=null}},{key:"error",value:function qk(qC){if(typeof qC!=="undefined"){this.error_=qC}this.pendingSegment_=null;return this.error_}},{key:"endOfStream",value:function qb(){this.ended_=true;this.pause();this.trigger("ended")}},{key:"buffered_",value:function qo(){if(!this.sourceUpdater_){return d9.createTimeRanges()}return this.sourceUpdater_.buffered()}},{key:"initSegment",value:function qm(qE){var qC=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(!qE){return null}var qF=dM(qE);var qD=this.initSegments_[qF];if(qC&&!qD&&qE.bytes){this.initSegments_[qF]=qD={resolvedUri:qE.resolvedUri,byterange:qE.byterange,bytes:qE.bytes,timescales:qE.timescales,videoTrackIds:qE.videoTrackIds}}return qD||qE}},{key:"segmentKey",value:function qA(qF){var qE=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(!qF){return null}var qG=hF(qF);var qD=this.keyCache_[qG];if(this.cacheEncryptionKeys_&&qE&&!qD&&qF.bytes){this.keyCache_[qG]=qD={resolvedUri:qF.resolvedUri,bytes:qF.bytes}}var qC={resolvedUri:(qD||qF).resolvedUri};if(qD){qC.bytes=qD.bytes}return qC}},{key:"couldBeginLoading_",value:function p4(){return this.playlist_&&(this.sourceUpdater_||this.mimeType_&&this.state==="INIT")&&!this.paused()}},{key:"load",value:function qu(){this.monitorBuffer_();if(!this.playlist_){return}this.syncController_.setDateTimeMapping(this.playlist_);if(this.state==="INIT"&&this.couldBeginLoading_()){return this.init_()}if(!this.couldBeginLoading_()||this.state!=="READY"&&this.state!=="INIT"){return}this.state="READY"}},{key:"init_",value:function qd(){this.state="READY";this.sourceUpdater_=new gM(this.mediaSource_,this.mimeType_,this.loaderType_,this.sourceBufferEmitter_);this.resetEverything();return this.monitorBuffer_()}},{key:"playlist",value:function qc(qF){var qE=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};if(!qF){return}var qD=this.playlist_;var qC=this.pendingSegment_;this.playlist_=qF;this.xhrOptions_=qE;if(this.state==="INIT"){qF.syncInfo={mediaSequence:qF.mediaSequence,time:0}}var qH=null;if(qD){if(qD.id){qH=qD.id}else{if(qD.uri){qH=qD.uri}}}this.logger_("playlist update ["+qH+" => "+(qF.id||qF.uri)+"]");this.trigger("syncinfoupdate");if(this.state==="INIT"&&this.couldBeginLoading_()){return this.init_()}if(!qD||qD.uri!==qF.uri){if(this.mediaIndex!==null){this.resyncLoader()}return}var qG=qF.mediaSequence-qD.mediaSequence;this.logger_("live window shift ["+qG+"]");if(this.mediaIndex!==null){this.mediaIndex-=qG}if(qC){qC.mediaIndex-=qG;if(qC.mediaIndex>=0){qC.segment=qF.segments[qC.mediaIndex]}}this.syncController_.saveExpiredSegmentInfo(qD,qF)}},{key:"pause",value:function e(){if(this.checkBufferTimeout_){cb.clearTimeout(this.checkBufferTimeout_);this.checkBufferTimeout_=null}}},{key:"paused",value:function qz(){return this.checkBufferTimeout_===null}},{key:"mimeType",value:function p3(qD,qC){if(this.mimeType_){return}this.mimeType_=qD;this.sourceBufferEmitter_=qC;if(this.state==="INIT"&&this.couldBeginLoading_()){this.init_()}}},{key:"resetEverything",value:function r(qC){this.ended_=false;this.resetLoader();this.remove(0,Infinity,qC);if(this.captionParser_){this.captionParser_.clearAllCaptions()}this.trigger("reseteverything")}},{key:"resetLoader",value:function qv(){this.fetchAtBuffer_=false;this.resyncLoader()}},{key:"resyncLoader",value:function qs(){this.mediaIndex=null;this.syncPoint_=null;this.abort()}},{key:"remove",value:function qj(qF,qD,qC){if(qD===Infinity){qD=this.duration_()}if(this.sourceUpdater_){this.sourceUpdater_.remove(qF,qD,qC)}kx(qF,qD,this.segmentMetadataTrack_);if(this.inbandTextTracks_){for(var qE in this.inbandTextTracks_){kx(qF,qD,this.inbandTextTracks_[qE])}}}},{key:"monitorBuffer_",value:function p6(){if(this.checkBufferTimeout_){cb.clearTimeout(this.checkBufferTimeout_)}this.checkBufferTimeout_=cb.setTimeout(this.monitorBufferTick_.bind(this),1)}},{key:"monitorBufferTick_",value:function qa(){if(this.state==="READY"){this.fillBuffer_()}if(this.checkBufferTimeout_){cb.clearTimeout(this.checkBufferTimeout_)}this.checkBufferTimeout_=cb.setTimeout(this.monitorBufferTick_.bind(this),dW)}},{key:"fillBuffer_",value:function qf(){if(this.sourceUpdater_.updating()){return}if(!this.syncPoint_){this.syncPoint_=this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_())}var qC=this.checkBuffer_(this.buffered_(),this.playlist_,this.mediaIndex,this.hasPlayed_(),this.currentTime_(),this.syncPoint_);if(!qC){return}if(this.isEndOfStream_(qC.mediaIndex)){this.endOfStream();return}if(qC.mediaIndex===this.playlist_.segments.length-1&&this.mediaSource_.readyState==="ended"&&!this.seeking_()){return}if(qC.timeline!==this.currentTimeline_){this.syncController_.reset();qC.timestampOffset=qC.startOfSegment;if(this.captionParser_){this.captionParser_.clearAllCaptions()}}this.loadSegment_(qC)}},{key:"isEndOfStream_",value:function p7(qC){var qD=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.playlist_;return lZ(qD,this.mediaSource_,qC)&&!this.sourceUpdater_.updating()}},{key:"checkBuffer_",value:function qy(qF,qD,qG,qI,qC,qK){var qM=0;var qN=void 0;if(qF.length){qM=qF.end(qF.length-1)}var qL=Math.max(0,qM-qC);if(!qD.segments.length){return null}if(qL>=this.goalBufferLength_()){return null}if(!qI&&qL>=1){return null}if(qK===null){qG=this.getSyncSegmentCandidate_(qD);return this.generateSegmentInfo_(qD,qG,null,true)}if(qG!==null){var qH=qD.segments[qG];qN=qM;return this.generateSegmentInfo_(qD,qG+1,qN,false)}if(this.fetchAtBuffer_){var qJ=bl.getMediaInfoForTime(qD,qM,qK.segmentIndex,qK.time);qG=qJ.mediaIndex;qN=qJ.startTime}else{var qE=bl.getMediaInfoForTime(qD,qC,qK.segmentIndex,qK.time);qG=qE.mediaIndex;qN=qE.startTime}return this.generateSegmentInfo_(qD,qG,qN,false)}},{key:"getSyncSegmentCandidate_",value:function on(qD){var qC=this;if(this.currentTimeline_===-1){return 0}var qE=qD.segments.map(function(qG,qF){return{timeline:qG.timeline,segmentIndex:qF}}).filter(function(qF){return qF.timeline===qC.currentTimeline_});if(qE.length){return qE[Math.min(qE.length-1,1)].segmentIndex}return Math.max(qD.segments.length-1,0)}},{key:"generateSegmentInfo_",value:function qr(qG,qD,qC,qF){if(qD<0||qD>=qG.segments.length){return null}var qE=qG.segments[qD];return{requestId:"segment-loader-"+Math.random(),uri:qE.resolvedUri,mediaIndex:qD,isSyncRequest:qF,startOfSegment:qC,playlist:qG,bytes:null,encryptedBytes:null,timestampOffset:null,timeline:qE.timeline,duration:qE.duration,segment:qE}}},{key:"abortRequestEarly_",value:function qg(qF){if(this.hls_.tech_.paused()||!this.xhrOptions_.timeout||!this.playlist_.attributes.BANDWIDTH){return false}if(Date.now()-(qF.firstBytesReceivedAt||Date.now())<1000){return false}var qD=this.currentTime_();var qG=qF.bandwidth;var qJ=this.pendingSegment_.duration;var qE=bl.estimateSegmentRequestTime(qJ,qG,this.playlist_,qF.bytesReceived);var qL=ob(this.buffered_(),qD,this.hls_.tech_.playbackRate())-1;if(qE<=qL){return false}var qK=pf({master:this.hls_.playlists.master,currentTime:qD,bandwidth:qG,duration:this.duration_(),segmentDuration:qJ,timeUntilRebuffer:qL,currentTimeline:this.currentTimeline_,syncController:this.syncController_});if(!qK){return}var qH=qE-qL;var qI=qH-qK.rebufferingImpact;var qC=0.5;if(qL<=kq){qC=1}if(!qK.playlist||qK.playlist.uri===this.playlist_.uri||qI<qC){return false}this.bandwidth=qK.playlist.attributes.BANDWIDTH*jT.BANDWIDTH_VARIANCE+1;this.abort();this.trigger("earlyabort");return true}},{key:"handleProgress_",value:function p8(qD,qC){if(!this.pendingSegment_||qC.requestId!==this.pendingSegment_.requestId||this.abortRequestEarly_(qC.stats)){return}this.trigger("progress")}},{key:"loadSegment_",value:function p9(qC){this.state="WAITING";this.pendingSegment_=qC;this.trimBackBuffer_(qC);qC.abortRequests=kz(this.hls_.xhr,this.xhrOptions_,this.decrypter_,this.captionParser_,this.createSimplifiedSegmentObj_(qC),this.handleProgress_.bind(this),this.segmentRequestFinished_.bind(this))}},{key:"trimBackBuffer_",value:function ql(qC){var qD=n6(this.seekable_(),this.currentTime_(),this.playlist_.targetDuration||10);if(qD>0){this.remove(0,qD)}}},{key:"createSimplifiedSegmentObj_",value:function qn(qC){var qF=qC.segment;var qD={resolvedUri:qF.resolvedUri,byterange:qF.byterange,requestId:qC.requestId};if(qF.key){var qE=qF.key.iv||new Uint32Array([0,0,0,qC.mediaIndex+qC.playlist.mediaSequence]);qD.key=this.segmentKey(qF.key);qD.key.iv=qE}if(qF.map){qD.map=this.initSegment(qF.map)}return qD}},{key:"segmentRequestFinished_",value:function d(qD,qC){this.mediaRequests+=1;if(qC.stats){this.mediaBytesTransferred+=qC.stats.bytesReceived;this.mediaTransferDuration+=qC.stats.roundTripTime}if(!this.pendingSegment_){this.mediaRequestsAborted+=1;return}if(qC.requestId!==this.pendingSegment_.requestId){return}if(qD){this.pendingSegment_=null;this.state="READY";if(qD.code===jc.ABORTED){this.mediaRequestsAborted+=1;return}this.pause();if(qD.code===jc.TIMEOUT){this.mediaRequestsTimedout+=1;this.bandwidth=1;this.roundTrip=NaN;this.trigger("bandwidthupdate");return}this.mediaRequestsErrored+=1;this.error(qD);this.trigger("error");return}this.bandwidth=qC.stats.bandwidth;this.roundTrip=qC.stats.roundTripTime;if(qC.map){qC.map=this.initSegment(qC.map,true)}if(qC.key){this.segmentKey(qC.key,true)}this.processSegmentResponse_(qC)}},{key:"processSegmentResponse_",value:function qp(qD){var qC=this.pendingSegment_;qC.bytes=qD.bytes;if(qD.map){qC.segment.map.bytes=qD.map.bytes}qC.endOfAllRequests=qD.endOfAllRequests;if(qD.fmp4Captions){b8(this.inbandTextTracks_,this.hls_.tech_,qD.captionStreams);oW({inbandTextTracks:this.inbandTextTracks_,captionArray:qD.fmp4Captions,timestampOffset:0});if(this.captionParser_){this.captionParser_.clearParsedCaptions()}}this.handleSegment_()}},{key:"handleSegment_",value:function t(){var qG=this;if(!this.pendingSegment_){this.state="READY";return}var qD=this.pendingSegment_;var qE=qD.segment;var qL=this.syncController_.probeSegmentInfo(qD);if(typeof this.startingMedia_==="undefined"&&qL&&(qL.containsAudio||qL.containsVideo)){this.startingMedia_={containsAudio:qL.containsAudio,containsVideo:qL.containsVideo}}var qK=aS(this.loaderType_,this.startingMedia_,qL);if(qK){this.error({message:qK,blacklistDuration:Infinity});this.trigger("error");return}if(qD.isSyncRequest){this.trigger("syncinfoupdate");this.pendingSegment_=null;this.state="READY";return}if(qD.timestampOffset!==null&&qD.timestampOffset!==this.sourceUpdater_.timestampOffset()){if(qL&&qL.segmentTimestampInfo){var qC=qL.segmentTimestampInfo[0].ptsTime;var qH=qL.segmentTimestampInfo[0].dtsTime;qD.timestampOffset-=qC-qH}this.sourceUpdater_.timestampOffset(qD.timestampOffset);this.trigger("timestampoffset")}var qJ=this.syncController_.mappingForTimeline(qD.timeline);if(qJ!==null){this.trigger({type:"segmenttimemapping",mapping:qJ})}this.state="APPENDING";if(qE.map){var qI=dM(qE.map);if(!this.activeInitSegmentId_||this.activeInitSegmentId_!==qI){var qF=this.initSegment(qE.map);this.sourceUpdater_.appendBuffer({bytes:qF.bytes},function(){qG.activeInitSegmentId_=qI})}}qD.byteLength=qD.bytes.byteLength;if(typeof qE.start==="number"&&typeof qE.end==="number"){this.mediaSecondsLoaded+=qE.end-qE.start}else{this.mediaSecondsLoaded+=qE.duration}this.logger_(pM(qD));this.sourceUpdater_.appendBuffer({bytes:qD.bytes,videoSegmentTimingInfoCallback:this.handleVideoSegmentTimingInfo_.bind(this,qD.requestId)},this.handleUpdateEnd_.bind(this))}},{key:"handleVideoSegmentTimingInfo_",value:function qw(qE,qD){if(!this.pendingSegment_||qE!==this.pendingSegment_.requestId){return}var qC=this.pendingSegment_.segment;if(!qC.videoTimingInfo){qC.videoTimingInfo={}}qC.videoTimingInfo.transmuxerPrependedSeconds=qD.videoSegmentTimingInfo.prependedContentDuration||0;qC.videoTimingInfo.transmuxedPresentationStart=qD.videoSegmentTimingInfo.start.presentation;qC.videoTimingInfo.transmuxedPresentationEnd=qD.videoSegmentTimingInfo.end.presentation;qC.videoTimingInfo.baseMediaDecodeTime=qD.videoSegmentTimingInfo.baseMediaDecodeTime}},{key:"handleUpdateEnd_",value:function qi(){if(!this.pendingSegment_){this.state="READY";if(!this.paused()){this.monitorBuffer_()}return}var qC=this.pendingSegment_;var qE=qC.segment;var qD=this.mediaIndex!==null;this.pendingSegment_=null;this.recordThroughput_(qC);this.addSegmentMetadataCue_(qC);this.state="READY";this.mediaIndex=qC.mediaIndex;this.fetchAtBuffer_=true;this.currentTimeline_=qC.timeline;this.trigger("syncinfoupdate");if(qE.end&&this.currentTime_()-qE.end>qC.playlist.targetDuration*3){this.resetEverything();return}if(qD){this.trigger("bandwidthupdate")}this.trigger("progress");if(this.isEndOfStream_(qC.mediaIndex+1,qC.playlist)){this.endOfStream()}if(!this.paused()){this.monitorBuffer_()}}},{key:"recordThroughput_",value:function p5(qE){var qF=this.throughput.rate;var qD=Date.now()-qE.endOfAllRequests+1;var qC=Math.floor(qE.byteLength/qD*8*1000);this.throughput.rate+=(qC-qF)/++this.throughput.count}},{key:"addSegmentMetadataCue_",value:function qB(qD){if(!this.segmentMetadataTrack_){return}var qF=qD.segment;var qJ=qF.start;var qE=qF.end;if(!jk(qJ)||!jk(qE)){return}kx(qJ,qE,this.segmentMetadataTrack_);var qI=cb.WebKitDataCue||cb.VTTCue;var qH={custom:qF.custom,dateTimeObject:qF.dateTimeObject,dateTimeString:qF.dateTimeString,bandwidth:qD.playlist.attributes.BANDWIDTH,resolution:qD.playlist.attributes.RESOLUTION,codecs:qD.playlist.attributes.CODECS,byteLength:qD.byteLength,uri:qD.uri,timeline:qD.timeline,playlist:qD.playlist.id,start:qJ,end:qE};var qG=JSON.stringify(qH);var qC=new qI(qJ,qE,qG);qC.value=qH;this.segmentMetadataTrack_.addCue(qC)}}]);return i}(d9.EventTarget);var dv=function dv(d){return decodeURIComponent(escape(String.fromCharCode.apply(null,d)))};var oH=new Uint8Array("\n\n".split("").map(function(d){return d.charCodeAt(0)}));var C=function(on){ih(t,on);function t(qb){var qa=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};cP(this,t);var qc=a3(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,qb,qa));qc.mediaSource_=null;qc.subtitlesTrack_=null;qc.featuresNativeTextTracks_=qb.featuresNativeTextTracks;return qc}fG(t,[{key:"buffered_",value:function p7(){if(!this.subtitlesTrack_||!this.subtitlesTrack_.cues.length){return d9.createTimeRanges()}var qb=this.subtitlesTrack_.cues;var qc=qb[0].startTime;var qa=qb[qb.length-1].startTime;return d9.createTimeRanges([[qc,qa]])}},{key:"initSegment",value:function p6(qd){var qb=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(!qd){return null}var qf=dM(qd);var qc=this.initSegments_[qf];if(qb&&!qc&&qd.bytes){var qa=oH.byteLength+qd.bytes.byteLength;var qe=new Uint8Array(qa);qe.set(qd.bytes);qe.set(oH,qd.bytes.byteLength);this.initSegments_[qf]=qc={resolvedUri:qd.resolvedUri,byterange:qd.byterange,bytes:qe}}return qc||qd}},{key:"couldBeginLoading_",value:function p8(){return this.playlist_&&this.subtitlesTrack_&&!this.paused()}},{key:"init_",value:function p5(){this.state="READY";this.resetEverything();return this.monitorBuffer_()}},{key:"track",value:function e(qa){if(typeof qa==="undefined"){return this.subtitlesTrack_}this.subtitlesTrack_=qa;if(this.state==="INIT"&&this.couldBeginLoading_()){this.init_()}return this.subtitlesTrack_}},{key:"remove",value:function p4(qb,qa){kx(qb,qa,this.subtitlesTrack_)}},{key:"fillBuffer_",value:function d(){var qc=this;if(!this.syncPoint_){this.syncPoint_=this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_())}var qa=this.checkBuffer_(this.buffered_(),this.playlist_,this.mediaIndex,this.hasPlayed_(),this.currentTime_(),this.syncPoint_);qa=this.skipEmptySegments_(qa);if(!qa){return}if(this.syncController_.timestampOffsetForTimeline(qa.timeline)===null){var qb=function qb(){qc.state="READY";if(!qc.paused()){qc.monitorBuffer_()}};this.syncController_.one("timestampoffset",qb);this.state="WAITING_ON_TIMELINE";return}this.loadSegment_(qa)}},{key:"skipEmptySegments_",value:function p3(qa){while(qa&&qa.segment.empty){qa=this.generateSegmentInfo_(qa.playlist,qa.mediaIndex+1,qa.startOfSegment+qa.duration,qa.isSyncRequest)}return qa}},{key:"handleSegment_",value:function r(){var qc=this;if(!this.pendingSegment_||!this.subtitlesTrack_){this.state="READY";return}this.state="APPENDING";var qa=this.pendingSegment_;var qd=qa.segment;if(typeof cb.WebVTT!=="function"&&this.subtitlesTrack_&&this.subtitlesTrack_.tech_){var qf=void 0;var qb=function qb(){qc.subtitlesTrack_.tech_.off("vttjsloaded",qf);qc.error({message:"Error loading vtt.js"});qc.state="READY";qc.pause();qc.trigger("error")};qf=function qf(){qc.subtitlesTrack_.tech_.off("vttjserror",qb);qc.handleSegment_()};this.state="WAITING_ON_VTTJS";this.subtitlesTrack_.tech_.one("vttjsloaded",qf);this.subtitlesTrack_.tech_.one("vttjserror",qb);return}qd.requested=true;try{this.parseVTTCues_(qa)}catch(qe){this.error({message:qe.message});this.state="READY";this.pause();return this.trigger("error")}this.updateTimeMapping_(qa,this.syncController_.timelines[qa.timeline],this.playlist_);if(qa.isSyncRequest){this.trigger("syncinfoupdate");this.pendingSegment_=null;this.state="READY";return}qa.byteLength=qa.bytes.byteLength;this.mediaSecondsLoaded+=qd.duration;if(qa.cues.length){this.remove(qa.cues[0].endTime,qa.cues[qa.cues.length-1].endTime)}qa.cues.forEach(function(qg){qc.subtitlesTrack_.addCue(qc.featuresNativeTextTracks_?new cb.VTTCue(qg.startTime,qg.endTime,qg.text):qg)});this.handleUpdateEnd_()}},{key:"parseVTTCues_",value:function p9(qa){var qf=void 0;var qb=false;if(typeof cb.TextDecoder==="function"){qf=new cb.TextDecoder("utf8")}else{qf=cb.WebVTT.StringDecoder();qb=true}var qe=new cb.WebVTT.Parser(cb,cb.vttjs,qf);qa.cues=[];qa.timestampmap={MPEGTS:0,LOCAL:0};qe.oncue=qa.cues.push.bind(qa.cues);qe.ontimestampmap=function(qg){return qa.timestampmap=qg};qe.onparsingerror=function(qg){d9.log.warn("Error encountered when parsing cues: "+qg.message)};if(qa.segment.map){var qc=qa.segment.map.bytes;if(qb){qc=dv(qc)}qe.parse(qc)}var qd=qa.bytes;if(qb){qd=dv(qd)}qe.parse(qd);qe.flush()}},{key:"updateTimeMapping_",value:function i(qb,qa,qh){var qd=qb.segment;if(!qa){return}if(!qb.cues.length){qd.empty=true;return}var qg=qb.timestampmap;var qf=qg.MPEGTS/90000-qg.LOCAL+qa.mapping;qb.cues.forEach(function(qi){qi.startTime+=qf;qi.endTime+=qf});if(!qh.syncInfo){var qe=qb.cues[0].startTime;var qc=qb.cues[qb.cues.length-1].startTime;qh.syncInfo={mediaSequence:qh.mediaSequence+qb.mediaIndex,time:Math.min(qe,qc-qd.duration)}}}}]);return t}(l7);var aD=function aD(e,on){var r=e.cues;for(var t=0;t<r.length;t++){var d=r[t];if(on>=d.adStartTime&&on<=d.adEndTime){return d}}return null};var bF=function bF(e,r){var t=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;if(!e.segments){return}var p6=t;var p3=void 0;for(var on=0;on<e.segments.length;on++){var p5=e.segments[on];if(!p3){p3=aD(r,p6+p5.duration/2)}if(p3){if("cueIn" in p5){p3.endTime=p6;p3.adEndTime=p6;p6+=p5.duration;p3=null;continue}if(p6<p3.endTime){p6+=p5.duration;continue}p3.endTime+=p5.duration}else{if("cueOut" in p5){p3=new cb.VTTCue(p6,p6+p5.duration,p5.cueOut);p3.adStartTime=p6;p3.adEndTime=p6+parseFloat(p5.cueOut);r.addCue(p3)}if("cueOutCont" in p5){var p4=void 0;var p7=void 0;var d=p5.cueOutCont.split("/").map(parseFloat);var p8=ad(d,2);p4=p8[0];p7=p8[1];p3=new cb.VTTCue(p6,p6+p5.duration,"");p3.adStartTime=p6-p4;p3.adEndTime=p3.adStartTime+p7;r.addCue(p3)}}p6+=p5.duration}};var dQ=F.inspect;var g3=[{name:"VOD",run:function cJ(on,t,e,d,i){if(e!==Infinity){var r={time:0,segmentIndex:0};return r}return null}},{name:"ProgramDateTime",run:function cJ(t,r,p7,p8,e){if(!t.datetimeToDisplayTime){return null}var p5=r.segments||[];var p9=null;var p4=null;e=e||0;for(var p3=0;p3<p5.length;p3++){var p6=p5[p3];if(p6.dateTimeObject){var on=p6.dateTimeObject.getTime()/1000;var qa=on+t.datetimeToDisplayTime;var d=Math.abs(e-qa);if(p4!==null&&(d===0||p4<d)){break}p4=d;p9={time:qa,segmentIndex:p3}}}return p9}},{name:"Segment",run:function cJ(t,r,p6,p7,e){var p4=r.segments||[];var p8=null;var p3=null;e=e||0;for(var on=0;on<p4.length;on++){var p5=p4[on];if(p5.timeline===p7&&typeof p5.start!=="undefined"){var d=Math.abs(e-p5.start);if(p3!==null&&p3<d){break}if(!p8||p3===null||p3>=d){p3=d;p8={time:p5.start,segmentIndex:on}}}}return p8}},{name:"Discontinuity",run:function cJ(t,r,p7,p8,e){var p9=null;e=e||0;if(r.discontinuityStarts&&r.discontinuityStarts.length){var p5=null;for(var p4=0;p4<r.discontinuityStarts.length;p4++){var p3=r.discontinuityStarts[p4];var on=r.discontinuitySequence+p4+1;var p6=t.discontinuities[on];if(p6){var d=Math.abs(e-p6.time);if(p5!==null&&p5<d){break}if(!p9||p5===null||p5>=d){p5=d;p9={time:p6.time,segmentIndex:p3}}}}}return p9}},{name:"Playlist",run:function cJ(on,t,e,d,i){if(t.syncInfo){var r={time:t.syncInfo.time,segmentIndex:t.syncInfo.mediaSequence-t.mediaSequence};return r}return null}}];var cM=function(p8){ih(e,p8);function e(){cP(this,e);var qe=a3(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));qe.inspectCache_=undefined;qe.timelines=[];qe.discontinuities=[];qe.datetimeToDisplayTime=null;qe.logger_=ko("SyncController");return qe}fG(e,[{key:"getSyncPoint",value:function p4(qh,qf,qe,qg){var qi=this.runStrategies_(qh,qf,qe,qg);if(!qi.length){return null}return this.selectSyncPoint_(qi,{key:"time",value:qg})}},{key:"getExpiredTime",value:function on(qg,qe){if(!qg||!qg.segments){return null}var qh=this.runStrategies_(qg,qe,qg.discontinuitySequence,0);if(!qh.length){return null}var qf=this.selectSyncPoint_(qh,{key:"segmentIndex",value:0});if(qf.segmentIndex>0){qf.time*=-1}return Math.abs(qf.time+gD(qg,qf.segmentIndex,0))}},{key:"runStrategies_",value:function p6(qk,qg,qe,qh){var ql=[];for(var qf=0;qf<g3.length;qf++){var qj=g3[qf];var qi=qj.run(this,qk,qg,qe,qh);if(qi){qi.strategy=qj.name;ql.push({strategy:qj.name,syncPoint:qi})}}return ql}},{key:"selectSyncPoint_",value:function t(qk,qj){var qi=qk[0].syncPoint;var qg=Math.abs(qk[0].syncPoint[qj.key]-qj.value);var qh=qk[0].strategy;for(var qf=1;qf<qk.length;qf++){var qe=Math.abs(qk[qf].syncPoint[qj.key]-qj.value);if(qe<qg){qg=qe;qi=qk[qf].syncPoint;qh=qk[qf].strategy}}this.logger_("syncPoint for ["+qj.key+": "+qj.value+"] chosen with strategy"+(" ["+qh+"]: [time:"+qi.time+",")+(" segmentIndex:"+qi.segmentIndex+"]"));return qi}},{key:"saveExpiredSegmentInfo",value:function p3(qe,qg){var qh=qg.mediaSequence-qe.mediaSequence;for(var qf=qh-1;qf>=0;qf--){var qi=qe.segments[qf];if(qi&&typeof qi.start!=="undefined"){qg.syncInfo={mediaSequence:qe.mediaSequence+qf,time:qi.start};this.logger_("playlist refresh sync: [time:"+qg.syncInfo.time+","+(" mediaSequence: "+qg.syncInfo.mediaSequence+"]"));this.trigger("syncinfoupdate");break}}}},{key:"setDateTimeMapping",value:function i(qf){if(!this.datetimeToDisplayTime&&qf.segments&&qf.segments.length&&qf.segments[0].dateTimeObject){var qe=qf.segments[0].dateTimeObject.getTime()/1000;this.datetimeToDisplayTime=-qe}}},{key:"reset",value:function p7(){this.inspectCache_=undefined}},{key:"probeSegmentInfo",value:function d(qe){var qg=qe.segment;var qh=qe.playlist;var qf=void 0;if(qg.map){qf=this.probeMp4Segment_(qe)}else{qf=this.probeTsSegment_(qe)}if(qf){if(this.calculateSegmentTimeMapping_(qe,qf)){this.saveDiscontinuitySyncInfo_(qe);if(!qh.syncInfo){qh.syncInfo={mediaSequence:qh.mediaSequence+qe.mediaIndex,time:qg.start}}}}return qf}},{key:"probeMp4Segment_",value:function qa(qf){var qh=qf.segment;var qg=G.timescale(qh.map.bytes);var qe=G.compositionStartTime(qg,qf.bytes);if(qf.timestampOffset!==null){qf.timestampOffset-=qe}return{start:qe,end:qe+qh.duration}}},{key:"probeTsSegment_",value:function r(qf){var qj=dQ(qf.bytes,this.inspectCache_);var qi=void 0;var qe=void 0;var qg=void 0;if(!qj){return null}if(qj.video&&qj.video.length===2){this.inspectCache_=qj.video[1].dts;qi=qj.video[0].dtsTime;qe=qj.video[1].dtsTime;qg=qj.video}else{if(qj.audio&&qj.audio.length===2){this.inspectCache_=qj.audio[1].dts;qi=qj.audio[0].dtsTime;qe=qj.audio[1].dtsTime;qg=qj.audio}}var qh={segmentTimestampInfo:qg,start:qi,end:qe,containsVideo:qj.video&&qj.video.length===2,containsAudio:qj.audio&&qj.audio.length===2};return qh}},{key:"timestampOffsetForTimeline",value:function p5(qe){if(typeof this.timelines[qe]==="undefined"){return null}return this.timelines[qe].time}},{key:"mappingForTimeline",value:function p9(qe){if(typeof this.timelines[qe]==="undefined"){return null}return this.timelines[qe].mapping}},{key:"calculateSegmentTimeMapping_",value:function qb(qf,qg){var qh=qf.segment;var qe=this.timelines[qf.timeline];if(qf.timestampOffset!==null){qe={time:qf.startOfSegment,mapping:qf.startOfSegment-qg.start};this.timelines[qf.timeline]=qe;this.trigger("timestampoffset");this.logger_("time mapping for timeline "+qf.timeline+": "+("[time: "+qe.time+"] [mapping: "+qe.mapping+"]"));qh.start=qf.startOfSegment;qh.end=qg.end+qe.mapping}else{if(qe){qh.start=qg.start+qe.mapping;qh.end=qg.end+qe.mapping}else{return false}}return true}},{key:"saveDiscontinuitySyncInfo_",value:function qd(qk){var qf=qk.playlist;var qm=qk.segment;if(qm.discontinuity){this.discontinuities[qm.timeline]={time:qm.start,accuracy:0}}else{if(qf.discontinuityStarts&&qf.discontinuityStarts.length){for(var ql=0;ql<qf.discontinuityStarts.length;ql++){var qj=qf.discontinuityStarts[ql];var qi=qf.discontinuitySequence+ql+1;var qe=qj-qk.mediaIndex;var qh=Math.abs(qe);if(!this.discontinuities[qi]||this.discontinuities[qi].accuracy>qh){var qg=void 0;if(qe<0){qg=qm.start-gD(qf,qk.mediaIndex,qj)}else{qg=qm.end+gD(qf,qk.mediaIndex+1,qj)}this.discontinuities[qi]={time:qg,accuracy:qh}}}}}}},{key:"dispose",value:function qc(){this.trigger("dispose");this.off()}}]);return e}(d9.EventTarget);var g6=new pY("./decrypter-worker.worker.js",function(i,r){var d=this;var e=function(){function p7(qh){return qh.subarray(0,qh.byteLength-qh[qh.byteLength-1])}var p8=function p8(qh,qi){if(!(qh instanceof qi)){throw new TypeError("Cannot call a class as a function")}};var p3=function(){function qh(ql,qj){for(var qi=0;qi<qj.length;qi++){var qk=qj[qi];qk.enumerable=qk.enumerable||false;qk.configurable=true;if("value" in qk){qk.writable=true}Object.defineProperty(ql,qk.key,qk)}}return function(qk,qi,qj){if(qi){qh(qk.prototype,qi)}if(qj){qh(qk,qj)}return qk}}();var qc=function qc(qi,qh){if(typeof qh!=="function"&&qh!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof qh)}qi.prototype=Object.create(qh&&qh.prototype,{constructor:{value:qi,enumerable:false,writable:true,configurable:true}});if(qh){Object.setPrototypeOf?Object.setPrototypeOf(qi,qh):qi.__proto__=qh}};var qg=function qg(qh,qi){if(!qh){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return qi&&(typeof qi==="object"||typeof qi==="function")?qi:qh};var on=function on(){var qt=[[[],[],[],[],[]],[[],[],[],[],[]]];var qo=qt[0];var qw=qt[1];var qn=qo[4];var qs=qw[4];var qm=void 0;var qq=void 0;var ql=void 0;var qp=[];var qj=[];var qi=void 0;var qv=void 0;var qr=void 0;var qu=void 0;var qk=void 0;var qh=void 0;for(qm=0;qm<256;qm++){qj[(qp[qm]=qm<<1^(qm>>7)*283)^qm]=qm}for(qq=ql=0;!qn[qq];qq^=qi||1,ql=qj[ql]||1){qu=ql^ql<<1^ql<<2^ql<<3^ql<<4;qu=qu>>8^qu&255^99;qn[qq]=qu;qs[qu]=qq;qr=qp[qv=qp[qi=qp[qq]]];qh=qr*16843009^qv*65537^qi*257^qq*16843008;qk=qp[qu]*257^qu*16843008;for(qm=0;qm<4;qm++){qo[qm][qq]=qk=qk<<24^qk>>>8;qw[qm][qu]=qh=qh<<24^qh>>>8}}for(qm=0;qm<5;qm++){qo[qm]=qo[qm].slice(0);qw[qm]=qw[qm].slice(0)}return qt};var p9=null;var qa=function(){function qh(qq){p8(this,qh);if(!p9){p9=on()}this._tables=[[p9[0][0].slice(),p9[0][1].slice(),p9[0][2].slice(),p9[0][3].slice(),p9[0][4].slice()],[p9[1][0].slice(),p9[1][1].slice(),p9[1][2].slice(),p9[1][3].slice(),p9[1][4].slice()]];var qm=void 0;var ql=void 0;var qn=void 0;var qp=void 0;var qs=void 0;var qo=this._tables[0][4];var qr=this._tables[1];var qj=qq.length;var qk=1;if(qj!==4&&qj!==6&&qj!==8){throw new Error("Invalid aes key size")}qp=qq.slice(0);qs=[];this._key=[qp,qs];for(qm=qj;qm<4*qj+28;qm++){qn=qp[qm-1];if(qm%qj===0||qj===8&&qm%qj===4){qn=qo[qn>>>24]<<24^qo[qn>>16&255]<<16^qo[qn>>8&255]<<8^qo[qn&255];if(qm%qj===0){qn=qn<<8^qn>>>24^qk<<24;qk=qk<<1^(qk>>7)*283}}qp[qm]=qp[qm-qj]^qn}for(ql=0;qm;ql++,qm--){qn=qp[ql&3?qm:qm-4];if(qm<=4||ql<4){qs[ql]=qn}else{qs[ql]=qr[0][qo[qn>>>24]]^qr[1][qo[qn>>16&255]]^qr[2][qo[qn>>8&255]]^qr[3][qo[qn&255]]}}}qh.prototype.decrypt=function qi(qC,qB,qz,qx,qr,qj){var qF=this._key[1];var qA=qC^qF[0];var qy=qx^qF[1];var qw=qz^qF[2];var qv=qB^qF[3];var qD=void 0;var qk=void 0;var qm=void 0;var qE=qF.length/4-2;var qq=void 0;var qn=4;var qu=this._tables[1];var qt=qu[0];var qs=qu[1];var qp=qu[2];var qo=qu[3];var ql=qu[4];for(qq=0;qq<qE;qq++){qD=qt[qA>>>24]^qs[qy>>16&255]^qp[qw>>8&255]^qo[qv&255]^qF[qn];qk=qt[qy>>>24]^qs[qw>>16&255]^qp[qv>>8&255]^qo[qA&255]^qF[qn+1];qm=qt[qw>>>24]^qs[qv>>16&255]^qp[qA>>8&255]^qo[qy&255]^qF[qn+2];qv=qt[qv>>>24]^qs[qA>>16&255]^qp[qy>>8&255]^qo[qw&255]^qF[qn+3];qn+=4;qA=qD;qy=qk;qw=qm}for(qq=0;qq<4;qq++){qr[(3&-qq)+qj]=ql[qA>>>24]<<24^ql[qy>>16&255]<<16^ql[qw>>8&255]<<8^ql[qv&255]^qF[qn++];qD=qA;qA=qy;qy=qw;qw=qv;qv=qD}};return qh}();var p5=function(){function ql(){p8(this,ql);this.listeners={}}ql.prototype.on=function qh(qn,qo){if(!this.listeners[qn]){this.listeners[qn]=[]}this.listeners[qn].push(qo)};ql.prototype.off=function qm(qo,qp){if(!this.listeners[qo]){return false}var qn=this.listeners[qo].indexOf(qp);this.listeners[qo].splice(qn,1);return qn>-1};ql.prototype.trigger=function qi(qp){var qr=this.listeners[qp];if(!qr){return}if(arguments.length===2){var qq=qr.length;for(var qo=0;qo<qq;++qo){qr[qo].call(this,arguments[1])}}else{var qn=Array.prototype.slice.call(arguments,1);var qt=qr.length;for(var qs=0;qs<qt;++qs){qr[qs].apply(this,qn)}}};ql.prototype.dispose=function qk(){this.listeners={}};ql.prototype.pipe=function qj(qn){this.on("data",function(qo){qn.push(qo)})};return ql}();var qe=function(qi){qc(qk,qi);function qk(){p8(this,qk);var ql=qg(this,qi.call(this,p5));ql.jobs=[];ql.delay=1;ql.timeout_=null;return ql}qk.prototype.processJob_=function qh(){this.jobs.shift()();if(this.jobs.length){this.timeout_=setTimeout(this.processJob_.bind(this),this.delay)}else{this.timeout_=null}};qk.prototype.push=function qj(ql){this.jobs.push(ql);if(!this.timeout_){this.timeout_=setTimeout(this.processJob_.bind(this),this.delay)}};return qk}(p5);var p6=function p6(qh){return qh<<24|(qh&65280)<<8|(qh&16711680)>>8|qh>>>24};var t=function t(qs,qu,qj){var qt=new Int32Array(qs.buffer,qs.byteOffset,qs.byteLength>>2);var qo=new qa(Array.prototype.slice.call(qu));var qv=new Uint8Array(qs.byteLength);var qw=new Int32Array(qv.buffer);var qr=void 0;var qq=void 0;var qp=void 0;var qn=void 0;var qm=void 0;var ql=void 0;var qk=void 0;var qi=void 0;var qh=void 0;qr=qj[0];qq=qj[1];qp=qj[2];qn=qj[3];for(qh=0;qh<qt.length;qh+=4){qm=p6(qt[qh]);ql=p6(qt[qh+1]);qk=p6(qt[qh+2]);qi=p6(qt[qh+3]);qo.decrypt(qm,ql,qk,qi,qw,qh);qw[qh]=p6(qw[qh]^qr);qw[qh+1]=p6(qw[qh+1]^qq);qw[qh+2]=p6(qw[qh+2]^qp);qw[qh+3]=p6(qw[qh+3]^qn);qr=qm;qq=ql;qp=qk;qn=qi}return qv};var qf=function(){function qj(qq,qo,qm,ql){p8(this,qj);var qp=qj.STEP;var qr=new Int32Array(qq.buffer);var qk=new Uint8Array(qq.byteLength);var qn=0;this.asyncStream_=new qe();this.asyncStream_.push(this.decryptChunk_(qr.subarray(qn,qn+qp),qo,qm,qk));for(qn=qp;qn<qr.length;qn+=qp){qm=new Uint32Array([p6(qr[qn-4]),p6(qr[qn-3]),p6(qr[qn-2]),p6(qr[qn-1])]);this.asyncStream_.push(this.decryptChunk_(qr.subarray(qn,qn+qp),qo,qm,qk))}this.asyncStream_.push(function(){ql(null,p7(qk))})}qj.prototype.decryptChunk_=function qi(qn,qm,ql,qk){return function(){var qo=t(qn,qm,ql);qk.set(qo,qn.byteOffset)}};p3(qj,null,[{key:"STEP",get:function qh(){return 32000}}]);return qj}();var p4=function p4(qi){var qh={};Object.keys(qi).forEach(function(qj){var qk=qi[qj];if(ArrayBuffer.isView(qk)){qh[qj]={bytes:qk.buffer,byteOffset:qk.byteOffset,byteLength:qk.byteLength}}else{qh[qj]=qk}});return qh};var qb=function qb(qh){qh.onmessage=function(qk){var qm=qk.data;var ql=new Uint8Array(qm.encrypted.bytes,qm.encrypted.byteOffset,qm.encrypted.byteLength);var qj=new Uint32Array(qm.key.bytes,qm.key.byteOffset,qm.key.byteLength/4);var qi=new Uint32Array(qm.iv.bytes,qm.iv.byteOffset,qm.iv.byteLength/4);new qf(ql,qj,qi,function(qo,qn){qh.postMessage(p4({source:qm.source,decrypted:qn}),[qn.buffer])})}};var qd=new qb(d);return qd}()});var mN=function mN(d){var e=d["default"]?"main":"alternative";if(d.characteristics&&d.characteristics.indexOf("public.accessibility.describes-video")>=0){e="main-desc"}return e};var oK=function oK(d,e){d.abort();d.pause();if(e&&e.activePlaylistLoader){e.activePlaylistLoader.pause();e.activePlaylistLoader=null}};var iX=function iX(e,d){d.activePlaylistLoader=e;e.load()};var mc=function mc(e,d){return function(){var p3=d.segmentLoaders,i=p3[e],t=p3.main,r=d.mediaTypes[e];var p5=r.activeTrack();var on=r.activeGroup(p5);var p4=r.activePlaylistLoader;oK(i,r);if(!on){return}if(!on.playlistLoader){if(p4){t.resetEverything()}return}i.resyncLoader();iX(on.playlistLoader,r)}};var en=function en(e,d){return function(){var p5=d.segmentLoaders,i=p5[e],t=p5.main,r=d.mediaTypes[e];var p4=r.activeTrack();var on=r.activeGroup(p4);var p3=r.activePlaylistLoader;oK(i,r);if(!on){return}if(!on.playlistLoader){t.resetEverything();return}if(p3===on.playlistLoader){iX(on.playlistLoader,r);return}if(i.track){i.track(p4)}i.resetEverything();iX(on.playlistLoader,r)}};var hc={AUDIO:function hu(e,d){return function(){var i=d.segmentLoaders[e],r=d.mediaTypes[e],p3=d.blacklistCurrentPlaylist;oK(i,r);var p5=r.activeTrack();var t=r.activeGroup();var p6=(t.filter(function(p7){return p7["default"]})[0]||t[0]).id;var on=r.tracks[p6];if(p5===on){p3({message:"Problem encountered loading the default audio track."});return}d9.log.warn("Problem encountered loading the alternate audio track.Switching back to default.");for(var p4 in r.tracks){r.tracks[p4].enabled=r.tracks[p4]===on}r.onTrackChanged()}},SUBTITLES:function hY(e,d){return function(){var i=d.segmentLoaders[e],t=d.mediaTypes[e];d9.log.warn("Problem encountered loading the subtitle track.Disabling subtitle track.");oK(i,t);var r=t.activeTrack();if(r){r.mode="disabled"}t.onTrackChanged()}}};var kA={AUDIO:function hu(on,r,t){if(!r){return}var i=t.tech,e=t.requestOptions,d=t.segmentLoaders[on];r.on("loadedmetadata",function(){var p3=r.media();d.playlist(p3,e);if(!i.paused()||p3.endList&&i.preload()!=="none"){d.load()}});r.on("loadedplaylist",function(){d.playlist(r.media(),e);if(!i.paused()){d.load()}});r.on("error",hc[on](on,t))},SUBTITLES:function hY(p3,t,on){var r=on.tech,e=on.requestOptions,d=on.segmentLoaders[p3],i=on.mediaTypes[p3];t.on("loadedmetadata",function(){var p4=t.media();d.playlist(p4,e);d.track(i.activeTrack());if(!r.paused()||p4.endList&&r.preload()!=="none"){d.load()}});t.on("loadedplaylist",function(){d.playlist(t.media(),e);if(!r.paused()){d.load()}});t.on("error",hc[p3](p3,on))}};var pg={AUDIO:function hu(p9,r){var d=r.hls,qa=r.sourceType,qc=r.segmentLoaders[p9],on=r.requestOptions,t=r.master.mediaGroups,p4=r.mediaTypes[p9],i=p4.groups,p7=p4.tracks,p8=r.masterPlaylistLoader;if(!t[p9]||Object.keys(t[p9]).length===0){t[p9]={main:{"default":{"default":true}}}}for(var p3 in t[p9]){if(!i[p3]){i[p3]=[]}for(var p6 in t[p9][p3]){var p5=t[p9][p3][p6];var qb=void 0;if(p5.resolvedUri){qb=new a2(p5.resolvedUri,d,on)}else{if(p5.playlists&&qa==="dash"){qb=new ei(p5.playlists[0],d,on,p8)}else{qb=null}}p5=d9.mergeOptions({id:p6,playlistLoader:qb},p5);kA[p9](p9,p5.playlistLoader,r);i[p3].push(p5);if(typeof p7[p6]==="undefined"){var e=new d9.AudioTrack({id:p6,kind:mN(p5),enabled:false,language:p5.language,"default":p5["default"],label:p6});p7[p6]=e}}}qc.on("error",hc[p9](p9,r))},SUBTITLES:function hY(p9,r){var qb=r.tech,d=r.hls,qa=r.sourceType,qd=r.segmentLoaders[p9],p3=r.requestOptions,t=r.master.mediaGroups,on=r.mediaTypes[p9],i=on.groups,p7=on.tracks,p8=r.masterPlaylistLoader;for(var p4 in t[p9]){if(!i[p4]){i[p4]=[]}for(var p6 in t[p9][p4]){if(t[p9][p4][p6].forced){continue}var p5=t[p9][p4][p6];var qc=void 0;if(qa==="hls"){qc=new a2(p5.resolvedUri,d,p3)}else{if(qa==="dash"){qc=new ei(p5.playlists[0],d,p3,p8)}}p5=d9.mergeOptions({id:p6,playlistLoader:qc},p5);kA[p9](p9,p5.playlistLoader,r);i[p4].push(p5);if(typeof p7[p6]==="undefined"){var e=qb.addRemoteTextTrack({id:p6,kind:"subtitles","default":p5["default"]&&p5.autoselect,language:p5.language,label:p6},false).track;p7[p6]=e}}}qd.on("error",hc[p9](p9,r))},"CLOSED-CAPTIONS":function iu(p6,r){var p7=r.tech,t=r.master.mediaGroups,i=r.mediaTypes[p6],e=i.groups,p5=i.tracks;for(var on in t[p6]){if(!e[on]){e[on]=[]}for(var p4 in t[p6][on]){var p3=t[p6][on][p4];if(!p3.instreamId.match(/CC\d/)){continue}e[on].push(d9.mergeOptions({id:p4},p3));if(typeof p5[p4]==="undefined"){var d=p7.addRemoteTextTrack({id:p3.instreamId,kind:"captions","default":p3["default"]&&p3.autoselect,language:p3.language,label:p4},false).track;p5[p4]=d}}}}};var kc=function kc(e,d){return function(t){var on=d.masterPlaylistLoader,i=d.mediaTypes[e].groups;var p3=on.media();if(!p3){return null}var r=null;if(p3.attributes[e]){r=i[p3.attributes[e]]}r=r||i.main;if(typeof t==="undefined"){return r}if(t===null){return null}return r.filter(function(p4){return p4.id===t.id})[0]||null}};var gE={AUDIO:function hu(e,d){return function(){var i=d.mediaTypes[e].tracks;for(var r in i){if(i[r].enabled){return i[r]}}return null}},SUBTITLES:function hY(e,d){return function(){var i=d.mediaTypes[e].tracks;for(var r in i){if(i[r].mode==="showing"||i[r].mode==="hidden"){return i[r]}}return null}}};var aK=function aK(t){["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(function(p6){pg[p6](p6,t)});var p3=t.mediaTypes,p4=t.masterPlaylistLoader,p5=t.tech,d=t.hls;["AUDIO","SUBTITLES"].forEach(function(p6){p3[p6].activeGroup=kc(p6,t);p3[p6].activeTrack=gE[p6](p6,t);p3[p6].onGroupChanged=mc(p6,t);p3[p6].onTrackChanged=en(p6,t)});var i=p3.AUDIO.activeGroup();var on=(i.filter(function(p6){return p6["default"]})[0]||i[0]).id;p3.AUDIO.tracks[on].enabled=true;p3.AUDIO.onTrackChanged();p4.on("mediachange",function(){["AUDIO","SUBTITLES"].forEach(function(p6){return p3[p6].onGroupChanged()})});var r=function r(){p3.AUDIO.onTrackChanged();p5.trigger({type:"usage",name:"hls-audio-change"})};p5.audioTracks().addEventListener("change",r);p5.remoteTextTracks().addEventListener("change",p3.SUBTITLES.onTrackChanged);d.on("dispose",function(){p5.audioTracks().removeEventListener("change",r);p5.remoteTextTracks().removeEventListener("change",p3.SUBTITLES.onTrackChanged)});p5.clearTracks("audio");for(var e in p3.AUDIO.tracks){p5.audioTracks().addTrack(p3.AUDIO.tracks[e])}};var cF=function cF(){var d={};["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(function(e){d[e]={groups:{},tracks:{},activePlaylistLoader:null,activeGroup:eA,activeTrack:eA,onGroupChanged:eA,onTrackChanged:eA}});return d};var e1=60*2;var ki=void 0;var cZ=["mediaRequests","mediaRequestsAborted","mediaRequestsTimedout","mediaRequestsErrored","mediaTransferDuration","mediaBytesTransferred"];var nK=function nK(d){return this.audioSegmentLoader_[d]+this.mainSegmentLoader_[d]};var nu=function nu(on){var t=on.currentPlaylist,r=on.nextPlaylist,p3=on.forwardBuffer,d=on.bufferLowWaterLine,e=on.duration,i=on.log;if(!r){d9.log.warn("We received no playlist to switch to. Please check your stream.");return false}if(!t.endList){return true}if(e<jT.MAX_BUFFER_LOW_WATER_LINE){return true}if(r.attributes.BANDWIDTH<t.attributes.BANDWIDTH){return true}if(p3>=d){return true}return false};var eN=function(qk){ih(qf,qk);function qf(qu){cP(this,qf);var qE=a3(this,(qf.__proto__||Object.getPrototypeOf(qf)).call(this));var qv=qu.url,qK=qu.handleManifestRedirects,qt=qu.withCredentials,qB=qu.tech,qJ=qu.bandwidth,qG=qu.externHls,qI=qu.useCueTags,qz=qu.blacklistDuration,qC=qu.enableLowInitialPlaylist,qD=qu.cacheEncryptionKeys,qx=qu.sourceType;if(!qv){throw new Error("A non-empty playlist URL is required")}ki=qG;qE.withCredentials=qt;qE.tech_=qB;qE.hls_=qB.hls;qE.sourceType_=qx;qE.useCueTags_=qI;qE.blacklistDuration=qz;qE.enableLowInitialPlaylist=qC;if(qE.useCueTags_){qE.cueTagsTrack_=qE.tech_.addTextTrack("metadata","ad-cues");qE.cueTagsTrack_.inBandMetadataTrackDispatchType=""}qE.requestOptions_={withCredentials:qt,handleManifestRedirects:qK,timeout:null};qE.mediaTypes_=cF();qE.mediaSource=new d9.MediaSource();qE.mediaSource.addEventListener("sourceopen",qE.handleSourceOpen_.bind(qE));qE.seekable_=d9.createTimeRanges();qE.hasPlayed_=false;qE.syncController_=new cM(qu);qE.segmentMetadataTrack_=qB.addRemoteTextTrack({kind:"metadata",label:"segment-metadata"},false).track;qE.decrypter_=new g6();qE.inbandTextTracks_={};var qH={hls:qE.hls_,mediaSource:qE.mediaSource,currentTime:qE.tech_.currentTime.bind(qE.tech_),seekable:function qy(){return qE.seekable()},seeking:function qs(){return qE.tech_.seeking()},duration:function qw(){return qE.mediaSource.duration},hasPlayed:function qA(){return qE.hasPlayed_},goalBufferLength:function qF(){return qE.goalBufferLength()},bandwidth:qJ,syncController:qE.syncController_,decrypter:qE.decrypter_,sourceType:qE.sourceType_,inbandTextTracks:qE.inbandTextTracks_,cacheEncryptionKeys:qD};qE.masterPlaylistLoader_=qE.sourceType_==="dash"?new ei(qv,qE.hls_,qE.requestOptions_):new a2(qv,qE.hls_,qE.requestOptions_);qE.setupMasterPlaylistLoaderListeners_();qE.mainSegmentLoader_=new l7(d9.mergeOptions(qH,{segmentMetadataTrack:qE.segmentMetadataTrack_,loaderType:"main"}),qu);qE.audioSegmentLoader_=new l7(d9.mergeOptions(qH,{loaderType:"audio"}),qu);qE.subtitleSegmentLoader_=new C(d9.mergeOptions(qH,{loaderType:"vtt",featuresNativeTextTracks:qE.tech_.featuresNativeTextTracks}),qu);qE.setupSegmentLoaderListeners_();cZ.forEach(function(qL){qE[qL+"_"]=nK.bind(qE,qL)});qE.logger_=ko("MPC");qE.masterPlaylistLoader_.load();return qE}fG(qf,[{key:"setupMasterPlaylistLoaderListeners_",value:function qg(){var qs=this;this.masterPlaylistLoader_.on("loadedmetadata",function(){var qv=qs.masterPlaylistLoader_.media();var qt=qv.targetDuration*1.5*1000;if(ff(qs.masterPlaylistLoader_.master,qs.masterPlaylistLoader_.media())){qs.requestOptions_.timeout=0}else{qs.requestOptions_.timeout=qt}if(qv.endList&&qs.tech_.preload()!=="none"){qs.mainSegmentLoader_.playlist(qv,qs.requestOptions_);qs.mainSegmentLoader_.load()}aK({sourceType:qs.sourceType_,segmentLoaders:{AUDIO:qs.audioSegmentLoader_,SUBTITLES:qs.subtitleSegmentLoader_,main:qs.mainSegmentLoader_},tech:qs.tech_,requestOptions:qs.requestOptions_,masterPlaylistLoader:qs.masterPlaylistLoader_,hls:qs.hls_,master:qs.master(),mediaTypes:qs.mediaTypes_,blacklistCurrentPlaylist:qs.blacklistCurrentPlaylist.bind(qs)});qs.triggerPresenceUsage_(qs.master(),qv);try{qs.setupSourceBuffers_()}catch(qu){d9.log.warn("Failed to create SourceBuffers",qu);return qs.mediaSource.endOfStream("decode")}qs.setupFirstPlay();if(!qs.mediaTypes_.AUDIO.activePlaylistLoader||qs.mediaTypes_.AUDIO.activePlaylistLoader.media()){qs.trigger("selectedinitialmedia")}else{qs.mediaTypes_.AUDIO.activePlaylistLoader.one("loadedmetadata",function(){qs.trigger("selectedinitialmedia")})}});this.masterPlaylistLoader_.on("loadedplaylist",function(){var qw=qs.masterPlaylistLoader_.media();if(!qw){qs.excludeUnsupportedVariants_();var qv=void 0;if(qs.enableLowInitialPlaylist){qv=qs.selectInitialPlaylist()}if(!qv){qv=qs.selectPlaylist()}qs.initialMedia_=qv;qs.masterPlaylistLoader_.media(qs.initialMedia_);return}if(qs.useCueTags_){qs.updateAdCues_(qw)}qs.mainSegmentLoader_.playlist(qw,qs.requestOptions_);qs.updateDuration();if(!qs.tech_.paused()){qs.mainSegmentLoader_.load();if(qs.audioSegmentLoader_){qs.audioSegmentLoader_.load()}}if(!qw.endList){var qt=function qt(){var qx=qs.seekable();if(qx.length!==0){qs.mediaSource.addSeekableRange_(qx.start(0),qx.end(0))}};if(qs.duration()!==Infinity){var qu=function qu(){if(qs.duration()===Infinity){qt()}else{qs.tech_.one("durationchange",qu)}};qs.tech_.one("durationchange",qu)}else{qt()}}});this.masterPlaylistLoader_.on("error",function(){qs.blacklistCurrentPlaylist(qs.masterPlaylistLoader_.error)});this.masterPlaylistLoader_.on("mediachanging",function(){qs.mainSegmentLoader_.abort();qs.mainSegmentLoader_.pause()});this.masterPlaylistLoader_.on("mediachange",function(){var qu=qs.masterPlaylistLoader_.media();var qt=qu.targetDuration*1.5*1000;if(ff(qs.masterPlaylistLoader_.master,qs.masterPlaylistLoader_.media())){qs.requestOptions_.timeout=0}else{qs.requestOptions_.timeout=qt}qs.mainSegmentLoader_.playlist(qu,qs.requestOptions_);qs.mainSegmentLoader_.load();qs.tech_.trigger({type:"mediachange",bubbles:true})});this.masterPlaylistLoader_.on("playlistunchanged",function(){var qu=qs.masterPlaylistLoader_.media();var qt=qs.stuckAtPlaylistEnd_(qu);if(qt){qs.blacklistCurrentPlaylist({message:"Playlist no longer updating."});qs.tech_.trigger("playliststuck")}});this.masterPlaylistLoader_.on("renditiondisabled",function(){qs.tech_.trigger({type:"usage",name:"hls-rendition-disabled"})});this.masterPlaylistLoader_.on("renditionenabled",function(){qs.tech_.trigger({type:"usage",name:"hls-rendition-enabled"})})}},{key:"triggerPresenceUsage_",value:function ql(qx,qy){var qv=qx.mediaGroups||{};var qw=true;var qs=Object.keys(qv.AUDIO);for(var qz in qv.AUDIO){for(var qt in qv.AUDIO[qz]){var qu=qv.AUDIO[qz][qt];if(!qu.uri){qw=false}}}if(qw){this.tech_.trigger({type:"usage",name:"hls-demuxed"})}if(Object.keys(qv.SUBTITLES).length){this.tech_.trigger({type:"usage",name:"hls-webvtt"})}if(ki.Playlist.isAes(qy)){this.tech_.trigger({type:"usage",name:"hls-aes"})}if(ki.Playlist.isFmp4(qy)){this.tech_.trigger({type:"usage",name:"hls-fmp4"})}if(qs.length&&Object.keys(qv.AUDIO[qs[0]]).length>1){this.tech_.trigger({type:"usage",name:"hls-alternate-audio"})}if(this.useCueTags_){this.tech_.trigger({type:"usage",name:"hls-playlist-cue-tags"})}}},{key:"setupSegmentLoaderListeners_",value:function e(){var qs=this;this.mainSegmentLoader_.on("bandwidthupdate",function(){var qw=qs.selectPlaylist();var qv=qs.masterPlaylistLoader_.media();var qu=qs.tech_.buffered();var qx=qu.length?qu.end(qu.length-1)-qs.tech_.currentTime():0;var qt=qs.bufferLowWaterLine();if(nu({currentPlaylist:qv,nextPlaylist:qw,forwardBuffer:qx,bufferLowWaterLine:qt,duration:qs.duration(),log:qs.logger_})){qs.masterPlaylistLoader_.media(qw)}qs.tech_.trigger("bandwidthupdate")});this.mainSegmentLoader_.on("progress",function(){qs.trigger("progress")});this.mainSegmentLoader_.on("error",function(){qs.blacklistCurrentPlaylist(qs.mainSegmentLoader_.error())});this.mainSegmentLoader_.on("syncinfoupdate",function(){qs.onSyncInfoUpdate_()});this.mainSegmentLoader_.on("timestampoffset",function(){qs.tech_.trigger({type:"usage",name:"hls-timestamp-offset"})});this.audioSegmentLoader_.on("syncinfoupdate",function(){qs.onSyncInfoUpdate_()});this.mainSegmentLoader_.on("ended",function(){qs.onEndOfStream()});this.mainSegmentLoader_.on("earlyabort",function(){qs.blacklistCurrentPlaylist({message:"Aborted early because there isn't enough bandwidth to complete the request without rebuffering."},e1)});this.mainSegmentLoader_.on("reseteverything",function(){qs.tech_.trigger("hls-reset")});this.mainSegmentLoader_.on("segmenttimemapping",function(qt){qs.tech_.trigger({type:"hls-segment-time-mapping",mapping:qt.mapping})});this.audioSegmentLoader_.on("ended",function(){qs.onEndOfStream()})}},{key:"mediaSecondsLoaded_",value:function qo(){return Math.max(this.audioSegmentLoader_.mediaSecondsLoaded+this.mainSegmentLoader_.mediaSecondsLoaded)}},{key:"load",value:function qa(){this.mainSegmentLoader_.load();if(this.mediaTypes_.AUDIO.activePlaylistLoader){this.audioSegmentLoader_.load()}if(this.mediaTypes_.SUBTITLES.activePlaylistLoader){this.subtitleSegmentLoader_.load()}}},{key:"smoothQualityChange_",value:function qh(){var qs=this.selectPlaylist();if(qs!==this.masterPlaylistLoader_.media()){this.masterPlaylistLoader_.media(qs);this.mainSegmentLoader_.resetLoader()}}},{key:"fastQualityChange_",value:function p7(){var qs=this;var qt=this.selectPlaylist();if(qt===this.masterPlaylistLoader_.media()){return}this.masterPlaylistLoader_.media(qt);this.mainSegmentLoader_.resetEverything(function(){if(d9.browser.IE_VERSION||d9.browser.IS_EDGE){qs.tech_.setCurrentTime(qs.tech_.currentTime()+0.04)}else{qs.tech_.setCurrentTime(qs.tech_.currentTime())}})}},{key:"play",value:function qp(){if(this.setupFirstPlay()){return}if(this.tech_.ended()){this.tech_.setCurrentTime(0)}if(this.hasPlayed_){this.load()}var qs=this.tech_.seekable();if(this.tech_.duration()===Infinity){if(this.tech_.currentTime()<qs.start(0)){return this.tech_.setCurrentTime(qs.end(qs.length-1))}}}},{key:"setupFirstPlay",value:function p6(){var qs=this;var qu=this.masterPlaylistLoader_.media();if(!qu||this.tech_.paused()||this.hasPlayed_){return false}if(!qu.endList){var qt=this.seekable();if(!qt.length){return false}if(d9.browser.IE_VERSION&&this.tech_.readyState()===0){this.tech_.one("loadedmetadata",function(){qs.trigger("firstplay");qs.tech_.setCurrentTime(qt.end(0));qs.hasPlayed_=true});return false}this.trigger("firstplay");this.tech_.setCurrentTime(qt.end(0))}this.hasPlayed_=true;this.load();return true}},{key:"handleSourceOpen_",value:function qn(){try{this.setupSourceBuffers_()}catch(qt){d9.log.warn("Failed to create Source Buffers",qt);return this.mediaSource.endOfStream("decode")}if(this.tech_.autoplay()){var qs=this.tech_.play();if(typeof qs!=="undefined"&&typeof qs.then==="function"){qs.then(null,function(qu){})}}this.trigger("sourceopen")}},{key:"onEndOfStream",value:function p8(){var qs=this.mainSegmentLoader_.ended_;if(this.mediaTypes_.AUDIO.activePlaylistLoader){if(!this.mainSegmentLoader_.startingMedia_||this.mainSegmentLoader_.startingMedia_.containsVideo){qs=qs&&this.audioSegmentLoader_.ended_}else{qs=this.audioSegmentLoader_.ended_}}if(!qs){return}this.logger_("calling mediaSource.endOfStream()");try{this.mediaSource.endOfStream()}catch(qt){d9.log.warn("Failed to call media source endOfStream",qt)}}},{key:"stuckAtPlaylistEnd_",value:function i(qy){var qw=this.seekable();if(!qw.length){return false}var qu=this.syncController_.getExpiredTime(qy,this.mediaSource.duration);if(qu===null){return false}var qs=ki.Playlist.playlistEnd(qy,qu);var qv=this.tech_.currentTime();var qt=this.tech_.buffered();if(!qt.length){return qs-qv<=b2}var qx=qt.end(qt.length-1);return qx-qv<=b2&&qs-qx<=b2}},{key:"blacklistCurrentPlaylist",value:function p3(){var qs=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var qy=arguments[1];var qv=void 0;var qu=void 0;qv=qs.playlist||this.masterPlaylistLoader_.media();qy=qy||qs.blacklistDuration||this.blacklistDuration;if(!qv){this.error=qs;try{return this.mediaSource.endOfStream("network")}catch(qx){return this.trigger("error")}}var qt=this.masterPlaylistLoader_.master.playlists.filter(b4).length===1;var qw=this.masterPlaylistLoader_.master.playlists;if(qw.length===1){d9.log.warn("Problem encountered with the current HLS playlist. Trying again since it is the only playlist.");this.tech_.trigger("retryplaylist");return this.masterPlaylistLoader_.load(qt)}if(qt){d9.log.warn("Removing all playlists from the blacklist because the last rendition is about to be blacklisted.");qw.forEach(function(qz){if(qz.excludeUntil!==Infinity){delete qz.excludeUntil}});this.tech_.trigger("retryplaylist")}qv.excludeUntil=Date.now()+qy*1000;this.tech_.trigger("blacklistplaylist");this.tech_.trigger({type:"usage",name:"hls-rendition-blacklisted"});qu=this.selectPlaylist();d9.log.warn("Problem encountered with the current HLS playlist."+(qs.message?" "+qs.message:"")+" Switching to another playlist.");return this.masterPlaylistLoader_.media(qu,qt)}},{key:"pauseLoading",value:function qq(){this.mainSegmentLoader_.pause();if(this.mediaTypes_.AUDIO.activePlaylistLoader){this.audioSegmentLoader_.pause()}if(this.mediaTypes_.SUBTITLES.activePlaylistLoader){this.subtitleSegmentLoader_.pause()}}},{key:"setCurrentTime",value:function qe(qt){var qs=lC(this.tech_.buffered(),qt);if(!(this.masterPlaylistLoader_&&this.masterPlaylistLoader_.media())){return 0}if(!this.masterPlaylistLoader_.media().segments){return 0}if(qs&&qs.length){return qt}this.mainSegmentLoader_.resetEverything();this.mainSegmentLoader_.abort();if(this.mediaTypes_.AUDIO.activePlaylistLoader){this.audioSegmentLoader_.resetEverything();this.audioSegmentLoader_.abort()}if(this.mediaTypes_.SUBTITLES.activePlaylistLoader){this.subtitleSegmentLoader_.resetEverything();this.subtitleSegmentLoader_.abort()}this.load()}},{key:"duration",value:function p5(){if(!this.masterPlaylistLoader_){return 0}if(this.mediaSource){return this.mediaSource.duration}return ki.Playlist.duration(this.masterPlaylistLoader_.media())}},{key:"seekable",value:function p9(){return this.seekable_}},{key:"onSyncInfoUpdate_",value:function d(){var qs=void 0;if(!this.masterPlaylistLoader_){return}var qx=this.masterPlaylistLoader_.media();if(!qx){return}var qu=this.syncController_.getExpiredTime(qx,this.mediaSource.duration);if(qu===null){return}var qw=this.masterPlaylistLoader_.master.suggestedPresentationDelay;var qy=ki.Playlist.seekable(qx,qu,qw);if(qy.length===0){return}if(this.mediaTypes_.AUDIO.activePlaylistLoader){qx=this.mediaTypes_.AUDIO.activePlaylistLoader.media();qu=this.syncController_.getExpiredTime(qx,this.mediaSource.duration);if(qu===null){return}qs=ki.Playlist.seekable(qx,qu,qw);if(qs.length===0){return}}var qt=void 0;var qv=void 0;if(this.seekable_&&this.seekable_.length){qt=this.seekable_.end(0);qv=this.seekable_.start(0)}if(!qs){this.seekable_=qy}else{if(qs.start(0)>qy.end(0)||qy.start(0)>qs.end(0)){this.seekable_=qy}else{this.seekable_=d9.createTimeRanges([[qs.start(0)>qy.start(0)?qs.start(0):qy.start(0),qs.end(0)<qy.end(0)?qs.end(0):qy.end(0)]])}}if(this.seekable_&&this.seekable_.length){if(this.seekable_.end(0)===qt&&this.seekable_.start(0)===qv){return}}this.logger_("seekable updated ["+n8(this.seekable_)+"]");this.tech_.trigger("seekablechanged")}},{key:"updateDuration",value:function t(){var qu=this;var qt=this.mediaSource.duration;var qs=ki.Playlist.duration(this.masterPlaylistLoader_.media());var qv=this.tech_.buffered();var qw=function qw(){qu.logger_("Setting duration from "+qu.mediaSource.duration+" => "+qs);try{qu.mediaSource.duration=qs}catch(qx){d9.log.warn("Failed to set media source duration",qx)}qu.tech_.trigger("durationchange");qu.mediaSource.removeEventListener("sourceopen",qw)};if(qv.length>0){qs=Math.max(qs,qv.end(qv.length-1))}if(qt!==qs){if(this.mediaSource.readyState!=="open"){this.mediaSource.addEventListener("sourceopen",qw)}else{qw()}}}},{key:"dispose",value:function qr(){var qs=this;this.trigger("dispose");if(this.decrypter_){this.decrypter_.terminate()}this.masterPlaylistLoader_.dispose();this.mainSegmentLoader_.dispose();["AUDIO","SUBTITLES"].forEach(function(qu){var qt=qs.mediaTypes_[qu].groups;for(var qv in qt){qt[qv].forEach(function(qw){if(qw.playlistLoader){qw.playlistLoader.dispose()}})}});this.audioSegmentLoader_.dispose();this.subtitleSegmentLoader_.dispose();this.off();if(this.mediaSource.dispose){this.mediaSource.dispose()}}},{key:"master",value:function qd(){return this.masterPlaylistLoader_.master}},{key:"media",value:function p4(){return this.masterPlaylistLoader_.media()||this.initialMedia_}},{key:"setupSourceBuffers_",value:function qb(){var qt=this.masterPlaylistLoader_.media();var qs=void 0;if(!qt||this.mediaSource.readyState!=="open"){return}qs=bp(this.masterPlaylistLoader_.master,qt);if(qs.length<1){this.error="No compatible SourceBuffer configuration for the variant stream:"+qt.resolvedUri;return this.mediaSource.endOfStream("decode")}this.configureLoaderMimeTypes_(qs);this.excludeIncompatibleVariants_(qt)}},{key:"configureLoaderMimeTypes_",value:function qi(qt){var qs=qt.length>1&&qt[0].indexOf(",")===-1&&qt[0]!==qt[1]?new d9.EventTarget():null;this.mainSegmentLoader_.mimeType(qt[0],qs);if(qt[1]){this.audioSegmentLoader_.mimeType(qt[1],qs)}}},{key:"excludeUnsupportedVariants_",value:function qj(){this.master().playlists.forEach(function(qs){if(qs.attributes.CODECS&&cb.MediaSource&&cb.MediaSource.isTypeSupported&&!cb.MediaSource.isTypeSupported('video/mp4; codecs="'+iR(qs.attributes.CODECS)+'"')){qs.excludeUntil=Infinity}})}},{key:"excludeIncompatibleVariants_",value:function on(qv){var qu=2;var qs=null;var qt=void 0;if(qv.attributes.CODECS){qt=kg(qv.attributes.CODECS);qs=qt.videoCodec;qu=qt.codecCount}this.master().playlists.forEach(function(qw){var qx={codecCount:2,videoCodec:null};if(qw.attributes.CODECS){qx=kg(qw.attributes.CODECS)}if(qx.codecCount!==qu){qw.excludeUntil=Infinity}if(qx.videoCodec!==qs){qw.excludeUntil=Infinity}})}},{key:"updateAdCues_",value:function qc(qt){var qu=0;var qs=this.seekable();if(qs.length){qu=qs.start(0)}bF(qt,this.cueTagsTrack_,qu)}},{key:"goalBufferLength",value:function qm(){var qv=this.tech_.currentTime();var qt=jT.GOAL_BUFFER_LENGTH;var qu=jT.GOAL_BUFFER_LENGTH_RATE;var qs=Math.max(qt,jT.MAX_GOAL_BUFFER_LENGTH);return Math.min(qt+qv*qu,qs)}},{key:"bufferLowWaterLine",value:function r(){var qv=this.tech_.currentTime();var qt=jT.BUFFER_LOW_WATER_LINE;var qu=jT.BUFFER_LOW_WATER_LINE_RATE;var qs=Math.max(qt,jT.MAX_BUFFER_LOW_WATER_LINE);return Math.min(qt+qv*qu,qs)}}]);return qf}(d9.EventTarget);var fr=function fr(d,e,i){return function(t){var p3=d.master.playlists[e];var on=oV(p3);var r=b4(p3);if(typeof t==="undefined"){return r}if(t){delete p3.disabled}else{p3.disabled=true}if(t!==r&&!on){i();if(t){d.trigger("renditionenabled")}else{d.trigger("renditiondisabled")}}return t}};var jF=function jF(r,on,p4){cP(this,jF);var t=r.masterPlaylistController_,e=r.options_.smoothQualityChange;var d=e?"smooth":"fast";var p3=t[d+"QualityChange_"].bind(t);if(on.attributes.RESOLUTION){var i=on.attributes.RESOLUTION;this.width=i.width;this.height=i.height}this.bandwidth=on.attributes.BANDWIDTH;this.id=p4;this.enabled=fr(r.playlists,on.id,p3)};var nq=function nq(d){var e=d.playlists;d.representations=function(){if(!e||!e.master||!e.master.playlists){return[]}return e.master.playlists.filter(function(i){return !oV(i)}).map(function(t,r){return new jF(d,t,t.id)})}};var X=["seeking","seeked","pause","playing","error"];var lh=function(){function p6(qb){var qe=this;cP(this,p6);this.tech_=qb.tech;this.seekable=qb.seekable;this.allowSeeksWithinUnsafeLiveWindow=qb.allowSeeksWithinUnsafeLiveWindow;this.media=qb.media;this.consecutiveUpdates=0;this.lastRecordedTime=null;this.timer_=null;this.checkCurrentTimeTimeout_=null;this.logger_=ko("PlaybackWatcher");this.logger_("initialize");var qc=function qc(){return qe.monitorCurrentTime_()};var qa=function qa(){return qe.techWaiting_()};var p9=function p9(){return qe.cancelTimer_()};var qd=function qd(){return qe.fixesBadSeeks_()};this.tech_.on("seekablechanged",qd);this.tech_.on("waiting",qa);this.tech_.on(X,p9);this.tech_.on("canplay",qc);this.dispose=function(){qe.logger_("dispose");qe.tech_.off("seekablechanged",qd);qe.tech_.off("waiting",qa);qe.tech_.off(X,p9);qe.tech_.off("canplay",qc);if(qe.checkCurrentTimeTimeout_){cb.clearTimeout(qe.checkCurrentTimeTimeout_)}qe.cancelTimer_()}}fG(p6,[{key:"monitorCurrentTime_",value:function r(){this.checkCurrentTime_();if(this.checkCurrentTimeTimeout_){cb.clearTimeout(this.checkCurrentTimeTimeout_)}this.checkCurrentTimeTimeout_=cb.setTimeout(this.monitorCurrentTime_.bind(this),250)}},{key:"checkCurrentTime_",value:function p4(){if(this.tech_.seeking()&&this.fixesBadSeeks_()){this.consecutiveUpdates=0;this.lastRecordedTime=this.tech_.currentTime();return}if(this.tech_.paused()||this.tech_.seeking()){return}var qa=this.tech_.currentTime();var p9=this.tech_.buffered();if(this.lastRecordedTime===qa&&(!p9.length||qa+b2>=p9.end(p9.length-1))){return this.techWaiting_()}if(this.consecutiveUpdates>=5&&qa===this.lastRecordedTime){this.consecutiveUpdates++;this.waiting_()}else{if(qa===this.lastRecordedTime){this.consecutiveUpdates++}else{this.consecutiveUpdates=0;this.lastRecordedTime=qa}}}},{key:"cancelTimer_",value:function i(){this.consecutiveUpdates=0;if(this.timer_){this.logger_("cancelTimer_");clearTimeout(this.timer_)}this.timer_=null}},{key:"fixesBadSeeks_",value:function p8(){var qf=this.tech_.seeking();if(!qf){return false}var qe=this.seekable();var qd=this.tech_.currentTime();var p9=this.afterSeekableWindow_(qe,qd,this.media(),this.allowSeeksWithinUnsafeLiveWindow);var qb=void 0;if(p9){var qc=qe.end(qe.length-1);qb=qc}if(this.beforeSeekableWindow_(qe,qd)){var qa=qe.start(0);qb=qa+b2}if(typeof qb!=="undefined"){this.logger_("Trying to seek outside of seekable at time "+qd+" with "+("seekable range "+n8(qe)+". Seeking to ")+(qb+"."));this.tech_.setCurrentTime(qb);return true}return false}},{key:"waiting_",value:function d(){if(this.techWaiting_()){return}var qb=this.tech_.currentTime();var qa=this.tech_.buffered();var p9=lC(qa,qb);if(p9.length&&qb+3<=p9.end(0)){this.cancelTimer_();this.tech_.setCurrentTime(qb);this.logger_("Stopped at "+qb+" while inside a buffered region "+("["+p9.start(0)+" -> "+p9.end(0)+"]. Attempting to resume ")+"playback by seeking to the current time.");this.tech_.trigger({type:"usage",name:"hls-unknown-waiting"});return}}},{key:"techWaiting_",value:function p5(){var qc=this.seekable();var qb=this.tech_.currentTime();if(this.tech_.seeking()&&this.fixesBadSeeks_()){return true}if(this.tech_.seeking()||this.timer_!==null){return true}if(this.beforeSeekableWindow_(qc,qb)){var qa=qc.end(qc.length-1);this.logger_("Fell out of live window at time "+qb+". Seeking to "+("live point (seekable end) "+qa));this.cancelTimer_();this.tech_.setCurrentTime(qa);this.tech_.trigger({type:"usage",name:"hls-live-resync"});return true}var p9=this.tech_.buffered();var qe=fB(p9,qb);if(this.videoUnderflow_(qe,p9,qb)){this.cancelTimer_();this.tech_.setCurrentTime(qb);this.tech_.trigger({type:"usage",name:"hls-video-underflow"});return true}if(qe.length>0){var qd=qe.start(0)-qb;this.logger_("Stopped at "+qb+", setting timer for "+qd+", seeking "+("to "+qe.start(0)));this.timer_=setTimeout(this.skipTheGap_.bind(this),qd*1000,qb);return true}return false}},{key:"afterSeekableWindow_",value:function p7(qd,qb,qe){var qa=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;if(!qd.length){return false}var p9=qd.end(qd.length-1)+b2;var qc=!qe.endList;if(qc&&qa){p9=qd.end(qd.length-1)+qe.targetDuration*3}if(qb>p9){return true}return false}},{key:"beforeSeekableWindow_",value:function p3(qa,p9){if(qa.length&&qa.start(0)>0&&p9<qa.start(0)-b2){return true}return false}},{key:"videoUnderflow_",value:function on(qc,p9,qa){if(qc.length===0){var qb=this.gapFromVideoUnderflow_(p9,qa);if(qb){this.logger_("Encountered a gap in video from "+qb.start+" to "+qb.end+". "+("Seeking to current time "+qa));return true}}return false}},{key:"skipTheGap_",value:function t(p9){var qa=this.tech_.buffered();var qb=this.tech_.currentTime();var qc=fB(qa,qb);this.cancelTimer_();if(qc.length===0||qb!==p9){return}this.logger_("skipTheGap_:","currentTime:",qb,"scheduled currentTime:",p9,"nextRange start:",qc.start(0));this.tech_.setCurrentTime(qc.start(0)+kq);this.tech_.trigger({type:"usage",name:"hls-gap-skip"})}},{key:"gapFromVideoUnderflow_",value:function e(qc,qd){var qb=bG(qc);for(var qa=0;qa<qb.length;qa++){var qe=qb.start(qa);var p9=qb.end(qa);if(qd-qe<4&&qd-qe>2){return{start:qe,end:p9}}}return null}}]);return p6}();var gb={errorInterval:30,getSource:function ae(e){var d=this.tech({IWillNotUseThisInPlugins:true});var i=d.currentSource_;return e(i)}};var jA=function jA(p3,p6){var r=0;var i=0;var e=d9.mergeOptions(gb,p6);p3.ready(function(){p3.trigger({type:"usage",name:"hls-error-reload-initialized"})});var p4=function p4(){if(i){p3.currentTime(i)}};var on=function on(p7){if(p7===null||p7===undefined){return}i=p3.duration()!==Infinity&&p3.currentTime()||0;p3.one("loadedmetadata",p4);p3.src(p7);p3.trigger({type:"usage",name:"hls-error-reload"});p3.play()};var t=function t(){if(Date.now()-r<e.errorInterval*1000){p3.trigger({type:"usage",name:"hls-error-reload-canceled"});return}if(!e.getSource||typeof e.getSource!=="function"){d9.log.error("ERROR: reloadSourceOnError - The option getSource must be a function!");return}r=Date.now();return e.getSource.call(p3,on)};var d=function d(){p3.off("loadedmetadata",p4);p3.off("error",t);p3.off("dispose",d)};var p5=function p5(p7){d();jA(p3,p7)};p3.on("error",t);p3.on("dispose",d);p3.reloadSourceOnError=p5};var lm=function lm(d){jA(this,d)};var aQ="1.13.2";var pj={PlaylistLoader:a2,Playlist:bl,Decrypter:lF,AsyncStream:bT,decrypt:hI,utils:mC,STANDARD_PLAYLIST_SELECTOR:aV,INITIAL_PLAYLIST_SELECTOR:j8,comparePlaylistBandwidth:mZ,comparePlaylistResolution:jn,xhr:eI()};["GOAL_BUFFER_LENGTH","MAX_GOAL_BUFFER_LENGTH","GOAL_BUFFER_LENGTH_RATE","BUFFER_LOW_WATER_LINE","MAX_BUFFER_LOW_WATER_LINE","BUFFER_LOW_WATER_LINE_RATE","BANDWIDTH_VARIANCE"].forEach(function(i){Object.defineProperty(pj,i,{get:function e(){d9.log.warn("using Hls."+i+" is UNSAFE be sure you know what you are doing");return jT[i]},set:function d(r){d9.log.warn("using Hls."+i+" is UNSAFE be sure you know what you are doing");if(typeof r!=="number"||r<0){d9.log.warn("value of Hls."+i+" must be greater than or equal to 0");return}jT[i]=r}})});var lr="videojs-vhs";var eb=function eb(i){var d=/^(audio|video|application)\/(x-|vnd\.apple\.)?mpegurl/i;if(d.test(i)){return"hls"}var e=/^application\/dash\+xml/i;if(e.test(i)){return"dash"}return null};var aN=function aN(on,t){var r=t.media();var d=-1;for(var e=0;e<on.length;e++){if(on[e].id===r.id){d=e;break}}on.selectedIndex_=d;on.trigger({selectedIndex:d,type:"change"})};var B=function B(e,d){d.representations().forEach(function(i){e.addQualityLevel(i)});aN(e,d.playlists)};pj.canPlaySource=function(){return d9.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};var e0=function e0(p5,p4,p6){if(!p5){return p5}var on=void 0;var r=void 0;if(p6.mimeType_){on=p4.mimeType_;r=p6.mimeType_}else{var p8=S(p4.mimeType_);var e=p8.parameters.codecs.split(",");var p7=void 0;var t=void 0;e.forEach(function(p9){p9=p9.trim();if(K(p9)){p7=p9}else{if(gP(p9)){t=p9}}});on=p8.type+'; codecs="'+t+'"';r=p8.type.replace("video","audio")+'; codecs="'+p7+'"'}var i={};var p3=p4.playlist_;for(var d in p5){i[d]={audioContentType:r,videoContentType:on};if(p3.contentProtection&&p3.contentProtection[d]&&p3.contentProtection[d].pssh){i[d].pssh=p3.contentProtection[d].pssh}if(typeof p5[d]==="string"){i[d].url=p5[d]}}return d9.mergeOptions(p5,i)};var di=function di(r){var e=r.masterPlaylistController_.mainSegmentLoader_;var t=r.masterPlaylistController_.audioSegmentLoader_;var i=d9.players[r.tech_.options_.playerId];if(i.eme){var d=e0(r.source_.keySystems,e,t);if(d){i.currentSource().keySystems=d;if(!(d9.browser.IE_VERSION===11)&&i.eme.initializeMediaKeys){i.eme.initializeMediaKeys()}}}};var ke=function ke(){if(!window.localStorage){return null}var i=window.localStorage.getItem(lr);if(!i){return null}try{return JSON.parse(i)}catch(d){return null}};var fh=function fh(d){if(!window.localStorage){return false}var i=ke();i=i?d9.mergeOptions(i,d):d;try{window.localStorage.setItem(lr,JSON.stringify(i))}catch(r){return false}return i};pj.supportsNativeHls=function(){var e=eT.createElement("video");if(!d9.getTech("Html5").isSupported()){return false}var d=["application/vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","application/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"];return d.some(function(i){return/maybe|probably/i.test(e.canPlayType(i))})}();pj.supportsNativeDash=function(){if(!d9.getTech("Html5").isSupported()){return false}return/maybe|probably/i.test(eT.createElement("video").canPlayType("application/dash+xml"))}();pj.supportsTypeNatively=function(d){if(d==="hls"){return pj.supportsNativeHls}if(d==="dash"){return pj.supportsNativeDash}return false};pj.isSupported=function(){return d9.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};var ax=d9.getComponent("Component");var jY=function(p4){ih(i,p4);function i(qc,p9,qb){cP(this,i);var qe=a3(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,p9,qb.hls));if(p9.options_&&p9.options_.playerId){var qd=d9(p9.options_.playerId);if(!qd.hasOwnProperty("hls")){Object.defineProperty(qd,"hls",{get:function qa(){d9.log.warn("player.hls is deprecated. Use player.tech().hls instead.");p9.trigger({type:"usage",name:"hls-player-access"});return qe},configurable:true})}qd.vhs=qe;qd.dash=qe;qe.player_=qd}qe.tech_=p9;qe.source_=qc;qe.stats={};qe.ignoreNextSeekingEvent_=false;qe.setOptions_();if(qe.options_.overrideNative&&p9.overrideNativeAudioTracks&&p9.overrideNativeVideoTracks){p9.overrideNativeAudioTracks(true);p9.overrideNativeVideoTracks(true)}else{if(qe.options_.overrideNative&&(p9.featuresNativeVideoTracks||p9.featuresNativeAudioTracks)){throw new Error("Overriding native HLS requires emulated tracks. See https://git.io/vMpjB")}}qe.on(eT,["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],function(qf){var qg=eT.fullscreenElement||eT.webkitFullscreenElement||eT.mozFullScreenElement||eT.msFullscreenElement;if(qg&&qg.contains(qe.tech_.el())){qe.masterPlaylistController_.smoothQualityChange_()}});qe.on(qe.tech_,"seeking",function(){if(this.ignoreNextSeekingEvent_){this.ignoreNextSeekingEvent_=false;return}this.setCurrentTime(this.tech_.currentTime())});qe.on(qe.tech_,"error",function(){if(this.masterPlaylistController_){this.masterPlaylistController_.pauseLoading()}});qe.on(qe.tech_,"play",qe.play);return qe}fG(i,[{key:"setOptions_",value:function t(){var p9=this;this.options_.withCredentials=this.options_.withCredentials||false;this.options_.handleManifestRedirects=this.options_.handleManifestRedirects||false;this.options_.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions===false?false:true;this.options_.useDevicePixelRatio=this.options_.useDevicePixelRatio||false;this.options_.smoothQualityChange=this.options_.smoothQualityChange||false;this.options_.useBandwidthFromLocalStorage=typeof this.source_.useBandwidthFromLocalStorage!=="undefined"?this.source_.useBandwidthFromLocalStorage:this.options_.useBandwidthFromLocalStorage||false;this.options_.customTagParsers=this.options_.customTagParsers||[];this.options_.customTagMappers=this.options_.customTagMappers||[];this.options_.cacheEncryptionKeys=this.options_.cacheEncryptionKeys||false;if(typeof this.options_.blacklistDuration!=="number"){this.options_.blacklistDuration=5*60}if(typeof this.options_.bandwidth!=="number"){if(this.options_.useBandwidthFromLocalStorage){var qa=ke();if(qa&&qa.bandwidth){this.options_.bandwidth=qa.bandwidth;this.tech_.trigger({type:"usage",name:"hls-bandwidth-from-local-storage"})}if(qa&&qa.throughput){this.options_.throughput=qa.throughput;this.tech_.trigger({type:"usage",name:"hls-throughput-from-local-storage"})}}}if(typeof this.options_.bandwidth!=="number"){this.options_.bandwidth=jT.INITIAL_BANDWIDTH}this.options_.enableLowInitialPlaylist=this.options_.enableLowInitialPlaylist&&this.options_.bandwidth===jT.INITIAL_BANDWIDTH;["withCredentials","useDevicePixelRatio","limitRenditionByPlayerDimensions","bandwidth","smoothQualityChange","customTagParsers","customTagMappers","handleManifestRedirects","cacheEncryptionKeys"].forEach(function(qb){if(typeof p9.source_[qb]!=="undefined"){p9.options_[qb]=p9.source_[qb]}});this.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions;this.useDevicePixelRatio=this.options_.useDevicePixelRatio}},{key:"src",value:function d(qf,qc){var qb=this;if(!qf){return}this.setOptions_();this.options_.url=this.source_.src;this.options_.tech=this.tech_;this.options_.externHls=pj;this.options_.sourceType=eb(qc);this.options_.seekTo=function(qg){qb.tech_.setCurrentTime(qg)};this.masterPlaylistController_=new eN(this.options_);this.playbackWatcher_=new lh(d9.mergeOptions(this.options_,{seekable:function qe(){return qb.seekable()},media:function qd(){return qb.masterPlaylistController_.media()}}));this.masterPlaylistController_.on("error",function(){var qg=d9.players[qb.tech_.options_.playerId];qg.error(qb.masterPlaylistController_.error)});this.masterPlaylistController_.selectPlaylist=this.selectPlaylist?this.selectPlaylist.bind(this):pj.STANDARD_PLAYLIST_SELECTOR.bind(this);this.masterPlaylistController_.selectInitialPlaylist=pj.INITIAL_PLAYLIST_SELECTOR.bind(this);this.playlists=this.masterPlaylistController_.masterPlaylistLoader_;this.mediaSource=this.masterPlaylistController_.mediaSource;Object.defineProperties(this,{selectPlaylist:{get:function qa(){return this.masterPlaylistController_.selectPlaylist},set:function p9(qg){this.masterPlaylistController_.selectPlaylist=qg.bind(this)}},throughput:{get:function qa(){return this.masterPlaylistController_.mainSegmentLoader_.throughput.rate},set:function p9(qg){this.masterPlaylistController_.mainSegmentLoader_.throughput.rate=qg;this.masterPlaylistController_.mainSegmentLoader_.throughput.count=1}},bandwidth:{get:function qa(){return this.masterPlaylistController_.mainSegmentLoader_.bandwidth},set:function p9(qg){this.masterPlaylistController_.mainSegmentLoader_.bandwidth=qg;this.masterPlaylistController_.mainSegmentLoader_.throughput={rate:0,count:0}}},systemBandwidth:{get:function qa(){var qh=1/(this.bandwidth||1);var qi=void 0;if(this.throughput>0){qi=1/this.throughput}else{qi=0}var qg=Math.floor(1/(qh+qi));return qg},set:function p9(){d9.log.error('The "systemBandwidth" property is read-only')}}});if(this.options_.bandwidth){this.bandwidth=this.options_.bandwidth}if(this.options_.throughput){this.throughput=this.options_.throughput}Object.defineProperties(this.stats,{bandwidth:{get:function qa(){return qb.bandwidth||0},enumerable:true},mediaRequests:{get:function qa(){return qb.masterPlaylistController_.mediaRequests_()||0},enumerable:true},mediaRequestsAborted:{get:function qa(){return qb.masterPlaylistController_.mediaRequestsAborted_()||0},enumerable:true},mediaRequestsTimedout:{get:function qa(){return qb.masterPlaylistController_.mediaRequestsTimedout_()||0},enumerable:true},mediaRequestsErrored:{get:function qa(){return qb.masterPlaylistController_.mediaRequestsErrored_()||0},enumerable:true},mediaTransferDuration:{get:function qa(){return qb.masterPlaylistController_.mediaTransferDuration_()||0},enumerable:true},mediaBytesTransferred:{get:function qa(){return qb.masterPlaylistController_.mediaBytesTransferred_()||0},enumerable:true},mediaSecondsLoaded:{get:function qa(){return qb.masterPlaylistController_.mediaSecondsLoaded_()||0},enumerable:true},buffered:{get:function qa(){return g4(qb.tech_.buffered())},enumerable:true},currentTime:{get:function qa(){return qb.tech_.currentTime()},enumerable:true},currentSource:{get:function qa(){return qb.tech_.currentSource_},enumerable:true},currentTech:{get:function qa(){return qb.tech_.name_},enumerable:true},duration:{get:function qa(){return qb.tech_.duration()},enumerable:true},master:{get:function qa(){return qb.playlists.master},enumerable:true},playerDimensions:{get:function qa(){return qb.tech_.currentDimensions()},enumerable:true},seekable:{get:function qa(){return g4(qb.tech_.seekable())},enumerable:true},timestamp:{get:function qa(){return Date.now()},enumerable:true},videoPlaybackQuality:{get:function qa(){return qb.tech_.getVideoPlaybackQuality()},enumerable:true}});this.tech_.one("canplay",this.masterPlaylistController_.setupFirstPlay.bind(this.masterPlaylistController_));this.tech_.on("bandwidthupdate",function(){if(qb.options_.useBandwidthFromLocalStorage){fh({bandwidth:qb.bandwidth,throughput:Math.round(qb.throughput)})}});this.masterPlaylistController_.on("selectedinitialmedia",function(){nq(qb);di(qb)});this.on(this.masterPlaylistController_,"progress",function(){this.tech_.trigger("progress")});this.on(this.masterPlaylistController_,"firstplay",function(){this.ignoreNextSeekingEvent_=true});this.setupQualityLevels_();if(!this.tech_.el()){return}this.tech_.src(d9.URL.createObjectURL(this.masterPlaylistController_.mediaSource))}},{key:"setupQualityLevels_",value:function e(){var qa=this;var p9=d9.players[this.tech_.options_.playerId];if(!p9||!p9.qualityLevels||this.qualityLevels_){return}this.qualityLevels_=p9.qualityLevels();this.masterPlaylistController_.on("selectedinitialmedia",function(){B(qa.qualityLevels_,qa)});this.playlists.on("mediachange",function(){aN(qa.qualityLevels_,qa.playlists)})}},{key:"play",value:function r(){this.masterPlaylistController_.play()}},{key:"setCurrentTime",value:function p5(p9){this.masterPlaylistController_.setCurrentTime(p9)}},{key:"duration",value:function p3(){return this.masterPlaylistController_.duration()}},{key:"seekable",value:function p7(){return this.masterPlaylistController_.seekable()}},{key:"dispose",value:function p6(){if(this.playbackWatcher_){this.playbackWatcher_.dispose()}if(this.masterPlaylistController_){this.masterPlaylistController_.dispose()}if(this.qualityLevels_){this.qualityLevels_.dispose()}if(this.player_){delete this.player_.vhs;delete this.player_.dash;delete this.player_.hls}if(this.tech_&&this.tech_.hls){delete this.tech_.hls}dX(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"dispose",this).call(this)}},{key:"convertToProgramTime",value:function p8(p9,qa){return op({playlist:this.masterPlaylistController_.media(),time:p9,callback:qa})}},{key:"seekToProgramTime",value:function on(qa,qc){var p9=arguments.length>2&&arguments[2]!==undefined?arguments[2]:true;var qb=arguments.length>3&&arguments[3]!==undefined?arguments[3]:2;return er({programTime:qa,playlist:this.masterPlaylistController_.media(),retryCount:qb,pauseAfterSeek:p9,seekTo:this.options_.seekTo,tech:this.options_.tech,callback:qc})}}]);return i}(ax);var pG={name:"videojs-http-streaming",VERSION:aQ,canHandleSource:function hy(e){var d=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var i=d9.mergeOptions(d9.options,d);return pG.canPlayType(e.type,i)},handleSource:function av(r,d){var e=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};var i=d9.mergeOptions(d9.options,e);d.hls=new jY(r,d,i);d.hls.xhr=eI();d.hls.src(r.src,r.type);return d.hls},canPlayType:function kY(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var r=d9.mergeOptions(d9.options,e),i=r.hls.overrideNative;var d=eb(t);var on=d&&(!pj.supportsTypeNatively(d)||i);return on?"maybe":""}};if(typeof d9.MediaSource==="undefined"||typeof d9.URL==="undefined"){d9.MediaSource=fi;d9.URL=jB}if(fi.supportsNativeMediaSources()){d9.getTech("Html5").registerSourceHandler(pG,0)}d9.HlsHandler=jY;d9.HlsSourceHandler=pG;d9.Hls=pj;if(!d9.use){d9.registerComponent("Hls",pj)}d9.options.hls=d9.options.hls||{};if(d9.registerPlugin){d9.registerPlugin("reloadSourceOnError",lm)}else{d9.plugin("reloadSourceOnError",lm)}return d9})));!function(){!function(d){var c=d&&d.videojs;c&&(c.CDN_VERSION="7.8.4")}(window)}();